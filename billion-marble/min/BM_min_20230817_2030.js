var LANG={KOREA:1,ENGLISH:2,INDONESIA:3,VIETNAM:4},TXT={};LANG.init=function(){switch(glo.platform){case glo.PLATFORM.SKB:case glo.PLATFORM.KT:case glo.PLATFORM.HCN:case glo.PLATFORM.DLIVE:USER.lang=LANG.KOREA}switch(USER.lang){case LANG.KOREA:LANG.setKOREA();break;case LANG.ENGLISH:LANG.setENGLISH();break;default:util.log("Undefined language code :"+USER.lang);LANG.setENGLISH()}};LANG.setKOREA=function(){TXT.bougold="보유골드";TXT.totzasan="총자산";TXT.stop="멈추기";TXT.myturn="내차례!";TXT.throwdice="주사위<br>굴리기";TXT.sellbuilding="건물판매";TXT.sellzasan="자산판매";TXT.confirm="확인";TXT.startgame="게임을 시작합니다.";TXT.menu1="오프라인(개인전)";TXT.menu2="오프라인(팀전)";TXT.menu3="온라인";TXT.menu4="설정";TXT.menu5="나가기";TXT.menu_off_each="오프라인(개인전)";TXT.menu_off_team="오프라인(팀전)";TXT.menu_online="온라인";TXT.menu_setting="설정";TXT.menu_exit="나가기";glo.platform==glo.PLATFORM.AZE&&(TXT.menu_off_each="개인전",TXT.menu_off_team="팀전");TXT.yes="예";TXT.no="아니오";TXT.tile0_title="0000";TXT.tile1_title="출발";TXT.tile2_title="베트남";TXT.tile3_title="바퀴";TXT.tile4_title="필리핀";TXT.tile5_title="중국";TXT.tile6_title="괌";TXT.tile7_title="싱가포르";TXT.tile8_title="?";TXT.tile9_title="이집트";TXT.tile10_title="기부천사";TXT.tile11_title="그리스";TXT.tile12_title="전구";TXT.tile13_title="인도";TXT.tile14_title="스웨덴";TXT.tile15_title="발리";TXT.tile16_title="스위스";TXT.tile17_title="?";TXT.tile18_title="독일";TXT.tile19_title="휴양지";TXT.tile20_title="시계";TXT.tile21_title="호주";TXT.tile22_title="브라질";TXT.tile23_title="캐나다";TXT.tile24_title="제주도";TXT.tile25_title="칠레";TXT.tile26_title="?";TXT.tile27_title="스페인";TXT.tile28_title="비행장";TXT.tile29_title="이탈리아";TXT.tile30_title="하와이";TXT.tile31_title="프랑스";TXT.tile32_title="영국";TXT.tile33_title="?";TXT.tile34_title="미국";TXT.tile35_title="백신";TXT.tile36_title="한국";TXT.DEV1="땅";TXT.DEV2="농경지";TXT.DEV3="공장";TXT.DEV4="도시";TXT.DEV5="랜드마크";TXT.buygold="구매금액";TXT.buy="구매";TXT.sell="판매";TXT.cancel="취소";TXT.passgold="통행료";TXT.sellgold="판매금액";TXT.use="사용";TXT.lackof_gold="보유골드가 부족합니다.";TXT.pass_gold="통행료";TXT.pay="지불";TXT.onmore_double="더블 : 한번더 던지기";TXT.goto_island="더블연속3회 : 감옥행";TXT.me="나";TXT.joinnum_submenu1="AI";TXT.joinnum_submenu2="사용자";TXT.joinnum_submenu3="없음";TXT.atleast_2player="참여인원 2명 이상 선택되어야 게임이 진행 됩니다.";TXT.empty_country="판매 가능한 나라가 없습니다.";TXT.empty_zasan="판매 가능한 자산이 없습니다.";TXT.dev_stage="발전도";TXT.select_sell_country="판매할 나라를 선택하세요";TXT.angel_gold0="기부금이 존재하지 않습니다.";TXT.acc_goldtot="누적 기부금";TXT.angel_comment1="누적된 기부금을<br> 수령합니다.";TXT.angel_comment0="누적된 기부금이<br> 없습니다.";TXT.get_star_arrived_gold="출발 지점 도착! 월급수령";TXT.get_star_arrived_tax="보유한 지역의 세금 받음";TXT.select_country_for_dev="발전시킬 국가를 선택하세요";TXT.select_country_for_sell="판매할 국가를 선택하세요";TXT.select_zasan_for_sell="판매할 자산을 선택하세요";TXT.zasan1_donate="자산1위 기부금 5%납부";TXT.arrived_island=" ~ 무인도 도착 ~ ";TXT.island_3turn_stop=" 3턴간 무인도에 있습니다.";TXT.island_day="무인도 표류기간";TXT.island_comment="무인도 탈출하고 싶다.";TXT.island_exit="탈출하기";TXT.island_throwdice="주사위 굴리기";TXT.pay_island_exit_gold="무인도 탈출비용 지불";TXT.exit_fail="무인도 탈출 실패!";TXT.island_enforce_exit_pay="탈출 비용";TXT.goto_comment1="여행 준비를 하세요";TXT.goto_comment2="다음턴에 원하는 장소로 이동할 수 있습니다.";TXT.gogo_payment="비행기 여행 경비지불";TXT.goto_airplain_fly="~ 비행기가 곧 이륙합니다 ~";TXT.goto_select_tile="이동할 장소를 선택하세요.";TXT.timeout_sellcountry_cancel="시간초과 : 판매취소";TXT.timeout_sellzasan_cancel="시간초과 : 판매취소";TXT.timeout_edge_start="시간초과 : 발전취소";TXT.timeout_edge_goto="시간초과 : 임의이동";TXT.chance1="정전";TXT.chance_comment1="상대의 지역 한곳을 선택합니다.<br><br>선택한 지역은 5턴 간<br>통행료를 받지 못합니다.";TXT.chance2="자선사업가";TXT.chance_comment2="현재 내 총자산의<br>10%를 기부합니다.<br><br>금액이 모자랄 경우,<br>현재 소지 중인 금액만 기부 합니다.";TXT.chance3="실패는 성공의 어머니";TXT.chance_comment3="<br>내가 가진 국가 하나를 반값에 판매하여<br>즉시 출발지점으로<br>이동하여 턴을 종료합니다.";TXT.chance4="못 먹어도 GO!";TXT.chance_comment4="<br>주사위 1개를 굴린 만큼<br> 앞으로 이동합니다.";TXT.chance5="못 먹었다 GO!";TXT.chance_comment5="<br>주사위 1개를 굴린만큼<br> 뒤로 이동합니다.";TXT.chance6="세계전쟁";TXT.chance_comment6="<br>한 라인을 지정하여<br> 모든 발전도를 1개씩 낮춥니다.<br>(랜드마크 제외)";TXT.chance7="귀향";TXT.chance_comment7="<br>출발지점으로 이동하고<br>턴을 종료합니다.";TXT.chance8="방패";TXT.chance_comment8="<br>상대방의 공격을 1회 막는다.<br>보관할 수 있다.";TXT.chance9="경제 부도";TXT.chance_comment9="한 라인을 지정하여<br> 가장 값어치가 낮은 지역을<br>강제로 판매합니다.";TXT.chance10="세계 경제를 움직이는 자";TXT.chance_comment10="<br>즉시 경제효과를 발생시키고<br>턴을 종료한다.";TXT.chance11="복권 추첨";TXT.chance_comment11="<br>주사위 2개를 굴려 더블이 나오면<br>총 자산의 20%를 얻습니다.";TXT.chance12="보험금 만기일";TXT.chance_comment12="<br><br>즉시 기부천사 칸으로 이동합니다.";TXT.chance13="결혼";TXT.chance_comment13="<br><br>즉시 무인도 칸을 이동합니다.";TXT.chance14="가성비 여행";TXT.chance_comment14="모든 지역중,<br> 값어치가 가장 낮은 지역으로<br> 이동합니다.";TXT.chance15="초호화 여행";TXT.chance_comment15="모든 지역중,<br> 값어치가 가장 높은 지역으로<br> 이동합니다.";TXT.chance16="공정한 거래";TXT.chance_comment16="<br>내가 가진 지역과 선택한 상대방의<br> 지역을 강제로 교환합니다.";TXT.chance17="부당한 거래";TXT.chance_comment17="<br>나의 가장 저렴한 지역을 강제로 판매하고<br>비행장 칸으로 이동합니다.";TXT.chance18="공항파업";TXT.chance_comment18="모든 사용자들이<br>비행장을 이용하는 금액이<br>5턴간 4배 증가 합니다.";TXT.chance19="비행기 점검";TXT.chance_comment19="비행장을 5턴 간 이용할 수 없습니다.<br><br>공항 파업 중에 사용 시 즉시<br> 파업을 멈추고 비행기 점검을 합니다.";TXT.chance20="프리패스";TXT.chance_comment20="<br>통행료를 지불하지 않으며<br>보관할 수 있다.";TXT.chance21="노벨 의학상";TXT.chance_comment21="<br>백신을 개발했습니다!<br>백신 칸으로 이동합니다.";TXT.chance22="운송 수단의 혁명";TXT.chance_comment22="<br>'바퀴'를 개발했다! <br>'바퀴' 칸으로 이동합니다.";TXT.chance23="빛이 나는 발견";TXT.chance_comment23="<br>'전구'를 개발했다! <br>'전구' 칸으로 이동합니다.";TXT.chance24="지각의 탄생";TXT.chance_comment24="<br>'시계'를 개발했다! <br>'시계' 칸으로 이동합니다.";TXT.other_zone_none="상대가 보유한 지역이 없습니다.";TXT.select_other_zone="상대지역 선택하기:5턴간 통행료없음";TXT.chance1_5turn_passgold0="5턴간 통행료 받지 않음";TXT.chance1_release="정전 해제";TXT.chance1_donotpay="정전이므로 통행료 내지 않음";TXT.airport_check_no_notwork="공항점검 중이므로 파업을 취소 합니다.";TXT.airport_notwork="공항 파업";TXT.timeout_occur="타임아웃 발생!";TXT.enforce_select="강제 선택됨";TXT.chance2_donate="자선사업가(자산10%기부)";TXT.chance3_no_country_just_go="가진 국가 없음. 출발지점으로 이동";TXT.chance3_halfsell="강제 반값 판매";TXT.select_country_for_halfsell="반값에 판매할 국가를 선택하세요";TXT.chance6_selectline_1down="선택한 라인의 자산가치를 1단계 낮춥니다.(랜드마크 제외)";TXT.chance8_defece_card_get="방어카드 획득";TXT.chance8_duplicate_reward="방어카드 중복 수령 불가로 <br> 100만골드 수령함.";TXT.chance20_duplicate_reward="프리패스카드 중복 수령 불가로 <br> 100만골드 수령함.";TXT.active_defence_card_not_chance1="상대의 방어카드 사용으로 정전 안됨.";TXT.active_defence_card_not_chance9="방어카드 사용: 강제판매 방어";TXT.active_defence_card="방어카드 사용";TXT.chance9_not_zone="해당하는 지역이 없습니다.";TXT.chance9_enforce_sell="강제 판매";TXT.chance9_enforce_sell_defence="강제 판매 방어";TXT.economy_effect_occur="경제 효과 발동";TXT.economy_good="경제 호황!";TXT.economy_bad="경제 불황!";TXT.select_economy_effct_zone="경제 효과 발동지역 선택중 입니다.";TXT.chance10_searching="탐색중...";TXT.chance10_searching_complete="탐색 완료";TXT.zasan_change_beacuse_economy="경제 효과로 자산 변동";TXT.lotto_fail="복권 당첨 실패!";TXT.lotto_success="복권 당첨!!";TXT.my_country_none="내가 가진 지역이 없습니다.";TXT.other_country_none="상대가 가진 지역이 없습니다.";TXT.select_my_country_for_exchange="교환할 나의 지역을 선택하세요.";TXT.select_other_country_for_exchange="교환할 상대의 지역을 선택하세요.";TXT.exchange_complete="교환 완료!";TXT.active_defence_card_not_chance16="방어카드 사용: 강제교환 방어";TXT.not_exchange_for_defence="상대의 방어카드 사용으로 교환 실패";TXT.stop_notwork_and_check="공항 파업을 끝내고 점검을 시작 합니다.";TXT.not_use_airport_for_checking1="공항 점검중으로 사용할 수 없습니다";TXT.not_use_airport_for_checking2="공항 점검중으로 이용불가함, 주사위를 던집니다.";TXT.got_freepass_card="프리패스 카드 1장 획득";TXT.use_freepass="프리패스권 사용";TXT.triple="트리플";TXT.double="더블";TXT.stop_comment="<br>게임을 그만 두시겠어요?<br>저장되지 않습니다.";TXT.exit_comment="<br>앱을 종료하시겠습니까?";TXT.continue="계속하기";TXT.game_exit="게임종료";TXT.goout="나가기";TXT.newgame="다시하기";TXT.revist_valueup="재방문으로 가치 2배 상승";TXT.invention_2bou="발명품 2개 소유";TXT.invention_3bou="발명품 3개 소유";TXT.invention_4bou="발명품 4개 소유";TXT.invention_value2="값어치 2배";TXT.invention_value3="값어치 3배";TXT.invention_value4="값어치 4배";TXT.takeover="인수";TXT.takeover_cani="현재 발전도까지 인수가능합니다. 인수할까요?";TXT.tot_takeover_gold="총 인수 금액";TXT.change_turn="턴 변경";TXT.selectsun_comment1="순서를 정합니다";TXT.selectsun_comment2="높은 주사위가 선 입니다.";TXT.online_game="온라인 게임";TXT.online_top50="TOP 50";TXT.rank_info="링킹 정보";TXT.start_game="게임 시작";TXT.network_check_try_again="네트워크 연결 확인 후 재 시도 바랍니다.";TXT.pvp_matching_before_comment="매칭 중입니다";TXT.sellabs_comment="<br>골드가 부족합니다.<br>매각하시겠습니까?";TXT.sellabs="매각";TXT.giveup="파산신청";TXT.pasan_do="파산함";TXT.fail="실패";TXT.select_sellabs="매각할 곳을 선택하세요.";TXT.need_gold="필요 골드";TXT.sellabs_gold="매각 골드";TXT.lack_of_sellabs_gold="매각 골드가 부족합니다.";TXT.sellabs_complete=" ~ 매각 완료! ~";TXT.sellabs_pay_after_acc="필요 골드 지불 후 남은 금액은 자동 소유됩니다.";TXT.sellabs_ing="매각 진행 중입니다.";TXT.lack_of_bougold_so_not_goto="보유 골드가 없어 비행기 여행은 취소 됩니다.";TXT.setting="설정";TXT.se_sound_bgm="배경음 설정";TXT.se_sound_effect="효과음 설정";TXT.se_language="언어 설정";TXT.se_namechange="이름 변경";TXT.se_help="도움말";TXT.name_already_use="누군가가 벌써 사용하고 있는 이름입니다. 다른 이름을 입력해 주세요.";TXT.name_change_completed="이름 변경이 완료되었습니다.";TXT.my_order="나의 순위";TXT.my_score="나의 점수";TXT.my_history="나의 전적";TXT.pvp_comment="1. 주마다 전적이 갱신 됩니다. <br>2. 온라인 랭킹전은 1대1로 진행 됩니다.";TXT.setting_only_myturn="본인 턴에서만 설정 버턴을 누를 수 있음";TXT.onemore="재대결";TXT.other_request_onemore="상대가 재대결을 요청을 하였습니다.";TXT.other_force_roomout="상대가 게임을 종료 했습니다.";TXT.other_select_goout="상대가 나가기를 선택 했습니다.";TXT.ask_one_more="한판더 요청을 보냈습니다.";TXT.pvp_matching_before_comment_onemore="잠시만 기다려 주세요.<br>상대의 한 판 더를 기다립니다.<br>";TXT.server_disconnect="서버와의 연결이 종료되었습니다.";TXT.name_input="변경할 이름을 입력하세요";TXT.name_input_caution="주의! 부적절한 이름(욕설 등)을 사용할 경우 사전 공지없이 계정 정지 됨.";TXT.duplicate_id_not_join="ID 중복으로 입장할 수 없습니다.";TXT.develop="발전";TXT.landmark_can_build_after_city="도시화까지 진행된 후 랜드마크로 발전시킬 수 있습니다.";TXT.takeover_ing="인수 진행 중입니다.";TXT.buy_ing="구매 진행 중입니다.";TXT.island_ing="무인도에서 선택 중입니다.";TXT.freepass_ing="프리패스권 사용을 결정 중입니다.";TXT.guest_change_name="'guest'이름을 변경해 주세요('설정'에서 변경 가능)";TXT.donation="기부금";TXT.rotate2_can_be_create_landmark="랜드마크 구매 불가!<br>최초 1회 완주해야 발전시킬 수 있습니다.";TXT.pvp_no_list="등록된 기록이 없습니다.";TXT.complete_selectchar="캐릭터 선택 완료";TXT.pass_30day="30일<br>이용권";TXT.pass_30day_qr="30일 이용권";TXT.remaining="남음";TXT.pay_guide="구매 안내";TXT.pay_guide_content="즐겁게 플레이하셨나요?<br><font color=#ff1e13>$3로 30일간<br>마음껏 즐기실 수 있습니다.<\/font><br>(구매 전에는 하루에 1회만 플레이 가능)<br>";TXT.buy_price="구매금액";TXT.Xsolla_url="아래 url 또는 QR로 사이트로 접속하여 <br> 위의 코드를 입력해주세요";TXT.cancel_or_fail="결제를 취소 또는 실패 하였습니다";TXT.Xsolla_timeover="시간이 초과하였습니다. 결제 완료시 메인 화면에서 상품이 지급됩니다.";TXT.goods="상품";TXT.payment_success="결제가 완료되었습니다."};LANG.setENGLISH=function(){TXT.bougold="Gold";TXT.totzasan="Asset";TXT.stop="Stop";TXT.myturn="My turn!";TXT.throwdice="Dice <br>Rolling";TXT.sellbuilding="Sell Building";TXT.sellzasan="Sell Asset";TXT.confirm="Confirm";TXT.startgame="Game Start";TXT.menu1="Offline (Individual)";TXT.menu2="Offline (Team)";TXT.menu3="Online";TXT.menu4="Settings";TXT.menu5="Exit";TXT.menu_off_each="Offline (Individual)";TXT.menu_off_team="Offline (Team)";TXT.menu_online="Online";TXT.menu_setting="Settings";TXT.menu_exit="Exit";glo.platform==glo.PLATFORM.AZE&&(TXT.menu_off_each="Individual",TXT.menu_off_team="Team");TXT.yes="Yes";TXT.no="No";TXT.tile0_title="0000";TXT.tile1_title="Start";TXT.tile2_title="Vietnam";TXT.tile3_title="Wheel";TXT.tile4_title="Philippines";TXT.tile5_title="China";TXT.tile6_title="Guam";TXT.tile7_title="Singapore";TXT.tile8_title="?";TXT.tile9_title="Egypt";TXT.tile10_title="The Angel of Donations";TXT.tile11_title="Greece";TXT.tile12_title="Light bulb";TXT.tile13_title="India";TXT.tile14_title="Sweden";TXT.tile15_title="Bali";TXT.tile16_title="Switzerland";TXT.tile17_title="?";TXT.tile18_title="Germany";TXT.tile19_title="Vacation Spot";TXT.tile20_title="Clock";TXT.tile21_title="Australia";TXT.tile22_title="Brazil";TXT.tile23_title="Canada";TXT.tile24_title="Jeju Island";TXT.tile25_title="Chile";TXT.tile26_title="?";TXT.tile27_title="Spain";TXT.tile28_title="Airfield";TXT.tile29_title="Italy";TXT.tile30_title="Hawaii";TXT.tile31_title="France";TXT.tile32_title="England";TXT.tile33_title="?";TXT.tile34_title="United States";TXT.tile35_title="Vaccine";TXT.tile36_title="South Korea";TXT.DEV1="Land";TXT.DEV2="Cropland";TXT.DEV3="Factory";TXT.DEV4="City";TXT.DEV5="Landmark";TXT.buygold="Price";TXT.buy="Purchase";TXT.sell="Sell";TXT.cancel="Cancel";TXT.passgold="Toll";TXT.sellgold="Selling Price";TXT.use="Use";TXT.lackof_gold="Lack of Gold";TXT.pass_gold="Toll";TXT.pay="Payment";TXT.onmore_double="Double : roll again ";TXT.goto_island="3 Double : going to jail";TXT.me="Me";TXT.joinnum_submenu1="AI";TXT.joinnum_submenu2="User";TXT.joinnum_submenu3="None";TXT.atleast_2player="The game will be proceeded when at least<br> two players are selected";TXT.empty_country="There is no country to sell";TXT.empty_zasan="There is no asset to sell";TXT.dev_stage="Development Level";TXT.select_sell_country="Please select a country to sell";TXT.angel_gold0="There is no donation";TXT.acc_goldtot="Donation";TXT.angel_comment1="Receive accumulated <br> donation ";TXT.angel_comment0="There is no <br>accumulated donation.";TXT.get_star_arrived_gold="Arrived at the start!<br>Received a paycheck";TXT.get_star_arrived_tax="Received a tax <br> for the land owned";TXT.select_country_for_dev="Please select a country to develop";TXT.select_country_for_sell="Please select a country to sell";TXT.select_zasan_for_sell="Please select an asset to sell";TXT.zasan1_donate="1st ranked in holding asset <br> Donated 5% ";TXT.arrived_island="Arrived at a desert island";TXT.island_3turn_stop="You stay in a desert island for 3 turns";TXT.island_day="You stay";TXT.island_comment="I want to escape";TXT.island_exit="Escape";TXT.island_throwdice="Roll a Dice ";TXT.pay_island_exit_gold="Pay for the Escape Cost";TXT.exit_fail="Fail to Escape!";TXT.island_enforce_exit_pay="Escape Cost";TXT.goto_comment1="Prepare for a trip";TXT.goto_comment2="You can move to the desirable location at the next turn";TXT.gogo_payment="Pay for the flight travel cost";TXT.goto_airplain_fly="~The flight will take off soon~";TXT.goto_select_tile="Please select your destination";TXT.timeout_sellcountry_cancel="Time Over: Cancel a Sale";TXT.timeout_sellzasan_cancel="Time Over: Cancel a Sale";TXT.timeout_edge_start="Time Over: Cancel Development";TXT.timeout_edge_goto="Time Over: Move random";TXT.chance1="Blackout";TXT.chance_comment1="<br>Select one of the opponent's area.<br> The selected area cannot collect a toll<br> for 5 turns";TXT.chance2="Philanthropist";TXT.chance_comment2="<br>I'm donating 10% of my total asset.<br>If money is not enough, <br>I'm donating only what I have now.";TXT.chance3="Failure is a stepping stone to success";TXT.chance_comment3="<br>Selling my country for half price,<br> immediately go to the start and <br>finish the turn ";TXT.chance4="Keep going!";TXT.chance_comment4="<br>Roll a dice and move <br>forward for the number <br>you get";TXT.chance5="Keep going!";TXT.chance_comment5="<br>Roll a dice and move <br>backward for the number <br>you get";TXT.chance6="World War";TXT.chance_comment6="<br>Select a line and lower <br>the development level by one<br>for each (except the landmark).";TXT.chance7="Return to home";TXT.chance_comment7="<br>Move to the start and<br> finish the turn";TXT.chance8="Shield";TXT.chance_comment8="<br>Defend against the opponent's <br>attack for once and you can<br>save this.";TXT.chance9="Economic Bankruptcy";TXT.chance_comment9="Select a line and force<br> to sell the land with <br>the lowest value";TXT.chance10="The Person who Drives World Economy";TXT.chance_comment10="<br>Immediately cause economic <br>effect and finish the turn ";TXT.chance11="Raffle Draw";TXT.chance_comment11="<br>If you roll two dices and get double, <br>you can earn the 20% of total asset. ";TXT.chance12="Insurance Maturity Date";TXT.chance_comment12="<br>Immediately move to <br>the angel of donations ";TXT.chance13="Marriage";TXT.chance_comment13="<br>Immediately move to the <br>desert island";TXT.chance14="Cost-effective Travel";TXT.chance_comment14="<br>Among the lands,<br> move to the land <br>with the lowest value";TXT.chance15="Luxury Travel";TXT.chance_comment15="<br>Among the lands,<br>move to the land with<br> the highest value";TXT.chance16="Fair Trade";TXT.chance_comment16="<br>Force to trade my land <br>with the opponent's land. ";TXT.chance17="Unfair Trade";TXT.chance_comment17="<br>Force to sell my cheapest land <br>and move to the airfield";TXT.chance18="The Airport Strike";TXT.chance_comment18="<br>All users need to <br>pay 4 times more fee for <br>5 turns.";TXT.chance19="Airplane Inspection ";TXT.chance_comment19="Not allowed to use the airfield for 5 turns.<br>Using this during the airport strike <br>will stop the strike immediately and <br>proceed to an airplane inspection.";TXT.chance20="Free Pass";TXT.chance_comment20="<br>You do not pay a toll and can save for later.";TXT.chance21="the Nobel Prize for Medicine ";TXT.chance_comment21="<br>Invented Vaccine! <br>Move to 'Vaccine' ";TXT.chance22="The Revolution in Transportation";TXT.chance_comment22="<br>Invented 'Wheel!' <br>Move to 'Wheel.' ";TXT.chance23="Brilliant Discovery";TXT.chance_comment23="<br>Invented 'Light bulb!' <br>Move to 'Light bulb.'";TXT.chance24="The Birth of Perception";TXT.chance_comment24="<br>Invented 'Clock!' <br>Move to 'Clock.'";TXT.other_zone_none="The opponent has no land.";TXT.select_other_zone="Select the opponent's land:<br> no toll for 5 turns";TXT.chance1_5turn_passgold0="Not collecting a toll for 5 turns";TXT.chance1_release="No blackouts";TXT.chance1_donotpay="No toll during blackouts";TXT.airport_check_no_notwork="Cancel the strike during airport inspection";TXT.airport_notwork="Airport Strike";TXT.timeout_occur="Time out!";TXT.enforce_select="Forced Selection";TXT.chance2_donate="Philanthropist <br>(donated the 10% of his asset)";TXT.chance3_no_country_just_go="No land in possession. <br>Move to the start.";TXT.chance3_halfsell="Forced Sale for Half Price";TXT.select_country_for_halfsell="Please select a country to be sold for half price.";TXT.chance6_selectline_1down="Lower the asset value of selected line by 1 level<br>(except landmark)";TXT.chance8_defece_card_get="Earned a Shield Card";TXT.chance8_duplicate_reward="Not allowed to earn a shield card twice. <br>Earned 1,000,000 gold.";TXT.chance20_duplicate_reward="Not allowed to earn a free pass twice.<br>Earned 1,000,000 gold.";TXT.active_defence_card_not_chance1="The opponent is using a shield card. No blackouts.";TXT.active_defence_card_not_chance9="Use a Shield Card: Defend a forced sale";TXT.active_defence_card="Use a Shield Card";TXT.chance9_not_zone="There is no selected area.";TXT.chance9_enforce_sell="Forced Sale";TXT.chance9_enforce_sell_defence="Defend Forced Sale";TXT.economy_effect_occur="Defend Forced Sale";TXT.economy_good="Economic Boom!";TXT.economy_bad="Economic Recession!";TXT.select_economy_effct_zone="Selecting the Area for Economic Effect";TXT.chance10_searching="Searching…";TXT.chance10_searching_complete="Searching Completed ";TXT.zasan_change_beacuse_economy="The Change in Asset Affected<br>by Economic Effect";TXT.lotto_fail="Lost in a Lottery";TXT.lotto_success="Won in a Lottery";TXT.my_country_none="I don't have any land in possession.";TXT.other_country_none="The opponent doesn't have any land in possession.";TXT.select_my_country_for_exchange="Please select a land to exchange.";TXT.select_other_country_for_exchange="Please select an opponent's land to exchange.";TXT.exchange_complete="Exchange Completed!";TXT.active_defence_card_not_chance16="Use a Shield Card: Defend a forced exchange";TXT.not_exchange_for_defence="Failed to Exchange: the opponent used a shield card";TXT.stop_notwork_and_check="End a Strike and Begin an Inspection";TXT.not_use_airport_for_checking1="Not Allowed to Use during Airport Inspection";TXT.not_use_airport_for_checking2="Not Allowed to Use during Airport Inspection, Roll a Dice ";TXT.got_freepass_card="Earned a Free Pass Card";TXT.use_freepass="Use a Free Pass Card";TXT.triple="Triple";TXT.double="Double";TXT.stop_comment="<br>Do you want to exit the game?<br>The data will not be saved.";TXT.exit_comment="<br>Do you want to close an app?";TXT.continue="Continue";TXT.game_exit="Game Exit";TXT.goout="Exit";TXT.newgame="Retry";TXT.revist_valueup="Double the Value by Revisiting";TXT.invention_2bou="2 Inventions";TXT.invention_3bou="3 Inventions";TXT.invention_4bou="4 Inventions";TXT.invention_value2="Double";TXT.invention_value3="Triple";TXT.invention_value4="Quadruple";TXT.takeover="Takeover";TXT.takeover_cani="Takeover Available. Proceed?";TXT.tot_takeover_gold="Total Price";TXT.change_turn="Change Turn";TXT.selectsun_comment1="Decide the Order";TXT.selectsun_comment2="The highest number goes first.";TXT.online_game="Online Game";TXT.online_top50="TOP 50";TXT.rank_info="Ranking Info";TXT.start_game="Game Start";TXT.network_check_try_again="Please check the network connection <br>and try again.";TXT.pvp_matching_before_comment="Matching";TXT.sellabs_comment="You don’t have enough gold. <br>Do you want to sell?";TXT.sellabs="Sell";TXT.giveup="Bankruptcy";TXT.pasan_do="Bankrupted";TXT.fail="Fail";TXT.select_sellabs="Please select a place to sell.";TXT.need_gold="Required Gold";TXT.sellabs_gold="Selling Gold ";TXT.lack_of_sellabs_gold="You don’t have enough gold";TXT.sellabs_complete="Sale Completed";TXT.sellabs_pay_after_acc="Money left after paying required gold will be remained automatically.";TXT.sellabs_ing="Sale Processing";TXT.lack_of_bougold_so_not_goto="The flight travel will be canceled due to the lack of gold.";TXT.setting="Settings";TXT.se_sound_bgm="Background";TXT.se_sound_effect="Effect";TXT.se_language="Language";TXT.se_namechange="Name Change";TXT.se_help="Help";TXT.name_already_use="This name is already in use. Please enter different name.";TXT.name_change_completed="Name Change Completed";TXT.my_order="My Ranking";TXT.my_score="My Score";TXT.my_history="My History";TXT.pvp_comment="1. The history will be renewed every week. <br>2. Online ranking match is one-on-one. ";TXT.setting_only_myturn="You can click the setting button<br>only at your turn";TXT.onemore="Play Again";TXT.other_request_onemore="The opponent has requested to play again.";TXT.other_force_roomout="The opponent has exited the game.";TXT.other_select_goout="The opponent has selected to exit.";TXT.ask_one_more="Replay request has sent.";TXT.pvp_matching_before_comment_onemore="Please hold. <br>Waiting for the opponent's response.<br>";TXT.server_disconnect="The server is disconnected.";TXT.name_input="Please enter a new name.";TXT.name_input_caution="Caution! Any account found to use an inappropriate name (insult others etc.) will be suspended without any notice. ";TXT.duplicate_id_not_join="You cannot participate due to duplicate IDs";TXT.develop="develop";TXT.landmark_can_build_after_city="After building City, it can be developed<br> as a Landmark.";TXT.takeover_ing="Takeover processing";TXT.buy_ing="Purchase processing";TXT.island_ing="Choosing on a deserted island";TXT.freepass_ing="Deciding to use the free pass";TXT.guest_change_name="Please change the name 'guest' <br>(can be changed in 'Settings')";TXT.donation="Donation";TXT.rotate2_can_be_create_landmark="Landmarks cannot be purchased!<br>You can develop it only after<br> completing the first 1 time.";TXT.pvp_no_list="No record";TXT.complete_selectchar="Character selection is complete";TXT.pass_30day="30 day<br>pass";TXT.pass_30day_qr="30 day pass";TXT.remaining="remaining";TXT.pay_guide="Purchase guide";TXT.pay_guide_content="Did you enjoy playing?<br><font color=#ff1e13>You can enjoy playing<br>as much as you want for 30 days with $3<\/font><br>(Before purchasing, you can play only once a day.)<br>";TXT.buy_price="The amount of purchasing";TXT.Xsolla_url="Please enter the code above <br> please go to the site at url or QR below.";TXT.cancel_or_fail="Purchase cancelled or failed.";TXT.Xsolla_timeover="Time exceeded. When the payment is completed, the product will be provided on the main screen.";TXT.goods="Goods";TXT.payment_success="The payment has been made."} 
var KeyDefine={};KeyDefine.init=function(){switch(glo.platform){case glo.PLATFORM.KT:KeyDefine.init_pc();glo.app_release=="RELEASE"&&util_fun.dbl.getDevice()!=util_fun.dbl.PC&&util_kt.setupKeyCode();break;case glo.PLATFORM.SKB:case glo.PLATFORM.ATV:case glo.PLATFORM.AMO:case glo.PLATFORM.BAL:KeyDefine.init_skb();break;case glo.PLATFORM.DLIVE:case glo.PLATFORM.HCN:case glo.PLATFORM.AZE:KeyDefine.init_pc();break;case glo.PLATFORM.SS:KeyDefine.init_pc();glo.app_release=="RELEASE"&&util_tizen.setupKeyCode();break;case glo.PLATFORM.LG:case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:glo.app_release=="RELEASE"||util_fun.dbl.getDevice()==util_fun.dbl.TV?util_webos.setup_keycode():KeyDefine.init_pc();break;default:KeyDefine.init_pc()}};KeyDefine.init_pc=function(){KeyDefine.up=38;KeyDefine.down=40;KeyDefine.left=37;KeyDefine.right=39;KeyDefine.enter=13;KeyDefine.esc=27;KeyDefine.space=32;KeyDefine.back=8;KeyDefine.NUM0=48;KeyDefine.NUM1=49;KeyDefine.NUM2=50;KeyDefine.NUM3=51;KeyDefine.NUM4=52;KeyDefine.NUM5=53;KeyDefine.NUM6=54;KeyDefine.NUM7=55;KeyDefine.NUM8=56;KeyDefine.NUM9=57;KeyDefine.RED=112;KeyDefine.GREEN=113;KeyDefine.YELLOW=114;KeyDefine.BLUE=115;KeyDefine.ERASE=219;KeyDefine.a=65;KeyDefine.b=66;KeyDefine.c=67;KeyDefine.d=68;KeyDefine.e=69;KeyDefine.f=70;KeyDefine.g=71;KeyDefine.h=72;KeyDefine.i=73;KeyDefine.j=74;KeyDefine.k=75;KeyDefine.l=76;KeyDefine.m=77;KeyDefine.n=78;KeyDefine.o=79;KeyDefine.p=80;KeyDefine.q=81;KeyDefine.r=82;KeyDefine.s=83;KeyDefine.t=84;KeyDefine.u=85;KeyDefine.v=86;KeyDefine.w=87;KeyDefine.x=88;KeyDefine.y=89;KeyDefine.z=90;KeyDefine.SHOWMETHEMONEY=83;KeyDefine.LEVELUP=76;KeyDefine.GAMESPEED1=81;KeyDefine.GAMESPEED2=87;KeyDefine.GAMESPEED3=69;KeyDefine.OPENSTAGE=79;KeyDefine.UPGRADE=85;KeyDefine.GAMEREPLAY=82;KeyDefine.DEBUG=68;KeyDefine.EXIT_TEST=88};KeyDefine.init_skb=function(){KeyDefine.up=38;KeyDefine.down=40;KeyDefine.left=37;KeyDefine.right=39;KeyDefine.enter=13;KeyDefine.esc=glo.app_release=="TEST"?27:142;KeyDefine.space=32;KeyDefine.back=4;KeyDefine.exit=142;KeyDefine.NUM0=48;KeyDefine.NUM1=49;KeyDefine.NUM2=50;KeyDefine.NUM3=51;KeyDefine.NUM4=52;KeyDefine.NUM5=53;KeyDefine.NUM6=54;KeyDefine.NUM7=55;KeyDefine.NUM8=56;KeyDefine.NUM9=57;KeyDefine.RED=227;KeyDefine.GREEN=178;KeyDefine.YELLOW=179;KeyDefine.BLUE=228;KeyDefine.ERASE=8;KeyDefine.HASH=18;KeyDefine.a=65;KeyDefine.b=66;KeyDefine.c=67;KeyDefine.d=68;KeyDefine.e=69;KeyDefine.f=70;KeyDefine.g=71;KeyDefine.h=72;KeyDefine.i=73;KeyDefine.j=74;KeyDefine.k=75;KeyDefine.l=76;KeyDefine.m=77;KeyDefine.n=78;KeyDefine.o=79;KeyDefine.p=80;KeyDefine.q=81;KeyDefine.r=82;KeyDefine.s=83;KeyDefine.t=84;KeyDefine.u=85;KeyDefine.v=86;KeyDefine.w=87;KeyDefine.w=87;KeyDefine.x=88;KeyDefine.y=89;KeyDefine.z=90;KeyDefine.SHOWMETHEMONEY=83;KeyDefine.LEVELUP=76;KeyDefine.GAMESPEED1=81;KeyDefine.GAMESPEED2=87;KeyDefine.GAMESPEED3=69;KeyDefine.OPENSTAGE=79;KeyDefine.UPGRADE=85;KeyDefine.GAMEREPLAY=82;KeyDefine.DEBUG=68;KeyDefine.EXIT_TEST=88} 
var util={notice_timer:null,notice_box_timer:null,notice_timer_game:null,auto_test:{flag:0,cur:1,timer:null}},his="",count=0,utilGetNumber_withComma,utilGetmoney_withMAN,utilDrawImage,utilDrawImage_no_wh,utilDrawImage_no_wh_pos,utilDrawImage_no_wh_pos_rotateY180,utilDrawImage_no_wh_pos_rotateY0,utilDrawImage_no_wh_pos_rotate,utilDrawImage_to_div,utilScale_xy,utilScale_xy_center,utilScale_xy_center_class,utilScale_xy_bottom,utilScale_xy_top,utilScale_xy_left,utilScale_xy_right,utilScale_xy_right_bottom,utilRotate_n_Scale,util_fun,sp_count,BJ,gHISTORY;util.log=function(n,t){if(glo.app_release=="RELEASE")BJ.css("LOGLOG",{visibility:"hidden"});else{if(console.log("[BSD]["+util.now_time()+"]"+n,t),his=his+"<br>"+n,count++>30&&(his="",count=0),document.getElementById("LOGLOG")===null)return;document.getElementById("LOGLOG").innerHTML=his}};utilConsoleLog=util.log;util.get_angle_p1p2=function(n,t,i,r){var u=i-n,f=r-t,e=Math.atan2(u,f),o=e*180/Math.PI;return 90-o};util.get_dx=function(n,t){return Math.round(t*Math.cos(n*Math.PI/180))};util.get_dy=function(n,t){return Math.round(t*Math.sin(n*Math.PI/180))};util.notice_box_forever=function(n){util.log("[NOTICE]"+n);$("#message").css({display:"block",left:"400px",top:"20px",width:"1120px",height:"100px",background:"black",opacity:"0.7","line-height":"100px","font-size":"30px","text-align":"center",color:"yellow",position:"absolute"}).html(n)};util.notice=function(n,t){util.log("[NOTICE]"+n);t==null&&(t=2);$("#message").css({display:"block",left:"466px",top:"200px",width:"987px",height:"172x",background:"url(./image/game/popup_common/p_common_popup.png) no-repeat 0 0","background-position":"0px 0px",opacity:"1.0","line-height":"172px","font-size":"40px","text-align":"center",color:"#ffffff",zIndex:4001,position:"absolute"}).html(n);var i=n.split("<br>"),r=i.length;switch(r){case 1:util.draw_text_html(n,"message",466,200,987,172,172,40,"center","#ffffff");break;case 2:util.draw_text_html(n,"message",466,200,987,172,86,36,"center","#ffffff");break;case 3:util.draw_text_html(n,"message",466,200,987,172,172/3,32,"center","#ffffff");break;default:util.draw_text_html(n,"message",466,200,987,172,43,30,"center","#ffffff")}util.notice_timer!=null&&(clearInterval(util.notice_timer),util.notice_timer=null);util.notice_timer=setTimeout(function(){$("#message").css({display:"none"})},t*1e3)};util.notice_forever=function(n){util.log("[NOTICE_FOREVER]"+n);$("#message").css({display:"block",left:"272px",top:"209px",width:"737px",height:"65px",background:"url(./image/common/co_popup2.png) no-repeat 0 0","background-position":"0px 0px",opacity:"1.0","line-height":"65px","font-size":USER.lang==LANG.KOREA?"27px":"20px","text-align":"center",color:"#ffffff","z-index":11,position:"absolute"}).text(n)};util.notice_game=function(n){util.log("util.notice_game:"+n)};util.notice_box=function(n,t){util.log("[NOTICE]"+n);t==null&&(t=2);$("#GA_notice").css({display:"block",left:"466px",top:"20px",width:"987px",height:"172x",background:"url(./image/game/popup_common/p_common_popup.png) no-repeat 0 0","background-position":"0px 0px",opacity:"1.0","line-height":"172px","font-size":"40px","text-align":"center",color:"#ffffff","z-index":2500,position:"absolute"}).html(n);util.notice_box_timer!=null&&(clearInterval(util.notice_box_timer),util.notice_box_timer=null);util.notice_box_timer=setTimeout(function(){$("#GA_notice").css({display:"none"})},t*1e3)};util.notice_player_num=function(n,t,i){var r=t,u=i>0?"+":"-",f=Math.abs(i);r+=i<0?'<br><font color="#00fff6"> '+u+util.get_number_with_comma(f)+"<\/font>":'<br> <font color="#ff8800"> '+u+util.get_number_with_comma(f)+"<\/font>";util.notice_player(n,r)};util.notice_player=function(n,t){var i,f,e,o,u;util.log("[NOTICE]"+t);i=PLAYER.info[n].location;f=-153;y=-173;(i==17||i==18||i==19||i==20||i==21)&&(f=-153,y=130);var s=f+0,h=y,r="GA_char"+n+"_comment";$("#"+r).css({left:s+"px",top:h+"px",width:"409px",height:"169px",position:"absolute"});i==17||i==18||i==19||i==20||i==21?util.draw_image_no_wh_pos(r+"_bg","./image/game/ui/p_talk_bg2.png",0,0):util.draw_image_no_wh_pos(r+"_bg","./image/game/ui/p_talk_bg1.png",0,0);e=t.split("<br>");o=e.length;switch(o){case 1:util.draw_text_html(t,r+"_text",9,35,391,99,99,24,"center","#ffffff");break;case 2:util.draw_text_html(t,r+"_text",9,50,391,66,33,24,"center","#ffffff");break;case 3:util.draw_text_html(t,r+"_text",9,35,391,99,33,24,"center","#ffffff");break;default:util.draw_text_html(t,r+"_text",9,35,391,99,33,24,"center","#ffffff")}u=3.5;switch(n){case 1:$("#GA_char1_comment").css({display:"block"});setTimeout(function(){$("#GA_char1_comment").css({display:"none"})},u*1e3);break;case 2:$("#GA_char2_comment").css({display:"block"});setTimeout(function(){$("#GA_char2_comment").css({display:"none"})},u*1e3);break;case 3:$("#GA_char3_comment").css({display:"block"});setTimeout(function(){$("#GA_char3_comment").css({display:"none"})},u*1e3);break;case 4:$("#GA_char4_comment").css({display:"block"});setTimeout(function(){$("#GA_char4_comment").css({display:"none"})},u*1e3)}};util.uncomma=function(n){for(var i=n.split(","),r="",t=0;t<i.length;t++)r+=i[t];return r};util.loading_show=function(){$("#KT_LOADING").css({display:"block"});return};util.loading_hide=function(){$("#KT_LOADING").css({display:"none"});return};util.blink_focus_start=function(n){glo.mouse.use!=1&&(glo.blink.timer!=null&&(clearInterval(glo.blink.timer),glo.blink.timer=null),glo.blink.scene=n,util.blink_focus_interval())};util.blink_focus_interval=function(){var n=document.getElementsByClassName("focus");if(n.length!=0){for(i=0;i<n.length;i++)n[i].style.opacity=glo.blink.value;if(glo.scene.cur!=glo.blink.scene){document.getElementsByClassName("focus")[0].style.opacity=1;n=null;return}switch(glo.blink.value){case 0:glo.blink.value=1;glo.blink.timer!=null&&(clearInterval(glo.blink.timer),glo.blink.timer=null);glo.blink.timer=setTimeout(util.blink_focus_interval,glo.blink.HIDE_TIMER);break;case 1:glo.blink.value=0;glo.blink.timer!=null&&(clearInterval(glo.blink.timer),glo.blink.timer=null);glo.blink.timer=setTimeout(util.blink_focus_interval,glo.blink.SHOW_TIMER)}n=null}};util.show_attribute=function(n){var i,t;try{i="";for(t in n)i=typeof n[t]=="string"||typeof n[t]=="number"?i+"Attr Name : "+t+", Value : "+n[t]+", Type : "+typeof n[t]+"\n":i+"Attr Name : "+t+", Type : "+typeof n[t]+"\n";util.log(i)}catch(r){util.log(r.message)}};util.get_date_YYYYNNDD_with_slash=function(){var n=new Date,r=n.getFullYear(),t=n.getMonth()+1,i=n.getDate(),u=t<10?"0"+t:t,f=i<10?"0"+i:i;return r+"/"+u+"/"+f};util.get_date_YYYYMMDD=function(){var n=new Date,r=n.getFullYear(),t=n.getMonth()+1,i=n.getDate(),u=t<10?"0"+t:""+t,f=i<10?"0"+i:""+i;return r+""+u+""+f};util.get_time_HHMM=function(){var i=new Date,n=i.getHours(),t=i.getMinutes(),r=n<10?"0"+n:n,u=t<10?"0"+t:t;return r+":"+u};util.get_time_HHMMSS=function(){var n=new Date,t=n.getHours(),i=n.getMinutes(),r=n.getSeconds(),u=t<10?"0"+t:t,f=i<10?"0"+i:i,e=r<10?"0"+r:r;return u+":"+f+":"+e};util.get_cur_timestamp=function(){switch(glo.platform){case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:return(new Date).getTime();case glo.PLATFORM.LGSMARTTV:default:return parseInt(glo.timestamp_start,10)+parseInt(glo.timestamp_due,10)}};util.get_cur_date_YYYYMMDD=function(){var i=glo.server_time.year,n=glo.server_time.mon,t=glo.server_time.day,r=n<10?"0"+n:""+n,u=t<10?"0"+t:""+t;return i+""+r+""+u};util.get_cur_date_YYYY_MM_DD=function(){var n=util.get_cur_timestamp();isNaN(n)&&(n=0);var t=new Date(n),u=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),f=i<10?"0"+i:""+i,e=r<10?"0"+r:""+r;return u+"-"+f+"-"+e};util.get_cur_date_YYYY_MM_DD_with_timestamp=function(n){var t=new Date(n),u=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),f=i<10?"0"+i:""+i,e=r<10?"0"+r:""+r;return u+"-"+f+"-"+e};util.get_cur_time_HHMMSS=function(){var n=util.get_cur_timestamp();isNaN(n)&&(n=0);var t=new Date(n),i=t.getHours(),r=t.getMinutes(),u=t.getSeconds(),f=i<10?"0"+i:i,e=r<10?"0"+r:r,o=u<10?"0"+u:u;return f+":"+e+":"+o};util.get_cur_date_time=function(){var n=util.get_cur_date_YYYY_MM_DD(),t=util.get_cur_time_HHMMSS();return n+" "+t};util.get_cur_time_HHMM=function(){var n=util.get_cur_timestamp();isNaN(n)&&(n=0);var t=new Date(n),i=t.getHours(),r=t.getMinutes(),e=t.getSeconds(),u=i<10?"0"+i:i,f=r<10?"0"+r:r;return u+":"+f};util.get_remaintime_from_gap=function(n){var u=Math.floor(n/864e5),f=n-u*864e5,t=Math.floor(f/36e5),i=Math.floor((f-t*36e5)/6e4),r=Math.floor((f-t*36e5-i*6e4)/1e3),e=t>9?t:t==0?"00":"0"+t,o=i>9?i:i==0?"00":"0"+i,s=r>9?r:r==0?"00":"0"+r;return u>=1?u+TXT.day+" "+t+TXT.hour:e+":"+o+":"+s};util.get_cur_date_YYYY_MM_DD_plus_day=function(n){var u=util.get_cur_timestamp(),f=u+n*864e5,t=new Date(f),e=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),o=i<10?"0"+i:""+i,s=r<10?"0"+r:""+r;return e+"-"+o+"-"+s};util.get_yoil=function(n){var t=new Date(n).getDay();return["일","월","화","수","목","금","토"][t]};util.get_rank_postfix=function(n){if(USER.lang==LANG.KOREA)return"위";switch(n){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};util.now_time=function(){var n=new Date;return util.convert_num_to_string_with_zero(n.getFullYear(),4)+"/"+util.convert_num_to_string_with_zero(n.getMonth()+1,2)+"/"+util.convert_num_to_string_with_zero(n.getDate(),2)+" "+util.convert_num_to_string_with_zero(n.getHours(),2)+":"+util.convert_num_to_string_with_zero(n.getMinutes(),2)+":"+util.convert_num_to_string_with_zero(n.getSeconds(),2)};util.convert_num_to_string_with_zero=function(n,t){var r="";if(n=n.toString(),n.length<t)for(i=0;i<t-n.length;i++)r+="0";return r+n};util.getCountry_usingIP=function(){$.get("http://ipinfo.io",function(n){console.log(n.country);USER.country=STORAGE.data1.country=n.country;STORAGE.save_all_info_to_storage()},"jsonp")};util.get_number_with_comma=function(n){typeof n!="string"&&(n=String(n));var u,f,e,s,h,o,i,r,t;return t=n.length,t>12?(i=t-3,u=n.slice(i,t),r=t-6,f=n.slice(r,i),num3=t-9,e=n.slice(num3,r),num4=t-12,s=n.slice(num4,num3),h=n.slice(0,num4),o=h+","+s+","+e+","+f+","+u):t>9?(i=t-3,u=n.slice(i,t),r=t-6,f=n.slice(r,i),num3=t-9,e=n.slice(num3,r),s=n.slice(0,num3),o=s+","+e+","+f+","+u):t>6?(i=t-3,u=n.slice(i,t),r=t-6,f=n.slice(r,i),e=n.slice(0,r),o=e+","+f+","+u):t>3?(i=t-3,u=n.slice(i,t),f=n.slice(0,i),o=f+","+u):o=n,o};utilGetNumber_withComma=util.get_number_with_comma;util.get_money_with_MAN=function(n){var i,r,t,u;if(n<0&&(n=n*-1),n<1e4)return n+"";if(n<1e8)return i=Math.floor(n/1e4),r=n-i*1e4,r==0?i+"만":i+"만 "+r+"";if(n<1e12)return t=Math.floor(n/1e8),u=Math.floor((n-t*1e8)/1e4),u==0?t+"억":t+"억 "+u+"만";var f=Math.floor(n/1e12),e=n-f*1e12,t=Math.floor(e/1e8);return t==0?f+"조":f+"조 "+t+"억만"};utilGetmoney_withMAN=util.get_money_with_MAN;util.get_abbreviateNumber=function(n){var u=n,i,f;if(n>=1e3){var r=Math.floor((""+n).length/3),t="";for(i=2;i>=1;i--)if(t=parseFloat((r!=0?n/Math.pow(1e3,r):n).toPrecision(i)),f=(t+"").replace(/[^a-zA-Z 0-9]+/g,""),f.length<=2)break;t%1!=0&&(t=t.toFixed(1));u=t+["","K","M","B","T"][r]}return u};util.get_postfix_lang=function(){var n="";switch(USER.lang){case LANG.KOREA:n="";break;default:case LANG.ENGLISH:n="_en"}return n};util.get_language_dir=function(){switch(USER.lang){case LANG.KOREA:return"KOR";case LANG.ENGLISH:default:return"ENG"}};util.get_postfix_platform=function(){var n="";switch(glo.platform){case glo.PLATFORM.AMO:n="_m";break;case glo.PLATFORM.BAL:n="_m";break;case glo.PLATFORM.AZE:n="_m";break;default:n=""}return n};util.draw_image=function(n,t,i,r,u,f,e){$("#"+n).attr("src",t).css({left:i+"px",top:r+"px",width:u+"px",height:f+"px",position:e})};utilDrawImage=util.draw_image;util.draw_image_no_wh=function(n,t,i,r,u){$("#"+n).attr("src",t).css({left:i+"px",top:r+"px",position:u})};utilDrawImage_no_wh=util.draw_image_no_wh;util.draw_image_no_wh_pos=function(n,t,i,r){$("#"+n).attr("src",t).css({left:i+"px",top:r+"px",position:"absolute"})};utilDrawImage_no_wh_pos=util.draw_image_no_wh_pos;util.draw_image_no_wh_pos_rotateY180=function(n,t,i,r){$("#"+n).attr("src",t).css({left:i+"px",top:r+"px","-webkit-transform":"rotateY(180deg)",position:"absolute"})};utilDrawImage_no_wh_pos_rotateY180=util.draw_image_no_wh_pos_rotateY180;util.draw_image_no_wh_pos_rotateY0=function(n,t,i,r){$("#"+n).attr("src",t).css({left:i+"px",top:r+"px","-webkit-transform":"rotateY(0deg)",position:"absolute"})};utilDrawImage_no_wh_pos_rotateY0=util.draw_image_no_wh_pos_rotateY0;util.draw_image_no_wh_pos_rotate=function(n,t,i,r){$("#"+n).attr("src",t).css({left:i+"px",top:r+"px","-webkit-transform-origin":"50%","transform-origin":"50%","-webkit-transform":"scaleX(-1)",transform:"scaleX(-1)",position:"absolute"})};utilDrawImage_no_wh_pos_rotate=util.draw_image_no_wh_pos_rotate;util.draw_image_to_div=function(n,t,i,r,u,f){$("#"+n).css({left:i+"px",top:r+"px",width:u+"px",height:f+"px",background:"url("+t+") no-repeat 0 0","background-repeat":"repeat-x",position:"absolute"})};utilDrawImage_to_div=util.draw_image_to_div;util.draw_1pixel_image_to_id=function(){utilDrawImage_no_wh_pos("Img_GA_raser_pung_effect","./image/ui/common/onepixel.png",0,0)};util.draw_text=function(n,t,i,r,u,f,e,o,s,h){$("#"+t).css({display:"block",left:i+"px",top:r+"px",width:u+"px",height:f+"px","line-height":e+"px","font-size":o+"px","text-align":s,color:h,position:"absolute"}).text(n)};util.draw_text_html=function(n,t,i,r,u,f,e,o,s,h){$("#"+t).css({display:"block",left:i+"px",top:r+"px",width:u+"px",height:f+"px","line-height":e+"px","font-size":o+"px","text-align":s,color:h,position:"absolute"}).html(n)};util.draw_textshadow=function(n,t,i){var u=t,r=i+"px",f=u+" -"+r+" -"+r+" "+r+","+u+" 0px -"+r+" "+r+","+u+" "+r+" -"+r+" "+r+","+u+" -"+r+" 0px "+r+","+u+" "+r+" 0px "+r+","+u+" -"+r+" "+r+" "+r+","+u+" 0px "+r+" "+r+","+u+" "+r+" "+r+" "+r;$("#"+n).css({"text-shadow":f})};util.num_to_kor=function(n){switch(n){case 0:return"영";case 1:return"일";case 2:return"이";case 3:return"삼";case 4:return"사";case 5:return"오";case 6:return"육";case 7:return"칠";case 8:return"팔";case 9:return"구"}};util.scale=function(n,t){var u=t,f=t,i="0% 0%",r="scale("+u+","+f+")";$("#"+n).css({transform:r,"-ms-transform":r,"-webkit-transform":r,"-o-transform":r,"-moz-transform":r,"transform-origin":i,"-ms-transform-origin":i,"-webkit-transform-origin":i,"-o-transform-origin":i,"-moz-transform-origin":i})};util.scale_xy=function(n,t,i){var f=t,e=i,r="0% 0%",u="scale("+f+","+e+")";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy=util.scale_xy;util.scale_xy_center=function(n,t,i){var f=t,e=i,r="center",u="scale("+f+","+e+")";$("#"+n).css({"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r,transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u})};utilScale_xy_center=util.scale_xy_center;util.scale_xy_center_class=function(n,t,i){var f=t,e=i,r="50% 50%",u="scale("+f+","+e+")";$("."+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy_center_class=util.scale_xy_center_class;util.scale_xy_bottom=function(n,t,i){var f=t,e=i,r="50% 100%",u="scale("+f+","+e+")";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy_bottom=util.scale_xy_bottom;util.scale_xy_top=function(n,t,i){var f=t,e=i,r="50% 0%",u="scale("+f+","+e+")";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy_top=util.scale_xy_top;util.scale_xy_left=function(n,t,i){var f=t,e=i,r="0% 50%",u="scale("+f+","+e+")";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy_left=util.scale_xy_left;util.scale_xy_right=function(n,t,i){var f=t,e=i,r="100% 50%",u="scale("+f+","+e+")";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy_right=util.scale_xy_right;util.scale_xy_right_bottom=function(n,t,i){var f=t,e=i,r="100% 100%",u="scale("+f+","+e+")";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilScale_xy_right_bottom=util.scale_xy_right_bottom;util.rotate=function(n,t){$("#"+n).css({"transform-origin":"50% 50%","-webkit-transform-origin":"50% 50%","-webkit-transform":"rotate("+t+"deg)",position:"absolute"})};util.rotate00=function(n,t){$("#"+n).css({"transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+t+"deg)",position:"absolute"})};util.rotate0100=function(n,t){$("#"+n).css({"transform-origin":"0% 100%","-webkit-transform-origin":"0% 100%","-webkit-transform":"rotate("+t+"deg)",position:"absolute"})};util.rotate1000=function(n,t){$("#"+n).css({"transform-origin":"100% 0%","-webkit-transform-origin":"0% 100%","-webkit-transform":"rotate("+t+"deg)",position:"absolute"})};util.rotate100100=function(n,t){$("#"+n).css({"transform-origin":"100% 100%","-webkit-transform-origin":"100% 100%","-webkit-transform":"rotate("+t+"deg)",position:"absolute"})};util.rotate5050=function(n,t){$("#"+n).css({"transform-origin":"50% 50%","-webkit-transform-origin":"50% 50%","-webkit-transform":"rotate("+t+"deg)",position:"absolute"})};util.rotate_n_scale=function(n,t,i){var r="50% 50%",u="scale("+i+","+i+") rotate("+t+"deg)";$("#"+n).css({transform:u,"-ms-transform":u,"-webkit-transform":u,"-o-transform":u,"-moz-transform":u,"transform-origin":r,"-ms-transform-origin":r,"-webkit-transform-origin":r,"-o-transform-origin":r,"-moz-transform-origin":r})};utilRotate_n_Scale=util.rotate_n_scale;util.font_name_sanserif=function(n){$("#"+n).css({"font-family":"sans-serif","font-weight":"bold"})};util.font_get_size=function(n,t,r){var f=30,e=5,u;for($("#dummy_text").css({width:t+"px","font-size":f+"px"}),$("#dummy_text").text(TXT.start[gUSER.lang]),u=$("#dummy_text").outerHeight(),i=f;i>=e;i--){if(u=$("#dummy_text").outerHeight(),u<r)return i;$("#dummy_text").css({"font-size":i+"px"})}return e};util.font_resize=function(n,t,i,r){$("#dummy_text").css({width:t+"px","font-size":"25px","text-align":"center","text-shadow":"1px 1px 2px black","font-weight":"bold"});$("#dummy_text").text(r)};util.font_help_resize=function(n,t,i){$("#"+n).css({"line-height":i+"px","font-size":"14px","text-align":"left",color:"white","text-shadow":"0px 0px 0px white","font-weight":"bold"});return};util.enable_key=function(n,t){if(S_GAME.setting_flag==1&&n==0){util.log("######예외처리##### glo.enable_key = 0을 요청했지만 종료팝업떠있으므로 무시함:"+t);return}glo.enable_key=n;util.log("glo.enable_key="+n+"  사유:"+t)};util.auto_test_run=function(){if(util.auto_test.flag==0){util.notice("자동화 시작",2);util.auto_test.flag=1;util.auto_test.cur=1;util.auto_test.array=[0,KeyDefine.enter,KeyDefine.enter,KeyDefine.back,KeyDefine.back,KeyDefine.down,KeyDefine.enter,KeyDefine.enter,KeyDefine.enter,KeyDefine.enter,KeyDefine.back,KeyDefine.right,KeyDefine.enter,KeyDefine.enter,KeyDefine.enter,KeyDefine.back,KeyDefine.right,KeyDefine.enter,KeyDefine.back,KeyDefine.back,KeyDefine.up];var n=function(){glo.scene.cur!=glo.S.ERROR_POPUP&&(Main.key_down(util.auto_test.array[util.auto_test.cur]),util.auto_test.cur++,util.auto_test.cur>=util.auto_test.array.length-1?(util.auto_test.cur=1,util.auto_test.timer=setTimeout(n,3e3)):util.auto_test.timer=setTimeout(n,2e3))};util.auto_test.timer=setTimeout(n,2e3)}else util.notice("자동화 종료",2),util.auto_test.flag=0,util.auto_test.cur=1,util.auto_test.timer!=null&&(clearInterval(util.auto_test.timer),util.auto_test.timer=null)};util_fun=util_fun=util_fun||{};util_fun.dbl=function(){function r(){var i=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?!0:!1,r=navigator.userAgent.match(/android/i)||navigator.platform.match(/android/i)?!0:!1,u=navigator.userAgent.toLowerCase().indexOf("tizen")!=-1,f=navigator.userAgent.match(/(Web0S|WebOS)/i)?!0:!1,e=navigator.userAgent.match(/CloudStreaming/i)?!0:!1,o=navigator.userAgent.toLowerCase().indexOf("olleh")!=-1,s=navigator.userAgent.toLowerCase().indexOf("tbroad")!=-1;t.os=navigator.appVersion;navigator.appVersion.indexOf("Win")!=-1?t.os="Windows":navigator.appVersion.indexOf("Mac")!=-1?t.os="OS X":navigator.appVersion.indexOf("X11")!=-1?t.os="UNIX":navigator.appVersion.indexOf("Linux")!=-1?t.os="Linux":i?t.os="iOS":r&&(t.os="Android");e?(t.office=n.ENTRIX,t.platform=n.ENTRIX,t.device=n.TV):u?(t.office=n.SAMSUNG,t.platform=n.TIZEN,t.device=n.TV):o?(t.office=n.KT,t.device=n.TV):s?(t.office=n.TBROAD,t.device=n.TV):f&&(t.office=n.LG,t.platform=n.WEBOS,t.device=n.TV)}function i(n){return n<10?"0"+n:String(n)}var n={},t={os:"",platform:"browser",device:"PC",office:"PC"};return n.ENTRIX="Entrix",n.SAMSUNG="Samsung",n.TIZEN="Tizen",n.KT="KT",n.LG="LG",n.WEBOS="WebOS",n.TBROAD="TBroad",n.TV="TV",n.PC="PC",n.getOS=function(){return t.os},n.getPlatform=function(){return t.platform},n.getDevice=function(){return t.device},n.getOffice=function(){return t.office},n.getYYYYMMDDHHMMSS=function(){var n=new Date,s=String(n.getFullYear()),h=n.getMonth()+1,t="",r,u;t=i(h);r=n.getDate();u=i(r);var c=n.getHours(),l=n.getMinutes(),a=n.getSeconds(),f,e,o;return f=i(c),e=i(l),o=i(a),s+t+u+f+e+o},n.getPriceNum=function(n){var t=n.replace(/(\,|\s)/gi,"");return String(parseFloat(t))},r(),n}();sp_count=1;util_fun.loadingSpinner=function(){var t={},n,i=124;return t.show=function(){n!=null&&(clearInterval(n),n=null);var t=function(){var u=new Date,r=i*(sp_count-1);switch(glo.platform){default:BJ.css("KT_LOADING",{display:"block",opacity:"1","background-position":"-"+r+"px -0px"})}sp_count++;sp_count>12&&(sp_count=1);n=setTimeout(t,50)};t()},t.hide=function(){BJ.css("KT_LOADING",{display:"none",opacity:"0"});n!=null&&(clearInterval(n),n=null)},t}();BJ={};BJ.ajax=function(n){var t=new XMLHttpRequest;try{t.open(n.type,n.url);t.timeout=g.NETWORK_TIME_OUT;t.setRequestHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8");t.send(BJ.getStringByObject(n.data))}catch(i){n.error(i)}t.onreadystatechange=function(){t.readyState===4&&(t.status===200?n.success(t.responseText):(util.log("BJ.ajax Error Code : "+t.status+" 참고(403:접근거부,404:페이지없음,500:서버오류)"),n.error(t.status)))};t.ontimeout=function(t){util.log("BJ.ajax.ontimeout Error ");n.error(t)}};BJ.post=function(n,t,i,r){var u=new XMLHttpRequest;u.open("POST",n);u.timeout=g.NETWORK_TIME_OUT;u.setRequestHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8");u.send(BJ.getStringByObject(t));u.onreadystatechange=function(){u.readyState===4&&(u.status===200?i(u.responseText):(util.log("BJ.post Error Code : "+u.status+" 참고(403:접근거부,404:페이지없음,500:서버오류)"),r(u.status)))};u.ontimeout=function(n){util.log("BJ.ontimeout Error ");r(n)}};BJ.css=function(n,t){var r=document.getElementById(n),i;if(r!=null)for(i in t)switch(i){case"transform":r.style.transform=t[i];r.style.WebkitTransform=t[i];break;case"transform-origin":r.style.transformOrigin=t[i];r.style.WebkitTransformOrigin=t[i];break;case"line-height":r.style.lineHeight=t[i];break;case"font-size":r.style.fontSize=t[i];break;case"text-align":r.style.textAlign=t[i];break;case"text-shadow":r.style.textShadow=t[i];break;case"border-radius":r.style.borderRadius=t[i];r.style.WebkitBorderRadius=t[i];break;case"box-shadow":r.style.boxShadow=t[i];r.style.WebkitBoxShadow=t[i];break;case"font-family":r.style.fontFamily=t[i];break;default:r.style[i]=t[i]}};BJ.text=function(n,t){var i=document.getElementById(n);i!=null&&(i.innerHTML=t)};BJ.empty=function(n){var t=document.getElementById(n);t!=null&&(t.innerHTML="")};BJ.remove=function(n){if(n!=null){var t=document.getElementById(n);t!=null&&t.parentNode.removeChild(document.getElementById(n))}};BJ.getStringByObject=function(n){var t="";for(var i in n)t+=i+"="+n[i]+"&";return t.slice(0,-1),t};gHISTORY=[];gHISTORY.push({data:{scene:"WebOS"},title:"title",url:"url"});util.encrypt=function(n){for(output=new String,Temp=[],Temp2=[],TextSize=n.length,i=0;i<TextSize;i++)rnd=Math.round(Math.random()*122)+68,Temp[i]=n.charCodeAt(i)+rnd,Temp2[i]=rnd;for(i=0;i<TextSize;i++)output+=String.fromCharCode(Temp[i],Temp2[i]);return output};util.decrypt=function(n){for(output=new String,Temp=[],Temp2=[],TextSize=n.length,i=0;i<TextSize;i++)Temp[i]=n.charCodeAt(i),Temp2[i]=n.charCodeAt(i+1);for(i=0;i<TextSize;i=i+2)output+=String.fromCharCode(Temp[i]-Temp2[i]);return output};util.get_encryt=function(n){eval(String.fromCharCode(9,118,97,114,32,107,101,121,117,116,102,32,61,32,67,114,121,112,116,111,74,83,46,101,110,99,46,85,116,102,56,46,112,97,114,115,101,40,34,103,107,115,101,107,102,49,100,106,114,113,106,102,119,107,33,34,41,59,9,32,9,118,97,114,32,105,118,117,116,102,32,61,32,67,114,121,112,116,111,74,83,46,101,110,99,46,85,116,102,56,46,112,97,114,115,101,40,34,116,111,119,101,114,100,101,102,101,110,99,101,95,97,109,111,34,41,59));var i=CryptoJS.AES.encrypt(n,keyutf,{iv:ivutf}),t=i+"";return util.log("encode result :"+t),t};util.get_platform_for_db=function(){return glo.platform=="AMO"&&typeof S_MOBILE_CONNECT=="object"&&S_MOBILE_CONNECT_AMO.flag==1&&S_MOBILE_CONNECT_AMO.info!=null?S_MOBILE_CONNECT_AMO.info.platform:glo.platform};util.is_impossible_payment=function(){if(glo.platform=="AMO"&&typeof S_MOBILE_CONNECT_AMO=="object"&&S_MOBILE_CONNECT_AMO.flag==1&&S_MOBILE_CONNECT_AMO.info!=null)switch(S_MOBILE_CONNECT_AMO.info.platform){case"HCN":case"KT":case"SKB":case"LGH":case"DLIVE":return!0;case"SS":case"LG":case"ATV":default:return!1}return!1};util.email_to_asterisk=function(n){for(var t=n.split("@"),u=t[0].length-1,i=t[0][0],r=1;r<t[0].length-1;r++)i+="*";return i+=t[0][u],i+"@"+t[1]};util.array_suffle=function(n){for(var i=n.length-1,t=1;t<=i;t++){const r=Math.floor(Math.random()*i)+1,u=n[t];n[t]=n[r];n[r]=u}};util.get_platform_string=function(){switch(glo.platform){case glo.PLATFORM.KT:return"KT";case glo.PLATFORM.SKB:return"SKB";case glo.PLATFORM.ATV:return"ATV";case glo.PLATFORM.AMO:return"AMO";case glo.PLATFORM.SS:return"SS";case glo.PLATFORM.SS:return"SS";case glo.PLATFORM.LG:return"LG";case glo.PLATFORM.LG_SMARTTV:return"LG_SMARTTV";case glo.PLATFORM.LG_WEEKEND:return"LG_WEEKEND";case glo.PLATFORM.LG_STANDBYME:return"LG_STANDBYME";case glo.PLATFORM.HCN:return"HCN";case glo.PLATFORM.BAL:return"BAL";case glo.PLATFORM.AZE:return"AZE"}} 
var glo={S:{LOGO:"S_LOGO",MAINMENU:"S_MAINMENU",PVP_RANKING:"S_PVP_RANKING",PVP_MATCHING:"S_PVP_MATCHING",SETTING:"S_SETTING",GAME:"S_GAME",ERROR_POPUP:"S_ERROR_POPUP",GAMERESULT:"S_GAMERESULT",HELP:"S_HELP",POPUPYN:"S_POPUPYN",KR_INPUT:"S_KR_INPUT",PAY_PASSYN:"S_PAY_PASSYN",INPUT_PAY:"S_INPUT_PAY"},PLATFORM:{LG:"LG",LG_SMARTTV:"LG_SMARTTV",LG_STANDBYME:"LG_STANDBYME",LG_WEEKEND:"LG_WEEKEND",DLIVE:"DLIVE",CJH:"CJH",LGH:"LGH",KT:"KT",HCN:"HCN",SS:"SS",ORANGE:"ORAGNE",PCROOM:"PCROOM",SKB:"SKB",ATV:"ATV",AMO:"AMO",BAL:"BAL",AZE:"AZE"},GAME_WIDTH:1920,GAME_HEIGHT:1080,scene:{cur:null,before:null},user:{lang:LANG.KOREA},blink:{value:0,scene:null,timer:null,SHOW_TIMER:700,HIDE_TIMER:300},KeyPressTime:100,KeyUpTime:50,KeyScale:1.05,NETWORK_TIME_OUT:15e3,PING_TIME_OUT:3e3,order_id:"",timestamp_due:0,enable_key:1,validate:1,enable_coupon:0,enable_mobile_connect:0,platform:null,URL_prefix:null,app_release:"",app_name:null,version:null,flag:{first_user:0,AZE_ad_playing:0,AZE_reward_ad_ready:0},predefine:{trace_scene_flag:!1,trace_key_flag:!1,trace_uniq_id:"",pvp_comming_soon:!1},mouse:{use:0,drag_pressed:0,drag_sx:0,drag_sy:0},is_mobile:!1,FRAME:20,AUTOTEST:0,is_numkey:!0,pay_30day_pass_end_timestamp:0,today_play_count:0,TODAY_FREE_PLAY_NUM:1},STAGE=null,gEntrix={uniq_id:"billionmarble_uniq_id_001",host_id:"billoonmarble_uniq_id_001",cont_id:"",svc_reg_date:"",isuse_yn:"",SOCode:1,user_name:"guest",user_name2:"guest",user_phone:"053-000-0000",user_address:"--",zipcode:"",dp_id:"1075872",svc_id:"SV10000607",appl_id:"SV10000608",ch_no:"761",item_id_SKB:null,item_id_alask:["","","","","","",""],testbed_item_id:["","","","","","",""],item_id_alask_HCN:null,testbed_item_id_alask_HCN:null,item_id_alask_JCN:["","","","",""],testbed_item_id_alask_JCN:["","","","",""],service_center:"1644-1100",monthly_pay:0,pin_number:"0000",is_model:!0,model_name:"NOMODEL",return_code:0,pw_check_result:0,adult_certification_success:0,menu_key_pressed:!1,stb_id:"Towerdefence_uniq_id_001",stb_model:"ywlee_td_test",stb_name:"ywlee_td_test",stb_ip:"ywlee_td_test",stb_mac:"ywlee_td_test",stb_addr:"ywlee_td_test"};Platform.init() 
var ChangeScene={before_s:null,after_s:null,after_s_obj:null,timer_loading:null,count:0,type:0,TYPE_NORMAL:0,TYPE_POPUP:1,effect1:{cur_x:glo.GAME_SCREEN_WIDTH,goal_x:0,gap:10,speed:.2},backup_enable_key:0},PRELOAD;ChangeScene.start=function(n,t,i,r){if(ChangeScene.backup_enable_key=glo.enable_key,glo.enable_key=0,n==glo.S.ERROR_POPUP){console.error("exit popup error in  ChangeScene.start()!!!");glo.enable_key=ChangeScene.backup_enable_key;return}if(glo.platform==glo.PLATFORM.LG)switch(n){case glo.S.ATTENDANCE:case glo.S.LOGO:case glo.S.GONGJI:case null:break;default:t!=glo.S.MAINMENU&&(util.log("LG의 경우 ChangeScene에 history push를 실행 하도록 함.:"+n),Main.history_push())}ChangeScene.before_s=n;ChangeScene.after_s=t;ChangeScene.after_s_obj=i;(r==null||r=="")&&(r=ChangeScene.TYPE_NORMAL);ChangeScene.type=r;util.log("ChangeScene.Scene :"+n+" ==>"+t);glo.predefine.trace_scene_flag==!0&&(glo.predefine.trace_uniq_id==gEntrix.uniq_id||glo.predefine.trace_uniq_id=="all")&&PHP.put_error_log("ChangeScene.Scene :"+n+" ==>"+t);ChangeScene.start_loading();i.preload()};ChangeScene.start_loading=function(){util.loading_show()};ChangeScene.end_loading=function(){var n,t;if(glo.platform==glo.PLATFORM.AZE&&glo.flag.AZE_ad_playing==1){setTimeout(ChangeScene.end_loading,500);return}util.loading_hide();ChangeScene.type==ChangeScene.TYPE_POPUP||(n=ChangeScene.before_s+"_div",$("#"+n).css({display:"none"}),$("#"+n).empty());t=ChangeScene.after_s+"_div";$("#"+t).css({display:"block",left:"0px",top:"0px",width:glo.GAME_SCREEN_WIDTH+"px",height:glo.GAME_SCREEN_HEIGHT+"px",position:"absolute"});glo.enable_key=ChangeScene.backup_enable_key;ChangeScene.after_s_obj.init();(glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL)&&$(".focus").css({display:"none"})};ChangeScene.image_preload=function(n){for(var i,r,u=PRELOAD.MEMORY.length,t=0;t<u;t++)PRELOAD.MEMORY[t]=null;if(i=n.length,i==0){ChangeScene.end_loading();return}for(r=0,t=0;t<i;t++)PRELOAD.MEMORY[t]=new Image,PRELOAD.MEMORY[t].src=n[t],PRELOAD.MEMORY[t].onload=function(){r++;r>=i&&ChangeScene.end_loading()},PRELOAD.MEMORY[t].onerror=function(){r++;r>=i&&ChangeScene.end_loading()}};ChangeScene.effect1_run=function(){if(ChangeScene.effect1.cur_x=Math.floor(ChangeScene.effect1.cur_x-ChangeScene.effect1.speed*(ChangeScene.effect1.cur_x-ChangeScene.effect1.goal_x)),util.log("cur_x ="+ChangeScene.effect1.cur_x),$("#"+ChangeScene.after_s+"_div").css({left:ChangeScene.effect1.cur_x+"px"}),$("#"+ChangeScene.before_s+"_div").css({left:(glo.GAME_SCREEN_WIDTH-ChangeScene.effect1.cur_x)*-1+"px",position:"absolute"}),ChangeScene.effect1.cur_x<=ChangeScene.effect1.goal_x){var n=ChangeScene.before_s+"_div";$("#"+n).css({display:"none",left:"0px"});util.log("#S"+n+"display none --before--")}else setTimeout(ChangeScene.effect1_run,200)};ChangeScene.end=function(){};PRELOAD={MEMORY:[]} 
var PHP={TIME_OUT:3e4,IS_PING_CHECK:!0,PING_TIME_OUT:2e3,TIME_OUT_MAX:3,errorCount:0,timoutCount:0,pingConsole:0,RETRY_MAX_NUM:5,RETRY_GAP_MS:500,RETRY:{}},getStringByObject;PHP.init=function(){$.ajaxSetup({timeout:PHP.TIME_OUT,async:!1})};PHP.RETRY.get_uniq_id_for_LG={count:0,arg1:null,arg2:null};PHP.get_uniq_id_for_LG=function(n,t){if(n==null||n==""){BAL.get_set_uniq_id();t&&t();return}PHP.RETRY.get_uniq_id_for_LG.count++;PHP.RETRY.get_uniq_id_for_LG.arg1=n;PHP.RETRY.get_uniq_id_for_LG.arg2=t;var i=glo.URL_prefix+"get_uniq_id_for_LG.php";$.post(i,{HOST_ID:n},function(i){var r,u;if(PHP.RETRY.get_uniq_id_for_LG.count=0,i.includes("mysql_error")||i==null||i==""){util.log("Error in PHP.get_uniq_id_for_LG():"+i);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_uniq_id_for_LG error(1):"+i);return}r=JSON.parse(i);switch(r.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_uniq_id_for_LG error(2):"+r.VALUE);break;case"OK":if(u=r.VALUE,u.substr(0,4)=="BMLG"){gEntrix.uniq_id=u;gEntrix.host_id=n;t&&t();return}S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"ID BMLG not included:"+u);util.log("ID가 BMLG로 시작하지 않음:"+i);return;case"NONE":BAL.get_set_uniq_id();gEntrix.host_id=n;t&&t()}}).fail(function(){PHP.RETRY.get_uniq_id_for_LG.count>=PHP.RETRY_MAX_NUM?(util.log("네트워크 단절로 파악됨. offline모드 작동~~~~"),BAL.get_set_uniq_id(),t&&t()):setTimeout(function(){PHP.get_uniq_id_for_LG(PHP.RETRY.get_uniq_id_for_LG.arg1,PHP.RETRY.get_uniq_id_for_LG.arg2)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_user_data_all={count:0,arg1:null};PHP.get_user_data_all=function(n){if(glo.platform==glo.PLATFORM.AZE){USER.lang=LANG.ENGLISH;n();return}PHP.RETRY.get_user_data_all.count++;PHP.RETRY.get_user_data_all.arg1=n;var t=glo.URL_prefix+"get_user_data_all.php";$.post(t,{UNIQ_ID:gEntrix.uniq_id},function(t){var i,r;if(PHP.RETRY.get_user_data_all.count=0,t.includes("mysql_error")||t==null||t==""){util.log("Error in PHP.get_user_data_all():"+t);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_user_data_all error(1):"+t);return}i=JSON.parse(t);switch(i.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_user_data_all error(2):"+i.VALUE);break;case"OK":r=i.VALUE;STORAGE.decode_data_all(r,n)}}).fail(function(t){if(PHP.RETRY.get_user_data_all.count>=PHP.RETRY_MAX_NUM){Main.make_tag();LANG.init();switch(glo.platform){case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:if(WSS.obj.readyState!=1){USER.lang=util_webos.language=="ko-KR"?LANG.KOREA:LANG.ENGLISH;n();return}break;case glo.PLATFORM.AZE:USER.lang=LANG.ENGLISH;n();break;default:util.log("Error in PHP.get_user_data_all(1).fail:"+t);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR," PHP.get_user_data_all(fail):"+t.status+" Retry:"+PHP.RETRY.get_user_data_all.count)}}else setTimeout(function(){PHP.get_user_data_all(PHP.RETRY.get_user_data_all.arg1)},PHP.RETRY_GAP_MS)})};PHP.get_user_data_all__backup=function(n){PHP.RETRY.get_user_data_all.count++;PHP.RETRY.get_user_data_all.arg1=n;var t=glo.URL_prefix+"get_user_data_all.php";$.post(t,{UNIQ_ID:gEntrix.uniq_id},function(t){var i,r;if(PHP.RETRY.get_user_data_all.count=0,t.includes("mysql_error")||t==null||t==""){util.log("Error in PHP.get_user_data_all():"+t);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_user_data_all error(1):"+t);return}i=JSON.parse(t);switch(i.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_user_data_all error(2):"+i.VALUE);break;case"OK":r=i.VALUE;STORAGE.decode_data_all(r,n)}}).fail(function(n){PHP.RETRY.get_user_data_all.count>=PHP.RETRY_MAX_NUM?(Main.make_tag(),LANG.init(),util.log("Error in PHP.get_user_data_all(1).fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR," PHP.get_user_data_all(fail):"+n.status+" Retry:"+PHP.RETRY.get_user_data_all.count)):setTimeout(function(){PHP.get_user_data_all(PHP.RETRY.get_user_data_all.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_uniq_id_for_SKB={count:0,arg1:null};PHP.get_uniq_id_for_SKB=function(n){PHP.RETRY.get_uniq_id_for_SKB.count++;PHP.RETRY.get_uniq_id_for_SKB.arg1=n;var t=glo.URL_prefix+"get_uniq_id_for_SKB.php";switch(glo.platform){case glo.PLATFORM.SKB:t=glo.URL_prefix+"get_uniq_id_for_SKB.php";break;case glo.PLATFORM.ATV:t=glo.URL_prefix+"get_uniq_id_for_ATV.php";break;case glo.PLATFORM.AMO:t=glo.URL_prefix+"get_uniq_id_for_AMO.php";break;default:console.error("SKB,ATV platform only!! please check you glo.platform in get_uniq_id_for_SKB()");return}$.post(t,{STBID:gEntrix.stb_id,NAME:gEntrix.stb_name,MODEL:gEntrix.stb_model},function(t){var r,i;if(PHP.RETRY.get_uniq_id_for_SKB.count=0,t.includes("mysql_error")||t==null||t==""){util.log("Error in PHP.get_uniq_id_for_SKB():"+t);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_uniq_id_for_SKB error(1):"+t);return}r=JSON.parse(t);switch(r.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_uniq_id_for_SKB error(2):"+r.VALUE);break;case"OK":i=r.VALUE;switch(glo.platform){case glo.PLATFORM.SKB:if(i.substr(0,2)=="BW"||i.substr(0,3)=="ETD"){gEntrix.uniq_id=i;n&&n();return}S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"ID BW,ETD not included:"+i);util.log("ID가 BW로 시작하지 않음:"+t);return;case glo.PLATFORM.ATV:if(i.substr(0,3)=="ATV"){gEntrix.uniq_id=i;n&&n();return}S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"ID ATV not included:"+i);util.log("ID가 ATV로 시작하지 않음:"+t);return;case glo.PLATFORM.AMO:if(i.substr(0,3)=="TDM"){gEntrix.uniq_id=i;n&&n();return}S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"ID TDM not included:"+i);util.log("ID가 TDM으로 시작하지 않음:"+t);return}}}).fail(function(n){PHP.RETRY.get_uniq_id_for_SKB.count>=PHP.RETRY_MAX_NUM?(Main.make_tag(),LANG.init(),util.log("Error in PHP.get_bgw_id(1).fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR," PHP.get_bgw_id(fail):"+n.status+" Retry:"+PHP.RETRY.get_uniq_id_for_SKB.count)):setTimeout(function(){PHP.get_uniq_id_for_SKB(PHP.RETRY.get_uniq_id_for_SKB.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_30day_pass={count:0,arg1:null};PHP.get_30day_pass=function(n){PHP.RETRY.get_30day_pass.count++;PHP.RETRY.get_30day_pass.arg1=n;var t=glo.URL_prefix+"../BM_COMMON/30DAY_PASS/get_30day_pass.php";$.post(t,{UNIQ_ID:gEntrix.uniq_id,DB_NAME:"BM_LG"},function(t){if(PHP.RETRY.get_30day_pass.count=0,t.includes("mysql_error")||t==null||t==""){util.log("Error in PHP.get_30day_pass():"+t);glo.pay_30day_pass_end_timestamp=0;n&&n();return}var i=JSON.parse(t);switch(i.RESULT){case"ERROR":glo.pay_30day_pass_end_timestamp=0;n&&n();break;case"OK":glo.pay_30day_pass_end_timestamp=parseInt(i.VALUE,10);n&&n()}}).fail(function(t){PHP.RETRY.get_30day_pass.count>=PHP.RETRY_MAX_NUM?(Main.make_tag(),LANG.init(),util.log("Error in PHP.get_30day_pass(1).fail:"+t),glo.pay_30day_pass_end_timestamp=0,n&&n()):setTimeout(function(){PHP.get_30day_pass(PHP.RETRY.get_30day_pass.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_normal={count:0,arg1:null};PHP.put_userinfo_normal=function(n){if(glo.platform!=glo.PLATFORM.AZE){if(WSS.obj.readyState!=1){util.log("네트워크 단절되어 put_userinfo_normal()에 저장하지 않음");return}if(PHP.RETRY.put_userinfo_normal.count++,PHP.RETRY.put_userinfo_normal.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_normal(PHP.RETRY.put_userinfo_normal.arg1)},1e3);return}var t=glo.URL_prefix+"put_userinfo_normal_AES.php",i={UNIQ_ID:gEntrix.uniq_id,HOST_ID:gEntrix.host_id,USER_NAME:gEntrix.user_name,USER_NAME2:gEntrix.user_name2,SO_CODE:gEntrix.SOCode,MODEL_NAME:gEntrix.model_name,COUNTRY:"KR",LANG:USER.lang,PLATFORM:util.get_platform_for_db(),VERSION:glo.version,SOUND_BGM:USER.sound_bgm,SOUND_EFFECT:USER.sound_effect,SAFEMODE:0,CHUL_DATE:0,CHUL_NUM:0,GUIDE_LINE:0,GACHA_TIME:0,LEVEL:0,LEVEL_EXP:0,IS_NUMKEY:0,VIBRATION:0,FRAME:0,RUN_COUNT:0,COMMENT:n};$.post(t,{DATA:util.get_encryt(JSON.stringify(i))},function(n){if(PHP.RETRY.put_userinfo_normal.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_normal():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_normal error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_normal error(2):"+t.VALUE);break;case"OK":util.log("userinfo_normal data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_normal.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_normal().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_normal error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_normal.count)):setTimeout(function(){PHP.put_userinfo_normal(PHP.RETRY.put_userinfo_normal.arg1)},PHP.RETRY_GAP_MS)})}};PHP.RETRY.put_userinfo_stage={count:0,arg1:null};PHP.put_userinfo_stage=function(n){var i,t,r;if(PHP.RETRY.put_userinfo_stage.count++,PHP.RETRY.put_userinfo_stage.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_stage(PHP.RETRY.put_userinfo_stage.arg1)},1e3);return}if(i=glo.URL_prefix+"put_userinfo_stage_AES.php",t=STORAGE.encode_stage(),t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_stage() encode_data is error");return}glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);r={UNIQ_ID:gEntrix.uniq_id,DATA_EASY:t.easy,DATA_NORMAL:t.normal,DATA_HARD:t.hard,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(n){if(PHP.RETRY.put_userinfo_stage.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_stage():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_stage error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_stage error(2):"+t.VALUE);break;case"OK":util.log("userinfo_stage data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_stage.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_stage().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_stage error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_stage.count)):setTimeout(function(){PHP.put_userinfo_stage(PHP.RETRY.put_userinfo_stage.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_rubydiagold={count:0,arg1:null};PHP.put_userinfo_rubydiagold=function(n,t){var i,r;if(PHP.RETRY.put_userinfo_rubydiagold.count++,PHP.RETRY.put_userinfo_rubydiagold.arg1=n,PHP.RETRY.put_userinfo_rubydiagold.arg2=t,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_rubydiagold(PHP.RETRY.put_userinfo_rubydiagold.arg1,PHP.RETRY.put_userinfo_rubydiagold.arg2)},1e3);return}i=glo.URL_prefix+"put_userinfo_rubydiagold_AES.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n.gold_why="[모바일연동됨]"+n.gold_why);r={UNIQ_ID:gEntrix.uniq_id,CUR_RUBY:CAL.get_ruby(),CUR_DIA:CAL.get_dia(),CUR_GOLD:CAL.get_gold(),RUBY_ADD:n.ruby_add,RUBY_WHY:n.ruby_why,DIA_ADD:n.dia_add,DIA_WHY:n.dia_why,GOLD_ADD:n.gold_add,GOLD_WHY:n.gold_why,RUN_COUNT:glo.run_count==null?0:glo.run_count};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(i){if(PHP.RETRY.put_userinfo_rubydiagold.count=0,i.includes("mysql_error")||i==null||i==""){util.log("Error in PHP.put_userinfo_rubydiagold():"+i);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_rubydiagold error(1):"+i);return}var r=JSON.parse(i);switch(r.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_rubydiagold error(2):"+r.VALUE);break;case"OK":util.log("userinfo_rubydiagold 증가요청 R:("+n.ruby_add+")"+n.ruby_why+",D:("+n.dia_add+")"+n.dia_why+",G:("+n.gold_add+")"+n.gold_why);util.log("userinfo_rubydiagold 저장성공 결과: Ruby="+r.VALUE.RUBY+",Dia="+r.VALUE.DIA+", GOLD="+r.VALUE.GOLD);t&&t()}}).fail(function(n){PHP.RETRY.put_userinfo_rubydiagold.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_rubydiagold().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_rubydiagold error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_rubydiagold.count)):setTimeout(function(){PHP.put_userinfo_rubydiagold(PHP.RETRY.put_userinfo_rubydiagold.arg1,PHP.RETRY.put_userinfo_rubydiagold.arg2)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_tower={count:0,arg1:null};PHP.put_userinfo_tower=function(n){var i,t,r;if(PHP.RETRY.put_userinfo_tower.count++,PHP.RETRY.put_userinfo_tower.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_tower(PHP.RETRY.put_userinfo_tower.arg1)},1e3);return}if(i=glo.URL_prefix+"put_userinfo_tower_AES.php",t=STORAGE.encode_tower(),t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_tower() encode_data is error");return}glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);r={UNIQ_ID:gEntrix.uniq_id,SELECTED_TOWER:t.selected_tower,BOU_TOWER:t.bou_tower,RAINBOW_CARD:STORAGE.tower_rainbow_card,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(n){if(PHP.RETRY.put_userinfo_tower.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_tower():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_tower error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_tower error(2):"+t.VALUE);break;case"OK":util.log("userinfo_stage data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_tower.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_tower().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_tower error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_tower.count)):setTimeout(function(){PHP.put_userinfo_tower(PHP.RETRY.put_userinfo_tower.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_hero={count:0,arg1:null};PHP.put_userinfo_hero=function(n){var i,t,r;if(PHP.RETRY.put_userinfo_hero.count++,PHP.RETRY.put_userinfo_hero.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_hero(PHP.RETRY.put_userinfo_hero.arg1)},1e3);return}if(i=glo.URL_prefix+"put_userinfo_hero_AES.php",glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n),t=STORAGE.encode_hero(),t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_hero() encode_data is error");return}r={UNIQ_ID:gEntrix.uniq_id,SELECTED_HERO:t.selected_hero+"",BOU_HERO:t.bou_hero+"",RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(n){if(PHP.RETRY.put_userinfo_hero.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_hero():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_hero error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_hero error(2):"+t.VALUE);break;case"OK":util.log("put_userinfo_hero data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_hero.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_hero().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_hero error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_hero.count)):setTimeout(function(){PHP.put_userinfo_hero(PHP.RETRY.put_userinfo_hero.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_item={count:0,arg1:null};PHP.put_userinfo_item=function(n){var i,t,r;if(PHP.RETRY.put_userinfo_item.count++,PHP.RETRY.put_userinfo_item.arg1=n,i=glo.URL_prefix+"put_userinfo_item_AES.php",t=STORAGE.encode_item(),t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_item() encode_data is error");return}glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);r={UNIQ_ID:gEntrix.uniq_id,DATA:t,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(n){if(PHP.RETRY.put_userinfo_item.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_item():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_item error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_item error(2):"+t.VALUE);break;case"OK":util.log("userinfo_item data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_item.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_item().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_item error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_item.count)):setTimeout(function(){PHP.put_userinfo_item(PHP.RETRY.put_userinfo_item.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_charbook={count:0,arg1:null};PHP.put_userinfo_charbook=function(n){var i,t,r;if(PHP.RETRY.put_userinfo_charbook.count++,PHP.RETRY.put_userinfo_charbook.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_charbook(PHP.RETRY.put_userinfo_charbook.arg1)},1e3);return}if(i=glo.URL_prefix+"put_userinfo_charbook_AES.php",t=STORAGE.encode_charbook(),t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_charbook() encode_data is error");return}glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);r={UNIQ_ID:gEntrix.uniq_id,TOWER:t.tower,HERO:t.hero,MONSTER:t.monster,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(n){if(PHP.RETRY.put_userinfo_charbook.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_charbook():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_charbook error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_charbook error(2):"+t.VALUE);break;case"OK":util.log("userinfo_charbook data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_charbook.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_charbook().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_charbook error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_charbook.count)):setTimeout(function(){PHP.put_userinfo_charbook(PHP.RETRY.put_userinfo_charbook.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_upgrade={count:0,arg1:null};PHP.put_userinfo_upgrade=function(n){var i,t,r;if(PHP.RETRY.put_userinfo_upgrade.count++,PHP.RETRY.put_userinfo_upgrade.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_upgrade(PHP.RETRY.put_userinfo_upgrade.arg1)},1e3);return}if(i=glo.URL_prefix+"put_userinfo_upgrade_AES.php",t=STORAGE.encode_upgrade(),t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_upgrade() encode_data is error");return}glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);r={UNIQ_ID:gEntrix.uniq_id,DATA:t,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(i,{DATA:util.get_encryt(JSON.stringify(r))},function(n){if(PHP.RETRY.put_userinfo_upgrade.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_userinfo_upgrade():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_upgrade error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_upgrade error(2):"+t.VALUE);break;case"OK":util.log("userinfo_upgrade data 저장성공")}}).fail(function(n){PHP.RETRY.put_userinfo_upgrade.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_upgrade().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_upgrade error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_upgrade.count)):setTimeout(function(){PHP.put_userinfo_upgrade(PHP.RETRY.put_userinfo_upgrade.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_daytry={count:0,arg1:null,arg2:null,arg3:null};PHP.put_userinfo_daytry=function(n,t,i){var r,u;if(PHP.RETRY.put_userinfo_daytry.count++,PHP.RETRY.put_userinfo_daytry.arg1=n,PHP.RETRY.put_userinfo_daytry.arg2=t,PHP.RETRY.put_userinfo_daytry.arg3=i,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_daytry(PHP.RETRY.put_userinfo_daytry.arg1,PHP.RETRY.put_userinfo_daytry.arg2,PHP.RETRY.put_userinfo_daytry.arg3)},1e3);return}r=glo.URL_prefix+"put_userinfo_daytry_AES.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);u={UNIQ_ID:gEntrix.uniq_id,TICKET:STORAGE.daytry.ticket,TYPE:n,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:t};$.post(r,{DATA:util.get_encryt(JSON.stringify(u))},function(n){if(PHP.RETRY.put_userinfo_daytry.count=0,n.includes("mysql_error")||n==null||n==""||n.includes("error")){util.log("Error in PHP.put_userinfo_daytry():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_daytry error(1):"+n);return}switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":util.log("userinfo_daytry data 저장성공 : 서버에서 받은 ticket수:"+n);STORAGE.daytry.ticket=DEFINEJS_EVENT.is_event("일일도전_입장권무료")?3:parseInt(n,10);i&&i();break;default:S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"day_try ticket error:"+n);return}}).fail(function(n){PHP.RETRY.put_userinfo_daytry.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_daytry().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_daytry error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_daytry.count)):setTimeout(function(){PHP.put_userinfo_daytry(PHP.RETRY.put_userinfo_daytry.arg1,PHP.RETRY.put_userinfo_daytry.arg2,PHP.RETRY.put_userinfo_daytry.arg3)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_prooftop_reward={count:0,arg1:null,arg2:null,arg3:null};PHP.put_prooftop_reward=function(n,t,i){var r,u;if(PHP.RETRY.put_prooftop_reward.count++,PHP.RETRY.put_prooftop_reward.arg1=n,PHP.RETRY.put_prooftop_reward.arg2=t,PHP.RETRY.put_prooftop_reward.arg3=i,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_prooftop_reward(PHP.RETRY.put_prooftop_reward.arg1,PHP.RETRY.put_prooftop_reward.arg2,PHP.RETRY.put_prooftop_reward.arg3)},1e3);return}r=glo.URL_prefix+"../TOWERDEFENCE_COMMON/PROOFTOP/put_prooftop_reward_AES.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);u={PLATFORM:util.get_platform_for_db(),UNIQ_ID:gEntrix.uniq_id,CLEAR_FLOOR:n,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:t};$.post(r,{DATA:util.get_encryt(JSON.stringify(u))},function(n){if(PHP.RETRY.put_prooftop_reward.count=0,n.includes("mysql_error")||n==null||n==""||n.includes("error")){util.log("Error in PHP.put_prooftop_reward():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_prooftop_reward error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_prooftop_reward error(2):"+t.VALUE);break;case"OK":i&&i()}}).fail(function(n){PHP.RETRY.put_prooftop_reward.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_prooftop_reward().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_prooftop_reward error(3):"+n.status+" Retry:"+PHP.RETRY.put_prooftop_reward.count)):setTimeout(function(){PHP.put_prooftop_reward(PHP.RETRY.put_prooftop_reward.arg1,PHP.RETRY.put_prooftop_reward.arg2,PHP.RETRY.put_prooftop_reward.arg3)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_prooftop_data={count:0,arg1:null,arg2:null,arg3:null};PHP.put_prooftop_data=function(n,t,i){var r,u;if(PHP.RETRY.put_prooftop_data.count++,PHP.RETRY.put_prooftop_data.arg1=n,PHP.RETRY.put_prooftop_data.arg2=t,PHP.RETRY.put_prooftop_data.arg3=i,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_prooftop_data(PHP.RETRY.put_prooftop_data.arg1,PHP.RETRY.put_prooftop_data.arg2,PHP.RETRY.put_prooftop_data.arg3)},1e3);return}r=glo.URL_prefix+"../TOWERDEFENCE_COMMON/PROOFTOP/put_prooftop_data_AES.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);u={PLATFORM:util.get_platform_for_db(),UNIQ_ID:gEntrix.uniq_id,NAME:gEntrix.user_name,LEVEL:USER.level+"",HERO_BUNHO:STORAGE.hero_selected+"",TOWER:STORAGE.encode_tower_info_for_pvp(),GOT_SCORE:S_GAME.prooftop.got_score+"",TRY_FLOOR:STORAGE.prooftop.try_floor+"",SCORE_FLOOR:n,RUN_COUNT:glo.run_count==null?0:glo.run_count,ETC:t};$.post(r,{DATA:util.get_encryt(JSON.stringify(u))},function(n){if(PHP.RETRY.put_prooftop_data.count=0,n.includes("mysql_error")||n==null||n==""||n.includes("error")){util.log("Error in PHP.put_prooftop_data():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_prooftop_data error(1):"+n);return}n=="OK"&&i&&i()}).fail(function(n){PHP.RETRY.put_prooftop_data.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_prooftop_data().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_prooftop_data error(3):"+n.status+" Retry:"+PHP.RETRY.put_prooftop_data.count)):setTimeout(function(){PHP.put_prooftop_data(PHP.RETRY.put_prooftop_data.arg1,PHP.RETRY.put_prooftop_data.arg2,PHP.RETRY.put_prooftop_data.arg3)},PHP.RETRY_GAP_MS)})};PHP.daily_intall_count=function(){var n=n=glo.URL_prefix+"/Counter/daily_install_count.php";$.post(n,{UNIQ_ID:gEntrix.uniq_id},function(n){util.log("######daily_install_count(): data result -->:"+n)}).fail(function(n){util.log("==="+n.status)})};PHP.daily_run_count=function(){var n=n=glo.URL_prefix+"/Counter/daily_run_count.php";$.post(n,{UNIQ_ID:gEntrix.uniq_id},function(n){util.log("daily_run_count(): data result -->:"+n)}).fail(function(n){util.log("==="+n.status)})};PHP.daily_add_play_count=function(){glo.today_play_count++;switch(glo.platform){case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:if(WSS.obj.readyState!=1)return;break;case glo.PLATFORM.AZE:return}var n=n=glo.URL_prefix+"/add_play_count.php";$.post(n,{UNIQ_ID:gEntrix.uniq_id},function(n){util.log("add_play_count(): data result -->:"+n)}).fail(function(n){util.log("==="+n.status)})};PHP.mainmenu_app_exit=function(){var n=n=glo.URL_prefix+"/mainmenu_app_exit.php";$.post(n,{UNIQ_ID:gEntrix.uniq_id},function(n){util.log("mainmenu_app_exit(): data result -->:"+n)}).fail(function(n){util.log("==="+n.status)})};PHP.put_log_to_server=function(n){var t=t=glo.URL_prefix+"/put_log_to_server.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);$.post(t,{UNIQ_ID:gEntrix.uniq_id,COMMENT:n},function(n){util.log("put_log_to_server(): data result -->:"+n)}).fail(function(n){util.log("==="+n.status)})};PHP.daily_ad_count=function(n,t){var i=i=glo.URL_prefix+"/Counter/daily_ad_count.php";$.post(i,{UNIQ_ID:gEntrix.uniq_id,AD_TYPE:n,AD_RESULT:t},function(n){util.log("daily_ad_count(): data result -->:"+n)}).fail(function(n){util.log("==="+n.status)})};PHP.put_error_log=function(n){if(glo.platform!=glo.PLATFORM.AZE){var t=glo.URL_prefix+"put_error_log.php";n=n.replace(/\'/g,"\\'");n=n.replace(/\"/g,'\\"');$.post(t,{UNIQ_ID:gEntrix.uniq_id,ERROR_LOG:n},function(){}).fail(function(){})}};PHP.put_blacklist=function(n){var t=glo.URL_prefix+"put_blacklist.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(etc="[모바일연동됨]"+etc);$.post(t,{UNIQ_ID:gEntrix.uniq_id,MESSAGE:n,ETC:etc},function(n){if(n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_blacklist():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_blacklist error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_blacklist error(2):"+t.VALUE);break;case"OK":util.log("put_blacklist 저장성공")}}).fail(function(n){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_blacklist error(3):"+n.status+" Retry:"+PHP.RETRY.put_blacklist.count)})};PHP.RETRY.put_reward_charbook_tower={count:0,arg1:null,arg2:null,arg3:null};PHP.put_reward_charbook_tower=function(n,t,i){PHP.RETRY.put_reward_charbook_tower.count++;PHP.RETRY.put_reward_charbook_tower.arg1=n;PHP.RETRY.put_reward_charbook_tower.arg2=t;PHP.RETRY.put_reward_charbook_tower.arg3=i;var r=glo.URL_prefix+"Reward/put_reward_charbook_tower.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(i="[모바일연동됨]"+i);$.post(r,{UNIQ_ID:gEntrix.uniq_id,REWARD_STR:n,TOWER_NAME:t,COMMENT:i,LANG:USER.lang},function(n){if(PHP.RETRY.put_reward_charbook_tower.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_reward_charbook_tower():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_charbook_tower error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_charbook_tower error(2):"+t.VALUE);break;case"OK":util.log("tower 도감 보상 지급 성공");S_MAILBOX.new_flag=1}}).fail(function(n){PHP.RETRY.put_reward_charbook_tower.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_reward_charbook_tower().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_charbook_tower error(3):"+n.status+" Retry:"+PHP.RETRY.put_reward_charbook_tower.count)):setTimeout(function(){PHP.put_reward_charbook_tower(PHP.RETRY.put_reward_charbook_tower.arg1,PHP.RETRY.put_reward_charbook_tower.arg2,PHP.RETRY.put_reward_charbook_tower.arg3)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_reward_selectstage_star={count:0,arg1:null,arg2:null};PHP.put_reward_selectstage_star=function(n,t){PHP.RETRY.put_reward_selectstage_star.count++;PHP.RETRY.put_reward_selectstage_star.arg1=n;PHP.RETRY.put_reward_selectstage_star.arg2=t;var i=glo.URL_prefix+"Reward/put_reward_selectstage_star.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);$.post(i,{UNIQ_ID:gEntrix.uniq_id,REWARD_STR:n,COMMENT:t},function(n){if(PHP.RETRY.put_reward_selectstage_star.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_reward_selectstage_star():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_selectstage_star error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_selectstage_star error(2):"+t.VALUE);break;case"OK":util.log("tower 도감 보상 지급 성공");S_MAILBOX.new_flag=1}}).fail(function(n){PHP.RETRY.put_reward_selectstage_star.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_reward_selectstage_star().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_selectstage_star error(3):"+n.status+" Retry:"+PHP.RETRY.put_reward_selectstage_star.count)):setTimeout(function(){PHP.put_reward_selectstage_star(PHP.RETRY.put_reward_selectstage_star.arg1,PHP.RETRY.put_reward_selectstage_star.arg2)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_reward_attendance={count:0,arg1:null,arg2:null};PHP.put_reward_attendance=function(n,t,i){PHP.RETRY.put_reward_attendance.count++;PHP.RETRY.put_reward_attendance.arg1=n;PHP.RETRY.put_reward_attendance.arg2=t;PHP.RETRY.put_reward_attendance.arg3=i;var r=glo.URL_prefix+"Reward/put_reward_attendance.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(i="[모바일연동됨]"+i);$.post(r,{UNIQ_ID:gEntrix.uniq_id,REWARD_STR:n,VALUE:t,COMMENT:i},function(n){if(PHP.RETRY.put_reward_attendance.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_reward_attendance():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_attendance error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_attendance error(2):"+t.VALUE);break;case"OK":util.log("tower 도감 보상 지급 성공")}}).fail(function(n){PHP.RETRY.put_reward_attendance.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_reward_attendance().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_attendance error(3):"+n.status+" Retry:"+PHP.RETRY.put_reward_attendance.count)):setTimeout(function(){PHP.put_reward_attendance(PHP.RETRY.put_reward_attendance.arg1,PHP.RETRY.put_reward_attendance.arg2,PHP.RETRY.put_reward_attendance.arg3)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_reward_daytry_tower={count:0,arg1:null,arg2:null};PHP.put_reward_daytry_tower=function(n,t){PHP.RETRY.put_reward_daytry_tower.count++;PHP.RETRY.put_reward_daytry_tower.arg1=n;PHP.RETRY.put_reward_daytry_tower.arg2=t;var f=glo.URL_prefix+"Reward/put_reward_daytry_tower.php",i=Math.floor(n/1e3),r=Math.floor((n-i*1e3)/100),u=Math.floor((n-i*1e3-r*100)/10),e=n-i*1e3-r*100-u*10;glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);$.post(f,{UNIQ_ID:gEntrix.uniq_id,TOWER_BUNHO_4:util.num_to_kor(i),TOWER_BUNHO_3:util.num_to_kor(r),TOWER_BUNHO_2:util.num_to_kor(u),TOWER_BUNHO_1:util.num_to_kor(e),COMMENT:t},function(n){if(PHP.RETRY.put_reward_daytry_tower.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_reward_daytry_tower():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_daytry_tower error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_daytry_tower error(2):"+t.VALUE);break;case"OK":util.log("tower 지급 성공")}}).fail(function(n){PHP.RETRY.put_reward_daytry_tower.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_reward_daytry_tower().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_daytry_tower error(3):"+n.status+" Retry:"+PHP.RETRY.put_reward_daytry_tower.count)):setTimeout(function(){PHP.put_reward_daytry_tower(PHP.RETRY.put_reward_daytry_tower.arg1,PHP.RETRY.put_reward_daytry_tower.arg2,PHP.RETRY.put_reward_daytry_tower.arg3)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_reward_tower_evolution={count:0,arg1:null,arg2:null,arg3:null};PHP.put_reward_tower_evolution=function(n,t,i){PHP.RETRY.put_reward_tower_evolution.count++;PHP.RETRY.put_reward_tower_evolution.arg1=n;PHP.RETRY.put_reward_tower_evolution.arg2=t;PHP.RETRY.put_reward_tower_evolution.arg3=i;var r=glo.URL_prefix+"Reward/put_reward_tower_evolution.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(i="[모바일연동됨]"+i);$.post(r,{UNIQ_ID:gEntrix.uniq_id,STR:n,TOWER_BUNHO_G:t,COMMENT:i},function(n){if(PHP.RETRY.put_reward_tower_evolution.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_reward_tower_evolution():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_tower_evolution error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_tower_evolution error(2):"+t.VALUE);break;case"OK":util.log("진화 이벤트에 대한 보상지급")}}).fail(function(n){PHP.RETRY.put_reward_tower_evolution.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_reward_tower_evolution().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_tower_evolution error(3):"+n.status+" Retry:"+PHP.RETRY.put_reward_tower_evolution.count)):setTimeout(function(){PHP.put_reward_tower_evolution(PHP.RETRY.put_reward_tower_evolution.arg1,PHP.RETRY.put_reward_tower_evolution.arg2,PHP.RETRY.put_reward_tower_evolution.arg3)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_reward_items={count:0,arg1:null,arg2:null};PHP.put_reward_items=function(n,t,i,r,u,f){PHP.RETRY.put_reward_items.count++;PHP.RETRY.put_reward_items.arg1=n;PHP.RETRY.put_reward_items.arg2=t;PHP.RETRY.put_reward_items.arg3=i;PHP.RETRY.put_reward_items.arg4=r;PHP.RETRY.put_reward_items.arg5=u;PHP.RETRY.put_reward_items.arg6=f;var e=glo.URL_prefix+"Reward/put_reward_items.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(f="[모바일연동됨]"+f);$.post(e,{UNIQ_ID:gEntrix.uniq_id,ITEM1:n,ITEM2:t,ITEM3:i,ITEM4:r,ITEM5:u,COMMENT:f},function(n){if(PHP.RETRY.put_reward_items.count=0,n.includes("mysql_error")||n==null||n==""){util.log("Error in PHP.put_reward_items():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_items error(1):"+n);return}var t=JSON.parse(n);switch(t.RESULT){case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_items error(2):"+t.VALUE);break;case"OK":util.log("아이템 우편함에 지급 성공")}}).fail(function(n){PHP.RETRY.put_reward_items.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_reward_items().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_reward_items error(3):"+n.status+" Retry:"+PHP.RETRY.put_reward_items.count)):setTimeout(function(){PHP.put_reward_items(PHP.RETRY.put_reward_items.arg1,PHP.RETRY.put_reward_items.arg2,PHP.RETRY.put_reward_items.arg3,PHP.RETRY.put_reward_items.arg4,PHP.RETRY.put_reward_items.arg5,PHP.RETRY.put_reward_items.arg6)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_userinfo_quest={count:0,arg1:null};PHP.put_userinfo_quest=function(n){var t,i;if(PHP.RETRY.put_userinfo_quest.count++,PHP.RETRY.put_userinfo_quest.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.put_userinfo_quest(PHP.RETRY.put_userinfo_quest.arg1)},1e3);return}STORAGE.encode_quest();t=glo.URL_prefix+"put_userinfo_quest2_AES.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);i={UNIQ_ID:gEntrix.uniq_id,WEEKLY:STORAGE.quest_weekly,RUN_COUNT:glo.run_count==null?0:glo.run_count,COMMENT:n};$.post(t,{DATA:util.get_encryt(JSON.stringify(i))},function(n){PHP.RETRY.put_userinfo_quest.count=0;util.log("put_quest : "+n);n=="QUEST_INIT"&&(STORAGE.init_quest(),USER.lang==LANG.KOREA?util.notice("주간업적이 초기화 되었습니다.",2):util.notice("Quest initialized!.",2))}).fail(function(n){PHP.RETRY.put_userinfo_quest.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_quest().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_quest error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_quest.count)):setTimeout(function(){PHP.put_userinfo_quest(PHP.RETRY.put_userinfo_quest.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_userinfo_quest={count:0,arg1:null};PHP.get_userinfo_quest=function(n){PHP.RETRY.get_userinfo_quest.count++;PHP.RETRY.get_userinfo_quest.arg1=n;var t=glo.URL_prefix+"get_userinfo_quest.php";$.post(t,{UNIQ_ID:gEntrix.uniq_id},function(t){if(PHP.RETRY.get_userinfo_quest.count=0,t.includes("mysql_error")){console.error("Error in PHP.get_userinfo_quest():"+t);return}if(t==null){console.error("Error in PHP.get_userinfo_quest(): data is null");return}var i=JSON.parse(t);switch(i.result){case"UNIQ_ID is null":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"UNIQ_ID is null in PHP.get_userinfo_quest()");break;case"UNIQ_ID not exist":STORAGE.init_quest();PHP.put_userinfo_quest("QUEST가 존재하지 않아 초기화함.아마도업적초기화되고 처음 접속임");util.notice(TXT.quest_init_weekly,2);n&&n();break;case"ok":util.log("quest_weekly="+i.WEEKLY);STORAGE.decode_quest(i.WEEKLY);n&&n();break;default:S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"unexpected data in PHP.get_userinfo_quest():"+i.result);return}}).fail(function(n){PHP.RETRY.get_userinfo_quest.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.get_userinfo_quest().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_userinfo_quest error(3):"+n.status+" Retry:"+PHP.RETRY.get_userinfo_quest.count)):setTimeout(function(){PHP.get_userinfo_quest(PHP.RETRY.get_userinfo_quest.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_pingback_db={count:0,arg1:null,arg2:null,arg3:null,arg4:null};PHP.put_pingback_db=function(n,t,i,r){PHP.RETRY.put_pingback_db.count++;PHP.RETRY.put_pingback_db.arg1=n;PHP.RETRY.put_pingback_db.arg2=t;PHP.RETRY.put_pingback_db.arg3=i;PHP.RETRY.put_pingback_db.arg4=r;r==null&&(r="");var u=glo.URL_prefix+"Payment/put_pingback_db.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(r="[모바일연동됨]"+r);$.post(u,{UNIQ_ID:gEntrix.uniq_id,USER_NAME:gEntrix.user_name,ITEM_NAME:n,ITEM_PRICE:t,ITEM_PRICE_WITH_VAT:i,PLATFORM:glo.platform,VERSION:glo.version,COMMENT:r},function(n){PHP.RETRY.put_pingback_db.count=0;util.log("Sccceed PHP.put_pingback_db : "+n)}).fail(function(n){PHP.RETRY.put_pingback_db.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_pingback_db().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_pingback_db error(3):"+n.status+" Retry:"+PHP.RETRY.put_pingback_db.count)):setTimeout(function(){PHP.put_pingback_db(PHP.RETRY.put_pingback_db.arg1,PHP.RETRY.put_pingback_db.arg2,PHP.RETRY.put_pingback_db.arg3,PHP.RETRY.put_pingback_db.arg4)},PHP.RETRY_GAP_MS)})};PHP.check_overlap_name=function(n){var t=glo.URL_prefix+"ChangeName/check_overlap_name.php";$.post(t,{NAME:n},function(t){util.log("------------------->result = "+t);t=="overlap"?S_SETTING.input_result_OVERLAP():S_SETTING.input_result_OK(n)})};PHP.check_overlap_name_n_change=function(n){var t=glo.URL_prefix+"../BM_COMMON/ChangeName/check_overlap_name_n_change.php";$.post(t,{PLATFORM:util.get_platform_string(),NAME:n,UNIQ_ID:gEntrix.uniq_id,COMMENT:"이름변경:"+gEntrix.user_name+"-->"+n},function(t){util.log("------------------->result = "+t);t=="overlap"?S_SETTING.input_result_OVERLAP():S_SETTING.input_result_OK_n_change(n)})};PHP.name_propagation=function(){var t=glo.URL_prefix+"../BM_COMMON/ChangeName/name_propagation.php",n="";switch(glo.platform){case glo.PLATFORM.LG:case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:n="BM_LG";break;case glo.PLATFORM.AZE:n="BM_AZE";break;default:console.error("PHP.name_propagation()에서 플랫폼에 따른 처리가 정해지지 않음")}$.post(t,{UNIQ_ID:gEntrix.uniq_id,NAME:gEntrix.user_name,PLATFORM:n},function(n){util.log("------------------->result = "+n)})};PHP.get_billing_history_in_server=function(n){var i=glo.URL_prefix+"Payment/get_billing_history.php",t={};t.UNIQ_ID=gEntrix.uniq_id;$.ajax({url:i,type:"POST",data:t,timeout:PHP.TIME_OUT,success:function(t){var u,i,r;switch(t){case"UNIQ_ID is null":util.log("Error in PHP.get_billing_history_in_server():"+t);n&&n("error");break;case"UNIQ_ID not exist":n&&n("ok");break;case"":n&&n("ok");break;default:if(t.includes("mysql_error")){util.log("Error in PHP.get_billing_history_in_server():"+t);n&&n("error");break}else{for(u=t.split("|"),S_BILLING_HISTORY.real_num=u.length,i=1;i<=S_BILLING_HISTORY.real_num;i++)r=u[i-1].split(";"),S_BILLING_HISTORY.time[i]=r[0],S_BILLING_HISTORY.item[i]=r[1],S_BILLING_HISTORY.won[i]=r[2];util.log("PHP.get_billing_history_in_server() data :"+t);n&&n("ok")}}},error:function(){n&&n("error")}})};PHP.RETRY.get_gongji={count:0,arg1:null};PHP.get_gongji=function(n){var t,i;for(PHP.RETRY.get_gongji.count++,PHP.RETRY.get_gongji.arg1=n,S_GONGJI.num=0,t=1;t<=DEFINE.USER_MAX_GONGJI;t++)S_GONGJI.content[t]={},S_GONGJI.content[t].bunho="-1",S_GONGJI.content[t].file_kor=null,S_GONGJI.content[t].file_eng=null,S_GONGJI.content[t].file_vie=null,S_GONGJI.content[t].type="undefined",S_GONGJI.content[t].value=0,S_GONGJI.content[t].due_date_str_kr=null,S_GONGJI.content[t].due_date_str_en=null;i=glo.URL_prefix+"GongJi/get_gongji.php";$.ajax({type:"POST",url:i,data:"",dataType:"json",timeout:PHP.TIME_OUT,success:function(t){if(PHP.RETRY.get_gongji.count=0,t==null||t=="")util.log(" 공지 없습니다."),S_GONGJI.num=0;else{S_GONGJI.num=t.length;util.log("공지사항 접수! :"+S_GONGJI.num);for(var i=1;i<=t.length;i++)S_GONGJI.content[i].bunho=t[i-1].BUNHO,S_GONGJI.content[i].file_kor=t[i-1].FILE_KOR,S_GONGJI.content[i].file_eng=t[i-1].FILE_ENG,S_GONGJI.content[i].file_vie=t[i-1].FILE_VIE,S_GONGJI.content[i].type=t[i-1].TYPE,S_GONGJI.content[i].value=parseInt(t[i-1].VALUE,10),t[i-1].DUE_DATE_STR_KR!=null&&(S_GONGJI.content[i].due_date_str_kr=t[i-1].DUE_DATE_STR_KR),t[i-1].DUE_DATE_STR_EN!=null&&(S_GONGJI.content[i].due_date_str_en=t[i-1].DUE_DATE_STR_EN),S_GONGJI.content[i].view_date=parseInt(t[i-1].VIEW_DATE,10)}n()},error:function(){PHP.RETRY.get_gongji.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.get_gongji().fail:"+e),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_gongji error(3):"+e.status+" Retry:"+PHP.RETRY.get_gongji.count)):setTimeout(function(){PHP.get_gongji(PHP.RETRY.get_gongji.arg1)},PHP.RETRY_GAP_MS)},beforeSend:function(){},complete:function(){}})};PHP.RETRY.put_userinfo_gongji={count:0,arg1:null};PHP.put_userinfo_gongji=function(n){PHP.RETRY.put_userinfo_gongji.count++;PHP.RETRY.put_userinfo_gongji.arg1=n;var i=glo.URL_prefix+"put_userinfo_gongji.php",t=STORAGE.encode_gongji();if(t=="error"||t==null||t==""){util.log("Error in PHP.put_userinfo_gongji(1) encode_data is error");return}glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(n="[모바일연동됨]"+n);$.post(i,{UNIQ_ID:gEntrix.uniq_id,DATA:t,COMMENT:n},function(n){PHP.RETRY.put_userinfo_gongji.count=0;switch(n){case"UNIQ_ID is null":util.log("Error in PHP.put_userinfo_gongji(2):"+n);break;case"DATA is null":util.log("Error in PHP.put_userinfo_gongji(3):"+n);break;default:if(n.includes("mysql_error")){util.log("Error in PHP.put_userinfo_gongji(4):"+n);break}else util.log("PHP.put_userinfo_gongji(5) data :"+n)}}).fail(function(n){PHP.RETRY.put_userinfo_gongji.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_userinfo_gongji().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_userinfo_gongji error(3):"+n.status+" Retry:"+PHP.RETRY.put_userinfo_gongji.count)):setTimeout(function(){PHP.put_userinfo_gongji(PHP.RETRY.put_userinfo_gongji.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_rewards={count:0,arg1:null};PHP.get_rewards=function(n){PHP.RETRY.get_rewards.count++;PHP.RETRY.get_rewards.arg1=n;S_MAILBOX.reward_init();var t=glo.URL_prefix+"Reward/get_rewards.php";$.post(t,{UNIQ_ID:gEntrix.uniq_id},function(t){var u,r,f,i;if(PHP.RETRY.get_rewards.count=0,t=="mysql_error"){PHP.put_error_log("PHP.get_rewards()호출시 mysql_error발생함.");S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"mailbox error");return}if(u=JSON.parse(t),u.RESULT==0){util.log("Reward empty!!, 서버에 보상 받을 내용이 없습니다.");S_MAILBOX.new_flag=0;n();return}for(r=u.LIST,f=r.length,i=0;i<f;i++){if(glo.REWARD[i+1].sn=parseInt(r[i].SN,10),glo.REWARD[i+1].why=r[i].WHY,glo.REWARD[i+1].what=r[i].WHAT,glo.REWARD[i+1].what_value=parseInt(r[i].WHAT_VALUE,10),glo.REWARD[i+1].start_date=r[i].START_DATE.replace(/-/gi,"/"),glo.REWARD[i+1].end_date=r[i].END_DATE.replace(/-/gi,"/"),isNaN(glo.REWARD[i+1].sn)){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"SN is none");return}if(isNaN(glo.REWARD[i+1].what_value)){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"WHAT_VALUE is none");return}glo.REWARD[i+1].why.includes("PAYMENT SUCCESS")&&(glo.REWARD[i+1].why="PAYMENT SUCCESS");S_MAILBOX.new_flag=1}n()}).fail(function(n){PHP.RETRY.get_rewards.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.get_rewards().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_rewards error(3):"+n.status+" Retry:"+PHP.RETRY.get_rewards.count)):setTimeout(function(){PHP.get_rewards(PHP.RETRY.get_rewards.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.check_reward_sn_i_and_del={count:0,arg1:null,arg2:null};PHP.check_reward_sn_i_and_del=function(n,t){PHP.RETRY.check_reward_sn_i_and_del.count++;PHP.RETRY.check_reward_sn_i_and_del.arg1=n;PHP.RETRY.check_reward_sn_i_and_del.arg2=t;var i=glo.URL_prefix+"Reward/check_reward_sn_i_and_del.php";$.post(i,{UNIQ_ID:gEntrix.uniq_id,SN:n},function(i){if(PHP.RETRY.check_reward_sn_i_and_del.count=0,i=="mysql_error"){PHP.put_error_log("check_reward_sn_i_and_del()호출시 mysql_error발생함.");S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"check_reward_sn_i_and_del mysql error");return}if(i=="ok"){util.log("OK, 해당하는 sn값이 존재 합니다. 보상 주세요.");t();return}S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"reward sn값이 유효하지 않음:"+i+" sn:"+n);return}).fail(function(n){PHP.RETRY.check_reward_sn_i_and_del.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.check_reward_sn_i_and_del().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"check_reward_sn_i_and_del error(3):"+n.status+" Retry:"+PHP.RETRY.check_reward_sn_i_and_del.count)):setTimeout(function(){PHP.check_reward_sn_i_and_del(PHP.RETRY.check_reward_sn_i_and_del.arg1,PHP.RETRY.check_reward_sn_i_and_del.arg2)},PHP.RETRY_GAP_MS)})};PHP.RETRY.check_reward_sn_all_and_del={count:0,arg1:null};PHP.check_reward_sn_all_and_del=function(n){var t;PHP.RETRY.check_reward_sn_all_and_del.count++;PHP.RETRY.check_reward_sn_all_and_del.arg1=n;var r=glo.URL_prefix+"Reward/check_reward_sn_all_and_del.php",i=glo.REWARD[1].sn,u=S_MAILBOX.reward_get_num();for(t=2;t<=u;t++)i=i+","+glo.REWARD[t].sn;$.post(r,{UNIQ_ID:gEntrix.uniq_id,ALL_SN:i},function(t){if(PHP.RETRY.check_reward_sn_all_and_del.count=0,t=="mysql_error"){PHP.put_error_log("check_reward_sn_all_and_del()호출시 mysql_error발생함.");S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"mysql_error check_reward_sn_all_and_del");return}if(t=="ok"){util.log("OK, 해당하는 sn값이 존재 합니다. 보상 주세요.");n();return}S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"not exist,check_reward_sn_all_and_del()");return}).fail(function(n){PHP.RETRY.check_reward_sn_all_and_del.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.check_reward_sn_all_and_del().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"check_reward_sn_all_and_del error(3):"+n.status+" Retry:"+PHP.RETRY.check_reward_sn_all_and_del.count)):setTimeout(function(){PHP.check_reward_sn_all_and_del(PHP.RETRY.check_reward_sn_all_and_del.arg1)},PHP.RETRY_GAP_MS)})};PHP.put_reward=function(n,t,i,r,u){var f=glo.URL_prefix+"Reward/put_reward2_storage_full.php";$.post(f,{UNIQ_ID:gEntrix.uniq_id,WHAT:n,WHY:t,WHAT_VALUE:i,START_DATE:r,END_DATE:u},function(n){util.log("data : "+n)}).fail(function(n){PHP.put_error_log("PHP.put_reward()호출시 오류발생. 사용자가 "+glo.REWARD.what+" "+glo.REWARD.what_value+"번을 못받았을 확률 있음. 체크바람.");util.log("Error in PHP.put_reward().fail:"+n)})};PHP.init_all_data=function(){var n=glo.URL_prefix+"init_all_data.php";$.post(n,{UNIQ_ID:gEntrix.uniq_id},function(n){util.log("data : "+n)}).fail(function(){})};PHP.RETRY.get_order_from_score={count:0,arg1:null,arg1:null};PHP.get_order_from_score=function(n,t){PHP.RETRY.get_order_from_score.count++;PHP.RETRY.get_order_from_score.arg1=n;PHP.RETRY.get_order_from_score.arg2=t;var i=glo.URL_prefix+"/PVP/get_order_from_score.php";$.post(i,{SCORE:n},function(n){if(PHP.RETRY.get_order_from_score.count=0,n.includes("mysql_error")){util.log("Error in get_order_from_score():"+n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"Error in get_order_from_score():"+n);return}if(n=="SCORE is null"){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"SCORE is null");return}var i=parseInt(n,10);util.log("PHP.get_order_from_score data : "+i);t&&t(i)}).fail(function(n){PHP.RETRY.get_order_from_score.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.get_order_from_score().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_order_from_score error(3):"+n.status+" Retry:"+PHP.RETRY.get_order_from_score.count)):setTimeout(function(){PHP.get_order_from_score(PHP.RETRY.get_order_from_score.arg1,PHP.RETRY.get_order_from_score.arg2)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_pvp_data={count:0,arg1:null};PHP.get_pvp_data=function(n){PHP.RETRY.get_pvp_data.count++;PHP.RETRY.get_pvp_data.arg1=n;var t=glo.URL_prefix+"/PVP/get_pvp_data.php";STORAGE.init_pvp();$.post(t,{UNIQ_ID:gEntrix.uniq_id},function(t){var r,u,i;if(PHP.RETRY.get_pvp_data.count=0,t.includes("mysql_error")){util.log("Error in PHP.get_pvp_data():"+t);return}if(r=JSON.parse(t),r==null){util.log("Error PHP.get_pvp_data(): json data is null");return}switch(r.result){case"UNIQ_ID is null":util.log("Error in PHP.get_pvp_data():"+t);break;case"UNIQ_ID not exist":case"ok":for(util.log("PHP.get_pvp_data() data :"+t),STORAGE.pvp.score=parseInt(r.my.score,10),STORAGE.pvp.firehistory.week.tot=parseInt(r.my.tot,10),STORAGE.pvp.firehistory.week.win=parseInt(r.my.win,10),STORAGE.pvp.order=parseInt(r.my.order,10),STORAGE.pvp.free_enterance=parseInt(r.my.free_enterance_num,10),STORAGE.pvp.update_time=r.my.update_time,STORAGE.pvp.status=r.my.status,STORAGE.pvp.tot_num=parseInt(r.tot_num,10),USER.grade=S_PVP_RANKING.get_grade(STORAGE.pvp.order),Main.top_show(),u=0,r.list!=null&&(u=r.list.length),i=1;i<=u;i++)STORAGE.pvp.ranklist[i].order=i,STORAGE.pvp.ranklist[i].uniq_id=r.list[i-1].uniq_id,STORAGE.pvp.ranklist[i].name=r.list[i-1].name,STORAGE.pvp.ranklist[i].grade=parseInt(r.list[i-1].grade,10),STORAGE.pvp.ranklist[i].record_tot=parseInt(r.list[i-1].tot,10),STORAGE.pvp.ranklist[i].record_win=parseInt(r.list[i-1].win,10),STORAGE.pvp.ranklist[i].score=parseInt(r.list[i-1].score,10),i>=2&&STORAGE.pvp.ranklist[i-1].score==STORAGE.pvp.ranklist[i].score&&(STORAGE.pvp.ranklist[i].order=STORAGE.pvp.ranklist[i-1].order);n&&n();break;default:util.log("Error in PHP.get_pvp_data():"+t)}}).fail(function(n){PHP.RETRY.get_pvp_data.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.get_pvp_data().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_pvp_data error(3):"+n.status+" Retry:"+PHP.RETRY.get_pvp_data.count)):setTimeout(function(){PHP.get_pvp_data(PHP.RETRY.get_pvp_data.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.put_pvp_data={count:0,arg1:null,arg2:null};PHP.put_pvp_data=function(n,t,i){PHP.RETRY.put_pvp_data.count++;PHP.RETRY.put_pvp_data.arg1=n;PHP.RETRY.put_pvp_data.arg2=t;PHP.RETRY.put_pvp_data.arg3=i;glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);var r=glo.URL_prefix+"PVP/put_pvp_data.php";$.post(r,{UNIQ_ID:gEntrix.uniq_id,NAME:gEntrix.user_name,GRADE:USER.grade,RECORD_TOT:STORAGE.pvp.firehistory.week.tot,RECORD_WIN:STORAGE.pvp.firehistory.week.win,SCORE:n,FREE_ENTERANCE_NUM:STORAGE.pvp.free_enterance,STATUS:STORAGE.pvp.status,ETC:t},function(n){PHP.RETRY.put_pvp_data.count=0;switch(n){case"UNIQ_ID is null":case"GRADE is null":case"RECORD_TOT is null":case"RECORD_WIN is null":case"SCORE is null":case"FREE_ENTERANCE_NUM is null":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PHP.put_pvp_data:"+n);return;default:if(n.includes("mysql_error")){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PHP.put_pvp_data:mysql_error:"+n);break}else util.log("put pvp data ok"),i&&i()}}).fail(function(n){PHP.RETRY.put_pvp_data.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.put_pvp_data().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"put_pvp_data error(3):"+n.status+" Retry:"+PHP.RETRY.put_pvp_data.count)):setTimeout(function(){PHP.put_pvp_data(PHP.RETRY.put_pvp_data.arg1,PHP.RETRY.put_pvp_data.arg2,PHP.RETRY.put_pvp_data.arg3)},PHP.RETRY_GAP_MS)})};PHP.put_pvp_free_enterance_num=function(n,t){var i=glo.URL_prefix+"/PVP/put_pvp_free_enterance_num.php";glo.platform==glo.PLATFORM.AMO&&util.get_platform_for_db()!=glo.PLATFORM.AMO&&(t="[모바일연동됨]"+t);$.post(i,{UNIQ_ID:gEntrix.uniq_id,FREE_ENTERANCE_NUM:n,ETC:t},function(n){util.log(n)})};PHP.get_personal_info_policy=function(){var n=glo.URL_prefix+"/get_personal_info_policy.php";$.post(n,{LANG:USER.lang==LANG.KOREA?"KOR":"ENG"},function(n){S_AGREE.personal_info_policy=n;util.log(n)})};PHP.get_terms_n_condition=function(){var n=glo.URL_prefix+"/get_terms_n_condition.php";$.post(n,{LANG:USER.lang==LANG.KOREA?"KOR":"ENG"},function(n){S_AGREE.terms_n_condition=n;util.log(n)})};PHP.get_server_time_kor=function(n){var t=glo.URL_prefix+"../TOWERDEFENCE_COMMON/get_server_time_kor.php";$.post(t,{UNIQ_ID:gEntrix.uniq_id,PLATFORM:util.get_platform_for_db()},function(t){if(t.includes("error")){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PHP.get_server_time_kor:"+t);return}var i=JSON.parse(t);if(i==null){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"Error PHP.get_server_time_kor(): json data is nul"+t);return}switch(i.RESULT){case"UNIQ_ID is null":case"PLATFORM is null":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PHP.get_server_time_kor:"+i.RESULT);return;case"OK":case"ok":glo.server_time={year:parseInt(i.VALUE.year,10),mon:parseInt(i.VALUE.mon,10),day:parseInt(i.VALUE.day,10),hour:parseInt(i.VALUE.hour,10),min:parseInt(i.VALUE.min,10),sec:parseInt(i.VALUE.sec,10),yoil:parseInt(i.VALUE.yoil,10),week:parseInt(i.VALUE.week,10)};n&&n();util.log("server time:"+i.VALUE.year+i.VALUE.mon+i.VALUE.day+" "+i.VALUE.hour+":"+i.VALUE.min+":"+i.VALUE.sec);return;case"ERROR":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PHP.get_server_time_kor:"+i.RESULT);return;default:util.log("정의되지 않음 json.result:"+i.RESULT)}}).fail(function(){})};PHP.RETRY.input_coupon_after={count:0,arg1:null,arg2:null};PHP.input_coupon_after=function(n,t){PHP.RETRY.input_coupon_after.count++;PHP.RETRY.input_coupon_after.arg1=n;PHP.RETRY.input_coupon_after.arg2=t;var i=glo.URL_prefix+"../TOWERDEFENCE_COMMON/COUPON/input_coupon_after.php";$.post(i,{UNIQ_ID:gEntrix.uniq_id,COUPON_BUNHO:n,PLATFORM:util.get_platform_for_db()},function(n){if(PHP.RETRY.input_coupon_after.count=0,n.includes("mysql_error")){util.log("Error in PHP.input_coupon_after():"+n);return}var i=JSON.parse(n);if(i==null){util.log("Error PHP.input_coupon_after(): json data is null");return}switch(i.RESULT){case"UNIQ_ID is null":case"COUPON_BUNHO is null":case"PLATFORM is null":S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PHP.input_coupon_after:"+i.RESULT);return;case"OK":case"ok":util.notice(TXT.coupon_reward_normal,2);t&&t("OK");return;case"ERROR":switch(i.VALUE){case"notExistCoupon_or_alreadyUse":util.notice(TXT.coupon_non_or_already,2);break;case"YouAlreadyGet":util.notice(TXT.coupon_only_user_one,2);break;case"undefined CouponType":util.notice(TXT.coupon_only_user_one,2);break;default:util.notice(TXT.coupon_some_problem,2)}t&&t("ERROR");return;default:util.log("정의되지 않음 json.result:"+i.RESULT)}}).fail(function(n){PHP.RETRY.input_coupon_after.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.input_coupon_after().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"input_coupon_after error(3):"+n.status+" Retry:"+PHP.RETRY.input_coupon_after.count)):setTimeout(function(){PHP.input_coupon_after(PHP.RETRY.input_coupon_after.arg1,PHP.RETRY.input_coupon_after.arg2)},PHP.RETRY_GAP_MS)})};PHP.is_already_orderid=function(n,t){var i=glo.URL_prefix+"is_already_orderid.php";$.post(i,{UNIQ_ID:gEntrix.uniq_id,ORDER_ID:n},function(n){n=="YES"?t&&t("YES"):t&&t("NO")}).fail(function(){t&&t("YES")})};getStringByObject=function(n){var t="";for(var i in n)t+=i+"="+n[i]+"&";return t.slice(0,-1),t};PHP.checkIpBlockingAjax=function(){var i,t;if((glo.platform==glo.PLATFORM.KT||glo.platform==glo.PLATFORM.SKB)&&glo.app_release=="RELEASE"&&(i=" (check_ip_blocking)",PHP.IS_PING_CHECK)){var r=glo.URL_prefix+"check_ip_blocking.php",n=new XMLHttpRequest;n.timeout=PHP.PING_TIME_OUT;n.ontimeout=function(){PHP.timoutCount++;PHP.timoutCount==PHP.TIME_OUT_MAX?S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PING ERROR A"):PHP.timoutCount<PHP.TIME_OUT_MAX&&setTimeout(PHP.checkIpBlockingAjax,PHP.PING_TIME_OUT)};n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<=299?(setTimeout(PHP.checkIpBlockingAjax,PHP.PING_TIME_OUT),PHP.timoutCount=0,PHP.errorCount=0):(PHP.errorCount++,PHP.errorCount==PHP.TIME_OUT_MAX?S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"PING ERROR B:"+n.status):PHP.errorCount<PHP.TIME_OUT_MAX&&setTimeout(PHP.checkIpBlockingAjax,PHP.PING_TIME_OUT)))};n.open("POST",r,!0);n.setRequestHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8");t=getStringByObject({});n.send(t);PHP.pingConsole<3||PHP.pingConsole>100&&(PHP.pingConsole=10);PHP.pingConsole++}};PHP.get_Xsolla=function(n,t,i,r){util.log("-----------------------------------");util.log("~~ 결제를 위해 보내는 값들 ~~");util.log("     uniq_id: "+gEntrix.uniq_id);util.log("     amount: "+n);util.log("     currency: "+t);util.log("     ruby: "+i);util.log("     ruby_type: "+r);util.log("-----------------------------------");$.post("http://busiedu.cafe24.com/payment/get_payment_code.php",{host_id:gEntrix.uniq_id,amount:n,currency:t,ruby:i,ruby_type:r,platform:32,xsolla_version:"wait",VER_DATE:glo.version},function(n){n.STATE=="SUCCESS"?(util.log("!! ~~ PHP.get_Xsolla SUCCESS ~~ !! "),S_INPUT_PAY.payment_code=n.PAYMENT_CODE,S_INPUT_PAY.connection_url=n.URL,S_INPUT_PAY.make_screen()):(util.log("PHP.get_Xsolla error : "+n.ERROR_CODE),S_EXITPOPUP.error_code="get_Xsolla("+n.ERROR_CODE+")",S_EXITPOPUP.start(1));util.log("PHP.get_Xsolla called!:"+n.STATE)})};PHP.get_Xsolla_result_to_code=function(){util.log("~~~~~PHP.get_Xsolla_result_to_code() ~~~~~");$.post("http://busiedu.cafe24.com/payment/get_Xsolla_result_to_code.php",{code:S_INPUT_PAY.payment_code},function(n){n.STATE!="ERROR"?(S_INPUT_PAY.result_flag=1,S_INPUT_PAY.result=n.STATE):(util.log("PHP.get_Xsolla_result_to_code error : "+n.ERROR_CODE),S_EXITPOPUP.error_code="get_Xsolla_result_to_code("+n.ERROR_CODE+")",S_EXITPOPUP.start(1));util.log("PHP.get_Xsolla_result_to_code called!:"+n.STATE)})};PHP.RETRY.get_uniq_id_from_server_for_LG={count:0,arg1:null};PHP.get_uniq_id_from_server_for_LG=function(n){PHP.RETRY.get_uniq_id_from_server_for_LG.count++;PHP.RETRY.get_uniq_id_from_server_for_LG.arg1=n;var t=glo.URL_prefix+"get_uniq_id_for_LG.php";$.post(t,{},function(n){if(PHP.RETRY.get_uniq_id_from_server_for_LG.count=0,n.substr(0,5)=="GTDLG"){gEntrix.host_id=gEntrix.uniq_id=n;STORAGE.save_uniq_id_to_localstorage_for_LG(gEntrix.uniq_id);util.log("Your uniq_id = "+gEntrix.uniq_id);var t=PHP.RETRY.get_uniq_id_from_server_for_LG.arg1;t&&t()}else{S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_uniq_id_from_server_for_LG error(1)");return}}).fail(function(n){PHP.RETRY.get_uniq_id_from_server_for_LG.count>=PHP.RETRY_MAX_NUM?(util.log("Error in PHP.get_uniq_id_from_server_for_LG().fail:"+n),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"get_uniq_id_from_server_for_LG error(3):"+n.status+" Retry:"+PHP.RETRY.get_uniq_id_from_server_for_LG.count)):setTimeout(function(){PHP.get_uniq_id_from_server_for_LG(PHP.RETRY.get_uniq_id_from_server_for_LG.arg1)},PHP.RETRY_GAP_MS)})};PHP.RETRY.get_run_count={count:0,arg1:null};PHP.get_run_count=function(n){if(PHP.RETRY.get_run_count.arg1=n,typeof CryptoJS=="undefined"){setTimeout(function(){PHP.get_run_count(PHP.RETRY.get_run_count.arg1)},1e3);return}var t=glo.URL_prefix+"../TOWERDEFENCE_COMMON/MOBILE_CONNECT/get_run_count_AES.php",i={PLATFORM:util.get_platform_for_db(),UNIQ_ID:gEntrix.uniq_id};$.post(t,{DATA:util.get_encryt(JSON.stringify(i))},function(t){util.log(t);var i=parseInt(t,10);n&&n(i)}).fail(function(){n&&n(0)})} 
var MSG={QUEUE_MAX:100,QUEUE:[],timer_interval_none_ack:null};MSG.init=function(){for(var n=1;n<=MSG.QUEUE_MAX;n++)this.QUEUE[n]={bunho:0,receiver:"",order:"",data:"",sent:0};MSG.timer_interval_none_ack=setInterval(MSG.interval_none_ack,2e3)};MSG.queue_insert=function(n,t,i){for(var r=1;r<=this.QUEUE_MAX;r++)if(this.QUEUE[r].bunho==0){WSS.msg.queue_bunho=WSS.msg.queue_bunho+1;this.QUEUE[r]={bunho:WSS.msg.queue_bunho,receiver:n,order:t,data:i,sent:0};MSG.interval();return}console.error("MSG.QUEUE[] full")};MSG.queue_delete=function(n){for(var t=1;t<=this.QUEUE_MAX;t++)if(this.QUEUE[t].bunho==n){this.QUEUE[t]={bunho:0,receiver:"",order:"",data:"",sent:0};return}util.log("MSG.QUEUE[] delete 할게 없음")};MSG.get_index_min=function(){for(var t=0,i=1e5,n=1;n<=this.QUEUE_MAX;n++)this.QUEUE[n].bunho!=0&&(this.QUEUE[n].sent>=1||this.QUEUE[n].bunho<i&&(i=this.QUEUE[n].bunho,t=n));return t};MSG.get_index_min_sent=function(){for(var t=0,i=1e5,n=1;n<=this.QUEUE_MAX;n++)this.QUEUE[n].bunho!=0&&this.QUEUE[n].sent>=1&&this.QUEUE[n].bunho<i&&(i=this.QUEUE[n].bunho,t=n);return t};MSG.get_num_sent1=function(){for(var t=0,n=1;n<=this.QUEUE_MAX;n++)this.QUEUE[n].bunho!=0&&this.QUEUE[n].sent>=1&&t++;return t};MSG.receive_ack=function(n){MSG.queue_delete(n);MSG.interval()};MSG.interval=function(){var n,t;if(MSG.get_num_sent1()==0){if(n=MSG.get_index_min(),n==0)return;t={bunho:this.QUEUE[n].bunho,receiver:this.QUEUE[n].receiver,order:this.QUEUE[n].order,data:this.QUEUE[n].data};WSS.send(JSON.stringify(t));this.QUEUE[n].sent=1;this.QUEUE[n].sent_timestamp=(new Date).getTime()}};MSG.interval_none_ack=function(){var n=MSG.get_index_min_sent(),t;if(n!=0){var i=(new Date).getTime(),r=i-MSG.QUEUE[n].sent_timestamp;if(1e3<r){if(MSG.QUEUE[n].sent>5){util.log("5회 이상 resent 메시지를 보냈으나 서버측 응답없음");console.error("\t5회 이상 resent 메시지를 보냈으나 서버측 응답없음");return}t={bunho:MSG.QUEUE[n].bunho,receiver:MSG.QUEUE[n].receiver,order:MSG.QUEUE[n].order,data:MSG.QUEUE[n].data};WSS.send(JSON.stringify(t));MSG.QUEUE[n].sent++;MSG.QUEUE[n].sent_timestamp=(new Date).getTime();util.log("#########메시지 ACK가 오지않아 메시지 다시 보냄:"+JSON.stringify(t))}}} 
var WSS={PORT:50004,URL:"ws://14.63.197.40",obj:null,msg:{queue_bunho:0,receive_msg_bunho:0}},MESSAGE;WSS.init=function(){util.log("WSS.init called");try{WSS.obj=new WebSocket(WSS.URL+":"+WSS.PORT);WSS.obj.onopen=function(){util.log("server와 연결 되었습니다.");WSS.msg.send_bunho=0;WSS.msg.send_bunho_ack=0;WSS.msg.queue_bunho=0;WSS.msg.receive_msg_bunho=0;MSG.init()};WSS.obj.onmessage=function(n){WSS.msg_decoding(n.data)};WSS.obj.onclose=function(){util.log("Server와의 연결이 종료 되었습니다.");switch(glo.scene.cur){case glo.S.GAME:S_GAME.mode.online==1&&(util.notice(TXT.server_disconnect,2),S_GAME.end(),$("#S_GAME_div").empty(),ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL));break;case glo.S.PVP_MATCHING:util.notice(TXT.server_disconnect,2);S_PVP_MATCHING.back();break;default:util.log("Server연결종료 : WSS.obj.onclose() : 아무것도 하지 않음:"+glo.scene.cur)}};WSS.obj.onerror=function(){util.log("WebSocket Error:")}}catch(n){WSS.obj={};util.log("### Error in WSS.init() : new WebSocket(WSS.URL) ###");console.error("[BSD]"+n)}};WSS.send=function(n){if(WSS.obj.readyState!=1){util.log("WSS.obj.readyState값이 1이 아니라 메시지 보내지 않음.");return}WSS.obj.send(n);util.log("메세지보냄:"+n);var t=JSON.parse(n);t.order!="ACK"&&util.log("%c메세지 보냄:"+n,"color:blue")};WSS.send_msg=function(n,t,i){MSG.queue_insert(n,t,i);return};WSS.send_join=function(){var n={user_name:gEntrix.user_name,uniq_id:gEntrix.uniq_id,score:STORAGE.pvp.score};WSS.send_msg("SERVER","JOIN",n)};WSS.send_dice_throw3=function(n,t){var i={result:n,result_str:t};WSS.send_msg("OTHERCLIENT","THROW3",i)};WSS.send_char_move=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHAR_MOVE",t)};WSS.send_char_move_onestep_fromto=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHAR_MOVE_ONESTEP_FROMTO",t)};WSS.send_change_turn=function(){WSS.send_msg("OTHERCLIENT","CHANGE_TURN","")};WSS.send_buycountry=function(n){var t=n;WSS.send_msg("OTHERCLIENT","BUYCOUNTRY",t)};WSS.send_sellcountry=function(n){var t=n;WSS.send_msg("OTHERCLIENT","SELLCOUNTRY",t)};WSS.send_sellzasan=function(n){var t=n;WSS.send_msg("OTHERCLIENT","SELLZASAN",t)};WSS.send_buyinvention=function(n){var t=n;WSS.send_msg("OTHERCLIENT","BUYINVENTION",t)};WSS.send_takeover=function(n,t){var i={board_index:n,after_dev_stage:t};WSS.send_msg("OTHERCLIENT","TAKEOVER",i)};WSS.send_buyresort=function(n){var t=n;WSS.send_msg("OTHERCLIENT","BUYRESORT",t)};WSS.send_exitisland=function(){WSS.send_msg("OTHERCLIENT","EXITISLAND","")};WSS.send_economy=function(n,t,i,r){var u={type:n,result:t,board_index_arr:i,why:r};WSS.send_msg("OTHERCLIENT","ECONOMY",u)};WSS.send_gotoedge=function(n){var t=n;WSS.send_msg("OTHERCLIENT","GOTOEDGE",t)};WSS.send_startedge=function(n,t,i){var r={board_index:n,after_dev_stage:t,before_scene:i};WSS.send_msg("OTHERCLIENT","STARTEDGE",r)};WSS.send_startedge_donate=function(){WSS.send_msg("OTHERCLIENT","STARTEDGE_DONATE","")};WSS.send_pasan=function(){WSS.send_msg("OTHERCLIENT","PASAN","")};WSS.send_sellabs_success=function(n,t,i){var r={num:n,board_index_array:t,board_index_array_select:i};WSS.send_msg("OTHERCLIENT","SELLABS_SUCCESS",r)};WSS.send_chance=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHANCE",t)};WSS.send_chance_close=function(){WSS.send_msg("OTHERCLIENT","CHANCE_CLOSE","")};WSS.send_chance1=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHANCE1",t)};WSS.send_chance2=function(){WSS.send_msg("OTHERCLIENT","CHANCE2","")};WSS.send_chance3=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHANCE3",t)};WSS.send_dice_throw1=function(n){var t=n;WSS.send_msg("OTHERCLIENT","THROW1",t)};WSS.send_dice_throw1_red=function(n){var t=n;WSS.send_msg("OTHERCLIENT","THROW1_RED",t)};WSS.send_chance6=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHANCE6",t)};WSS.send_chance7=function(){WSS.send_msg("OTHERCLIENT","CHANCE7","")};WSS.send_chance8=function(){WSS.send_msg("OTHERCLIENT","CHANCE8","")};WSS.send_chance9=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHANCE9",t)};WSS.send_dice_throw2=function(n,t){var i={dice1:n,dice2:t};WSS.send_msg("OTHERCLIENT","THROW2",i)};WSS.send_chance16=function(n){var t=n;WSS.send_msg("OTHERCLIENT","CHANCE16",t)};WSS.send_chance17=function(){WSS.send_msg("OTHERCLIENT","CHANCE17","")};WSS.send_chance18=function(){WSS.send_msg("OTHERCLIENT","CHANCE18","")};WSS.send_chance19=function(){WSS.send_msg("OTHERCLIENT","CHANCE19","")};WSS.send_chance20=function(){WSS.send_msg("OTHERCLIENT","CHANCE20","")};WSS.send_freepass=function(){WSS.send_msg("OTHERCLIENT","FREEPASS_USE","")};WSS.send_roomout=function(n){var t={why:n};WSS.send_msg("SERVER","ROOMOUT",t)};WSS.send_debug=function(){WSS.send_msg("SERVER","DEBUG","")};WSS.send_onemore=function(){WSS.send_msg("SERVER","ONEMORE","")};WSS.msg_decoding=function(n){var t=JSON.parse(n),i;if(t.order!="ACK"&&util.log("%c메시지 받음:"+n,"color:red"),t.order!="ACK"){if(i={receiver:"SERVER",order:"ACK",data:t.bunho},WSS.send(JSON.stringify(i)),WSS.msg.receive_msg_bunho>=t.bunho){util.log("벌써 처리한 메시지임. ACK만 보내고 끝냄");return}WSS.msg.receive_msg_bunho=t.bunho}switch(t.receiver){case"SERVER_TO_CLIENT":WSS.msg_decoding_SERVER_TO_CLIENT(t);break;case"OTHERCLIENT":WSS.msg_decoding_OTHER_CLINET(t)}};WSS.msg_decoding_SERVER_TO_CLIENT=function(n){var i,t;switch(n.order){case"ACK":i=n.data;MSG.receive_ack(i);break;case"JOIN_ok":var r=n.data.room_bunho,u=n.data.location,f=n.data.str;S_PVP_MATCHING.room_bunho=r;util.log("==========방 할당 받음 : 방번호:"+r+", 위치:"+u+"  설명:"+f);break;case"MATCH_ok":t=n.data;S_GAME.map=t.map;util.log("서버에서 내려준 맵번호 : "+S_GAME.map);t.user1.uniq_id==gEntrix.uniq_id?(S_PVP_MATCHING.me.char_info=parseInt(t.user1.char_info,10),S_PVP_MATCHING.me.sun_dice=t.user1.sun_dice,S_PVP_MATCHING.other.uniq_id=t.user2.uniq_id,S_PVP_MATCHING.other.user_name=t.user2.user_name,S_PVP_MATCHING.other.char_info=parseInt(t.user2.char_info,10),S_PVP_MATCHING.other.sun_dice=t.user2.sun_dice,S_PVP_MATCHING.other.score=parseInt(t.user2.score,10)):(S_PVP_MATCHING.me.char_info=parseInt(t.user2.char_info,10),S_PVP_MATCHING.me.sun_dice=t.user2.sun_dice,S_PVP_MATCHING.other.uniq_id=t.user1.uniq_id,S_PVP_MATCHING.other.user_name=t.user1.user_name,S_PVP_MATCHING.other.char_info=parseInt(t.user1.char_info,10),S_PVP_MATCHING.other.sun_dice=t.user1.sun_dice,S_PVP_MATCHING.other.score=parseInt(t.user1.score,10));S_PVP_MATCHING.status=ENUM.PVP_MATCHING_STATUS.AFTER;S_PVP_MATCHING.matching_after();break;case"OTHER_ROOMOUT":util.log("###### 상대가 나갔다 #######:"+n.data.why);switch(glo.scene.cur){case glo.S.GAME:util.notice(TXT.other_force_roomout,2);S_PVP_MATCHING.room_bunho=0;S_GAME.pvp_win(ENUM.WINWHY.ROOMOUT);break;case glo.S.GAMERESULT:util.notice(TXT.other_select_goout,2);S_PVP_MATCHING.room_bunho=0;$("#GRW_btn1").css({display:"none"});$("#GRW_btn2").css({display:"block",left:"421px"});S_GAMERESULT.focus=2;break;case glo.S.PVP_MATCHING:util.notice(TXT.other_select_goout,2);S_PVP_MATCHING.back();break;default:util.log("###ERROR### 의도하지 않은 scene:"+glo.scene.cur+" 에서, OTHER_ROOMOUT발생")}break;case"OTHER_ONEMORE":switch(glo.scene.cur){case glo.S.GAMERESULT:util.notice(TXT.other_request_onemore,2);break;case glo.S.PVP_MATCHING:break;default:console.error("예기치 않은 화면에서 OTHER_ONEMORE가 왔음 :"+glo.scene.cur+"  예외처리 요망-강제 roomout등 조치 할것")}break;case"PVP_MATCHING_BACK_OK":glo.scene.cur==glo.S.PVP_MATCHING&&S_PVP_MATCHING.back();break;case"PVP_MATCHING_BACK_NO":util.log("상대와 연결 되었기에 \t PVP_MATCHING_BACK을 진행 하지 않음");break;case"ERROR":WSS.msg_decoding_ERROR(n)}};WSS.msg_decoding_OTHER_CLINET=function(n){var f,o,s,h,c,r,u,i,l,e,t;switch(n.order){case"THROW3":util.log("########주사위 3개 던져라###########");f=DICE.result=n.data.result;o=n.data.result_str;DICE.throw3(f,function(){DICE.view_result(f.tot,o);setTimeout(function(){DICE.hide_dice()},2e3)});break;case"CHAR_MOVE":t=3;s=n.data;CHAR.move(t,s);break;case"CHAR_MOVE_ONESTEP_FROMTO":t=3;h=n.data;CHAR.move_onestep_fromto(t,h);break;case"CHANGE_TURN":S_GAME.turn==1&&util.log("###########ERROR  내 턴인데...상대가 change_turn했다는 것은 말이 안된다. 오류다.########");S_GAME.change_turn();break;case"BUYCOUNTRY":POPUP_BUYCOUNTRY.after_dev_stage=n.data;POPUP_BUYCOUNTRY.player=3;POPUP_BUYCOUNTRY.buy();break;case"SELLCOUNTRY":POPUP_SELLCOUNTRY.board_index_sell_country=n.data;POPUP_SELLCOUNTRY.player=3;POPUP_SELLCOUNTRY.sell();break;case"SELLZASAN":POPUP_SELLZASAN.board_index_sell_zasan=n.data;POPUP_SELLZASAN.player=3;POPUP_SELLZASAN.sell();break;case"BUYINVENTION":POPUP_INVENTION.board_index=n.data;POPUP_INVENTION.player=3;POPUP_INVENTION.focus=1;POPUP_INVENTION.menu_run_run();break;case"TAKEOVER":POPUP_TAKEOVER.board_index=n.data.board_index;POPUP_TAKEOVER.after_dev_stage=n.data.after_dev_stage;POPUP_TAKEOVER.buy();break;case"BUYRESORT":POPUP_RESORT.board_index=n.data;POPUP_RESORT.buy();break;case"EXITISLAND":POPUP_ISLAND.player=3;POPUP_ISLAND.focus=1;POPUP_ISLAND.menu_run_run();break;case"ECONOMY":ECONOMY.type=n.data.type;ECONOMY.result=n.data.result;ECONOMY.board_index_arr=n.data.board_index_arr;ECONOMY.num=3;ECONOMY.callbackfn=null;ECONOMY.make_screen();ECONOMY.make_random_focus();switch(n.data.why){case"정기적인경제효과":ECONOMY.flag_2turn=0;ECONOMY.callbackfn=S_GAME.change_turn}break;case"CHANCE":c=n.data;POPUP_CHANCE.init_online(c);break;case"CHANCE_CLOSE":POPUP_CHANCE.close();break;case"CHANCE1":r=n.data;POPUP_CHANCE.menu_run_1_select(r);break;case"CHANCE2":POPUP_CHANCE.player=3;POPUP_CHANCE.menu_run_2();break;case"CHANCE3":POPUP_CHANCE.player=3;r=n.data;POPUP_CHANCE.menu_run_3_sell(r);break;case"THROW1":i=n.data;DICE.throw1(i,function(){});break;case"THROW1_RED":i=n.data;DICE.throw1_red(i,function(){});break;case"CHANCE6":u=n.data;POPUP_CHANCE.menu_run_6_select(u);break;case"CHANCE7":POPUP_CHANCE.player=3;POPUP_CHANCE.menu_run_3_after();break;case"CHANCE8":POPUP_CHANCE.player=3;POPUP_CHANCE.menu_run_8();break;case"CHANCE9":u=n.data;POPUP_CHANCE.menu_run_9_select(u);break;case"THROW2":POPUP_CHANCE.player=3;i=n.data.dice1;l=n.data.dice2;POPUP_CHANCE.menu_run_11(i,l);break;case"CHANCE16":POPUP_CHANCE.player=3;POPUP_CHANCE.chance16=n.data;POPUP_CHANCE.menu_run_16_next_next();break;case"CHANCE17":POPUP_CHANCE.player=3;POPUP_CHANCE.menu_run_17();break;case"CHANCE18":POPUP_CHANCE.menu_run_18();break;case"CHANCE19":POPUP_CHANCE.menu_run_19();break;case"CHANCE20":POPUP_CHANCE.menu_run_20();break;case"FREEPASS_USE":t=3;util.notice_player(t,TXT.use_freepass);PLAYER.info[t].freepass_card--;PLAYER.ui_draw_freedefence_card(t);BOARD.arrive_player_end();break;case"GOTOEDGE":var t=3,p=n.data,a=t,v=CAL.get_goto_gold(),y=TXT.gogo_payment+":"+util.get_number_with_comma(v);util.log(y);util.notice_player_num(t,TXT.gogo_payment,-CAL.get_goto_gold());CAL.move_gold(a,0,v,y,function(){PLAYER.info[a].goto_flag=0});util.log("#################GOSTOEDGE##################");break;case"STARTEDGE":POPUP_BUYCOUNTRY.player=3;POPUP_BUYCOUNTRY.board_index=n.data.board_index;POPUP_BUYCOUNTRY.after_dev_stage=n.data.after_dev_stage;POPUP_BUYCOUNTRY.before_scene=n.data.before_scene;POPUP_BUYCOUNTRY.buy();break;case"STARTEDGE_DONATE":e=function(){if(ANI.ing[1]==1||ANI.ing[3]==1)util.log("==========골드 애니메이션중 ================"),setTimeout(e,100);else BOARD.arrive_EDGE_START_next_next(3)};e();break;case"PASAN":t=3;PLAYER.info[t].pasan_flag=1;POPUP_SELLABS.callback_fn&&POPUP_SELLABS.callback_fn(t);break;case"SELLABS_SUCCESS":SELECTTILE_ABS.num=n.data.num;SELECTTILE_ABS.board_index_array=n.data.board_index_array;SELECTTILE_ABS.board_index_array_select=n.data.board_index_array_select;SELECTTILE_ABS.where_focus=2;SELECTTILE_ABS.abs_focus=1;SELECTTILE_ABS.player=3;SELECTTILE_ABS.menu_run_run()}};WSS.msg_decoding_ERROR=function(n){switch(n.data.type){case"DUPLICATE_UNIQ_ID_NOT_JOIN":util.notice(TXT.duplicate_id_not_join,2);S_PVP_MATCHING.back();break;default:util.notice(data.error_msg,4);console.error("[ErrMsg]"+data.error_msg+" [detail]:"+data.detail)}};WSS.msg_decoding_REALTIME_NOTICE=function(n){var r=n.split(":"),t=r[1].split(","),i;switch(t[0]){case"ALL":REALTIME_NOTICE.add_notice(t[1]);break;case"HCN":case"DLIVE":case"CJH":case"KT":if(util_kt.isLowModel())return;i="["+t[0]+"]";REALTIME_NOTICE.add_notice(i+t[1]);break;case"SS":case"ORANGE":util.log("실시간 공지가 왔지만 해당 플랫폼이 아니라 무시함:"+t[1]);break;default:util.log("Error in WSS.msg_decoding():REALTIME_NOTICE:"+t[0])}};MESSAGE={bunho:0,QUEUE_MAX:2e3,QUEUE_SEND:null};MESSAGE.init=function(){MESSAGE.QUEUE_SEND=[];MESSAGE.bunho=0;for(var n=1;n<=MESSAGE.QUEUE_MAX;n++)MESSAGE.QUEUE_SEND[n]={},MESSAGE.QUEUE_SEND[n].msg_id=null,MESSAGE.QUEUE_SEND[n].msg=null,MESSAGE.QUEUE_SEND[n].timestamp=null,MESSAGE.QUEUE_SEND[n].re_send=null;MESSAGE.interval()};MESSAGE.insert=function(n,t){var i,r;if(MESSAGE.QUEUE_SEND==null){util.log("#####MESSAGE.insert() 에서 오류 발생!! MESSAGE.QUEUE_SEND가 null임");return}for(i=1;i<=MESSAGE.QUEUE_MAX;i++)if(MESSAGE.QUEUE_SEND[i].msg_id==null){MESSAGE.QUEUE_SEND[i].msg_id=n;MESSAGE.QUEUE_SEND[i].msg=t;MESSAGE.QUEUE_SEND[i].timestamp=(new Date).getTime();MESSAGE.QUEUE_SEND[i].re_send=0;return}util.log("메시지 큐가 full 입니다. 오류 이므로 접속 종료 합니다.");r="오류발생<br>발생위치:MESSAGE.insert()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+getDate2()+" "+getTime2()+"<br>ErrorMsg: 메시지 큐가 full 입니다. <br>";PHP.put_error_log(r);WSS.obj.close()};MESSAGE.del=function(n){for(var t=1;t<=MESSAGE.QUEUE_MAX;t++)if(MESSAGE.QUEUE_SEND[t].msg_id==n){MESSAGE.QUEUE_SEND[t].msg_id=null;MESSAGE.QUEUE_SEND[t].msg=null;MESSAGE.QUEUE_SEND[t].timestamp=null;MESSAGE.QUEUE_SEND[t].re_send=null;return}util.log("###오류!! 지울려는데 해당하는 메시지id"+n+"가 없음, 그냥 넘어감.")};MESSAGE.re_send=function(n){if(n==null){util.log("####오류발생 MESSAGE.re_send()");return}for(var t=1;t<=MESSAGE.QUEUE_MAX;t++)if(MESSAGE.QUEUE_SEND[t].msg_id==n){if(MESSAGE.QUEUE_SEND[t].re_send==null&&(MESSAGE.QUEUE_SEND[t].re_send=0,util.log("####오류발생 그러나 보정함. re_send=0 처리 함")),MESSAGE.QUEUE_SEND[t].re_send++,MESSAGE.QUEUE_SEND[t].re_send>=5){WSS.obj.close();return}WSS.obj.send(n+"::"+MESSAGE.QUEUE_SEND[t].msg);return}};MESSAGE.interval=function(){var t=(new Date).getTime(),n;if(MESSAGE.QUEUE_SEND!=null){for(n=1;n<=MESSAGE.QUEUE_MAX;n++)if(MESSAGE.QUEUE_SEND[n].msg_id==null)continue;else t>=MESSAGE.QUEUE_SEND[n].timestamp+5e3&&(MESSAGE.QUEUE_SEND[n].timestamp=t,MESSAGE.re_send(MESSAGE.QUEUE_SEND[n].msg_id));setTimeout(MESSAGE.interval,5e3)}};MESSAGE.free=function(){MESSAGE.QUEUE_SEND=null};MESSAGE.get_msg_id=function(){return"C"+MESSAGE.bunho} 
var SOUND={EFFECT:{THROW_DICE:0,NUM1:1,NUM2:2,NUM3:3,NUM4:4,NUM5:5,NUM6:6,NUM7:7,NUM8:8,NUM9:9,NUM10:10,NUM11:11,POPUP_WINNER:12,POPUP_MYTURN:13,POPUP_CHANCE:14,POPUP_ERROR:15,POPUP_NORMAL:16,SAND_CLOCK:17,ECONOMY:18,CHAR_MOVE:19,READY_START:20,COIN_UPDOWN:21,CARD_TURN:22,BUY_COUNTRY:23,GAME_FAIL:24,DOUBLE:25,TRIPLE:26,AIRPLANE_BELL:27},EFFECT_array:["./sound/throw_dice.mp3","./sound/num1_eng.mp3","./sound/num2_eng.mp3","./sound/num3_eng.mp3","./sound/num4_eng.mp3","./sound/num5_eng.mp3","./sound/num6_eng.mp3","./sound/num7_eng.mp3","./sound/num8_eng.mp3","./sound/num9_eng.mp3","./sound/num10_eng.mp3","./sound/num11_eng.mp3","./sound/popup_winner.mp3","./sound/popup_myturn.mp3","./sound/popup_chance.mp3","./sound/popup_error.mp3","./sound/popup_normal.mp3","./sound/sand_clock.mp3","./sound/economy.mp3","./sound/char_move.mp3","./sound/ready_start.mp3","./sound/coin_updown.mp3","./sound/card_turn.mp3","./sound/buy_country.mp3","./sound/game_fail.mp3","./sound/double.mp3","./sound/triple.mp3","./sound/airplane_bell_sound.mp3",],BGM:{BGM0:1,BGM1:2,BGM2:3,BGM3:4,BGM4:5,BGM5:6},BGM_DEFINE:[{},{filename:"./sound/BGM0_Adventures-in-Adventureland.mp3",audio:null,title:"Adventures-in-Adventureland.mp3"},{filename:"./sound/BGM1_Monkeys-Spinning-Monkeys.mp3",audio:null,title:"Monkeys-Spinning-Monkeys"},{filename:"./sound/BGM2_Run-Amok.mp3",audio:null,title:"Run-Amok"},{filename:"./sound/BGM3_maxkomusic-christmas-is-coming.mp3",audio:null,title:"maxkomusic-christmas-is-coming"},{filename:"./sound/BGM4_Move-Forward.mp3",audio:null,title:"Move-Forward"},{filename:"./sound/BGM5_Thatched-Villagers.mp3",audio:null,title:"Thatched-Villagers"},],audio_bgm:null,cur_bgm_index:0,cur_effect_index:0,resume_bgm_index:0};SOUND.init=function(){SOUND.audio_bgm=document.createElement("audio");util_webaudio.init(SOUND.EFFECT_array)};SOUND.play_effect=function(n){if(USER.sound_effect==1)try{if(glo.flag.AZE_ad_playing==1)return;if(glo.platform==glo.PLATFORM.AZE&&document.visibilityState==="hidden")return;util_webaudio.play(n);SOUND.cur_effect_index=n}catch(t){util.log("SOUND.play_effect()에서 효과음 play못함. 아마도 local에서 실행 한듯. 서버에서 실행하면 나옴.:"+n)}};SOUND.stop_effect=function(n){util_webaudio.stop(n)};SOUND.stop_effect_all=function(){util_webaudio.stopAll()};SOUND.preload=function(){};SOUND.play_bgm=function(n){if(USER.sound_bgm!=0&&glo.flag.AZE_ad_playing!=1&&(glo.platform!=glo.PLATFORM.AZE||document.visibilityState!=="hidden")){SOUND.cur_bgm_index=n;SOUND.resume_bgm_index=n;var t=SOUND.audio_bgm;t.src=SOUND.BGM_DEFINE[n].filename;t.load();t.loop=!1;t.oncanplaythrough=function(){t.volume=SOUND.cur_bgm_index==SOUND.BGM.BGM0?.49:.25;t.play()};t.onended=function(){console.log("###################ended############");switch(glo.scene.cur){case glo.S.GAME:if(SOUND.cur_bgm_index==SOUND.BGM.BGM0)switch(S_GAME.map){case 1:SOUND.play_bgm(SOUND.BGM.BGM1);break;case 2:SOUND.play_bgm(SOUND.BGM.BGM2);break;case 3:SOUND.play_bgm(SOUND.BGM.BGM3);break;case 4:SOUND.play_bgm(SOUND.BGM.BGM4);break;case 5:SOUND.play_bgm(SOUND.BGM.BGM5)}else SOUND.play_bgm(SOUND.BGM.BGM0);break;default:SOUND.play_bgm(SOUND.BGM.BGM0);return}}}};SOUND.stop_bgm=function(){SOUND.audio_bgm.pause();SOUND.cur_bgm_index=0};SOUND.get_bgm_index=function(n){switch(n){case 1:return SOUND.BGM.BGM1;case 2:return SOUND.BGM.BGM2;case 3:return SOUND.BGM.BGM3;case 4:return SOUND.BGM.BGM4;case 5:return SOUND.BGM.BGM5}} 
function SoundSource(n,t,i){this.context=n;this.urlList=t;this.onload=i;this.bufferList=[];this.sound=[];this.soundBuf=[];this.loadCount=0;this.load();var r=this}var util_webaudio=util_webaudio=util_webaudio||{};util_webaudio=function(){function r(){}var t={},i,n;return t.name="webaudio",t.init=function(t){sounds=t;console.log(" util_webaudio  sound_arr:  "+JSON.stringify(t));window.AudioContext=window.AudioContext||window.webkitAudioContext;i=new AudioContext;n=new SoundSource(i,sounds,r)},t.play=function(t){n&&n.start(t)},t.stop=function(t){n&&n.stop(t)},t.stopAll=function(){n&&n.stopAll()},t}();SoundSource.prototype.loadBuffer=function(n,t){var r=new XMLHttpRequest,i;r.open("GET",n,!0);r.responseType="arraybuffer";i=this;r.onload=function(){i.context.decodeAudioData(r.response,function(r){if(!r){console.log("[ERROR] SoundSource error decoding file data: "+n);return}if(i.bufferList[t]=r,i.prepareSound(t),i.sound[t]=null,++i.loadCount===i.urlList.length&&i.onload!=null)i.onload(i.bufferList)})};r.onerror=function(){console.log("[ERROR] SoundSource BufferLoader: XHR error")};r.send()};SoundSource.prototype.prepareSound=function(n){this.soundBuf[n]=this.context.createBufferSource();this.soundBuf[n].buffer=this.bufferList[n];this.soundBuf[n].connect(this.context.destination)};SoundSource.prototype.load=function(){for(var n=0;n<this.urlList.length;++n)this.loadBuffer(this.urlList[n],n)};SoundSource.prototype.start=function(n){this.stop(n);this.soundBuf[n].start(0);this.sound[n]=this.soundBuf[n];this.prepareSound(n)};SoundSource.prototype.stop=function(n){console.log(" stop  this.sound[index]:"+this.sound[n]);var t=this.sound[n];t!=null&&(t.stop(0),this.sound[n]=null)};SoundSource.prototype.stopAll=function(){for(var t,n=0;n<this.sound.length;n++)(t=this.sound[n])!=null&&this.stop(n)} 
var BAL={PHP:{}};BAL.get_set_uniq_id=function(){var t="busidol.bm.uniq_id.txt",n;try{n=AndroidBridge.loadLocalData(t)}catch(i){n=localStorage.getItem(t)}if(n==""||n==null){gEntrix.host_id=gEntrix.uniq_id=BAL.make_uniq_id();try{AndroidBridge.saveLocalData(t,util.encrypt(gEntrix.uniq_id))}catch(i){localStorage.setItem(t,util.encrypt(gEntrix.uniq_id))}}else gEntrix.host_id=gEntrix.uniq_id=util.decrypt(n)};BAL.make_uniq_id=function(){var n=new Date,c=n.getFullYear(),t=n.getMonth()+1,i=n.getDate(),l=t<10?"0"+t:""+t,a=i<10?"0"+i:""+i,r=c+""+l+""+a,u=n.getHours(),f=n.getMinutes(),e=n.getSeconds(),v=u<10?"0"+u:u,y=f<10?"0"+f:f,p=e<10?"0"+e:e,o=v+""+y+""+p,s=1e3+Math.floor(Math.random()*9e3),h="";glo.app_release=="TEST"&&(h="T");switch(glo.platform){case glo.PLATFORM.BAL:return"BAL_"+r+"_"+o+"_"+s;case glo.PLATFORM.AZE:return"AZE_"+r+"_"+o+"_"+s;case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_SMARTTV:default:return"BMLG"+h+"_"+r+""+o+"_"+s}} 
var STORAGE={pvp:null};STORAGE.init=function(){STORAGE.init_pvp()};STORAGE.init_gongji=function(){for(var n=1;n<=DEFINE.USERINFO_MAX_GONGJI;n++)STORAGE.gongji[n]="0"};STORAGE.init_item=function(){STORAGE.item_bou=[];for(var n=1;n<=5;n++)STORAGE.item_bou[n]={bunho:n,bou_num:0}};STORAGE.init_pvp=function(){STORAGE.pvp={free_enterance:10,score:0,order:0,firehistory:{day:{tot:0,win:0,lose:0},week:{tot:0,win:0,lose:0},tot:{tot:0,win:0,lose:0}},ranklist:[],reward_str:"dia",reward_ruby:[0,30,20,15,10,5,2],reward_dia:[0,3e3,2e3,1500,1e3,500,200],update_time:null,status:null,latest_other_uniq_id:null,latest_other_count:0};for(var n=1;n<=100;n++)STORAGE.pvp.ranklist[n]={},STORAGE.pvp.ranklist[n].order=n,STORAGE.pvp.ranklist[n].uniq_id=null,STORAGE.pvp.ranklist[n].name="",STORAGE.pvp.ranklist[n].score=0,STORAGE.pvp.ranklist[n].grade=0};STORAGE.make_username_first=function(){var n="guest";gEntrix.user_name=gEntrix.user_name2=n;util.log("이름 설정:"+n)};STORAGE.decode_data_all=function(n,t){n.normal.result!="OK"?(PHP.daily_intall_count(),STORAGE.make_username_first(),PHP.put_userinfo_normal("신규사용자"),glo.flag.first_user=1,(glo.platform==glo.PLATFORM.LG_STANDBYME||glo.platform==glo.PLATFORM.LG_WEEKEND||glo.platform==glo.PLATFORM.LG_SMARTTV)&&(USER.lang=util_webos.language=="ko-KR"?LANG.KOREA:LANG.ENGLISH)):(PHP.daily_run_count(),STORAGE.decode_normal(n.normal.value));glo.timestamp_start=parseInt(n.etc.value.timestamp,10);glo.server_time={year:parseInt(n.etc.value.year,10),mon:parseInt(n.etc.value.mon,10),day:parseInt(n.etc.value.day,10),hour:parseInt(n.etc.value.hour,10),min:parseInt(n.etc.value.min,10),sec:parseInt(n.etc.value.sec,10),yoil:parseInt(n.etc.value.yoil,10),week:parseInt(n.etc.value.week,10)};glo.pay_30day_pass_end_timestamp=parseInt(n.etc.value.pay_30day_pass_end_timestamp,10);util.log("30일 이용권 기한:"+glo.pay_30day_pass_end_timestamp);var i=util.get_cur_timestamp(),r=glo.pay_30day_pass_end_timestamp-i;r>0&&S_MAINMENU.make_screen_30day_interval();glo.today_play_count=parseInt(n.etc.value.today_play_count,10);t&&t()};STORAGE.decode_payinfo_all=function(n,t){STORAGE.payinfo.daily_package_gold=parseInt(n.payinfo.value.daily_package_gold,10);STORAGE.payinfo.daily_package_rainbow=parseInt(n.payinfo.value.daily_package_rainbow,10);STORAGE.payinfo.beginner_package=parseInt(n.payinfo.value.beginner_package,10);STORAGE.payinfo.item_package=parseInt(n.payinfo.value.item_package,10);STORAGE.payinfo.hero_package_date=n.payinfo.value.hero_package_date;STORAGE.payinfo.bundle_package_date=n.payinfo.value.bundle_package_date;var i=parseInt(n.payinfo.value.monthly_pay_is,10);STORAGE.payinfo.monthly_pay_accday=parseInt(n.payinfo.value.monthly_pay_accday,10);STORAGE.payinfo.monthly_pay_is=i;t&&t(n)};STORAGE.decode_normal=function(n){gEntrix.user_name=n.USER_NAME;gEntrix.user_name2=n.USER_NAME2;switch(glo.platform){case glo.PLATFORM.ATV:case glo.PLATFORM.AMO:case glo.PLATFORM.BAL:break;default:USER.lang=parseInt(n.LANG,10)}USER.sound_bgm=parseInt(n.SOUND_BGM,10);USER.sound_effect=parseInt(n.SOUND_EFFECT,10);USER.safemode=parseInt(n.SAFEMODE,10);USER.chul_date=n.CHUL_DATE;USER.chul_num=parseInt(n.CHUL_NUM,10);USER.guide_line=parseInt(n.GUIDE_LINE,10);(glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL)&&(USER.guide_line=0);USER.gacha_time=parseInt(n.GACHA_TIME,10);USER.level=parseInt(n.LEVEL,10);USER.level_exp=parseInt(n.LEVEL_EXP,10);USER.is_numkey=parseInt(n.IS_NUMKEY,10);isNaN(USER.is_numkey)&&(USER.is_numkey=0);USER.is_numkey==1?glo.is_numkey=!0:USER.is_numkey==-1&&(glo.is_numkey=!1);USER.vibration=parseInt(n.VIBRATION,10);isNaN(USER.vibration)&&(USER.vibration=1)};STORAGE.encode_stage=function(){for(var t,i,r="",n=1;n<=DEFINE.USER_MAX_STAGE;n++)if(STORAGE.stage_easy[n]=="A"||STORAGE.stage_easy[n]=="B"||STORAGE.stage_easy[n]=="C"||STORAGE.stage_easy[n]=="D"||STORAGE.stage_easy[n]=="T")r+=n==1?STORAGE.stage_easy[n]:","+STORAGE.stage_easy[n];else break;if(util.log("encode_stage_easy_data==>"+r),r==null||r=="")return util.log("Error in STORAGE.encode_stage():easy"),"error";for(t="",n=1;n<=DEFINE.USER_MAX_STAGE;n++)if(STORAGE.stage_normal[n]=="C"||STORAGE.stage_normal[n]=="T")t+=n==1?STORAGE.stage_normal[n]:","+STORAGE.stage_normal[n];else break;if(util.log("encode_stage_normal_data==>"+t),t==null||t=="")return util.log("Error in STORAGE.encode_stage():normal"),"error";for(i="",n=1;n<=DEFINE.USER_MAX_STAGE;n++)if(STORAGE.stage_hard[n]=="C"||STORAGE.stage_hard[n]=="T")i+=n==1?STORAGE.stage_hard[n]:","+STORAGE.stage_hard[n];else break;return(util.log("encode_stage_hard_data==>"+i),i==null||i=="")?(util.log("Error in STORAGE.encode_stage():hard"),"error"):{easy:r,normal:t,hard:i}};STORAGE.decode_stage=function(n){var t,r;STORAGE.init_stage();var f=n.DATA_EASY,i=f.split(","),u=i.length;if(u>DEFINE.USER_MAX_STAGE){util.log("Error in STORAGE.decode_stage(): 사용자 data가 USER_MAX_STAGE보다 큽니다. USER_MAX_STAGE를 늘려 주세요.");r="오류발생<br>funtion:STORAGE.decode_stage()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg: 스테이지 data가 USER_MAX_STAGE보다 큽니다.<br>ErrorDetail :<br>사용자 stage_len="+u+"/USER_MAX_STAGE="+DEFINE.USER_MAX_STAGE;util.log(r);PHP.put_error_log(r);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_stage:easy error USER_MAX_STAGE");return}for(t=0;t<u;t++)i[t]=="A"||i[t]=="B"||i[t]=="C"||i[t]=="D"||i[t]=="T"?STORAGE.stage_easy[t+1]=i[t]:(r="오류발생<br>funtion:STORAGE.decode_stage():easy<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  스테이지 data가 ABCDT이외의 것이 확인됨.<br>ErrorDetail :<br>사용자 stage_data["+t+"]="+i[t],util.log(r),PHP.put_error_log(r),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_stage: find ABCDT other"));var e=n.DATA_NORMAL,i=e.split(","),u=i.length;if(u>DEFINE.USER_MAX_STAGE){util.log("Error in STORAGE.decode_stage(): 사용자 data가 USER_MAX_STAGE보다 큽니다. USER_MAX_STAGE를 늘려 주세요.");r="오류발생<br>funtion:STORAGE.decode_stage():normal<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg: 스테이지 data가 USER_MAX_STAGE보다 큽니다.<br>ErrorDetail :<br>사용자 stage_len="+u+"/USER_MAX_STAGE="+DEFINE.USER_MAX_STAGE;util.log(r);PHP.put_error_log(r);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_stage:normal error USER_MAX_STAGE");return}for(t=0;t<u;t++)i[t]=="C"||i[t]=="T"?STORAGE.stage_normal[t+1]=i[t]:(r="오류발생<br>funtion:STORAGE.decode_stage() normal<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  스테이지 data가 ABCDT이외의 것이 확인됨.<br>ErrorDetail :<br>사용자 stage_data["+t+"]="+i[t],util.log(r),PHP.put_error_log(r),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_stage:normal find ABCDT other"));var o=n.DATA_HARD,i=o.split(","),u=i.length;if(u>DEFINE.USER_MAX_STAGE){util.log("Error in STORAGE.decode_stage(): 사용자 data가 USER_MAX_STAGE보다 큽니다. USER_MAX_STAGE를 늘려 주세요.");r="오류발생<br>funtion:STORAGE.decode_stage():hard<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg: 스테이지 data가 USER_MAX_STAGE보다 큽니다.<br>ErrorDetail :<br>사용자 stage_len="+u+"/USER_MAX_STAGE="+DEFINE.USER_MAX_STAGE;util.log(r);PHP.put_error_log(r);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_stage:hard error USER_MAX_STAGE");return}for(t=0;t<u;t++)i[t]=="C"||i[t]=="T"?STORAGE.stage_hard[t+1]=i[t]:(r="오류발생<br>funtion:STORAGE.decode_stage() hard<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  스테이지 data가 ABCDT이외의 것이 확인됨.<br>ErrorDetail :<br>사용자 stage_data["+t+"]="+i[t],util.log(r),PHP.put_error_log(r),S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_stage: hard find ABCDT other"))};STORAGE.encode_tower_info_for_pvp=function(){for(var i,r,n="",t=1;t<=5;t++)STORAGE.tower_selected[t]!=0&&(i=STORAGE.tower_selected[t],r=S_MAKETEAM_TOWER.get_level_tower(i),n+=t==1?i+","+r:";"+i+","+r);if(util.log("encode_stage_data==>"+n),n==null||n==""){util.log("Error in STORAGE.encode_tower_info_for_pvp():");S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.encode_tower_info_for_pvp: selected_tower null");return}return n};STORAGE.encode_tower=function(){for(var i,t="",n=1;n<=glo.TOWER_TOT_NUM;n++)if(STORAGE.tower_bou[n].tower_bunho_g!=0){var r=STORAGE.tower_bou[n].tower_bunho_g,u=STORAGE.tower_bou[n].level,f=STORAGE.tower_bou[n].card;t+=n==1?r+":"+u+":"+f:","+r+":"+u+":"+f}if(util.log("encode_stage_data==>"+t),t==null||t==""){util.log("Error in STORAGE.encode_tower():");S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.encode_tower: bou_tower null");return}for(i="",n=1;n<=5;n++)STORAGE.tower_selected[n]!=0&&(i+=n==1?STORAGE.tower_selected[n]:","+STORAGE.tower_selected[n]);return{bou_tower:t,selected_tower:i}};STORAGE.decode_tower=function(n){var u,r,t,i;if(STORAGE.init_tower(),i=n.bou_tower.split(","),u=i.length,u>glo.TOWER_TOT_NUM){util.log("Error in STORAGE.decode_tower(): 사용자 data가 glo.TOWER_TOT_NUM보다 큽니다. glo.TOWER_TOT_NUM를 늘려 주세요.");r="오류발생<br>funtion:STORAGE.decode_tower()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg: 스테이지 data가 glo.TOWER_TOT_NUM보다 큽니다.<br>ErrorDetail :<br>사용자 tower_len="+u+"/glo.TOWER_TOT_NUM="+glo.TOWER_TOT_NUM;util.log(r);PHP.put_error_log(r);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_tower:error glo.TOWER_TOT_NUM");return}for(t=0;t<u;t++){var e=i[t].split(":"),o=parseInt(e[0],10),f=parseInt(e[1],10),s=parseInt(e[2],10);if(isNaN(o)||isNaN(f)||isNaN(s)){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_tower() :"+o+","+f+","+s);r="오류발생<br>funtion:STORAGE.decode_tower()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  타워파싱과정에서 tower_bunho_g,level,card에서 NaN이 확인됨.<br>ErrorDetail :<br>사용자 tower_data["+t+"]="+i[t];util.log(r);PHP.put_error_log(r);return}if(f>15){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_tower() : level error:"+f);PHP.put_error_log("타워15레벨 넘음. 오류임. 빠른수정요망:"+f);return}STORAGE.tower_bou[t+1].tower_bunho_g=o;STORAGE.tower_bou[t+1].level=f;STORAGE.tower_bou[t+1].card=s}if(i=n.selected_tower.split(","),u=i.length,u>5){util.log("Error in STORAGE.decode_tower(): selected_tower가 5개보다 많음. 문제임..");r="selected_tower가 5개 넘음";util.log(r);PHP.put_error_log(r);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_tower:error selected_tower가 5개 넘음");return}for(t=0;t<u;t++)STORAGE.tower_selected[t+1]=parseInt(i[t],10);for(t=u;t<5;t++)STORAGE.tower_selected[t+1]=0;if(i=parseInt(n.rainbow_card,10),isNaN(i)){console.error("rainbow_card is none");return}STORAGE.tower_rainbow_card=i};STORAGE.encode_hero=function(){for(var e,t="",n=1;n<=glo.HERO_TOT_NUM;n++){var i=STORAGE.hero_bou[n].bunho,r=STORAGE.hero_bou[n].level,u=STORAGE.hero_bou[n].killexp,f=STORAGE.hero_bou[n].buy;t+=n==1?i+":"+r+":"+u+":"+f:","+i+":"+r+":"+u+":"+f}if(util.log("encode_hero_bou==>"+t),t==null||t==""){util.log("Error in STORAGE.encode_hero():");S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.encode_hero: bou_hero null");return}return e=STORAGE.hero_selected,{bou_hero:t,selected_hero:e}};STORAGE.decode_hero=function(n){var r,u,t,i;if(STORAGE.init_hero(),r=n.bou_hero.split(","),u=r.length,u>glo.HERO_TOT_NUM){util.log("Error in STORAGE.decode_hero(): 사용자 data가 glo.HERO_TOT_NUM보다 큽니다. glo.HERO_TOT_NUM를 늘려 주세요.");i="오류발생<br>funtion:STORAGE.decode_hero()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg: 스테이지 data가 glo.HERO_TOT_NUM보다 큽니다.<br>ErrorDetail :<br>사용자 hero_len="+u+"/glo.TOWER_TOT_NUM="+glo.HERO_TOT_NUM;util.log(i);PHP.put_error_log(i);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_hero:error glo.HERO_TOT_NUM");return}for(t=0;t<u;t++){var f=r[t].split(":"),s=parseInt(f[0],10),e=parseInt(f[1],10),h=parseInt(f[2],10),o=parseInt(f[3],10);if(isNaN(s)||isNaN(e)||isNaN(h)||isNaN(o)){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_hero() :"+hero_bunho_g+","+e+","+card+","+o);i="오류발생<br>funtion:STORAGE.decode_hero()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  타워파싱과정에서 hero_bunho_g,level,card에서 NaN이 확인됨.<br>ErrorDetail :<br>사용자 hero_data["+t+"]="+r[t];util.log(i);PHP.put_error_log(i);return}STORAGE.hero_bou[t+1].bunho=s;STORAGE.hero_bou[t+1].level=e;STORAGE.hero_bou[t+1].killexp=h;STORAGE.hero_bou[t+1].buy=o}if(STORAGE.hero_selected=parseInt(n.selected_hero,10),isNaN(STORAGE.hero_selected)){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_hero() : hero_selected is NaN");return}util.log("hero_selected ="+STORAGE.hero_selected)};STORAGE.encode_item=function(){for(var t,i,r="",n=1;n<=5;n++)t=STORAGE.item_bou[n].bunho,i=STORAGE.item_bou[n].bou_num,r+=n==1?t+":"+i:","+t+":"+i;return r};STORAGE.decode_item=function(n){var r,u,t,f,i;if(STORAGE.init_item(),r=n.split(","),u=r.length,u>5||u<5){i="Error in STORAGE.decode_item(): 사용자 item이 5보다 크거나 작다.아이템 수량을 확인 바랍니다.";util.log(i);PHP.put_error_log(i);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_item:error not 5");return}for(t=0;t<u;t++)if(f=r[t].split(":"),STORAGE.item_bou[t+1].bunho=parseInt(f[0],10),STORAGE.item_bou[t+1].bou_num=parseInt(f[1],10),isNaN(STORAGE.item_bou[t+1].bunho)||isNaN(STORAGE.item_bou[t+1].bou_num)){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_item() :"+STORAGE.item_bou[t+1].bunho+","+STORAGE.item_bou[t+1].bou_num);i="오류발생<br>funtion:STORAGE.decode_item()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  아이템파싱과정에서 bunho,bou_num, NaN이 확인됨.<br>ErrorDetail :<br>사용자 tower_data["+t+"]="+r[t];util.log(i);PHP.put_error_log(i);return}};STORAGE.encode_charbook=function(){for(var t,i,r,u,f="",n=1;n<=S_CHARBOOK.TOWER_SORT_NUM;n++){for(t="",i=1;i<=15;i++)t=t+""+STORAGE.charbook.tower[n].data[i];t=t+":"+STORAGE.charbook.tower[n].reward;n==1?f=t:f+=","+t}for(r="",n=1;n<=S_CHARBOOK.HERO_NUM;n++)r=r+""+STORAGE.charbook.hero[n];for(u="",n=1;n<=S_CHARBOOK.MONSTER_NUM;n++)u=u+""+STORAGE.charbook.monster[n];return{tower:f,hero:r,monster:u}};STORAGE.decode_charbook=function(n){var f,u,r,i,t;if(STORAGE.init_charbook(),f=n.tower.split(","),i=f.length,i!=S_CHARBOOK.TOWER_SORT_NUM){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_charbook : TOWER종류가 맞지 않음:"+i);return}for(t=1;t<=i;t++){for(u=f[t-1].split(":"),r=1;r<=15;r++)STORAGE.charbook.tower[t].data[r]=parseInt(u[0].charAt(r-1),10),isNaN(STORAGE.charbook.tower[t].data[r])&&console.error("STORAGE.decode_charbook() error(1)"+u[0]);STORAGE.charbook.tower[t].reward=parseInt(u[1],10)}if(i=n.hero.length,i!=S_CHARBOOK.HERO_NUM){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_charbook : HERO 수량 맞지 않음:"+i);return}for(t=1;t<=i;t++)STORAGE.charbook.hero[t]=parseInt(n.hero.charAt(t-1),10),isNaN(STORAGE.charbook.hero[t])&&console.error("STORAGE.decode_charbook() error(2) - hero info is NaN :"+n.hero);for(i=n.monster.length,t=1;t<=i;t++)STORAGE.charbook.monster[t]=parseInt(n.monster.charAt(t-1),10),isNaN(STORAGE.charbook.monster[t])&&console.error("STORAGE.decode_charbook() error(3) - monster info is NaN :"+n.monster)};STORAGE.init_quest=function(){for(var t=QUEST_WEEKLY.length-1,n=1;n<=t;n++)QUEST_WEEKLY[n].arrive=0,QUEST_WEEKLY[n].status=0;STORAGE.quest_weekly=""};STORAGE.decode_quest=function(n){var r,i,t;try{var u=n.split(","),f=u.length,i=QUEST_WEEKLY.length-1;for(t=1;t<=i;t++){if(t-1>=f){util.log("weekly quest 내부 quest 길이와 서버 quest길이가 달라 예외처리 됨.");QUEST_WEEKLY[t].arrive=0;QUEST_WEEKLY[t].status=0;continue}r=u[t-1].split(":");QUEST_WEEKLY[t].arrive=parseInt(r[0],10);QUEST_WEEKLY[t].status=parseInt(r[1],10);QUEST_WEEKLY[t].arrive==1&&(S_QUEST.new_flag=1)}}catch(e){for(util.log("quest weekly data parsing error... then quest init...."+e),i=QUEST_WEEKLY.length-1,t=1;t<=i;t++)QUEST_WEEKLY[t].arrive=0,QUEST_WEEKLY[t].status=0}};STORAGE.encode_quest=function(){var t=QUEST_WEEKLY.length-1,n;for(STORAGE.quest_weekly="",n=1;n<t;n++)STORAGE.quest_weekly+=QUEST_WEEKLY[n].arrive+":"+QUEST_WEEKLY[n].status+",";STORAGE.quest_weekly+=QUEST_WEEKLY[t].arrive+":"+QUEST_WEEKLY[t].status};STORAGE.init_upgrade=function(){STORAGE.upgrade=[0,0,0,0]};STORAGE.decode_upgrade=function(n){var r,u,t,f,i;if(STORAGE.init_upgrade(),r=n.split(","),u=r.length,u!=3){i="Error in STORAGE.decode_upgrade(): 사용자 upgrade가 3개가 아님. 업그레이드 수량 확인 요망.";util.log(i);PHP.put_error_log(i);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_upgrade:error not 5");return}for(t=0;t<u;t++)if(f=r[t].split(":"),STORAGE.upgrade[t+1]=parseInt(r[t],10),isNaN(STORAGE.upgrade[t+1])){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"STORAGE.decode_upgrade() :"+STORAGE.upgrade[t+1]);i="오류발생<br>funtion:STORAGE.decode_upgrade()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+util.get_date_YYYYMMDD()+" "+util.get_time_HHMMSS()+"<br>ErrorMsg:  업그레이드 파싱과정에서 upgrade에 NaN이  확인됨.<br>ErrorDetail :<br>사용자 tmp["+t+"]="+r[t];util.log(i);PHP.put_error_log(i);return}};STORAGE.encode_upgrade=function(){return STORAGE.upgrade[1]+","+STORAGE.upgrade[2]+","+STORAGE.upgrade[3]};STORAGE.init_payinfo=function(){STORAGE.payinfo={daily_package_gold:0,daily_package_rainbow:0,beginner_package:0,item_package:0,hero_package_date:"NONE",bundle_package_date:"NONE",bundle_package:0,monthly_pay_is:0,monthly_pay_accday:0}};STORAGE.encode_gongji=function(){for(var r,t="",i=0,n=1;n<=DEFINE.USERINFO_MAX_GONGJI;n++)STORAGE.gongji[n]!=null&&STORAGE.gongji[n]!=""&&(r=STORAGE.gongji[n],i++,t+=i==1?STORAGE.gongji[n]:","+STORAGE.gongji[n]);return util.log("encode_gongji_data==>"+t),(t==null||t=="")&&util.log("사용자가 본 공지가 없습니다.(정상임)"),t};STORAGE.decode_gongji=function(n){var i,r,u,t;if(STORAGE.init_gongji(),i=n.split(","),r=i.length,r>DEFINE.USERINFO_MAX_GONGJI){util.log("Error in STORAGE.decode_gongji(): 사용자 gongji정보가 USERINFO_MAX_GONGJI보다 큽니다. USERINFO_MAX_GONGJI를 늘려 주세요.");u="오류발생<br>funtion:STORAGE.decode_gongji()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+getDate2()+" "+getTime2()+"<br>ErrorMsg: 공지data가 USER_MAX_GONGJI보다 큽니다.<br>ErrorDetail :<br>사용자 stage_len="+r+"/USERINFO_MAX_STAGE="+DEFINE.USERINFO_MAX_GONGJI;util.log(u);PHP.put_error_log(u);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"STORAGE.decode_gongji:error");return}for(t=0;t<r;t++)i[t]!="null"&&i[t]!=""&&(STORAGE.gongji[t+1]=i[t])};STORAGE.load_storage_for_LG=function(n){var t=localStorage.getItem("id.gtd.com.busidol");t==null?PHP.get_uniq_id_from_server_for_LG(n):(gEntrix.host_id=gEntrix.uniq_id=t,n&&n())};STORAGE.save_uniq_id_to_localstorage_for_LG=function(n){localStorage.setItem("id.gtd.com.busidol",n)};STORAGE.localstorage_get_uniq_id=function(){var t=glo.app_name+".uniq_id",n=localStorage.getItem(t);n==null?(gEntrix.uniq_id=STORAGE.localstorage_make_uniq_id(),gEntrix.host_id=gEntrix.uniq_id,localStorage.setItem(t,gEntrix.uniq_id),util.log("새로운 uniq_id 생성(로컬스토리지) : "+gEntrix.uniq_id)):(gEntrix.uniq_id=n,gEntrix.host_id=n,util.log("기존 uniq_id 사용(로컬스토리지) : "+n))};STORAGE.localstorage_make_uniq_id=function(){var n=new Date,e=n.getFullYear(),t=n.getMonth()+1,i=n.getDate(),o=t<10?"0"+t:""+t,s=i<10?"0"+i:""+i,h=e+""+o+""+s,r=n.getHours(),u=n.getMinutes(),f=n.getSeconds(),c=r<10?"0"+r:r,l=u<10?"0"+u:u,a=f<10?"0"+f:f,v=c+""+l+""+a;return"ETD_"+h+v};STORAGE.get_stage_mode_value=function(n){switch(S_GAME.stagemode){case ENUM.STAGE_MODE.EASY:return STORAGE.stage_easy[n];case ENUM.STAGE_MODE.NORMAL:return STORAGE.stage_normal[n];case ENUM.STAGE_MODE.HARD:return STORAGE.stage_hard[n]}};STORAGE.set_stage_mode_value=function(n,t){switch(S_GAME.stagemode){case ENUM.STAGE_MODE.EASY:STORAGE.stage_easy[n]=t;break;case ENUM.STAGE_MODE.NORMAL:if(t=="T")return;STORAGE.stage_normal[n]=t;break;case ENUM.STAGE_MODE.HARD:if(t=="T")return;STORAGE.stage_hard[n]=t}} 
var Main={timer_stamp:null,mouse:null,count:0},h_count;Main.on_load=function(){var t,n;switch(glo.platform){case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:n=document.createElement("script");n.async=!1;n.type="text/javascript";n.language="javascript";n.src=glo.URL_prefix+"../BM_COMMON/define/define.js";document.body.appendChild(n);n.onload=function(){util.log("define.js loading complete");temporary_run_WEEKEND_STANDBYME();Main.on_load_after()};n.onerror=function(){util.log("define.js loading error");Main.on_load_after()};break;case glo.PLATFORM.AZE:document.documentElement.addEventListener("touchstart",function(n){n.touches.length>1&&n.preventDefault()},!1);t=0;document.documentElement.addEventListener("touchend",function(n){var i=(new Date).getTime();i-t<=300&&n.preventDefault();t=i},!1);document.addEventListener("contextmenu",function(n){n.preventDefault()});Main.on_load_after();break;case glo.PLATFORM.LG_SMARTTV:default:n=document.createElement("script");n.async=!1;n.type="text/javascript";n.language="javascript";n.src=glo.URL_prefix+"../BM_COMMON/define/define.js";document.body.appendChild(n);n.onload=function(){temporary_run()};n.onerror=function(){util.log("define.js loading error")};return}};Main.on_load_after=function(){if(Main.count++,glo.platform==glo.PLATFORM.AZE&&Main.count==1&&glo.app_release=="RELEASE"){window.GD_OPTIONS={gameId:"761d76dfd32849aab1ae7e1d6a482cce",onEvent:function(n){switch(n.name){case"SDK_GAME_START":util.log("[SDK_GAME_START]: "+glo.scene.cur+".resume() called;");eval(glo.scene.cur+".resume();");glo.flag.AZE_ad_playing=0;document.visibilityState==="visible"&&(SOUND.resume_bgm_index!=0?SOUND.play_bgm(SOUND.resume_bgm_index):SOUND.play_bgm(SOUND.BGM.BGM0));switch(glo.scene.cur){case glo.S.MAINMENU:switch(S_MAINMENU.XY[S_MAINMENU.focus].title){case TXT.menu_off_each:S_GAME.mode.online=0;S_GAME.mode.team=0;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case TXT.menu_off_team:S_GAME.mode.online=0;S_GAME.mode.team=1;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case TXT.menu_online:PHP.get_pvp_data(function(){ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)})}}break;case"SDK_GAME_PAUSE":util.log("[SDK_GAME_PAUSE]: "+glo.scene.cur+".pause() called;");eval(glo.scene.cur+".pause();");SOUND.stop_bgm();SOUND.stop_effect_all();glo.flag.AZE_ad_playing=1;break;case"SDK_GDPR_TRACKING":util.log("[SDK_GDPR_TRACKING]");break;case"SDK_GDPR_TARGETING":util.log("[SDK_GDPR_TARGETING]");break;case"SDK_REWARDED_WATCH_COMPLETE":glo.flag.AZE_ad_playing=0;util.log("[SDK_REWARDED_WATCH_COMPLETE]:광고를 보았다. 보상을 주자.");console.log("[SDK_REWARDED_WATCH_COMPLETE]:광고를 보았다. 보상을 주자.:"+glo.scene.cur+" focus:"+S_MAINMENU.focus);switch(glo.scene.cur){case glo.S.MAINMENU:switch(S_MAINMENU.XY[S_MAINMENU.focus].title){case TXT.menu_off_each:S_GAME.mode.online=0;S_GAME.mode.team=0;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case TXT.menu_off_team:S_GAME.mode.online=0;S_GAME.mode.team=1;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case TXT.menu_online:PHP.get_pvp_data(function(){ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)})}break;case glo.S.RANKING_PVP:util.enable_key(0,"PVP join을 위해 잠시 key lock시킴");ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_POPUP)}}}},function(n,t,i){var r,u=n.getElementsByTagName(t)[0];n.getElementById(i)||(r=n.createElement(t),r.id=i,r.src="./main.min.js",u.parentNode.insertBefore(r,u),r.onload=function(){Main.on_load_after()})}(document,"script","gamedistribution-jssdk");return}if(console.log("#####PLATFORM:"+glo.platform+",RELEASE:"+glo.app_release+",APP_NAME:"+glo.app_name+",VERSION:"+glo.version+"#####"),Main.do_next_before(),glo.mouse.use==1&&(Main.mouse_init(),glo.platform==glo.PLATFORM.AZE&&(window.addEventListener("resize",Main.screen_adjust),Main.screen_adjust())),glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL||glo.platform==glo.PLATFORM.AZE&&glo.is_mobile_browser){var n=function(){window.innerWidth==0?setTimeout(n,100):Main.screen_adjust()};n()}};Main.do_next_before=function(){var e,t,i,r,f,n,u,o;switch(glo.platform){case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:break;case glo.PLATFORM.LGSMARTTV:default:Main.timer_stamp=setInterval(function(){glo.timestamp_due+=10},10)}switch(glo.platform){case glo.PLATFORM.LG:case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:e=0;loading_complete=function(){e++;e==3&&(util_fun.dbl.getDevice()==util_fun.dbl.TV?util_webos.setup(function(){var n=util_webos.get_user_id();PHP.get_uniq_id_for_LG(n,Main.do_next)},Main.resize_fn,Main.hide_fn,Main.show_fn):(BAL.get_set_uniq_id(),Main.do_next()))};t=document.createElement("script");t.async=!1;t.type="text/javascript";t.language="javascript";t.src="./javascript/LG/webOSTVjs-1.2.4/webOSTV.js";document.body.appendChild(t);t.onload=function(){loading_complete()};i=document.createElement("script");i.async=!1;i.type="text/javascript";i.language="javascript";i.src="./javascript/LG/webOSTVjs-1.2.4/webOSTV-dev.js";document.body.appendChild(i);i.onload=function(){loading_complete()};r=document.createElement("script");r.async=!1;r.type="text/javascript";r.language="javascript";r.src="./javascript/LG/util_WEBOS.js";document.body.appendChild(r);r.onload=function(){loading_complete()};break;case glo.PLATFORM.AMO:try{Main.get_android_info();PHP.get_uniq_id_for_SKB(function(){S_MOBILE_CONNECT_AMO.check(function(){Main.do_next()})})}catch(s){util.log("=============\tMain.do_next_before()에서 아마도 Android.Bridge오류가 생겨 try catch에 의해 일반 PC버전으로 진행 함.====");S_MOBILE_CONNECT_AMO.check(function(){S_MOBILE_CONNECT_AMO.flag==1?gEntrix.host_id=gEntrix.uniq_id=S_MOBILE_CONNECT_AMO.info.uniq_id:Main.get_uniq_id_test();Main.do_next()})}break;case glo.PLATFORM.SKB:case glo.PLATFORM.ATV:try{Main.get_android_info();PHP.get_uniq_id_for_SKB(function(){Main.do_next()})}catch(s){util.log("=============\tMain.do_next_before()에서 아마도 Android.Bridge오류가 생겨 try catch에 의해 일반 PC버전으로 진행 함.====");Main.get_uniq_id_test();Main.do_next()}break;case glo.PLATFORM.BAL:try{AndroidBridge.setKeyBlock(!1)}catch(s){util.log("=============\tMain.do_next_before()에서 아마도 Android.Bridge오류가 생겨 try catch에 의해 일반 PC버전으로 진행 함.====")}BAL.get_set_uniq_id();Main.do_next();break;case glo.PLATFORM.AZE:BAL.get_set_uniq_id();Main.do_next();document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?SOUND.play_bgm(SOUND.resume_bgm_index):(eval(glo.scene.cur).pause(),SOUND.stop_bgm(),SOUND.stop_effect_all())});break;case glo.PLATFORM.KT:glo.app_release=="RELEASE"?(n=document.createElement("script"),n.async=!1,n.type="text/javascript",n.language="javascript",n.src="./javascript/KT/util_KT.js",document.body.appendChild(n),n.onload=function(){Main.do_next_before_kt_loadjs()},n.onerror=function(){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"util_KT.js loading faild!")}):(Main.get_uniq_id_test(),Main.do_next());break;case glo.PLATFORM.SS:f=document.createElement("meta");f.name="viewport";f.content="width=1280";document.getElementsByTagName("head")[0].appendChild(f);glo.app_release=="RELEASE"?(n=document.createElement("script"),n.async=!1,n.type="text/javascript",n.language="javascript",n.src="$WEBAPIS/webapis/webapis.js",document.body.appendChild(n),n=document.createElement("script"),n.async=!1,n.type="text/javascript",n.language="javascript",n.src="./javascript/SS/util_TIZEN.js",document.body.appendChild(n),n.onload=function(){util_tizen.registerKey();gEntrix.host_id=gEntrix.uniq_id=util_tizen.getDuid();util_tizen.addVisibilitychange(Main.visibilitychangeCallback);Main.do_next()},n.onerror=function(){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"util_TIZEN.js loading faild!")}):(Main.get_uniq_id_test(),Main.do_next());break;case glo.PLATFORM.DLIVE:glo.app_release=="RELEASE"?cssApi.notiOnLoad():(u=location.href,o=u.slice(u.indexOf("?")+1,u.length),u.indexOf("?")==-1?STORAGE.localstorage_get_uniq_id():(Main.get_uniq_id_test(),Main.do_next()));break;case glo.PLATFORM.HCN:cssApi.addCsEventListener("Check",function(n){util.log("Check Callback!!!!  :"+n);n==!0||n=="true"?CNMPaymentApi.checkUserInfoCheckAjax():util_CNM_password_wrrong_error()});cssApi.addCsEventListener("NotifyKey",function(n){util.log("NotifyKey Callback!!!!");n=="36"?gEntrix.menu_key_pressed=!0:n=="191"&&(gEntrix.menu_key_pressed=!1);S_EXITPOPUP.start(glo.scene.cur+"에서 메뉴버턴 누름")});Main.onStatusInfo(cssApi.getStbInfo());break;case glo.PLATFORM.ORANGE:case glo.PLATFORM.PCROOM:glo.app_release=="RELEASE"?Main.do_next():(STORAGE.localstorage_get_uniq_id(),Main.do_next());break;default:console.error("undefined glo.platform : "+glo.platform+" in Main.on_load()")}};Main.get_android_info=function(){switch(glo.platform){case glo.PLATFORM.SKB:case glo.PLATFORM.ATV:case glo.PLATFORM.AMO:if(AndroidBridge.setKeyBlock(!1),gEntrix.stb_id=AndroidBridge.getSTBId(),gEntrix.stb_model=AndroidBridge.getSTBModel(),gEntrix.stb_name=AndroidBridge.getSTBName(),gEntrix.stb_ip=AndroidBridge.getSTBIp(),gEntrix.stb_mac=AndroidBridge.getSTBMac(),gEntrix.stb_addr=AndroidBridge.getSTBAddr(),gEntrix.host_id=gEntrix.stb_id,gEntrix.model_name=gEntrix.stb_model,glo.platform==glo.PLATFORM.ATV||glo.platform==glo.PLATFORM.AMO)switch(AndroidBridge.getLang()){case"ko":USER.lang=LANG.KOREA;break;default:case"en":USER.lang=LANG.ENGLISH}if(glo.app_release=="RELEASE"&&gEntrix.stb_id==null){S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"stbid is null");return}}};Main.get_uniq_id_test=function(){var t,u,r,i,n;if(glo.app_release!="TEST"&&console.error("TEST아닌데 \t Main.get_uniq_id_test() 호출됨."),t=location.href,u=t.slice(t.indexOf("?")+1,t.length),t.indexOf("?")==-1)STORAGE.localstorage_get_uniq_id();else for(r=u.split("&"),i=0;i<r.length;i++){n=r[i].split("=");switch(n[0]){case"id":case"ID":case"Id":if(n.length!=2){console.error("파라미터오류 입력형식: index.html?id=1111");return}if(n[1]==""||n[1]==null){console.error("파라미터오류 입력형식: index.html?id=1111");return}gEntrix.host_id=gEntrix.uniq_id=n[1];util.log("your id = "+n[1])}}gEntrix.uniq_id=="Towerdefence_uniq_id_001"&&STORAGE.localstorage_get_uniq_id();util.log("================Your uniq_id="+gEntrix.uniq_id);util.log("================Your host_id="+gEntrix.host_id)};Main.do_next_before_kt_loadjs=function(){if(util_kt.appInit(),gEntrix.host_id=gEntrix.uniq_id=util_kt.getSAID(),util_kt.isSupportModel()==!1&&util.log(gEntrix.model_name+"은 지원하지 않습니다"),util_kt.userLogon(function(n,t){if(util.log("util_kt.userLogon  success"),n!=null)gEntrix.user_name=n,gEntrix.user_name2=n,gEntrix.pin_number=t,Main.do_next();else if(glo.app_release=="RELEASE"){if(util_fun.dbl.getDevice()==util_fun.dbl.PC){Main.do_next();return}var i="오류발생<br>발생위치:Main.on_load()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+getDate2()+" "+getTime2()+"<br>ErrorMsg: util_kt.userLogon 실패함<br>ErrorDetail :<br>";util.log(i);PHP.put_error_log(i);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.NETWORK_ERROR,"util_kt.userLogon fail")}else util.log("glo.app_release가 TEST라서 util_kt.userLogon() 무시하고 실행함."),Main.do_next()}),gEntrix.uniq_id==null||gEntrix.uniq_id==""){var n="오류발생<br>발생위치:Main.on_load()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+getDate2()+" "+getTime2()+"<br>ErrorMsg: gEntrix.uniq_id를 못 불러옴<br>ErrorDetail :<br>";util.log(n);PHP.put_error_log(n);S_ERROR_POPUP.start(S_ERROR_POPUP.TYPE.PROGRAM_ERROR,"uniq_id is null");return}PHP.checkIpBlockingAjax()};Main.onStatusInfo=function(n){gEntrix.host_id=n.smartCardId;gEntrix.SMART_CARD_ID=n.smartCardId;gEntrix.TERMINAL_CODE=n.smartCardId;gEntrix.SOCode=parseInt(n.soCode);gEntrix.service_center=n.callCenterPhoneNumber;glo.platform==glo.PLATFORM.HCN&&CNMPaymentApi.getUserNameFromSTBAjax(Main.do_next)};Main.do_next=function(){Main.make_tag();Main.init_variable();KeyDefine.init();LANG.init();STORAGE.init();glo.platform!=glo.PLATFORM.BAL&&glo.platform!=glo.PLATFORM.AZE&&WSS.init();SOUND.init();PHP.init();switch(glo.platform){case glo.PLATFORM.SKB:try{var n=AndroidBridge.checkPaymentMonth(gEntrix.item_id_SKB[12]);n=="T99"?STORAGE.payinfo.monthly_pay_is=0:(ret_str_array=n.split("="),ret_data_array=ret_str_array[1].split("^"),STORAGE.payinfo.monthly_pay_is=ret_data_array[0]=="Y"?1:0)}catch(t){STORAGE.payinfo.monthly_pay_is=0}ChangeScene.start(glo.scene.cur,glo.S.LOGO,S_LOGO,ChangeScene.TYPE_NORMAL);break;case glo.PLATFORM.ATV:case glo.PLATFORM.AMO:try{switch(AndroidBridge.isSub()){case"yes":STORAGE.payinfo.monthly_pay_is=1;break;case"no":default:STORAGE.payinfo.monthly_pay_is=0}}catch(t){STORAGE.payinfo.monthly_pay_is=0}ChangeScene.start(glo.scene.cur,glo.S.LOGO,S_LOGO,ChangeScene.TYPE_NORMAL);break;case glo.PLATFORM.LGH:CNMPaymentApi.requestMonthlyFixedAmountCheckAjax(function(){ChangeScene.start(glo.scene.cur,glo.S.LOGO,S_LOGO,ChangeScene.TYPE_NORMAL)});break;case glo.PLATFORM.HCN:CNMPaymentApi.requestMonthlyFixedAmountCheckAjax(function(){ChangeScene.start(glo.scene.cur,glo.S.LOGO,S_LOGO,ChangeScene.TYPE_NORMAL)});break;case glo.PLATFORM.KT:default:ChangeScene.start(glo.scene.cur,glo.S.LOGO,S_LOGO,ChangeScene.TYPE_NORMAL)}};Main.on_unload=function(){};Main.key_down=function(n){var t=n==null?event.keyCode:n,i;if(glo.predefine.trace_key_flag==!0&&(glo.predefine.trace_uniq_id==gEntrix.uniq_id||glo.predefine.trace_uniq_id=="all")&&PHP.put_error_log("Key pressed: "+t),glo.app_release!="RELEASE"||glo.platform!=glo.PLATFORM.AMO&&glo.platform!=glo.PLATFORM.BAL||t==KeyDefine.back){if((glo.platform==glo.PLATFORM.DLIVE||glo.platform==glo.PLATFORM.HCN)&&glo.app_release=="TEST"&&t==KeyDefine.EXIT_TEST&&document.getElementById("KT_LOADING").style.display!="block"){S_EXITPOPUP.start(glo.scene.cur+"에서 x버턴 누름");return}if(t==8&&(glo.platform==glo.PLATFORM.HCN||glo.platform==glo.PLATFORM.DLIVE||glo.platform==glo.PLATFORM.LGH)&&event.preventDefault(),glo.enable_key==0){glo.platform==glo.PLATFORM.KT&&(event.preventDefault(),event.stopPropagation());return}util.log("Key pressed: "+t);switch(glo.scene.cur){case glo.S.GAME:S_GAME.key_down(n);break;case glo.S.MAINMENU:S_MAINMENU.key_down(n);break;case glo.S.PVP_RANKING:S_PVP_RANKING.key_down(n);break;case glo.S.PVP_MATCHING:S_PVP_MATCHING.key_down(n);break;case glo.S.SETTING:S_SETTING.key_down(n);break;case glo.S.GAMERESULT:S_GAMERESULT.key_down(n);break;case glo.S.POPUPYN:S_POPUPYN.key_down(n);break;case glo.S.GAMERESULT:S_GAMERESULT.key_down(n);break;case glo.S.HELP:S_HELP.key_down(n);break;case glo.S.ERROR_POPUP:S_ERROR_POPUP.key_down(n);break;case glo.S.PAY_PASSYN:S_PAY_PASSYN.key_down(n);break;case glo.S.INPUT_PAY:S_INPUT_PAY.key_down(n);break;case glo.S.KR_INPUT:i={keyCode:t};KR_INPUT.key_event(i)}glo.platform==glo.PLATFORM.KT&&(event&&event.preventDefault(),event&&event.stopPropagation())}};Main.visibilitychangeCallback=function(n){try{n==0?eval(glo.scene.cur).pause():eval(glo.scene.cur).resume()}catch(t){}};Main.make_tag=function(){var n=document.getElementById("div_body");n.innerHTML='<div id="S_LOGO_div"><\/div><div id="S_MAINMENU_div"><\/div><div id="S_PVP_RANKING_div"><\/div><div id="S_PVP_MATCHING_div"><\/div><div id="S_SETTING_div"><\/div><div id="S_GAME_div"><\/div><div id="S_GAMERESULT_div"><\/div><div id="S_HELP_div"><\/div><div id="S_POPUPYN_div"><\/div><div id="S_PAY_PASSYN_div"><\/div><div id="S_INPUT_PAY_div"><\/div><div id="KR_INPUT_div"><\/div><div id="MM_top">\t<img id="MM_top_bg">\t<img id="MM_top_rankicon">\t<div id="MM_top_name"><\/div>\t<div id="MM_30day">\t\t<img id="MM_30day_bg">\t\t<div id="MM_30day_title"><\/div>\t\t<div id="MM_30day_value"><\/div>\t<\/div><\/div><div id="KT_LOADING" class="kt_loading"><\/div><div id="message" class="msg"><\/div>'};Main.top_show=function(){if(glo.platform==glo.PLATFORM.AZE){Main.top_hide();return}$("#MM_top").css({display:"block",left:"1568px",top:"48px",position:"absolute"});util.draw_image_no_wh_pos("MM_top_bg","./image/common/p_common_name_bg.png",0,0);util.draw_image_no_wh_pos("MM_top_rankicon","./image/pvp/rank_name"+USER.grade+".png",16,4);util.draw_text_html(gEntrix.user_name,"MM_top_name",92,25,182,34,34,24,"center","#4a1201")};Main.top_hide=function(){$("#MM_top").css({display:"none"})};Main.init_variable=function(){};window.onerror=function(n,t,i,r,u){var f=["Message: "+n,"URL: "+t,"Line: "+i,"Column: "+r,"Error object: "+JSON.stringify(u)].join(" <br> - ");util.log(f);PHP.put_error_log(f)};Main.draw_frame=function(n){$("#FRAME_TEST").css({left:"20px",top:"100px",width:"150px",height:"50px","line-height":"50px","font-size":"30px","text-align":"right",color:"black",background:"white",position:"absolute"}).text(n)};Main.draw_frame_missile=function(n){$("#FRAME_TEST_MISSILE").css({left:"300px",top:"100px",width:"150px",height:"50px","line-height":"50px","font-size":"30px","text-align":"right",color:"black",background:"yellow",position:"absolute"}).text(n)};Main.pause=function(){PHP.put_log_to_server("사용자 pause함:"+glo.scene.cur);switch(glo.platform){default:case glo.PLATFORM.ATV:switch(glo.scene.cur){case glo.S.POPUPYN:glo.scene.before==glo.S.MARKETSTORE||glo.scene.before==glo.S.MAKETEAM_HERO||AndroidBridge.finish();break;case glo.S.MARKETSTORE:case glo.S.MAKETEAM_HERO:break;case glo.S.MAINMENU:WSS.obj.close();break;default:AndroidBridge.finish()}break;case glo.PLATFORM.AMO:switch(glo.scene.cur){case glo.S.POPUPYN:glo.scene.before==glo.S.GAME&&S_GAME.stage>1e3&&AndroidBridge.finish();break;case glo.S.GAME:S_GAME.stage>1e3&&AndroidBridge.finish()}}};Main.resume=function(){if(PHP.put_log_to_server("사용자 resume함:"+glo.scene.cur),glo.platform==glo.PLATFORM.ATV&&glo.scene.cur==glo.S.MAINMENU&&WSS.init(),glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL||glo.platform==glo.PLATFORM.AZE)try{USER.sound_bgm==0&&SOUND.stop_bgm();USER.sound_effect==0&&SOUND.stop_effect_all();AndroidBridge.hideSystemUI()}catch(n){util.log("AndroidBridge.hideSystemUI(); error:"+n)}};Main.mouse_init=function(){if(glo.mouse.use==1){Main.mouse={last_touchstart_element_id:null};switch(glo.platform){case glo.PLATFORM.AMO:case glo.PLATFORM.BAL:window.addEventListener("touchstart",Main.on_mouse_down,{passive:!1});window.addEventListener("touchend",Main.on_mouse_up,{passive:!1});window.addEventListener("touchmove",Main.on_mouse_move,{passive:!1});glo.is_mobile_browser=!0;glo.app_release=="TEST"&&navigator.userAgent&&navigator.userAgent.indexOf("Windows")!=-1&&(window.addEventListener("mousedown",Main.on_mouse_down,{passive:!1}),window.addEventListener("mouseup",Main.on_mouse_up,{passive:!1}),window.addEventListener("mousemove",Main.on_mouse_move,{passive:!1}),window.addEventListener("mouseover",Main.on_mouse_over,{passive:!1}),window.addEventListener("mouseout",Main.on_mouse_out,{passive:!1}),glo.is_mobile_browser=!1);break;case glo.PLATFORM.AZE:default:var t=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?!0:!1,i=navigator.userAgent.match(/android/i)||navigator.platform.match(/android/i)?!0:!1,n=t||i?!0:!1;glo.is_mobile_browser=n;n?(window.addEventListener("touchstart",Main.on_mouse_down,{passive:!1}),window.addEventListener("touchend",Main.on_mouse_up,{passive:!1}),window.addEventListener("touchmove",Main.on_mouse_move,{passive:!1}),util.log("mouse 초기화 완료: mobile")):glo.app_release=="RELEASE"&&(glo.platform==glo.PLATFORM.LG_STANDBYME||glo.platform==glo.PLATFORM.LG_WEEKEND)?(window.addEventListener("touchstart",Main.on_mouse_down,{passive:!1}),window.addEventListener("touchend",Main.on_mouse_up,{passive:!1}),window.addEventListener("touchmove",Main.on_mouse_move,{passive:!1}),util.log("lg weekend 및 standbyme에서는 touchstat가 mouse down보다 더 빠르게 작동한다.")):(window.addEventListener("mousedown",Main.on_mouse_down,{passive:!1}),window.addEventListener("mouseup",Main.on_mouse_up,{passive:!1}),window.addEventListener("mousemove",Main.on_mouse_move,{passive:!1}),window.addEventListener("mouseover",Main.on_mouse_over,{passive:!1}),util.log("mouse 초기화 완료: pc"))}}else{util.log("mouse not supported!! If you want to mouse on, then glo.mouse.use = 1;");return}};Main.on_mouse_down=function(n){if(n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player1_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player2_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player3_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player4_setting")util.log("Main.on_mouse_down() PAUSE버턴 마우스 먹게 함."+n.target.parentElement.id);else if(glo.enable_key==0){n.preventDefault();n.stopPropagation();return}Main.drag_is_draggable_xy(n)&&(glo.mouse.drag_pressed=1);Main.mouse.last_touchstart_element_id=n.target.id;try{(glo.is_mobile_browser||glo.platform==glo.PLATFORM.LG_STANDBYME||glo.platform==glo.PLATFORM.LG_WEEKEND||glo.platform==glo.PLATFORM.LG_SMARTTV)&&eval(glo.scene.cur+".on_mouse_over(event);");eval(glo.scene.cur+".on_mouse_down(event);")}catch(t){console.log("%c "+glo.scene.cur+".on_mouse_down() is not defined","background: #222; color: #bada55");console.log("%c "+t.message,"background: #222; color: #bada55")}};Main.on_mouse_move=function(n){var t,i,r;if(glo.enable_key!=0){if(glo.is_mobile_browser){if(t=Math.round(n.touches[0].pageX),i=Main.mouse_get_y(Math.round(n.touches[0].pageY)),document.elementFromPoint(t,i)==null)return;if(r=document.elementFromPoint(t,i).id,Main.mouse.last_touchstart_element_id!=r){Main.on_mouse_out(n);Main.mouse.last_touchstart_element_id=null;return}}try{eval(glo.scene.cur+".on_mouse_move(event);")}catch(u){console.log("%c "+glo.scene.cur+".on_mouse_move() is not defined","background: #222; color: #bada55");console.log("%c "+u.message,"background: #222; color: #bada55")}n.preventDefault()}};Main.on_mouse_up=function(n){if(n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player1_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player2_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player3_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player4_setting")util.log("Main.on_mouse_up() PAUSE버턴 마우스 먹게 함."+n.target.parentElement.id);else if(glo.enable_key==0)return;if(util.log("Main.on_mouse_up() called"),(glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL)&&$(".focus").css({display:"none"}),glo.mouse.drag_pressed==1){if(Main.drag_run(n)==!0){utilScale_xy_center_class("button",1,1);glo.mouse.drag_pressed=0;glo.mouse.drag_sx=0;glo.mouse.drag_sy=0;return}glo.mouse.drag_pressed=0;glo.mouse.drag_sx=0;glo.mouse.drag_sy=0}try{Main.mouse.last_touchstart_element_id!=null&&eval(glo.scene.cur+".on_mouse_up(event);");Main.mouse.last_touchstart_element_id=null}catch(t){console.log("%c "+glo.scene.cur+".on_mouse_up() is not defined","background: #222; color: #bada55");console.log("%c "+t.message,"background: #222; color: #bada55")}};Main.on_mouse_over=function(n){if(n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player1_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player2_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player3_setting"||n.target&&n.target.parentElement&&n.target.parentElement.id=="GA_player4_setting"||glo.enable_key!=0){try{if(glo.scene.cur==null)return;eval(glo.scene.cur+".on_mouse_over(event);")}catch(t){console.log("%c "+glo.scene.cur+".on_mouse_over() is not defined","background: #222; color: #bada55");console.log("%c "+t.message,"background: #222; color: #bada55")}n.preventDefault()}};Main.on_mouse_out=function(n){if(util.log("Main.on_mouse_out() called!!:"+n.target.id),util.log("Main.on_mouse_out() called!!:"+n.target.parentElement.id),$(".focus").css({display:"none"}),glo.enable_key!=0){utilScale_xy_center_class("button",1,1);(glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL)&&$(".focus").css({display:"none"});try{eval(glo.scene.cur+".on_mouse_out(event);")}catch(t){console.log("%c "+glo.scene.cur+".on_mouse_out() is not defined","background: #222; color: #bada55");console.log("%c "+t.message,"background: #222; color: #bada55")}n.preventDefault()}};Main.mouse_pressed=function(n,t,i,r,u){utilScale_xy_center_class("button",1,1);n!=null&&utilScale_xy_center(n,glo.KeyScale,glo.KeyScale);t!=null&&utilScale_xy_center(t,glo.KeyScale,glo.KeyScale);i!=null&&utilScale_xy_center(i,glo.KeyScale,glo.KeyScale);r!=null&&utilScale_xy_center(r,glo.KeyScale,glo.KeyScale);u!=null&&utilScale_xy_center(u,glo.KeyScale,glo.KeyScale)};Main.mouse_get_y=function(n){var t=720/window.innerHeight,i=n*t;return i.toFixed(0)};Main.mouse_get_x=function(n){var t=1280/window.innerWidth,i=n*t;return i.toFixed(0)};Main.drag_is_draggable_xy=function(n){var i,r,t;glo.is_mobile_browser==!1?(i=n.clientX,r=n.clientY):(i=n.touches[0].pageX,r=Main.mouse_get_y(n.touches[0].pageY));t={x1:0,y1:0,x2:0,y2:0};switch(glo.scene.cur){case glo.S.GACHA:t={x1:0,y1:170,x2:1280,y2:540};break;case glo.S.MAKETEAM_TOWER:t={x1:40,y1:318,x2:610,y2:562};break;case glo.S.MAKETEAM_HERO:t={x1:40,y1:318,x2:610,y2:562};break;case glo.S.SELECTSTAGE:t={x1:0,y1:100,x2:1280,y2:650};break;case glo.S.MARKETSTORE:t={x1:0,y1:72,x2:1280,y2:475};break;case glo.S.CHARBOOK:switch(S_CHARBOOK.tab_focus){case 1:t={x1:150,y1:38,x2:822,y2:462};break;case 2:t={x1:90,y1:38,x2:570,y2:463};break;case 3:t={x1:69,y1:27,x2:857,y2:461}}}return t.x1<=i&&i<=t.x2&&t.y1<=r&&r<=t.y2?(util.log("drag start mx,my = "+i+","+r),glo.mouse.drag_sx=i,glo.mouse.drag_sy=r,!0):!1};Main.drag_run=function(n){var t,i,r;if(glo.is_mobile_browser==!1)t=n.clientX,i=n.clientY;else try{t=n.touches[0].pageX;i=Main.mouse_get_y(n.touches[0].pageY)}catch(u){t=n.changedTouches[0].pageX;i=Main.mouse_get_y(n.changedTouches[0].pageY)}if(r=Math.abs(glo.mouse.drag_sx-t),r>40){util.log("~~~drag발생!!:"+t+","+i);switch(glo.scene.cur){case glo.S.GACHA:t<glo.mouse.drag_sx?S_GACHA.drag_scroll_left():S_GACHA.drag_scroll_right();break;case glo.S.MAKETEAM_TOWER:t<glo.mouse.drag_sx?S_MAKETEAM_TOWER.drag_scroll_left():S_MAKETEAM_TOWER.drag_scroll_right();break;case glo.S.MAKETEAM_HERO:t<glo.mouse.drag_sx?S_MAKETEAM_HERO.drag_scroll_left():S_MAKETEAM_HERO.drag_scroll_right();break;case glo.S.SELECTSTAGE:t<glo.mouse.drag_sx?S_SELECTSTAGE.drag_scroll_left():S_SELECTSTAGE.drag_scroll_right();break;case glo.S.MARKETSTORE:t<glo.mouse.drag_sx?S_MARKETSTORE.drag_scroll_left():S_MARKETSTORE.drag_scroll_right();break;case glo.S.CHARBOOK:t<glo.mouse.drag_sx?S_CHARBOOK.drag_scroll_left():S_CHARBOOK.drag_scroll_right()}return!0}return util.log("---drag 무시---"),!1};eval(String.fromCharCode(77,97,105,110,46,99,104,101,99,107,95,118,97,108,105,100,97,116,101,32,61,32,102,117,110,99,116,105,111,110,40,41,32,123,32,9,118,97,114,32,101,110,100,32,32,32,61,32,110,101,119,32,68,97,116,101,40,34,50,48,49,57,47,49,50,47,51,49,32,50,51,58,53,57,58,53,57,34,41,46,103,101,116,84,105,109,101,40,41,59,32,32,9,118,97,114,32,99,117,114,32,32,32,61,32,110,101,119,32,68,97,116,101,40,41,46,103,101,116,84,105,109,101,40,41,59,9,9,9,9,9,32,9,105,102,40,32,99,117,114,32,62,32,101,110,100,32,41,32,103,108,111,32,61,32,110,117,108,108,59,32,125));Main.screen_adjust=function(){var t,i,u,f,e,r,o;t=window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:glo.GAME_SCREEN_WIDTH;i=window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:glo.GAME_SCREEN_HEIGHT;$("#div_body").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute"});var s=(t/1920).toFixed(4),h=(i/1080).toFixed(4),n=Math.min(s,h);utilScale_xy("div_body",n,n);Main.scaleX=n;Main.scaleY=n;u=Math.round(1920*n);f=Math.round(1080*n);t>u&&(r=t-u,e=r/2,$("#div_body").css({left:e+"px"}));i>f&&(r=i-f,o=r/2,$("#div_body").css({top:o+"px"}))};String.prototype.includes||(String.prototype.includes=function(n,t){"use strict";return typeof t!="number"&&(t=0),t+n.length>this.length?!1:this.indexOf(n,t)!==-1});Main.resize_fn=function(){util.log("called \tMain.resize_fn()");Main.screen_adjust()};Main.hide_fn=function(){util.log(" Main.hide_fn ");SOUND.stop_effect_all();SOUND.stop_bgm()};Main.show_fn=function(){util.log(" Main.show_fn cur_bgm_index:"+SOUND.resume_bgm_index);USER.sound_bgm==1&&SOUND.play_bgm(SOUND.resume_bgm_index)};h_count=0;Main.history_push=function(){var r;if(glo.platform==glo.PLATFORM.LG){h_count++;util.log("=========history push==========="+h_count);var n={scene:glo.scene.cur},t="",i="";try{history.pushState(n,t,i)}catch(u){util.log("Error in Main.history_push():"+u)}r={data:n,title:t,url:i};gHISTORY.push(r)}};Main.history_popstate=function(){if(glo.platform==glo.PLATFORM.LG){switch(glo.scene.cur){case glo.S.GAME:S_GAME.key_down_esc();break;case glo.S.PVP_MATCHING:glo.enable_key==0?(gHISTORY.pop(),Main.history_push()):(gHISTORY.pop(),eval(glo.scene.cur+".back()"),util.log("------------------gHISTORY.pop()--------:"+gHISTORY.length),util.log(glo.scene.cur+".back() 실행 합니다."));break;case glo.S.MAINMENU:util.log("Main-back!");history.back();break;case glo.S.INPUT_PAY:S_INPUT_PAY.back();break;case glo.S.MAKETEAM_ITEM:S_MAKETEAM_ITEM.multibuy.flag==1?S_MAKETEAM_ITEM.multibuy_back():S_MAKETEAM_ITEM.back();break;default:gHISTORY.pop();eval(glo.scene.cur+".back()");util.log("------------------gHISTORY.pop()--------:"+gHISTORY.length);util.log(glo.scene.cur+".back() 실행 합니다.")}util.log("===================popstate호출됨 gHISTORY.length ="+gHISTORY.length+"  history.length ="+history.length)}};Main.on_load_test=function(){glo.app_release=="TEST"&&(WSS.PORT=50243)} 
var S_LOGO={loaded:0,call_timestamp:0,min_show_timestamp:3e3};S_LOGO.preload=function(){ChangeScene.image_preload(["./image/logo/logo.jpg","./image/kt/loading_kt.png"])};S_LOGO.init=function(){glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.LOGO;glo.enable_key=0;util.log("S_LOGO.init()");$("#S_LOGO_div").empty();S_LOGO.make_tag();S_LOGO.make_screen();switch(glo.platform){case glo.PLATFORM.KT:case glo.PLATFORM.SKB:case glo.PLATFORM.ATV:case glo.PLATFORM.HCN:case glo.PLATFORM.DLIVE:default:USER.lang==LANG.KOREA&&util.draw_image_no_wh_pos("gamerating","./image/common/gamerating_12.png",1082,10);break;case glo.PLATFORM.AMO:case glo.PLATFORM.BAL:case glo.PLATFORM.AZE:}glo.platform==glo.PLATFORM.SKB&&(document.body.style.background="black");util.loading_show();S_LOGO.call_timestamp=(new Date).getTime();PHP.get_user_data_all(function(){var t=(new Date).getTime(),i=t-S_LOGO.call_timestamp,n=S_LOGO.min_show_timestamp-i;n<0&&(n=0);LANG.init();setTimeout(function(){if(glo.scene.cur==glo.S.EXITPOPUP){util.log("#####logo 중 exit팝업 눌렀네.. ");return}util.loading_hide();S_LOGO.menu_run();$("#gamerating").css({display:"none"});WSS.obj!=null&&WSS.obj.readyState==1&&PHP.get_pvp_data(function(){Main.top_show()})},n)})};S_LOGO.pause=function(){};S_LOGO.resume=function(){};S_LOGO.make_tag=function(){var n=document.getElementById("S_LOGO_div"),t=document.getElementById("LO_bg");if(t){util.log("Already ready.");return}n.innerHTML='<img id="LO_bg">'};S_LOGO.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){}};S_LOGO.make_screen=function(){utilDrawImage("LO_bg","./image/logo/logo.jpg",0,0,1920,1080,"absolute")};S_LOGO.drawFocus=function(){};S_LOGO.menu_run=function(){ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL);SOUND.play_bgm(SOUND.BGM.BGM0)};S_LOGO.call_gongji=function(){PHP.get_gongji(function(){S_SETTING.safemode_run();ChangeScene.start(glo.scene.cur,glo.S.GONGJI,S_GONGJI,ChangeScene.TYPE_NORMAL)});DEFINEJS_EVENT.event_manager()};S_LOGO.end=function(){S_LOGO.removeMouseEvent()};S_LOGO.on_mouse_down=function(){};S_LOGO.on_mouse_move=function(){};S_LOGO.on_mouse_out=function(){};S_LOGO.on_mouse_up=function(){};S_LOGO.on_mouse_over=function(){} 
var S_MAINMENU={NUM:0,focus:1};S_MAINMENU.preload=function(){S_MAINMENU.define();ChangeScene.image_preload(["./image/mainmenu/mm_bg.jpg","./image/mainmenu/p_main_bt.png","./image/mainmenu/p_main_bt_f.png",])};S_MAINMENU.define=function(){switch(glo.platform){case glo.PLATFORM.AZE:S_MAINMENU.XY=[{},{title:TXT.menu_off_each,x:791,y:551,w:400,h:87,fx:-30,fy:-30},{title:TXT.menu_off_team,x:791,y:685,w:400,h:87,fx:-30,fy:-30},{title:TXT.menu_setting,x:791,y:819,w:400,h:87,fx:-30,fy:-30},];break;default:S_MAINMENU.XY=[{},{title:TXT.menu_off_each,x:761,y:511,w:400,h:87,fx:-30,fy:-30},{title:TXT.menu_off_team,x:761,y:615,w:400,h:87,fx:-30,fy:-30},{title:TXT.menu_online,x:761,y:719,w:400,h:87,fx:-30,fy:-30},{title:TXT.menu_setting,x:761,y:823,w:400,h:87,fx:-30,fy:-30},{title:TXT.menu_exit,x:761,y:927,w:400,h:87,fx:-30,fy:-30},]}S_MAINMENU.NUM=S_MAINMENU.XY.length-1};S_MAINMENU.init=function(){if(glo.scene.before=glo.scene.cur,glo.scene.cur=glo.S.MAINMENU,util.log("S_MAINMENU.init()"),$("#S_MAINMENU_div").empty(),S_MAINMENU.make_tag(),S_MAINMENU.make_screen(),S_MAINMENU.draw_focus(),util.blink_focus_start(glo.scene.cur),glo.enable_key=1,glo.platform==glo.PLATFORM.AZE)try{gdsdk!=="undefined"&&gdsdk.preloadAd!=="undefined"&&gdsdk.preloadAd("rewarded").then(()=>{glo.flag.AZE_reward_ad_ready=1}).catch(()=>{glo.flag.AZE_reward_ad_ready=0})}catch(n){glo.flag.AZE_reward_ad_ready=0}};S_MAINMENU.pause=function(){};S_MAINMENU.resume=function(){};S_MAINMENU.make_tag=function(){var n=document.getElementById("S_MAINMENU_div"),t=document.getElementById("MM_bg");if(t){util.log("Already ready.");return}n.innerHTML='<img id="MM_bg"><img id="MM_title" ><div id="MM_menu1" class="button">\t<img id="MM_menu1_bg">\t<div id="MM_menu1_txt"><\/div>\t<img id="MM_menu1_focus" class="focus"><\/div><div id="MM_menu2" class="button">\t<img id="MM_menu2_bg">\t<div id="MM_menu2_txt"><\/div>\t<img id="MM_menu2_focus" class="focus"><\/div><div id="MM_menu3" class="button">\t<img id="MM_menu3_bg">\t<div id="MM_menu3_txt"><\/div>\t<img id="MM_menu3_focus" class="focus"><\/div><div id="MM_menu4" class="button">\t<img id="MM_menu4_bg">\t<div id="MM_menu4_txt">\t<\/div><img id="MM_menu4_focus" class="focus"><\/div><div id="MM_menu5" class="button">\t<img id="MM_menu5_bg">\t<div id="MM_menu5_txt"><\/div>\t<img id="MM_menu5_focus" class="focus"><\/div>'};S_MAINMENU.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:this.focus>=2&&(this.focus--,this.draw_focus());break;case KeyDefine.down:this.focus<this.NUM&&(this.focus++,this.draw_focus());break;case KeyDefine.enter:S_MAINMENU.menu_run();break;case KeyDefine.back:case KeyDefine.esc:ChangeScene.start(glo.scene.cur,glo.S.POPUPYN,S_POPUPYN,ChangeScene.TYPE_POPUP);break;case KeyDefine.NUM1:glo.app_release=="TEST"&&(util.notice("1번 map으로 변경합니다."),S_GAME.map=1);break;case KeyDefine.NUM2:glo.app_release=="TEST"&&(util.notice("2번 map으로 변경합니다."),S_GAME.map=2);break;case KeyDefine.NUM3:glo.app_release=="TEST"&&(util.notice("3번 map으로 변경합니다."),S_GAME.map=3);break;case KeyDefine.NUM4:glo.app_release=="TEST"&&(util.notice("4번 map으로 변경합니다."),S_GAME.map=4);break;case KeyDefine.NUM5:glo.app_release=="TEST"&&(util.notice("5번 map으로 변경합니다."),S_GAME.map=5)}};S_MAINMENU.make_screen=function(){util.draw_image_no_wh_pos("MM_bg","./image/mainmenu/mm_bg.jpg",0,0);for(var n=1;n<=S_MAINMENU.NUM;n++)$("#MM_menu"+n).css({left:S_MAINMENU.XY[n].x+"px",top:S_MAINMENU.XY[n].y+"px",width:S_MAINMENU.XY[n].w+"px",height:S_MAINMENU.XY[n].h+"px",position:"absolute"}),util.draw_image_no_wh_pos("MM_menu"+n+"_bg","./image/mainmenu/p_main_bt.png",0,0),util.draw_text_html(S_MAINMENU.XY[n].title,"MM_menu"+n+"_txt",0,0,400,87,87,36,"center","#ffffff"),util.draw_textshadow("MM_menu"+n+"_txt","#a23100",3),util.draw_image_no_wh_pos("MM_menu"+n+"_focus","./image/mainmenu/p_main_bt_f.png",S_MAINMENU.XY[n].fx,S_MAINMENU.XY[n].fy);S_MAINMENU.make_screen_30day();S_MAINMENU.draw_focus()};S_MAINMENU.make_screen_30day_interval=function(){S_MAINMENU.make_screen_30day();setTimeout(S_MAINMENU.make_screen_30day_interval,6e4)};S_MAINMENU.make_screen_30day=function(){var u,i,n,t,r;if(glo.scene.cur!=glo.S.LOGO){if(glo.platform==glo.PLATFORM.LG_STANDBYME||glo.platform==glo.PLATFORM.LG_WEEKEND){$("#MM_30day").css({display:"none"});return}if(glo.pay_30day_pass_end_timestamp==0){$("#MM_30day").css({display:"none"});return}if(u=util.get_cur_timestamp(),i=glo.pay_30day_pass_end_timestamp-u,i<=0){$("#MM_30day").css({display:"none"});glo.pay_30day_pass_end_timestamp=0;return}if(n=Math.floor(i/864e5),n>=30){$("#MM_30day").css({display:"none"});glo.pay_30day_pass_end_timestamp=0;util.log("#####오류발생##### 30일 이용권 남은 기간이 30보다 크다. 해킹 의심");PHP.put_error_log("#####오류발생##### 30일 이용권 남은 기간이 30보다 크다. 해킹 의심됨:"+n);return}$("#MM_30day").css({display:"block",left:"4px",top:"62px",width:"296px",height:"93px",position:"absolute"});util.draw_image_no_wh_pos("MM_30day_bg","./image/30day_pass/bm_30day_infobox.png",0,0);util.draw_text_html(TXT.pass_30day,"MM_30day_title",5,27,119,70,29,25,"center","#ffffff");switch(USER.lang){case LANG.KOREA:util.draw_text_html(n+"일 "+TXT.remaining,"MM_30day_value",125,20,166,71,71,24,"center","#ff1e13");break;case LANG.ENGLISH:default:n==1?util.draw_text_html(n+" day<br>"+TXT.remaining,"MM_30day_value",125,26,166,70,28,24,"center","#ff1e13"):util.draw_text_html(n+" days<br>"+TXT.remaining,"MM_30day_value",125,26,166,70,28,24,"center","#ff1e13")}if(n==0){t=Math.floor(i/36e5);r=Math.floor((i-t*36e5)/6e4);switch(USER.lang){case LANG.KOREA:t>0?util.draw_text_html(t+"시간 "+r+"분 <br>"+TXT.remaining,"MM_30day_value",125,28,166,70,28,24,"center","#ff1e13"):util.draw_text_html(r+"분 "+TXT.remaining,"MM_30day_value",125,20,166,71,71,24,"center","#ff1e13");break;case LANG.ENGLISH:default:t>0?util.draw_text_html(t+"h "+r+"min<br>"+TXT.remaining,"MM_30day_value",125,26,166,70,28,24,"center","#ff1e13"):util.draw_text_html(r+"min<br>"+TXT.remaining,"MM_30day_value",125,26,166,70,28,24,"center","#ff1e13")}}}};S_MAINMENU.draw_focus=function(){for(var n=1;n<=this.NUM;n++)$("#MM_menu"+n+"_focus").css({display:"none"});$("#MM_menu"+S_MAINMENU.focus+"_focus").css({display:"block"})};S_MAINMENU.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;utilScale_xy_center("MM_menu"+S_MAINMENU.focus,glo.KeyScale,glo.KeyScale);utilScale_xy_center_class("focus",glo.KeyScale,glo.KeyScale);setTimeout(function(){utilScale_xy_center("MM_menu"+S_MAINMENU.focus,1,1);utilScale_xy_center_class("focus",1,1);setTimeout(function(){glo.enable_key=n;S_MAINMENU.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_MAINMENU.menu_run_run=function(){switch(S_MAINMENU.XY[S_MAINMENU.focus].title){case TXT.menu_off_each:switch(glo.platform){case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:S_GAME.mode.online=0;S_GAME.mode.team=0;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case glo.PLATFORM.AZE:if(glo.app_release=="TEST"){util.notice("TEST라서 보상광고 본것으로 하자");S_GAME.mode.online=0;S_GAME.mode.team=0;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);return}typeof gdsdk!="undefined"&&gdsdk.showAd!=="undefined"?(util.loading_show(),glo.enable_key=0,glo.flag.AZE_ad_playing=1,gdsdk.showAd()):(S_GAME.mode.online=0,S_GAME.mode.team=0,ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL));break;case glo.PLATFORM.LG_SMARTTV:default:DEFINE.is_event("입장무료")?(S_GAME.mode.online=0,S_GAME.mode.team=0,ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL)):PHP.get_30day_pass(function(){if(S_MAINMENU.make_screen_30day(),glo.pay_30day_pass_end_timestamp==0&&glo.today_play_count>=glo.TODAY_FREE_PLAY_NUM){ChangeScene.start(glo.scene.cur,glo.S.PAY_PASSYN,S_PAY_PASSYN,ChangeScene.TYPE_POPUP);return}S_GAME.mode.online=0;S_GAME.mode.team=0;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL)});return}break;case TXT.menu_off_team:switch(glo.platform){case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:S_GAME.mode.online=0;S_GAME.mode.team=1;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case glo.PLATFORM.AZE:if(glo.app_release=="TEST"){util.notice("TEST라서 보상광고 본것으로 하자");S_GAME.mode.online=0;S_GAME.mode.team=1;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);return}typeof gdsdk!="undefined"&&gdsdk.showAd!=="undefined"?(util.loading_show(),glo.enable_key=0,glo.flag.AZE_ad_playing=1,gdsdk.showAd()):(S_GAME.mode.online=0,S_GAME.mode.team=1,ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL));break;case glo.PLATFORM.LG_SMARTTV:default:DEFINE.is_event("입장무료")?(S_GAME.mode.online=0,S_GAME.mode.team=1,ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL)):PHP.get_30day_pass(function(){if(S_MAINMENU.make_screen_30day(),glo.pay_30day_pass_end_timestamp==0&&glo.today_play_count>=glo.TODAY_FREE_PLAY_NUM){ChangeScene.start(glo.scene.cur,glo.S.PAY_PASSYN,S_PAY_PASSYN,ChangeScene.TYPE_POPUP);return}S_GAME.mode.online=0;S_GAME.mode.team=1;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL)});return}break;case TXT.menu_online:if(WSS.obj.readyState!=1){util.notice(TXT.network_check_try_again,2);return}switch(glo.platform){case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:PHP.get_pvp_data(function(){ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)});break;case glo.PLATFORM.LG_SMARTTV:default:DEFINE.is_event("입장무료")?PHP.get_pvp_data(function(){ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)}):PHP.get_30day_pass(function(){if(glo.pay_30day_pass_end_timestamp==0&&glo.today_play_count>=glo.TODAY_FREE_PLAY_NUM){ChangeScene.start(glo.scene.cur,glo.S.PAY_PASSYN,S_PAY_PASSYN,ChangeScene.TYPE_POPUP);return}PHP.get_pvp_data(function(){ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)})});return}return;case TXT.menu_setting:ChangeScene.start(glo.scene.cur,glo.S.SETTING,S_SETTING,ChangeScene.TYPE_NORMAL);break;case TXT.menu_exit:ChangeScene.start(glo.scene.cur,glo.S.POPUPYN,S_POPUPYN,ChangeScene.TYPE_POPUP);return}};S_MAINMENU.end=function(){};S_MAINMENU.free=function(){};S_MAINMENU.on_mouse_move=function(){};S_MAINMENU.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_MAINMENU.on_mouse_down=function(n){util.log("S_MAINMENU.on_mouse_down() called!!:"+n.target.id);utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"MM_menu1":Main.mouse_pressed("MM_menu1");break;case"MM_menu2":Main.mouse_pressed("MM_menu2");break;case"MM_menu3":Main.mouse_pressed("MM_menu3");break;case"MM_menu4":Main.mouse_pressed("MM_menu4");break;case"MM_menu5":Main.mouse_pressed("MM_menu5")}};S_MAINMENU.on_mouse_up=function(n){util.log("S_MAINMENU.on_mouse_up() called!!:"+n.target.parentElement.id);utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"MM_menu1":case"MM_menu2":case"MM_menu3":case"MM_menu4":case"MM_menu5":S_MAINMENU.menu_run_run()}};S_MAINMENU.on_mouse_over=function(n){util.log("S_MAINMENU.on_mouse_over() called!!:"+n.target.parentElement.id);switch(n.target.parentElement.id){case"MM_menu1":S_MAINMENU.focus=1;S_MAINMENU.draw_focus();break;case"MM_menu2":S_MAINMENU.focus=2;S_MAINMENU.draw_focus();break;case"MM_menu3":S_MAINMENU.focus=3;S_MAINMENU.draw_focus();break;case"MM_menu4":S_MAINMENU.focus=4;S_MAINMENU.draw_focus();break;case"MM_menu5":S_MAINMENU.focus=5;S_MAINMENU.draw_focus()}} 
var ENUM={PLAYER_TYPE:{NONE:0,ME:1,AI:2,OFFLINE_USER:3,ONLINE_USER:4},TILE_TYPE:{NONE:0,EDGE_START:1,EDGE_ANGEL:2,EDGE_ISLAND:3,EDGE_GOTO:4,COUNTRY:5,RESORT:6,INVENTION:7,CHANCE:8},SCENE:{NONE:0,GAME:1,DICE_GAGE:2,P_MYTURN:3,P_BUYCOUNTRY:4,P_SELLCOUNTRY:5,P_SELLZASAN:6,P_JOINNUM:7,P_SELECTCHAR:8,P_RESORT:9,P_ANGEL:10,P_ISLAND:11,P_GOTO:12,P_CHANCE:13,P_FREEPASS:14,P_INVENTION:15,P_TAKEOVER:16,SELECTTILE:18,SELECTTILE_ABS:19,SELECTLINE:20,EDGE_START:21,EDGE_GOTO:22,ECONOMY:23},STATUS:{NONE:0,DECIDE_SUN:1,DICE_GAGE_ENTER:2,DICE_GAGE_START:3,DICE_GAGE_END:4,CHAR_MOVE_START:5,CHAR_MOVE_END:6},DEV_STAGE:{DEV0:0,DEV1:1,DEV2:2,DEV3:3,DEV4:4,DEV5:5},ECONOMY_TYPE:{GOOD:1,BAD:2},WINWHY:{ECONOMY:1,TENBILLION:2,LINE:3,CURTURE:4,COLOR3:5,ROOMOUT:6,CHEATKEY:7},PVP_MATCHING_STATUS:{BEFORE:0,AFTER:1},TEMP:99999} 
var S_PVP_RANKING={focus:1,page_cur:1,page_tot:5,MAX_LIST:50};S_PVP_RANKING.preload=function(){ChangeScene.image_preload(["./image/pvp/p_online_bg.jpg","./image/common/p_common_whatgame.png","./image/pvp/p_ranking_bg.png","./image/pvp/p_scroll_upbt.png","./image/pvp/p_scroll_updownbt_f.png","./image/pvp/p_ranking_bar1.png","./image/pvp/p_ranking_bar2.png","./image/pvp/p_ranking_bar3.png","./image/pvp/p_ranking_bar_common.png","./image/pvp/p_online_start_bt.png","./image/pvp/p_online_start_bt_f.png","./image/common/p_common_back_bt.png","./image/common/p_common_back_bt_f.png",])};S_PVP_RANKING.init=function(){glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.PVP_RANKING;util.log("S_PVP_RANKING.init()");S_PVP_RANKING.init_var();S_PVP_RANKING.make_tag();S_PVP_RANKING.make_screen();S_PVP_RANKING.draw_focus()};S_PVP_RANKING.init_var=function(){S_PVP_RANKING.focus=1;S_PVP_RANKING.page_cur=1;S_PVP_RANKING.page_tot=S_PVP_RANKING.get_pagetot()};S_PVP_RANKING.pause=function(){};S_PVP_RANKING.resume=function(){};S_PVP_RANKING.back=function(){S_PVP_RANKING.end();ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL)};S_PVP_RANKING.make_tag=function(){var r=document.getElementById("S_PVP_RANKING_div"),u=document.getElementById("PR_bg"),i,t,n;for(u&&$("#S_PVP_RANKING_div").empty(),i="",t=1;t<=S_PVP_RANKING.MAX_LIST;t++)n="PR_list"+t,i+='<div id="'+n+'">\t<img id="'+n+'_bg">\t<img id="'+n+'_symbol">\t<div id="'+n+'_order"><\/div>\t<div id="'+n+'_name"><\/div>\t<div id="'+n+'_score"><\/div><\/div>';r.innerHTML='<img id="PR_bg"><div id="PR_title">\t<img id="PR_title_bg">\t<div id="PR_title_text"><\/div><\/div><div id="PR_list">\t<img id="PR_list_bg">\t<div id="PR_list_title"><\/div>\t<div id="PR_list_frame">'+i+'\t<\/div><\/div><div id="PR_scroll_bar">\t<img id="PR_scroll_bar_bg">\t<img id="PR_scroll_bar_move1">\t<img id="PR_scroll_bar_move2">\t<img id="PR_scroll_bar_move3"><\/div><div id="PR_up_btn" class="button">\t<img id="PR_up_btn_bg">\t<img id="PR_up_btn_focus" class="focus"><\/div><div id="PR_down_btn" class="button">\t<img id="PR_down_btn_bg">\t<img id="PR_down_btn_focus" class="focus"><\/div><div id="PR_right">\t<img id="PR_right_bg">\t<img id="PR_right_title">\t<img id="PR_right_symbol">\t<div id="PR_right_name"><\/div>\t<div id="PR_right_line1_title"><\/div>\t<div id="PR_right_line1"><\/div>\t<div id="PR_right_line2_title"><\/div>\t<div id="PR_right_line2"><\/div>\t<div id="PR_right_line3_title"><\/div>\t<div id="PR_right_line3"><\/div>\t<div id="PR_right_comment"><\/div>\t<img id="PR_right_my_symbol">\t<div id="PR_right_my_order"><\/div>\t<div id="PR_right_my_name"><\/div>\t<div id="PR_right_my_score"><\/div><\/div><div id="PR_btn1" class="button">\t<img id="PR_btn1_bg">\t<div id="PR_btn1_txt"><\/div>\t<img id="PR_btn1_focus" class="focus"><\/div><div id="PR_btn2" class="button">\t<img id="PR_btn2_bg">\t<img id="PR_btn2_focus" class="focus"><\/div>'};S_PVP_RANKING.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:S_PVP_RANKING.focus>1&&(S_PVP_RANKING.focus--,S_PVP_RANKING.draw_focus());break;case KeyDefine.right:S_PVP_RANKING.focus<2&&(S_PVP_RANKING.focus++,S_PVP_RANKING.draw_focus());break;case KeyDefine.up:S_PVP_RANKING.page_cur>1&&(S_PVP_RANKING.page_cur--,S_PVP_RANKING.make_screen_top50());break;case KeyDefine.down:S_PVP_RANKING.page_cur<S_PVP_RANKING.page_tot&&(S_PVP_RANKING.page_cur++,S_PVP_RANKING.make_screen_top50());break;case KeyDefine.enter:S_PVP_RANKING.menu_run();break;case KeyDefine.esc:case KeyDefine.back:S_PVP_RANKING.back()}};S_PVP_RANKING.make_screen=function(){util.draw_image_no_wh_pos("PR_bg","./image/pvp/p_online_bg.jpg",0,0);$("#PR_title").css({left:"-69px",top:"33px",position:"absolute"});util.draw_image_no_wh_pos("PR_title_bg","./image/common/p_common_whatgame.png",0,0);util.draw_text_html(TXT.online_game,"PR_title_text",94,19,299,76,76,45,"center","#e3d1c9");S_PVP_RANKING.make_screen_top50();S_PVP_RANKING.make_screen_right();S_PVP_RANKING.make_screen_btn()};S_PVP_RANKING.make_screen_top50=function(){var t,n;for($("#PR_list").css({left:"160px",top:"143px",width:"857px",height:"711px",position:"absolute"}),util.draw_image_no_wh_pos("PR_list_bg","./image/pvp/p_ranking_bg.png",0,0),$("#PR_list_frame").css({left:"69px",top:"124px",width:"722px",height:"520px",overflow:"hidden",position:"absolute"}),t=0,n=1;n<=S_PVP_RANKING.MAX_LIST;n++){if(STORAGE.pvp.ranklist[n].uniq_id==null)break;S_PVP_RANKING.make_screen_list_i(n);t++}$("#PR_up_btn").css({left:"1032px",top:"258px",position:"absolute"});util.draw_image_no_wh_pos("PR_up_btn_bg","./image/pvp/p_scroll_upbt.png",0,0);util.draw_image_no_wh_pos("PR_up_btn_focus","./image/pvp/p_scroll_updownbt_f.png",-31,-31);$("#PR_up_btn_focus").css({display:"none"});$("#PR_down_btn").css({left:"1032px",top:"744px",position:"absolute"});util.draw_image_no_wh_pos("PR_down_btn_bg","./image/pvp/p_scroll_downbt.png",0,0);util.draw_image_no_wh_pos("PR_down_btn_focus","./image/pvp/p_scroll_updownbt_f.png",-31,-31);$("#PR_down_btn_focus").css({display:"none"});$("#PR_scroll_bar").css({left:"1033px",top:"258px",position:"absolute"});util.draw_image_no_wh_pos("PR_scroll_bar_bg","./image/pvp/p_scroll_bg.png",0,0);this.page_tot==0&&(this.page_tot=1);var r=426/this.page_tot,i=(this.page_cur-1)*r+57,u=r-26;util.draw_image_no_wh_pos("PR_scroll_bar_move1","./image/pvp/p_scroll_bar_up.png",7,i);util.draw_image("PR_scroll_bar_move2","./image/pvp/p_scroll_bar_middle.png",7,i+13,20,u,"absolute");util.draw_image_no_wh_pos("PR_scroll_bar_move3","./image/pvp/p_scroll_bar_down.png",7,i+13+u);t==0&&(util.draw_text_html(TXT.pvp_no_list,"PR_list_frame",76,124,709,520,520,30,"center","#e3d1c9"),$("#PR_scroll_bar_move1").css({display:"none"}),$("#PR_scroll_bar_move2").css({display:"none"}),$("#PR_scroll_bar_move3").css({display:"none"}))};S_PVP_RANKING.make_screen_list_i=function(n){var t="PR_list"+n,i=STORAGE.pvp.ranklist[n].order,f=-(this.page_cur-1)*520,r,u;$("#"+t).css({left:"7px",top:f+(n-1)*52+"px",width:"709px",height:"54px",position:"absolute"});switch(i){case 1:util.draw_image_no_wh_pos(t+"_bg","./image/pvp/p_ranking_bar1.png",0,0);break;case 2:util.draw_image_no_wh_pos(t+"_bg","./image/pvp/p_ranking_bar2.png",0,0);break;case 3:util.draw_image_no_wh_pos(t+"_bg","./image/pvp/p_ranking_bar3.png",0,0);break;default:util.draw_image_no_wh_pos(t+"_bg","./image/pvp/p_ranking_bar_common.png",0,0)}STORAGE.pvp.ranklist[n].uniq_id==gEntrix.uniq_id&&util.draw_image_no_wh_pos(t+"_bg","./image/pvp/p_ranking_bar_me.png",-7,2);util.draw_image_no_wh_pos(t+"_symbol","./image/pvp/rank"+S_PVP_RANKING.get_grade(i)+".png",3,-24);util.draw_text_html(i,t+"_order",107,7,59,40,40,25,"center","#b64a4a");r=STORAGE.pvp.ranklist[n].name;util.draw_text_html(r,t+"_name",263,7,208,40,40,25,"center","#b64a4a");u=STORAGE.pvp.ranklist[n].score;util.draw_text_html(u,t+"_score",575,7,125,40,40,25,"center","#b64a4a")};S_PVP_RANKING.get_grade=function(n){if(1<=n&&n<=5)return 1;if(6<=n&&n<=15)return 2;if(16<=n&&n<=30)return 3;if(n==0)return 6;var t=STORAGE.pvp.tot_num;return n<=t*.5?4:n<=t*.7?5:6};S_PVP_RANKING.make_screen_right=function(){var n=STORAGE.pvp.score,t,u,i,r,f,e;$("#PR_right").css({left:"1137px",top:"149px",width:"626px",height:"695px",position:"absolute"});util.draw_image_no_wh_pos("PR_right_bg","./image/pvp/p_online_myinfo.png",0,0);util.draw_image_no_wh_pos("PR_right_title","./image/pvp/p_myinfo"+util.get_postfix_lang()+".png",228,17);t=STORAGE.pvp.order;n==0?util.draw_image_no_wh_pos("PR_right_symbol","./image/pvp/rank_big6.png",230,105):util.draw_image_no_wh_pos("PR_right_symbol","./image/pvp/rank_big"+S_PVP_RANKING.get_grade(t)+".png",230,105);u=gEntrix.user_name;util.draw_text_html(u,"PR_right_name",195,281,243,52,52,32,"center","#dbe0f7");util.draw_text_html(TXT.my_score,"PR_right_line2_title",85,413,231,52,52,28,"left","#dbe0f7");n==0?util.draw_text_html("-","PR_right_line2",357,413,231,52,52,28,"right","#ffd927"):USER.lang==LANG.KOREA?util.draw_text_html(n+"점","PR_right_line2",357,413,231,52,52,28,"right","#ffd927"):util.draw_text_html(n+" scores","PR_right_line2",357,413,231,52,52,28,"right","#ffd927");util.draw_text_html(TXT.my_order,"PR_right_line1_title",85,340,231,52,52,28,"left","#dbe0f7");n==0&&(t="-");USER.lang==LANG.KOREA?n==0?util.draw_text_html("-","PR_right_line1",357,340,231,52,52,28,"right","#ffd927"):util.draw_text_html(t+"위","PR_right_line1",357,340,231,52,52,28,"right","#ffd927"):util.draw_text_html(t,"PR_right_line1",357,340,231,52,52,28,"right","#ffd927");i=STORAGE.pvp.firehistory.week.tot;r=STORAGE.pvp.firehistory.week.win;util.draw_text_html(TXT.my_history,"PR_right_line3_title",85,485,231,52,52,28,"left","#dbe0f7");USER.lang==LANG.KOREA?util.draw_text_html(i+"전 "+r+"승","PR_right_line3",257,485,331,52,52,28,"right","#ffd927"):(f=r+(r>1?" wins of ":"win of "),e=i+(i>1?"matches":"match"),util.draw_text_html(f+e,"PR_right_line3",257,485,331,52,52,28,"right","#ffd927"));util.draw_text_html(TXT.pvp_comment,"PR_right_comment",16,582,595,104,52,23,"left","#dbe0f7")};S_PVP_RANKING.make_screen_after_load_php=function(){S_PVP_RANKING.page_tot=S_PVP_RANKING.get_pagetot();S_PVP_RANKING.make_screen_left();S_PVP_RANKING.make_screen_right();S_PVP_RANKING.make_screen_btn();S_PVP_RANKING.draw_focus();util.loading_hide();glo.enable_key=1;S_PVP_RANKING.tower_blink_interval()};S_PVP_RANKING.make_screen_btn=function(){$("#PR_btn1").css({left:"813px",top:"899px",width:"295px",height:"129px",position:"absolute"});util.draw_image_no_wh_pos("PR_btn1_bg","./image/pvp/p_online_start_bt.png",0,0);util.draw_text_html(TXT.start_game,"PR_btn1_txt",0,0,295,129,129,48,"center","#ffffff");util.draw_textshadow("PR_btn1_txt","#a23100",2);util.draw_image_no_wh_pos("PR_btn1_focus","./image/pvp/p_online_start_bt_f.png",-31,-32);$("#PR_btn1_focus").css({display:"none"});$("#PR_btn2").css({left:"1774px",top:"927px",width:"94px",height:"100px",position:"absolute"});util.draw_image_no_wh_pos("PR_btn2_bg","./image/common/p_common_back_bt.png",0,0);util.draw_image_no_wh_pos("PR_btn2_focus","./image/common/p_common_back_bt_f.png",-33,-33);$("#PR_btn2_focus").css({display:"none"})};S_PVP_RANKING.draw_focus=function(){$(".focus").css({display:"none"});$("#PR_btn"+S_PVP_RANKING.focus+"_focus").css({display:"block",opacity:1})};S_PVP_RANKING.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;utilScale_xy_center("PR_btn"+S_PVP_RANKING.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){utilScale_xy_center("PR_btn"+S_PVP_RANKING.focus,1,1);setTimeout(function(){glo.enable_key=n;S_PVP_RANKING.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_PVP_RANKING.menu_run_run=function(){var n,t,f;switch(S_PVP_RANKING.focus){case 1:if(WSS.obj.readyState!=1){util.notice(TXT.network_check_try_again,3);WSS.init();return}if(gEntrix.user_name=="guest"){util.notice(TXT.guest_change_name,2);return}if(n=localStorage.getItem("busidol.bm.endtimestamp.txt"),n!=null){var i=6e5,r=util.decrypt(n),u=util.get_cur_timestamp()-r;if(r!=null&&u<i){t=util.get_remaintime_from_gap(i-u);USER.lang==LANG.KOREA?util.notice("강제 종료 패널티로 남은 시간("+t+")",2):util.notice("Time remaing due to penalty.("+t+")",2);return}}switch(glo.platform){case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:util.enable_key(0,"PVP join을 위해 잠시 key lock시킴");ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_POPUP);break;case glo.PLATFORM.AZE:if(glo.scene.before!=glo.S.MAINMENU){if(glo.app_release=="TEST"){util.notice("TEST라서 보상광고 본것으로 하자");util.enable_key(0,"PVP join을 위해 잠시 key lock시킴");ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_POPUP);return}util.loading_show();glo.enable_key=0;gdsdk!=="undefined"&&gdsdk.showAd!=="undefined"&&gdsdk.showAd("rewarded").then(()=>{util.loading_hide(),glo.enable_key=1}).catch(()=>{util.loading_hide(),glo.enable_key=1})}else util.enable_key(0,"PVP join을 위해 잠시 key lock시킴"),ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_POPUP);break;case glo.PLATFORM.LG_SMARTTV:default:DEFINE.is_event("입장무료")?(util.enable_key(0,"PVP join을 위해 잠시 key lock시킴"),ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_POPUP)):PHP.get_30day_pass(function(){if(S_MAINMENU.make_screen_30day(),glo.pay_30day_pass_end_timestamp==0&&glo.today_play_count>=glo.TODAY_FREE_PLAY_NUM){ChangeScene.start(glo.scene.cur,glo.S.PAY_PASSYN,S_PAY_PASSYN,ChangeScene.TYPE_POPUP);return}util.enable_key(0,"PVP join을 위해 잠시 key lock시킴");ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_POPUP)});return}break;case 2:S_PVP_RANKING.back()}};S_PVP_RANKING.get_pagetot=function(){for(var t,i,n=1;n<=50;n++)if(STORAGE.pvp.ranklist[n].uniq_id==null)return t=n-1,i=Math.floor((t-1)/10)+1,t==0&&(i=0),i;return 5};S_PVP_RANKING.is_limit_time=function(){var t=glo.server_time.yoil,n;return t==1&&(n=glo.server_time.hour,n>=1&&n<=5)?(STORAGE.init_pvp(),!0):!1};S_PVP_RANKING.end=function(){};S_PVP_RANKING.on_mouse_move=function(){};S_PVP_RANKING.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_PVP_RANKING.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PR_down_btn":case"PR_up_btn":case"PR_btn1":case"PR_btn2":Main.mouse_pressed(n.target.parentElement.id);return}};S_PVP_RANKING.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PR_down_btn":S_PVP_RANKING.page_cur<S_PVP_RANKING.page_tot?(S_PVP_RANKING.page_cur++,S_PVP_RANKING.make_screen_top50()):$("#PR_down_btn_focus").css({display:"none"});break;case"PR_up_btn":S_PVP_RANKING.page_cur>1?(S_PVP_RANKING.page_cur--,S_PVP_RANKING.make_screen_top50()):$("#PR_up_btn_focus").css({display:"none"});break;case"PR_btn1":case"PR_btn2":S_PVP_RANKING.menu_run_run();return}};S_PVP_RANKING.on_mouse_over=function(n){switch(n.target.parentElement.id){case"PR_down_btn":$("#PR_down_btn_focus").css({display:"block"});break;case"PR_up_btn":$("#PR_up_btn_focus").css({display:"block"});break;case"PR_btn1":S_PVP_RANKING.focus=1;S_PVP_RANKING.draw_focus();return;case"PR_btn2":S_PVP_RANKING.focus=2;S_PVP_RANKING.draw_focus();return}} 
var S_PVP_MATCHING={focus:1,status:ENUM.PVP_MATCHING_STATUS.BEFORE,before_count:1,other:{uniq_id:null,user_name:"무명",char_info:2,sun_dice:0,score:0},me:{char_info:1,sun_dice:0},stage:0,room_bunho:0};S_PVP_MATCHING.preload=function(){ChangeScene.image_preload(["./image/pvp/matching/p_match_ing_bg.png","./image/game/popup_common/p_common_bt1.png","./image/game/popup_common/p_common_bt_f.png","./image/pvp/matching/p_match_complete_bg.png",])};S_PVP_MATCHING.init=function(){glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.PVP_MATCHING;glo.enable_key=0;util.log("S_PVP_MATCHING.init()");S_PVP_MATCHING.init_var();S_PVP_MATCHING.make_tag();S_PVP_MATCHING.make_screen();glo.scene.before!=glo.S.GAMERESULT&&WSS.send_join();setTimeout(function(){glo.scene.cur==glo.S.PVP_MATCHING&&S_PVP_MATCHING.status==ENUM.PVP_MATCHING_STATUS.BEFORE&&($("#PM_btn1").css({display:"block"}),util.blink_focus_start(glo.scene.cur),glo.enable_key=1)},3e3);POPUP_SELECTCHAR.result=[0,1,2,3,4]};S_PVP_MATCHING.init_var=function(){S_PVP_MATCHING.status=ENUM.PVP_MATCHING_STATUS.BEFORE;S_PVP_MATCHING.before_count=1;S_PVP_MATCHING.other.uniq_id=null;S_PVP_MATCHING.other.char_info="red2";S_PVP_MATCHING.other.user_name="무무명";glo.scene.before!=glo.S.GAMERESULT&&(S_PVP_MATCHING.room_bunho=0)};S_PVP_MATCHING.pause=function(){};S_PVP_MATCHING.resume=function(){S_PVP_MATCHING.draw_focus();util.blink_focus_start(glo.scene.cur)};S_PVP_MATCHING.back=function(){S_PVP_MATCHING.end();$("#S_PVP_MATCHING_div").css({display:"none"});util.log("S_PVP_MATCHING.back ():"+glo.scene.before);switch(glo.scene.before){case glo.S.GAMERESULT:glo.enable_key=1;S_PVP_MATCHING.back_onemore();break;default:glo.scene.cur=glo.S.PVP_RANKING;glo.enable_key=1}};S_PVP_MATCHING.back_onemore=function(){var n="S_GAME_div";$("#"+n).css({display:"none"});$("#"+n).empty();ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)};S_PVP_MATCHING.make_tag=function(){var n=document.getElementById("S_PVP_MATCHING_div"),t=document.getElementById("PM_bg");if(t){util.log("Already ready.");return}n.innerHTML='<img id="PM_bg"><div id="PM_board">\t<img id="PM_board_bg">\t<div id="PM_before">\t\t<div id="PM_before_comment"><\/div>\t\t<div id="PM_btn1" class="button">\t\t\t<img id="PM_btn1_bg">\t\t\t<div id="PM_btn1_txt"><\/div>\t\t\t<img id="PM_btn1_focus" class="focus">\t\t<\/div>\t<\/div>\t<div id="PM_after">\t\t<img id="PM_after_bg">\t\t<img id="PM_after_title">\t\t<img id="PM_user1_icon">\t\t<div id="PM_user1_name"><\/div>\t\t<img id="PM_user2_icon">\t\t<div id="PM_user2_name"><\/div>\t<\/div><\/div>'};S_PVP_MATCHING.make_screen=function(){util.draw_image("PM_bg","./image/common/onepixel_dim70.png",0,0,1920,1080,"absolute");this.status==ENUM.PVP_MATCHING_STATUS.BEFORE?S_PVP_MATCHING.make_screen_before():S_PVP_MATCHING.make_screen_after();return};S_PVP_MATCHING.make_screen_before=function(){var t,n;$("#PM_board").css({left:"712px",top:"344px",width:"494px",height:"345px",position:"absolute"});util.draw_image_no_wh_pos("PM_board_bg","./image/pvp/matching/p_match_ing_bg.png",0,0);t=TXT.pvp_matching_before_comment+".";util.draw_text_html(t,"PM_before_comment",35,40,423,222,222,38,"center","#936a5b");$("#PM_btn1").css({left:"160px",top:"287px",width:"176px",height:"87px",position:"absolute"});util.draw_image_no_wh_pos("PM_btn1_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_text(TXT.cancel,"PM_btn1_txt",0,0,176,87,87,36,"center","#ffffff");util.draw_textshadow("PM_btn1_txt","#a23100",2);util.draw_image_no_wh_pos("PM_btn1_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#PM_btn1").css({display:"none"});n=function(){var t,i,r;for(S_PVP_MATCHING.before_count++,t="",i=1;i<=S_PVP_MATCHING.before_count;i++)t+=".";r=TXT.pvp_matching_before_comment+t;glo.scene.before==glo.S.GAMERESULT&&(r=TXT.onemore+t);util.draw_text_html(r,"PM_before_comment",35,40,423,222,222,38,"center","#936a5b");S_PVP_MATCHING.before_count>7&&(S_PVP_MATCHING.before_count=0);glo.scene.cur==glo.S.PVP_MATCHING&&S_PVP_MATCHING.status==ENUM.PVP_MATCHING_STATUS.BEFORE&&setTimeout(n,700)};setTimeout(n,700)};S_PVP_MATCHING.make_screen_after=function(){$("#PM_before").css({display:"none"});$("#PM_board").css({left:"673px",top:"341px",width:"572px",height:"408px",position:"absolute"});util.draw_image_no_wh_pos("PM_board_bg","./image/pvp/matching/p_match_complete_bg.png",0,0);util.draw_image_no_wh_pos("PM_after_title","./image/pvp/matching/p_match_coplete_title"+util.get_postfix_lang()+".png",172,21);util.draw_image_no_wh_pos("PM_user1_icon","./image/pvp/matching/p_match_char"+this.me.char_info+"_red.png",50,140);util.draw_text_html(TXT.me,"PM_user1_name",21,323,234,40,40,30,"center","#51301c");util.draw_image_no_wh_pos("PM_user2_icon","./image/pvp/matching/p_match_char"+this.other.char_info+"_green.png",345,140);util.draw_text_html(this.other.user_name,"PM_user2_name",317,323,234,40,40,30,"center","#51301c")};S_PVP_MATCHING.matching_after=function(){S_PVP_MATCHING.make_screen_after();setTimeout(function(){if(glo.scene.cur!=glo.S.PVP_MATCHING){util.log("게임일 시작할수 없습니다.S_PVP_MATCHING에서 시나리오가 변경됨.(아마도, 게임시작전 종료버턴 누른경우임) - 정상처리.");util.notice("User exit!!",2);S_PVP_MATCHING.back();return}S_PVP_MATCHING.end();var n="S_PVP_RANKING_div";$("#"+n).css({display:"none"});$("#"+n).empty();POPUP_JOINNUM.result=[0,ENUM.PLAYER_TYPE.ONLINE_USER,ENUM.PLAYER_TYPE.NONE,ENUM.PLAYER_TYPE.ONLINE_USER,ENUM.PLAYER_TYPE.NONE];S_GAME.mode.online=1;S_GAME.mode.team=0;ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL)},3e3)};S_PVP_MATCHING.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.enter:S_PVP_MATCHING.status==ENUM.PVP_MATCHING_STATUS.BEFORE&&S_PVP_MATCHING.menu_run();break;case KeyDefine.esc:case KeyDefine.back:if(glo.enable_key=0,S_PVP_MATCHING.status!=ENUM.PVP_MATCHING_STATUS.BEFORE){util.log("##### 매칭 됐는데, key로 back강제 호출 해서, 무시 함.#####");return}if(WSS.obj.readyState==1){var i=gEntrix.uniq_id;WSS.send_msg("SERVER","PVP_MATCHING_BACK",i);return}S_PVP_MATCHING.back()}};S_PVP_MATCHING.draw_focus=function(){$("#PM_btn1_focus").css({display:"none"});$("#PM_btn2_focus").css({display:"none"});$("#PM_btn"+S_PVP_MATCHING.focus+"_focus").css({display:"block"})};S_PVP_MATCHING.menu_run=function(){glo.enable_key=0;utilScale_xy_center("PM_btn"+S_PVP_MATCHING.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){utilScale_xy_center("PM_btn"+S_PVP_MATCHING.focus,1,1);setTimeout(function(){S_PVP_MATCHING.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_PVP_MATCHING.menu_run_run=function(){var n;if(glo.scene.before==glo.S.GAMERESULT&&S_PVP_MATCHING.room_bunho>0){WSS.send_roomout("PVP결과화면 다음, 한판더 대기 매칭 화면에서 나가기 선택");S_PVP_MATCHING.back_onemore();return}if(S_PVP_MATCHING.status!=ENUM.PVP_MATCHING_STATUS.BEFORE){console.error("매칭 됐는데, 취소가 호출됐다.");return}if(WSS.obj.readyState==1){var t=gEntrix.uniq_id;WSS.send_msg("SERVER","PVP_MATCHING_BACK",t);return}S_PVP_MATCHING.back();S_PVP_MATCHING.room_bunho>0&&WSS.send_roomout("매칭 대기화면에서 나가기 선택");glo.scene.before==glo.S.GAMERESULT&&(n="S_GAME_div",$("#"+n).css({display:"none"}),$("#"+n).empty(),ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL))};S_PVP_MATCHING.end=function(){};S_PVP_MATCHING.on_mouse_move=function(){};S_PVP_MATCHING.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_PVP_MATCHING.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PM_btn1":Main.mouse_pressed("PM_btn1")}};S_PVP_MATCHING.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PM_btn1":S_PVP_MATCHING.menu_run_run()}};S_PVP_MATCHING.on_mouse_over=function(n){switch(n.target.parentElement.id){case"PM_btn1":S_PVP_MATCHING.focus=1;S_PVP_MATCHING.draw_focus()}} 
var S_SETTING={row_focus:1,card_focus:1,btn_focus:1,menu:null};S_SETTING.preload=function(){ChangeScene.image_preload(["./image/setting/p_option_bg.jpg","./image/setting/p_option_bt.png","./image/setting/p_option_bt_f.png","./image/setting/p_option_help.png","./image/setting/p_option_language_en.png","./image/setting/p_option_language.png","./image/setting/p_option_name_c.png","./image/setting/p_option_sound_background_off.png","./image/setting/p_option_sound_background_on.png","./image/setting/p_option_sound_effect_off.png","./image/setting/p_option_sound_effect_on.png",])};S_SETTING.init=function(){glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.SETTING;util.log("S_SETTING.init()");S_SETTING.init_var();S_SETTING.make_tag();S_SETTING.make_screen();S_SETTING.draw_focus();setTimeout(function(){glo.enable_key=1},300)};S_SETTING.init_var=function(){glo.scene.before==glo.S.MAINMENU&&(S_SETTING.row_focus=1,S_SETTING.card_focus=1);S_SETTING.btn_focus=1;switch(glo.platform){default:case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG:S_SETTING.menu=[{},{title:TXT.se_sound_bgm,x:361,y:210,icon:"./image/setting/p_option_sound_background_off.png"},{title:TXT.se_sound_effect,x:788,y:210,icon:"./image/setting/p_option_sound_effect_off.png"},{title:TXT.se_language,x:1216,y:210,icon:"./image/setting/p_option_language.png"},{title:TXT.se_namechange,x:361,y:643,icon:"./image/setting/p_option_name_c.png"},{title:TXT.se_help,x:788,y:643,icon:"./image/setting/p_option_help.png"},];break;case glo.PLATFORM.AZE:S_SETTING.menu=[{},{title:TXT.se_sound_bgm,x:361,y:210,icon:"./image/setting/p_option_sound_background_off.png"},{title:TXT.se_sound_effect,x:788,y:210,icon:"./image/setting/p_option_sound_effect_off.png"},{title:TXT.se_language,x:1216,y:210,icon:"./image/setting/p_option_language.png"},{title:TXT.se_help,x:361,y:643,icon:"./image/setting/p_option_help.png"},]}};S_SETTING.pause=function(){};S_SETTING.resume=function(){S_SETTING.draw_focus()};S_SETTING.back=function(){S_SETTING.end();ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL)};S_SETTING.make_tag=function(){var r=document.getElementById("S_SETTING_div"),u=document.getElementById("SE_bg"),t,n;if(u){util.log("Already ready.");return}var f=S_SETTING.menu.length-1,i="";for(t=1;t<=S_SETTING.menu.length-1;t++)n="SE_card"+t,i+='<div id="'+n+'" class="button">\t<img id="'+n+'_bg">\t<img id="'+n+'_icon">\t<div id="'+n+'_title"><\/div>\t<img id="'+n+'_focus" class="focus"><\/div>';r.innerHTML='<img id="SE_bg"><div id="SE_title">\t<img id="SE_title_bg">\t<div id="SE_title_txt"><\/div><\/div>'+i+'<div id="SE_btn1" class="button">\t<img id="SE_btn1_bg">\t<img id="SE_btn1_focus" class="focus"><\/div><div id="SE_userid"><\/div><div id="SE_version"><\/div>'};S_SETTING.key_down=function(n){var t=n==null?event.keyCode:n,i=S_SETTING.menu.length-1;switch(t){case KeyDefine.left:if(S_SETTING.row_focus==2){S_SETTING.row_focus=1;S_SETTING.card_focus=5;S_SETTING.draw_focus();return}S_SETTING.card_focus>=2&&(S_SETTING.card_focus=S_SETTING.card_focus-1,S_SETTING.draw_focus());break;case KeyDefine.right:if(S_SETTING.row_focus==2)return;S_SETTING.card_focus==5?(S_SETTING.row_focus=2,S_SETTING.draw_focus()):S_SETTING.card_focus<i&&(S_SETTING.card_focus=S_SETTING.card_focus+1,S_SETTING.draw_focus());break;case KeyDefine.up:S_SETTING.row_focus==2?(S_SETTING.row_focus=1,S_SETTING.card_focus=glo.platform==glo.PLATFORM.AZE?4:5,S_SETTING.draw_focus()):(S_SETTING.card_focus==4?S_SETTING.card_focus=1:S_SETTING.card_focus==5&&(S_SETTING.card_focus=2),S_SETTING.draw_focus());break;case KeyDefine.down:if(S_SETTING.row_focus==1){if(glo.platform==glo.PLATFORM.AZE)switch(S_SETTING.card_focus){case 1:S_SETTING.card_focus=4;break;case 2:S_SETTING.card_focus=4;break;case 3:S_SETTING.card_focus=4;break;case 4:case 5:S_SETTING.row_focus=2}else switch(S_SETTING.card_focus){case 1:S_SETTING.card_focus=4;break;case 2:S_SETTING.card_focus=5;break;case 3:S_SETTING.card_focus=5;break;case 4:case 5:S_SETTING.row_focus=2}S_SETTING.draw_focus()}break;case KeyDefine.enter:S_SETTING.menu_run();break;case KeyDefine.esc:case KeyDefine.back:S_SETTING.back()}};S_SETTING.make_screen=function(){var i,n,t,r,u;for(util.draw_image("SE_bg","./image/setting/p_option_bg.jpg",0,0,1920,1080,"absolute"),$("#SE_title").css({left:"-69px",top:"33px",position:"absolute"}),util.draw_image_no_wh_pos("SE_title_bg","./image/common/p_common_whatgame.png",0,0),util.draw_text_html(TXT.setting,"SE_title_txt",94,19,299,76,76,45,"center","#e3d1c9"),i=this.menu.length-1,n=1;n<=i;n++)t="SE_card"+n,$("#"+t).css({left:this.menu[n].x+"px",top:this.menu[n].y+"px",position:"absolute"}),util.draw_image_no_wh_pos(t+"_bg","./image/setting/p_option_bt.png",0,0),S_SETTING.make_screen_card_i_icon(n),util.draw_text_html(this.menu[n].title,t+"_title",38,237,267,70,70,36,"center","#b64a4a"),util.draw_image_no_wh_pos(t+"_focus","./image/setting/p_option_bt_f.png",-33,-32);r="ID : "+gEntrix.uniq_id;u="VERSION : "+glo.version;util.draw_text_html(r,"SE_userid",20,1002,363,27,27,15,"left","#ffffff");util.draw_text_html(u,"SE_version",20,1029,363,27,27,15,"left","#ffffff");S_SETTING.make_screen_btn()};S_SETTING.make_screen_card_i_icon=function(n){var i="SE_card"+n,t;switch(this.menu[n].title){case TXT.se_sound_bgm:t="./image/setting/p_option_sound_background_on.png";USER.sound_bgm==0&&(t="./image/setting/p_option_sound_background_off.png");util.draw_image_no_wh_pos(i+"_icon",t,38,57);break;case TXT.se_sound_effect:t="./image/setting/p_option_sound_effect_on.png";USER.sound_effect==0&&(t="./image/setting/p_option_sound_effect_off.png");util.draw_image_no_wh_pos(i+"_icon",t,38,57);break;case TXT.se_language:t="./image/setting/p_option_language"+util.get_postfix_lang()+".png";util.draw_image_no_wh_pos(i+"_icon",t,38,57);break;default:util.draw_image_no_wh_pos(i+"_icon",this.menu[n].icon,38,57)}};S_SETTING.make_screen_btn=function(){$("#SE_btn1").css({left:"1774px",top:"927px",position:"absolute"});util.draw_image_no_wh_pos("SE_btn1_bg","./image/common/p_common_back_bt.png",0,0);util.draw_image_no_wh_pos("SE_btn1_focus","./image/common/p_common_back_bt_f.png",-33,-33);$("#SE_btn1_focus").css({display:"none"})};S_SETTING.draw_focus=function(){$(".focus").css({display:"none"});switch(S_SETTING.row_focus){case 1:$("#SE_card"+S_SETTING.card_focus+"_focus").css({display:"block"});break;case 2:$("#SE_btn"+S_SETTING.btn_focus+"_focus").css({display:"block"})}};S_SETTING.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;switch(S_SETTING.row_focus){case 1:util.scale_xy_center("SE_card"+S_SETTING.card_focus,glo.KeyScale,glo.KeyScale);break;case 2:util.scale_xy_center("SE_btn"+S_SETTING.btn_focus,glo.KeyScale,glo.KeyScale)}setTimeout(function(){util.scale_xy_center("SE_card"+S_SETTING.card_focus,1,1);util.scale_xy_center("SE_btn"+S_SETTING.btn_focus,1,1);setTimeout(function(){glo.enable_key=n;S_SETTING.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_SETTING.menu_run_run=function(){switch(S_SETTING.row_focus){case 1:switch(S_SETTING.menu[S_SETTING.card_focus].title){case TXT.se_sound_bgm:USER.sound_bgm==0?(USER.sound_bgm=1,SOUND.play_bgm(SOUND.BGM.BGM0)):(USER.sound_bgm=0,SOUND.stop_bgm());S_SETTING.make_screen_card_i_icon(S_SETTING.card_focus);PHP.put_userinfo_normal("사운드설정 변경:"+USER.sound_bgm);break;case TXT.se_sound_effect:USER.sound_effect=USER.sound_effect==0?1:0;S_SETTING.make_screen_card_i_icon(S_SETTING.card_focus);PHP.put_userinfo_normal("사운드설정 변경:"+USER.sound_effect);break;case TXT.se_language:USER.lang=USER.lang==LANG.KOREA?LANG.ENGLISH:LANG.KOREA;S_SETTING.make_screen_card_i_icon(S_SETTING.card_focus);LANG.init();S_SETTING.init_var();S_SETTING.make_screen();S_SETTING.card_focus=3;S_SETTING.draw_focus();PHP.put_userinfo_normal("언어변경:"+USER.lang);S_MAINMENU.make_screen_30day();break;case TXT.se_namechange:if(WSS.obj.readyState!=1){util.log("네트워크 단절되어 이름변경 진입 못함");util.notice(TXT.network_check_try_again,2);return}$(".focus").css({display:"none"});S_SETTING.kr_input_run();break;case TXT.se_help:S_SETTING.end();ChangeScene.start(glo.scene.cur,glo.S.HELP,S_HELP,ChangeScene.TYPE_POPUP)}break;case 2:S_SETTING.back()}};S_SETTING.safemode_run=function(){switch(glo.platform){case glo.PLATFORM.PCROOM:return;case glo.PLATFORM.AMO:return;case glo.PLATFORM.BAL:return;case glo.PLATFORM.AZE:return;default:if(USER.safemode==1?($("#SafeZone").css({display:"block"}),utilDrawImage_no_wh_pos("SafeZone","./image/common/co_border.jpg",0,0),util.scale_xy("SafeZone",1,1),$("#div_body").css({left:"53px",top:"40px",width:"1280px",height:"720px",overflow:"hidden",position:"absolute"}),util.scale_xy("div_body",1174/1280,640/720)):($("#SafeZone").css({display:"none"}),$("#div_body").css({left:"0px",top:"0px",width:"1280px",height:"720px",overflow:"hidden",position:"absolute"}),util.scale_xy("div_body",1,1)),glo.platform!=glo.PLATFORM.KT){var n="./image/logo/intro_bg"+util.get_postfix_lang()+".jpg";$("#div_body").css({background:"url("+n+") no-repeat 0 0","background-position":"0px 0px"})}}};S_SETTING.kr_input_run=function(){switch(USER.lang){case LANG.KOREA:KR_INPUT.init(S_SETTING.input_result,"");break;case LANG.ENGLISH:default:obj={lang:"ENG",title:TXT.name_input,caution:TXT.name_input_caution};KR_INPUT.init(S_SETTING.input_result,"",5,obj)}};S_SETTING.yes_changename=function(){if(CAL.get_ruby()<DEFINE.CHANGENAME_RUBY){util.notice(TXT.lack_of_ruby,2);$("#SE_card"+S_SETTING.card_focus+"_focus").css({display:"block"});util.blink_focus_start(glo.scene.cur);return}S_SETTING.kr_input_run()};S_SETTING.input_result=function(n){n=="_CLOSE"?(KR_INPUT.end(),glo.scene.cur==glo.S.MAINMENU||$("#SE_card"+S_SETTING.card_focus+"_focus").css({display:"block"})):PHP.check_overlap_name_n_change(n)};S_SETTING.input_result_OVERLAP=function(){KR_INPUT.notice(TXT.name_already_use);return};S_SETTING.input_result_OK=function(n){var t=gEntrix.user_name,i;gEntrix.user_name=n;PHP.put_userinfo_normal("이름변경:"+t+"->"+gEntrix.user_name);KR_INPUT.end();glo.scene.cur==glo.S.SETTING||glo.scene.cur==glo.S.MAINMENU&&$("#MM_top_name").text(gEntrix.user_name);util.notice(TXT.name_change_completed,1.2);t==gEntrix.user_name2||(i={ruby_add:-DEFINE.CHANGENAME_RUBY,ruby_why:"이름변경",dia_add:0,dia_why:"",gold_add:0,gold_why:""},PHP.put_userinfo_rubydiagold(i),CAL.set_ruby(CAL.get_ruby()-DEFINE.CHANGENAME_RUBY),S_MAINMENU.make_screen_top());PHP.name_propagation()};S_SETTING.input_result_OK_n_change=function(n){var t=gEntrix.user_name;gEntrix.user_name=n;Main.top_show();KR_INPUT.end();util.notice(TXT.name_change_completed,1.2);PHP.name_propagation()};S_SETTING.end=function(){};S_SETTING.on_mouse_move=function(){};S_SETTING.on_mouse_out=function(){util.scale_xy_center_class("button",1,1)};S_SETTING.on_mouse_down=function(n){util.scale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"SE_card1":case"SE_card2":case"SE_card3":case"SE_card4":case"SE_card5":case"SE_btn1":Main.mouse_pressed(n.target.parentElement.id);return}};S_SETTING.on_mouse_up=function(n){util.scale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"SE_card1":case"SE_card2":case"SE_card3":case"SE_card4":case"SE_card5":case"SE_btn1":S_SETTING.menu_run_run();return}};S_SETTING.on_mouse_over=function(n){switch(n.target.parentElement.id){case"SE_card1":S_SETTING.row_focus=1;S_SETTING.card_focus=1;S_SETTING.draw_focus();return;case"SE_card2":S_SETTING.row_focus=1;S_SETTING.card_focus=2;S_SETTING.draw_focus();return;case"SE_card3":S_SETTING.row_focus=1;S_SETTING.card_focus=3;S_SETTING.draw_focus();return;case"SE_card4":S_SETTING.row_focus=1;S_SETTING.card_focus=4;S_SETTING.draw_focus();return;case"SE_card5":S_SETTING.row_focus=1;S_SETTING.card_focus=5;S_SETTING.draw_focus();return;case"SE_btn1":S_SETTING.row_focus=2;S_SETTING.btn_focus=1;S_SETTING.draw_focus();return}} 
var S_GAME={BASE_GOLD:2e7,scaleX:.874,scaleY:.498,board_x:296,board_y:-105,sun:0,turn:1,map:1,mode:{online:0,team:0},setting_flag:0,scene:ENUM.SCENE.NONE,status:ENUM.STATUS.NONE,winner:0,winwhy:0,PAUSE:null,timer:{S_GAME_run_after_change_turn:null,POPUP_JOINNUM_start_game:null,BOARD_arrive_player_end:null,BOARD_arrive_EDGE_ISLAND:null}};S_GAME.init_variable=function(){S_GAME.sun=0;this.winner=0;this.winwhy=0;S_GAME.mode.online==0&&(S_GAME.map=Math.floor(Math.random()*5)+1);S_GAME.scene=ENUM.SCENE.P_MYTURN;S_GAME.status=ENUM.STATUS.NONE;ECONOMY.flag_2turn=0;ANI.ing=[0,0,0,0,0]};S_GAME.init=function(){glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.GAME;util.log("S_GAME.init()");Main.top_hide();SOUND.play_bgm(SOUND.get_bgm_index(S_GAME.map));BOARD.init();PLAYER.init();S_GAME.make_tag();S_GAME.make_screen();S_GAME.start();glo.enable_key=1;S_GAME.mode.online==1&&localStorage.setItem("busidol.bm.endtimestamp.txt",util.encrypt(util.get_cur_timestamp()+""))};S_GAME.make_tage_in_tile=function(n){var t="board_tile"+n;return'<img id="'+t+'_bg"><img id="'+t+'_focus" class="focus"><img id="'+t+'_obj"><div id="'+t+'_text"><\/div><div id="'+t+'_ani"><\/div><img id="'+t+'_team"><img id="'+t+'_check"><div id="'+t+'_eco">\t<img id="'+t+'_eco_bg">\t<div id="'+t+'_eco_value"><\/div><\/div>'};S_GAME.make_tag=function(){for(var i,n,o,r,u=document.getElementById("S_GAME_div"),f='<div id="board_tile19">'+S_GAME.make_tage_in_tile(19)+'<\/div><div id="board_tile18">'+S_GAME.make_tage_in_tile(18)+'<\/div><div id="board_tile17">'+S_GAME.make_tage_in_tile(17)+'<\/div><div id="board_tile16">'+S_GAME.make_tage_in_tile(16)+'<\/div><div id="board_tile15">'+S_GAME.make_tage_in_tile(15)+'<\/div><div id="board_tile14">'+S_GAME.make_tage_in_tile(14)+'<\/div><div id="board_tile13">'+S_GAME.make_tage_in_tile(13)+'<\/div><div id="board_tile12">'+S_GAME.make_tage_in_tile(12)+'<\/div><div id="board_tile11">'+S_GAME.make_tage_in_tile(11)+'<\/div><div id="board_tile10">'+S_GAME.make_tage_in_tile(10)+'<\/div><div id="board_tile9">'+S_GAME.make_tage_in_tile(9)+'<\/div><div id="board_tile8">'+S_GAME.make_tage_in_tile(8)+'<\/div><div id="board_tile7">'+S_GAME.make_tage_in_tile(7)+'<\/div><div id="board_tile6">'+S_GAME.make_tage_in_tile(6)+'<\/div><div id="board_tile5">'+S_GAME.make_tage_in_tile(5)+'<\/div><div id="board_tile4">'+S_GAME.make_tage_in_tile(4)+'<\/div><div id="board_tile3">'+S_GAME.make_tage_in_tile(3)+'<\/div><div id="board_tile2">'+S_GAME.make_tage_in_tile(2)+'<\/div><div id="board_tile20">'+S_GAME.make_tage_in_tile(20)+'<\/div><div id="board_tile21">'+S_GAME.make_tage_in_tile(21)+'<\/div><div id="board_tile22">'+S_GAME.make_tage_in_tile(22)+'<\/div><div id="board_tile23">'+S_GAME.make_tage_in_tile(23)+'<\/div><div id="board_tile24">'+S_GAME.make_tage_in_tile(24)+'<\/div><div id="board_tile25">'+S_GAME.make_tage_in_tile(25)+'<\/div><div id="board_tile26">'+S_GAME.make_tage_in_tile(26)+'<\/div><div id="board_tile27">'+S_GAME.make_tage_in_tile(27)+'<\/div><div id="board_tile28">'+S_GAME.make_tage_in_tile(28)+'<\/div><div id="board_tile29">'+S_GAME.make_tage_in_tile(29)+'<\/div><div id="board_tile30">'+S_GAME.make_tage_in_tile(30)+'<\/div><div id="board_tile31">'+S_GAME.make_tage_in_tile(31)+'<\/div><div id="board_tile32">'+S_GAME.make_tage_in_tile(32)+'<\/div><div id="board_tile33">'+S_GAME.make_tage_in_tile(33)+'<\/div><div id="board_tile34">'+S_GAME.make_tage_in_tile(34)+'<\/div><div id="board_tile35">'+S_GAME.make_tage_in_tile(35)+'<\/div><div id="board_tile36">'+S_GAME.make_tage_in_tile(36)+'<\/div><div id="board_tile1">'+S_GAME.make_tage_in_tile(1)+'<\/div><img id="economy_1"><img id="economy_2"><img id="economy_3"><img id="economy_4">',e="",t=1;t<=BOARD.TILE_TOT;t++)n="tile"+t+"_text",e+='<div id="'+n+'"><\/div>';for(i="",t=1;t<=4;t++)n="GA_player"+t,i+='<div id="'+n+'">\t<img id="'+n+'_bg">\t<img id="'+n+'_char">\t<div id="'+n+'_name"><\/div>\t<div id="'+n+'_bougold"><\/div>\t<div id="'+n+'_bougold_txt"><\/div>\t<div id="'+n+'_totzasan"><\/div>\t<div id="'+n+'_totzasan_txt"><\/div>\t<img id="'+n+'_gage">\t<img id="'+n+'_chance_card1"><img id="'+n+'_chance_card2">\t<div id="'+n+'_message" class="player_message_box"><\/div>\t<img id="'+n+'_team">\t<img id="'+n+'_focus">\t<img id="'+n+'_pasan">\t<div id="'+n+'_rank"><\/div>\t<div id="'+n+'_setting" class="button" >\t\t<img id="'+n+'_setting_bg">\t\t<img id="'+n+'_setting_focus" class="focus">\t<\/div><\/div>';o='<div class="stage">\t<div class="cube">\t\t<div class="front"><\/div>\t\t<div class="back"><\/div>\t\t<div class="top"><\/div>\t\t<div class="btm"><\/div>\t\t<div class="left"><\/div>\t\t<div class="right"><\/div>\t<\/div><\/div>';r='<div id="panel1">\t<div id="dice1" class="dice">\t\t<div class="side one"><\/div>\t\t<div class="side two"><\/div>\t\t<div class="side three"><\/div>\t\t<div class="side four"><\/div>\t\t<div class="side five"><\/div>\t\t<div class="side six"><\/diV>\t<\/div><\/div><div id="panel2">\t<div id="dice2"  class="dice">\t\t<div class="side one"><\/div>\t\t<div class="side two"><\/div>\t\t<div class="side three"><\/div>\t\t<div class="side four"><\/div>\t\t<div class="side five"><\/div>\t\t<div class="side six"><\/diV>\t<\/div><\/div><div id="panel3">\t<div id="dice3" class="red_dice">\t\t<div class="red_side red_one"><\/div>\t\t<div class="red_side red_two"><\/div>\t\t<div class="red_side red_three"><\/div>\t\t<div class="red_side red_four"><\/div>\t\t<div class="red_side red_five"><\/div>\t\t<div class="red_side red_six"><\/div>\t<\/div><\/div>';u.innerHTML='<img id="GA_back"><img id="GA_bg"><img id="GA_logo"><img id="tile_out19"><img id="tile_out18"><img id="tile_out17"><img id="tile_out16"><img id="tile_out15"><img id="tile_out14"><img id="tile_out13"><img id="tile_out12"><img id="tile_out11"><img id="tile_out10"><img id="tile_out9"><img id="tile_out8"><img id="tile_out7"><img id="tile_out6"><img id="tile_out5"><img id="tile_out4"><img id="tile_out3"><img id="tile_out2"><img id="tile_out20"><img id="tile_out21"><img id="tile_out22"><img id="tile_out23"><img id="tile_out24"><img id="tile_out25"><img id="tile_out26"><img id="tile_out27"><img id="tile_out28"><img id="tile_out29"><img id="tile_out30"><img id="tile_out31"><img id="tile_out32"><img id="tile_out33"><img id="tile_out34"><img id="tile_out35"><img id="tile_out36"><img id="tile_out1">'+f+'<div id="GA_roll_goal"><\/div>'+i+r+'<div id="GA_char1"><img id="GA_char1_bg"><img id="GA_char1_turn"><div id="GA_char1_comment"><img id="GA_char1_comment_bg"><div id="GA_char1_comment_text"> <\/div><\/div><\/div><div id="GA_char2"><img id="GA_char2_bg"><img id="GA_char2_turn"><div id="GA_char2_comment"><img id="GA_char2_comment_bg"><div id="GA_char2_comment_text"> <\/div><\/div><\/div><div id="GA_char3"><img id="GA_char3_bg"><img id="GA_char3_turn"><div id="GA_char3_comment"><img id="GA_char3_comment_bg"><div id="GA_char3_comment_text"> <\/div><\/div><\/div><div id="GA_char4"><img id="GA_char4_bg"><img id="GA_char4_turn"><div id="GA_char4_comment"><img id="GA_char4_comment_bg"><div id="GA_char4_comment_text"> <\/div><\/div><\/div><img id="GA_turn"><div id="GA_dice_gage_frame" class="popup1">\t<img id="GA_dice_gage_bg">\t<img id="GA_dice_gage_clock">\t<div id="GA_dice_gage_btn" class="button">\t\t<img id="GA_dice_gage_btn_bg">\t\t<div id="GA_dice_gage_btn_txt"><\/div>\t<\/div><\/div><div id="GA_popup_joinnum"><\/div><div id="GA_popup_selectchar"><\/div><div id="GA_popup_myturn"><\/div><div id="GA_popup_buycountry"><\/div><div id="GA_popup_sellcountry"><\/div><div id="GA_popup_sellzasan"><\/div><div id="GA_popup_sellabs"><\/div><div id="GA_popup_sellabs_selecttile"><\/div><div id="GA_popup_resort"><\/div><div id="GA_popup_angel"><\/div><div id="GA_popup_island"><\/div><div id="GA_popup_goto"><\/div><div id="GA_popup_chance"><\/div><div id="GA_popup_freepass"><\/div><div id="GA_popup_invention"><\/div><div id="GA_popup_takeover"><\/div><div id="GA_popup_setting"><\/div><div id="GA_remaintime">\t<div id="GA_remaintime_clock" class="sandclock"><\/div>\t<div id="GA_remaintime_value"><\/div><\/div><div id="GA_message_icon" ><\/div><div id="GA_donation">\t<div id="GA_donation_balloon">\t\t<img id="GA_donation_balloon_bg">\t\t<div id="GA_donation_balloon_title"><\/div>\t\t<div id="GA_donation_balloon_value"><\/div>\t<\/div>\t<img id="GA_donation_icon"><\/div><div id="GA_airport">\t<img id="GA_airport_bg">\t<div id="GA_airport_value"><\/div><\/div><div id="GA_selectline"><\/div><div id="GA_selecttile"><\/div><div id="DICE_result">\t<img id="DICE_result_bg">\t<div id ="DICE_result_value"><\/div><\/div><div id="PAUSE" >\t<img id="PAUSE_bg">\t<img id ="PAUSE_focus" class="focus"><\/div><div id="GA_notice"><\/div><img id="GA_gamestart">'};S_GAME.make_screen_cheatkey=function(){};S_GAME.make_screen=function(){$("#S_GAME_div").css({left:"0px",top:"0px",width:glo.GAME_WIDTH+"px",height:glo.GAME_HEIGHT+"px",background:"gray",position:"absolute",overflow:"hidden"});util.draw_image("GA_back","./image/game/board/ga_bg"+S_GAME.map+".jpg",0,0,1920,1080,"absolute");util.draw_image_no_wh_pos("GA_bg","./image/game/board/ga_board_back"+S_GAME.map+".png",80,76);BOARD.draw_tile();PLAYER.ui_draw()};S_GAME.start=function(){if(S_GAME.mode.online==1&&S_GAME.sun==0){S_GAME.sun_decide();return}S_GAME.mode.online==0&&POPUP_JOINNUM.init()};S_GAME.draw_turn=function(){for(var n=1;n<=4;n++)S_GAME.turn==n?($("#GA_char"+n+"_turn").css({display:"block"}).addClass("turn_updown"),$("#GA_char"+n).css({opacity:"1.0"})):($("#GA_char"+n+"_turn").css({display:"none"}).removeClass("turn_updown"),$("#GA_char"+n).css({opacity:"0.8"}))};S_GAME.change_turn=function(){var n,t;if(S_GAME.winner==0){if(n=PLAYER.info[S_GAME.turn].location,POPUP_CHANCE.index==3)DICE.double_onemore_flag==1&&util.log("더블을 했지만 턴 종료함: 깜짝상자3.실패는 성공의 어머니");else if(POPUP_CHANCE.index==7)DICE.double_onemore_flag==1&&util.log("더블을 했지만 턴 종료함: 깜짝상자7.귀향");else if(POPUP_CHANCE.index==10)DICE.double_onemore_flag==1&&util.log("더블을 했지만 턴 종료함: 깜짝상자10.세계경제를 움직이는 자");else if(n==28)DICE.double_onemore_flag==1&&util.log("더블을 했지만 턴 종료함: 비행기장에 왔음.");else if(n==19)DICE.double_onemore_flag==1&&util.log("더블을 했지만 턴 종료함: 무인도에 왔음.");else if(DICE.double_onemore_flag==1)if(n=PLAYER.info[S_GAME.turn].location,n==19)util.log("더블 했지만 턴 종료함 : 무인도에 왔으니깐...");else if(PLAYER.info[S_GAME.turn].pasan_flag==1)util.log("더블 했지만 파산했으므로 턴 종료 한다.");else{DICE.hide_dice();POPUP_MYTURN.focus=1;POPUP_MYTURN.menu_run_run();util.notice_player(S_GAME.turn,TXT.onmore_double);return}if(ECONOMY.flag_2turn==1&&S_GAME.winner==0){ECONOMY.run("정기적인경제효과",function(){ECONOMY.flag_2turn=0;S_GAME.change_turn()});return}t=S_GAME.get_next_turn();util.notice_box(TXT.change_turn,1);POPUP_CHANCE.index=0;S_GAME.turn=t;PLAYER.info[S_GAME.turn].turn_count++;ECONOMY.check();BOARD.info[28].goto.notwork>0&&BOARD.info[28].goto.notwork--;BOARD.info[28].goto.check>0&&BOARD.info[28].goto.check--;BOARD.draw_airport_value();PLAYER.info[S_GAME.turn].double_num=0;S_GAME.run_after_change_turn()}};S_GAME.run_after_change_turn=function(){if(S_GAME.setting_flag==1)if(S_GAME.mode.online==1)POPUP_SETTING.close();else{S_GAME.pause_add(S_GAME.run_after_change_turn);return}DICE.hide_dice();$("#GA_player1_focus").css({display:"none"});$("#GA_player2_focus").css({display:"none"});$("#GA_player3_focus").css({display:"none"});$("#GA_player4_focus").css({display:"none"});$("#GA_player"+S_GAME.turn+"_focus").css({display:"block"});S_GAME.draw_turn();var n=S_GAME.turn;S_GAME.timer.S_GAME_run_after_change_turn=setTimeout(function(){if(glo.scene.cur==glo.S.GAME){n!=S_GAME.turn&&util.log("######################다르다####################### 문제있음.");var t=PLAYER.info[S_GAME.turn].location;BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.EDGE_ISLAND?BOARD.arrive_EDGE_ISLAND(S_GAME.turn):PLAYER.info[S_GAME.turn].goto_flag==1?S_GAME.mode.online==1&&S_GAME.turn==3||BOARD.arrive_EDGE_GOTO(S_GAME.turn):POPUP_MYTURN.init()}},800);S_GAME.mode.online==1&&localStorage.setItem("busidol.bm.endtimestamp.txt",util.encrypt(util.get_cur_timestamp()+""))};S_GAME.get_next_turn=function(){switch(S_GAME.turn){case 1:if(PLAYER.info[2].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[2].pasan_flag==0)return 2;if(PLAYER.info[3].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[3].pasan_flag==0)return 3;if(PLAYER.info[4].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[4].pasan_flag==0)return 4;break;case 2:if(PLAYER.info[3].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[3].pasan_flag==0)return 3;if(PLAYER.info[4].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[4].pasan_flag==0)return 4;if(PLAYER.info[1].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[1].pasan_flag==0)return 1;break;case 3:if(PLAYER.info[4].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[4].pasan_flag==0)return 4;if(PLAYER.info[1].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[1].pasan_flag==0)return 1;if(PLAYER.info[2].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[2].pasan_flag==0)return 2;break;case 4:if(PLAYER.info[1].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[1].pasan_flag==0)return 1;if(PLAYER.info[2].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[2].pasan_flag==0)return 2;if(PLAYER.info[3].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[3].pasan_flag==0)return 3}console.error("S_GAME.get_next_turn() 오류 다음턴을 구하지 못함. 나혼자 있다. 내가 바로 승리자 이다.(오류는 아닐꺼임)"+S_GAME.turn)};S_GAME.draw_message_icon=function(n,t){var i=document.getElementById("GA_message_icon");i.innerHTML='\t<img id="GA_message_icon_bg">\t<img id="GA_message_icon_icon">\t<div id="GA_message_icon_line1"><\/div>\t<div id="GA_message_icon_line2"><\/div>';$("#GA_message_icon").css({display:"block",left:"473px",top:n.top==null?"481px":n.top+"px",position:"absolute"}).addClass(t);util.draw_image_no_wh_pos("GA_message_icon_bg","./image/game/popup_common/p_common_popup.png",0,0);util.draw_image_no_wh_pos("GA_message_icon_icon",n.icon_fname,n.icon_x,n.icon_y);util.draw_text_html(n.line1_text,"GA_message_icon_line1",0,29,987,60,60,48,"center","#ffffff");USER.lang==LANG.KOREA?util.draw_text_html(n.line2_text,"GA_message_icon_line2",0,89,987,54,54,36,"center","#ffffff"):util.draw_text_html(n.line2_text,"GA_message_icon_line2",-20,89,1027,54,54,28,"center","#ffffff")};S_GAME.draw_pasan_popup=function(n){var i=document.getElementById("GA_message_icon"),t;i.innerHTML='\t<img id="GA_message_icon_bg">\t<img id="GA_message_icon_icon">\t<img id="GA_message_icon_color">\t<div id="GA_message_icon_username"><\/div>\t<img id="GA_message_icon_line2">';$("#GA_message_icon").css({display:"block",left:"618px",top:"234px",position:"absolute"}).addClass("popup1");util.draw_image_no_wh_pos("GA_message_icon_bg","./image/game/popup_sellabs/p_bankruptcy_bg.png",0,0);S_GAME.mode.online==0?util.draw_image_no_wh_pos("GA_message_icon_icon","./image/game/popup_sellabs/p_bankruptcy_char"+POPUP_SELECTCHAR.get_char_bunho(n)+".png",67,277):(t=S_GAME.turn==1?S_PVP_MATCHING.me.char_info:S_PVP_MATCHING.other.char_info,util.draw_image_no_wh_pos("GA_message_icon_icon","./image/game/popup_sellabs/p_bankruptcy_char"+t+".png",67,277));util.draw_text_html(PLAYER.info[n].name,"GA_message_icon_username",255,284,371,67,67,48,"center","#ffffff");util.draw_textshadow("GA_message_icon_username","#000000",3);util.draw_image_no_wh_pos("GA_message_icon_color","./image/game/popup_sellabs/p_bankruptcy_namebar_"+PLAYER.get_color(n)+".png",269,313);util.draw_image_no_wh_pos("GA_message_icon_line2","./image/game/popup_sellabs/p_bankruptcy_reason"+util.get_postfix_lang()+".png",255,361);setTimeout(function(){$("#GA_message_icon").css({display:"none"})},2e3)};S_GAME.pause_add=function(n,t,i,r,u,f,e){S_GAME.PAUSE={f:n,a1:t,a2:i,a3:r,a4:u,a5:f,a6:e}};S_GAME.pause=function(){REMAINTIME.pause();S_GAME.PAUSE=null;$(".turn_updown").css({"animation-play-state":"paused"});$(".red_flag").css({"animation-play-state":"paused"});$(".yellow_flag").css({"animation-play-state":"paused"});$(".gree_flag").css({"animation-play-state":"paused"});$(".blue_flag").css({"animation-play-state":"paused"});$(".sandclock").css({"animation-play-state":"paused"})};S_GAME.resume=function(){REMAINTIME.resume();S_GAME.PAUSE!=null&&S_GAME.PAUSE.f(S_GAME.PAUSE.a1,S_GAME.PAUSE.a2,S_GAME.PAUSE.a3,S_GAME.PAUSE.a4,S_GAME.PAUSE.a5,S_GAME.PAUSE.a6);$(".turn_updown").css({"animation-play-state":"running"});$(".red_flag").css({"animation-play-state":"running"});$(".yellow_flag").css({"animation-play-state":"running"});$(".gree_flag").css({"animation-play-state":"running"});$(".blue_flag").css({"animation-play-state":"running"});$(".sandclock").css({"animation-play-state":"running"})};S_GAME.end=function(){Main.top_show();S_GAME.timer.run_after_change_turn!=null&&(clearInterval(S_GAME.timer.run_after_change_turn),S_GAME.timer.S_GAME_run_after_change_turn=0);S_GAME.timer.POPUP_JOINNUM_start_game!=null&&(clearInterval(S_GAME.timer.POPUP_JOINNUM_start_game),S_GAME.timer.POPUP_JOINNUM_start_game=0);S_GAME.timer.BOARD_arrive_player_end!=null&&(clearInterval(S_GAME.timer.BOARD_arrive_player_end),S_GAME.timer.BOARD_arrive_player_end=0);S_GAME.timer.BOARD_arrive_EDGE_ISLAND!=null&&(clearInterval(S_GAME.timer.BOARD_arrive_EDGE_ISLAND),S_GAME.timer.BOARD_arrive_EDGE_ISLAND=0)};S_GAME.win_line_monopoly=function(n,t){S_GAME.winner=t;S_GAME.winwhy=ENUM.WINWHY.LINE;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : S_GAME.win_line_monopoly 에서 라인독점 승리:"+n);ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP)};S_GAME.get_popup_class=function(n){return S_GAME.mode.online==0&&glo.platform==glo.PLATFORM.LG_WEEKEND?n==3?"popup3":n==4?"popup4":"popup1":"popup1"} 
var POPUP_MYTURN={focus:1,player:0};POPUP_MYTURN.init=function(){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_MYTURN.init);return}if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_MYTURN,POPUP_MYTURN.player=S_GAME.turn,glo.enable_key=1,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){glo.enable_key=0;POPUP_MYTURN.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn!=1){glo.enable_key=0;util.log("-============온라인 모드라서....상대의 처분을 기다립니다.=================");return}SOUND.play_effect(SOUND.EFFECT.POPUP_MYTURN);PLAYER.ui_top(POPUP_MYTURN.player);POPUP_MYTURN.make_tag();POPUP_MYTURN.make_screen();POPUP_MYTURN.draw_focus();REMAINTIME.start()}};POPUP_MYTURN.init_ai=function(){POPUP_MYTURN.focus=1;POPUP_MYTURN.menu_run_run();return};POPUP_MYTURN.make_tag=function(){var n=document.getElementById("GA_popup_myturn"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_myturn_bg" class="dim70"><\/div><div id="myturn"  class="'+t+'">\t<img id="myturn_bg">\t<img id="myturn_title">\t<div id="myturn_btn1" class="button">\t\t<img id="myturn_btn1_bg">\t\t<div id="myturn_btn1_text"><\/div>\t\t<img id="myturn_btn1_focus" class="focus">\t<\/div>\t<div id="myturn_btn2" class="button">\t\t<img id="myturn_btn2_bg">\t\t<div id="myturn_btn2_text"><\/div>\t\t<img id="myturn_btn2_focus" class="focus">\t<\/div><\/div>'};POPUP_MYTURN.make_screen=function(){$("#GA_popup_myturn").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});var n=767,t=288;switch(S_GAME.turn){case 1:n=1444;t=382;break;case 2:n=90;t=382;break;case 3:glo.platform==glo.PLATFORM.LG_WEEKEND?(n=234,t=14):(n=90,t=193);break;case 4:glo.platform==glo.PLATFORM.LG_WEEKEND?(n=1295,t=14):(n=1444,t=193)}$("#myturn").css({left:n+"px",top:t+"px",width:"387px",height:"534px",position:"absolute"});util.draw_image_no_wh_pos("myturn_bg","./image/game/popup_myturn/p_myturn_bg_"+PLAYER.get_color(POPUP_MYTURN.player)+".png",0,0);util.draw_image_no_wh_pos("myturn_title","./image/game/popup_myturn/p_myturn_titletxt"+util.get_postfix_lang()+".png",105,19);$("#myturn_btn1").css({left:"38px",top:"155px",position:"absolute"});util.draw_image_no_wh_pos("myturn_btn1_bg","./image/game/popup_myturn/p_myturn_dicerollbt.png",0,0);util.draw_text_html(TXT.throwdice,"myturn_btn1_text",138,25,144,103,103/2,30,"center","#ffffff");util.draw_image_no_wh_pos("myturn_btn1_focus","./image/game/popup_myturn/p_myturn_dicerollbt_f.png",-29,-29);$("#myturn_btn1_focus").css({display:"none"});$("#myturn_btn2").css({left:"38px",top:"323px",position:"absolute"});util.draw_image_no_wh_pos("myturn_btn2_bg","./image/game/popup_myturn/p_myturn_buildingsalesbt.png",0,0);USER.lang==LANG.KOREA?util.draw_text_html(TXT.sellzasan,"myturn_btn2_text",138,9,144,123,123,30,"center","#ffffff"):util.draw_text_html(TXT.sellzasan,"myturn_btn2_text",138,25,144,103,103/2,30,"center","#ffffff");util.draw_image_no_wh_pos("myturn_btn2_focus","./image/game/popup_myturn/p_myturn_buildingsalesbt_f.png",-17,-21);$("#myturn_btn2_focus").css({display:"none"})};POPUP_MYTURN.draw_focus=function(){$(".focus").css({display:"none"});$("#myturn_btn"+POPUP_MYTURN.focus+"_focus").css({display:"block"})};POPUP_MYTURN.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:POPUP_MYTURN.focus>=2&&(POPUP_MYTURN.focus--,POPUP_MYTURN.draw_focus());break;case KeyDefine.down:POPUP_MYTURN.focus<2&&(POPUP_MYTURN.focus++,POPUP_MYTURN.draw_focus());break;case KeyDefine.enter:POPUP_MYTURN.menu_run()}};POPUP_MYTURN.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("myturn_btn"+POPUP_MYTURN.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("myturn_btn"+POPUP_MYTURN.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_MYTURN.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_MYTURN.menu_run_run=function(){switch(POPUP_MYTURN.focus){case 1:POPUP_MYTURN.close();util.enable_key(0,"POPUP_MYTURN.menu_run_run()에서  주사위 던질때 key 받지 않기 위해");DICE.throw();break;case 2:var n=BOARD.get_num_player_got_zasan(S_GAME.turn);if(n>0)util.enable_key(0,"POPUP_MYTURN.menu_run_run()에서  연속 key 받지 않기 위해"),POPUP_MYTURN.close(),POPUP_SELLZASAN.init();else{util.notice_box(TXT.empty_zasan,2);SOUND.play_effect(SOUND.EFFECT.POPUP_ERROR);return}}};POPUP_MYTURN.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_myturn").css({display:"none"}).empty()} 
var POPUP_BUYCOUNTRY={focus:6,player:0,board_index:0,after_dev_stage:0,before_scene:ENUM.SCENE.NONE};POPUP_BUYCOUNTRY.init=function(){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_BUYCOUNTRY.init);return}if(S_GAME.winner==0){POPUP_BUYCOUNTRY.before_scene=S_GAME.scene;S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;PLAYER.info[S_GAME.turn].type!=ENUM.PLAYER_TYPE.AI&&util.enable_key(1,"POPUP_BUYCOUNTRY.init()에서   key 받기 위해");POPUP_BUYCOUNTRY.player=S_GAME.turn;switch(POPUP_BUYCOUNTRY.before_scene){case ENUM.SCENE.EDGE_START:POPUP_BUYCOUNTRY.board_index=SELECTTILE.board_index_array[SELECTTILE.focus];break;default:POPUP_BUYCOUNTRY.board_index=PLAYER.info[S_GAME.turn].location}if(POPUP_BUYCOUNTRY.after_dev_stage=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage,POPUP_BUYCOUNTRY.after_dev_stage==0&&(POPUP_BUYCOUNTRY.after_dev_stage=1),PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_BUYCOUNTRY.init()에서 ai일경우 key 않받기 위해");POPUP_BUYCOUNTRY.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_BUYCOUNTRY.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.buy_ing);return}PLAYER.ui_top(POPUP_BUYCOUNTRY.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_BUYCOUNTRY.make_tag();POPUP_BUYCOUNTRY.make_screen();POPUP_BUYCOUNTRY.draw_focus();switch(POPUP_BUYCOUNTRY.before_scene){case ENUM.SCENE.EDGE_START:break;default:REMAINTIME.start()}REMAINTIME.show_remain_time()}};POPUP_BUYCOUNTRY.init_ai=function(){var i=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage,n,t;if(i<ENUM.DEV_STAGE.DEV5)switch(i){case ENUM.DEV_STAGE.DEV4:case ENUM.DEV_STAGE.DEV3:n=i+1;POPUP_BUYCOUNTRY.after_dev_stage=n;t=POPUP_BUYCOUNTRY.get_buygold();PLAYER.info[POPUP_BUYCOUNTRY.player].bougold>=t?POPUP_BUYCOUNTRY.after_dev_stage==ENUM.DEV_STAGE.DEV5&&PLAYER.info[POPUP_BUYCOUNTRY.player].rotate_num==0?(POPUP_BUYCOUNTRY.focus=7,POPUP_BUYCOUNTRY.menu_run_run()):(POPUP_BUYCOUNTRY.focus=6,POPUP_BUYCOUNTRY.menu_run_run()):(POPUP_BUYCOUNTRY.focus=7,POPUP_BUYCOUNTRY.menu_run_run());break;case ENUM.DEV_STAGE.DEV2:case ENUM.DEV_STAGE.DEV1:case ENUM.DEV_STAGE.DEV0:n=ENUM.DEV_STAGE.DEV4;POPUP_BUYCOUNTRY.after_dev_stage=n;t=POPUP_BUYCOUNTRY.get_buygold();PLAYER.info[POPUP_BUYCOUNTRY.player].bougold>=t?(POPUP_BUYCOUNTRY.focus=6,POPUP_BUYCOUNTRY.menu_run_run()):(n=ENUM.DEV_STAGE.DEV3,POPUP_BUYCOUNTRY.after_dev_stage=n,t=POPUP_BUYCOUNTRY.get_buygold(),PLAYER.info[POPUP_BUYCOUNTRY.player].bougold>=t?(POPUP_BUYCOUNTRY.focus=6,POPUP_BUYCOUNTRY.menu_run_run()):i<ENUM.DEV_STAGE.DEV2?(n=ENUM.DEV_STAGE.DEV2,POPUP_BUYCOUNTRY.after_dev_stage=n,t=POPUP_BUYCOUNTRY.get_buygold(),PLAYER.info[POPUP_BUYCOUNTRY.player].bougold>=t?(POPUP_BUYCOUNTRY.focus=6,POPUP_BUYCOUNTRY.menu_run_run()):i<ENUM.DEV_STAGE.DEV1&&(n=ENUM.DEV_STAGE.DEV1,POPUP_BUYCOUNTRY.after_dev_stage=n,t=POPUP_BUYCOUNTRY.get_buygold(),PLAYER.info[POPUP_BUYCOUNTRY.player].bougold>=t?(POPUP_BUYCOUNTRY.focus=6,POPUP_BUYCOUNTRY.menu_run_run()):(POPUP_BUYCOUNTRY.focus=7,POPUP_BUYCOUNTRY.menu_run_run()))):(POPUP_BUYCOUNTRY.focus=7,POPUP_BUYCOUNTRY.menu_run_run()))}};POPUP_BUYCOUNTRY.make_tag=function(){for(var n,r,u=document.getElementById("GA_popup_buycountry"),i="",t=1;t<=5;t++)n="buycountry_btn"+t,i+='\t<div id="'+n+'" class="button">\t\t<img id="'+n+'_bg">\t\t<div id="'+n+'_title"><\/div>\t\t<div id="'+n+'_gold"><\/div>\t\t<img id="'+n+'_icon">\t\t<img id="'+n+'_complete">\t\t<img id="'+n+'_focus" class="focus">\t\t<img id="'+n+'_chkbox">\t<\/div>';r=S_GAME.get_popup_class(S_GAME.turn);u.innerHTML='<div id="GA_popup_buycountry_bg" class="dim70"><\/div><div id="buycountry"  class="'+r+'">\t<img id="buycountry_bg">\t<div id="buycountry_title">\t\t<img id="buycountry_title_icon">\t\t<img id="buycountry_title_bg">\t\t<div id="buycountry_title_text"><\/div>\t<\/div>'+i+'<div id="buycountry_passgold"><\/div><div id="buycountry_passgold_value"><\/div><img id="buycountry_buygold_icon"><div id="buycountry_buygold"><\/div><div id="buycountry_buygold_value"><\/div>\t<div id="buycountry_btn6" class="button">\t\t<img id="buycountry_btn6_bg">\t\t<div id="buycountry_btn6_text"><\/div>\t\t<img id="buycountry_btn6_focus" class="focus">\t<\/div>\t<div id="buycountry_btn7" class="button">\t\t<img id="buycountry_btn7_bg">\t\t<div id="buycountry_btn7_text"><\/div>\t\t<img id="buycountry_btn7_focus" class="focus">\t<\/div><\/div>'};POPUP_BUYCOUNTRY.make_screen=function(){var t,i,r,u,n,f;for($("#GA_popup_buycountry").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080}),$("#buycountry").css({left:"489px",top:"250px",width:"996px",height:"624px",position:"absolute"}),util.draw_image_no_wh_pos("buycountry_bg","./image/game/popup_buycountry/p_buyland_bg.png",0,0),util.draw_image_no_wh_pos("buycountry_title_icon","./image/game/popup_buycountry/p_flag_"+POPUP_BUYCOUNTRY.board_index+".png",740,452),t=BOARD_DEFINE[POPUP_BUYCOUNTRY.board_index].COLOR_MONOPOLY,i="./image/game/popup_buycountry/p_buyland_colorbox_"+t+".png",util.draw_image_no_wh_pos("buycountry_title_bg",i,284,-15),r=eval("TXT.tile"+POPUP_BUYCOUNTRY.board_index+"_title"),util.draw_text_html(r,"buycountry_title_text",284,-13,374,78,78,50,"center","#ffffff"),util.draw_textshadow("buycountry_title_text","#2b2524",2),u=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage,n=1;n<=5;n++)$("#buycountry_btn"+n).css({left:32+178*(n-1)+"px",top:"100px",position:"absolute"}),util.draw_image_no_wh_pos("buycountry_btn"+n+"_bg","./image/game/popup_buycountry/p_buyland_bt.png",0,0),n<5?util.draw_image_no_wh_pos("buycountry_btn"+n+"_icon","./image/game/popup_buycountry/p_buyland_icon_step"+n+"_"+PLAYER.get_color(S_GAME.turn)+".png",5,77):util.draw_image_no_wh_pos("buycountry_btn"+n+"_icon","./image/game/popup_buycountry/p_buyland_icon_step"+n+"_"+POPUP_BUYCOUNTRY.board_index+"_"+PLAYER.get_color(S_GAME.turn)+".png",5,77),util.draw_text_html(eval("TXT.DEV"+n),"buycountry_btn"+n+"_title",5,25,155,52,52,24,"center","#51301c"),f=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.gold_dev[n],util.draw_text_html(util.get_number_with_comma(f),"buycountry_btn"+n+"_gold",36,186,124,41,41,20,"center","#ffffff"),util.draw_image_no_wh_pos("buycountry_btn"+n+"_focus","./image/game/popup_buycountry/p_buyland_bt_f.png",-25,-25),$("#buycountry_btn"+n+"_focus").css({display:"none"}),util.draw_image_no_wh_pos("buycountry_btn"+n+"_complete","./image/game/popup_buycountry/p_buyland_bt_complete"+util.get_postfix_lang()+".png",5,4),n>u&&$("#buycountry_btn"+n+"_complete").css({display:"none"}),POPUP_BUYCOUNTRY.make_screen_chkbox_i(n);POPUP_BUYCOUNTRY.draw_buygold();$("#buycountry_btn6").css({left:"272px",top:"489px",position:"absolute"});util.draw_image_no_wh_pos("buycountry_btn6_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_image_no_wh_pos("buycountry_btn6_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.buy,"buycountry_btn6_text",0,0,176,87,87,35,"center","#ffffff");util.draw_textshadow("buycountry_btn6_text","#a23100",2);$("#buycountry_btn7").css({left:"493px",top:"489px",position:"absolute"});util.draw_image_no_wh_pos("buycountry_btn7_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_image_no_wh_pos("buycountry_btn7_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.cancel,"buycountry_btn7_text",0,0,176,87,87,35,"center","#ffffff");util.draw_textshadow("buycountry_btn7_text","#a23100",2)};POPUP_BUYCOUNTRY.draw_buygold=function(){var n;util.draw_image_no_wh_pos("buycountry_buygold_icon","./image/game/popup_buycountry/p_buyland_goldicon.png",261,413);n=POPUP_BUYCOUNTRY.get_passgold();util.draw_text_html(TXT.passgold,"buycountry_passgold",304,365,128,37,37,30,"center","#51301c");util.draw_text_html(util.get_number_with_comma(n),"buycountry_passgold_value",442,365,280,37,37,30,"center","#304da1");n=POPUP_BUYCOUNTRY.get_buygold();util.draw_text_html(TXT.buygold,"buycountry_buygold",304,413,128,37,37,30,"center","#51301c");util.draw_text_html(util.get_number_with_comma(n),"buycountry_buygold_value",442,413,280,37,37,30,"center","#9b2c05")};POPUP_BUYCOUNTRY.get_buygold=function(){for(var t=0,i=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage,n=i+1;n<=POPUP_BUYCOUNTRY.after_dev_stage;n++)t+=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.gold_dev[n];return t};POPUP_BUYCOUNTRY.get_passgold=function(){var n=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage;return n<POPUP_BUYCOUNTRY.after_dev_stage?BOARD.info[POPUP_BUYCOUNTRY.board_index].country.gold_pass[POPUP_BUYCOUNTRY.after_dev_stage]:BOARD.info[POPUP_BUYCOUNTRY.board_index].country.gold_pass[n]};POPUP_BUYCOUNTRY.make_screen_chkbox_i=function(n){var t=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage;if(n<=t){$("#buycountry_btn"+n+"_chkbox").css({display:"none"});return}$("#buycountry_btn"+n+"_chkbox").css({display:"block"});switch(n){case 1:util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30);break;case 2:case 3:case 4:n<=t?util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30):util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox.png",58,-30);break;case 5:t<ENUM.DEV_STAGE.DEV4?($("#buycountry_btn"+n+"_chkbox").css({display:"none"}),util.draw_image_no_wh_pos("buycountry_btn"+n+"_complete","./image/game/popup_buycountry/p_buyland_bt_cantbuy"+util.get_postfix_lang()+".png",5,4),$("#buycountry_btn"+n+"_complete").css({display:"block"})):n<=t?util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30):util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox.png",58,-30)}};POPUP_BUYCOUNTRY.make_screen_chkbox_all=function(){for(var n=1;n<=5;n++){if(n==5)if(BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage!=ENUM.DEV_STAGE.DEV4){$("#buycountry_btn"+n+"_chkbox").css({display:"none"});continue}else $("#buycountry_btn"+n+"_chkbox").css({display:"block"});n<=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage?$("#buycountry_btn"+n+"_chkbox").css({display:"none"}):$("#buycountry_btn"+n+"_chkbox").css({display:"block"});n==1||POPUP_BUYCOUNTRY.after_dev_stage>=n?util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30):util.draw_image_no_wh_pos("buycountry_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox.png",58,-30)}};POPUP_BUYCOUNTRY.draw_focus=function(){$(".focus").css({display:"none"});$("#buycountry_btn"+POPUP_BUYCOUNTRY.focus+"_focus").css({display:"block"})};POPUP_BUYCOUNTRY.key_down=function(n){var t=n==null?event.keyCode:n;util.log("#######POPUP_BUYCOUNTRY.key_down()!!");switch(t){case KeyDefine.up:switch(POPUP_BUYCOUNTRY.focus){case 6:POPUP_BUYCOUNTRY.focus=1;POPUP_BUYCOUNTRY.draw_focus();break;case 7:POPUP_BUYCOUNTRY.focus=5;POPUP_BUYCOUNTRY.draw_focus()}break;case KeyDefine.down:switch(POPUP_BUYCOUNTRY.focus){case 1:case 2:case 3:POPUP_BUYCOUNTRY.focus=6;POPUP_BUYCOUNTRY.draw_focus();break;case 4:case 5:POPUP_BUYCOUNTRY.focus=7;POPUP_BUYCOUNTRY.draw_focus()}break;case KeyDefine.right:switch(POPUP_BUYCOUNTRY.focus){case 1:case 2:case 3:case 4:POPUP_BUYCOUNTRY.focus++;POPUP_BUYCOUNTRY.draw_focus();break;case 6:POPUP_BUYCOUNTRY.focus++;POPUP_BUYCOUNTRY.draw_focus()}break;case KeyDefine.left:switch(POPUP_BUYCOUNTRY.focus){case 2:case 3:case 4:case 5:POPUP_BUYCOUNTRY.focus--;POPUP_BUYCOUNTRY.draw_focus();break;case 7:POPUP_BUYCOUNTRY.focus--;POPUP_BUYCOUNTRY.draw_focus()}break;case KeyDefine.enter:util.enable_key(0,"POPUP_BUYCOUNTRY. KeyDefine.enter ()에서  연속키 입력 방지를 위해");POPUP_BUYCOUNTRY.menu_run()}};POPUP_BUYCOUNTRY.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("buycountry_btn"+POPUP_BUYCOUNTRY.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("buycountry_btn"+POPUP_BUYCOUNTRY.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_BUYCOUNTRY.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_BUYCOUNTRY.menu_run_run=function(){switch(POPUP_BUYCOUNTRY.focus){case 1:case 2:case 3:case 4:POPUP_BUYCOUNTRY.focus>=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage&&(POPUP_BUYCOUNTRY.after_dev_stage=POPUP_BUYCOUNTRY.focus,POPUP_BUYCOUNTRY.make_screen_chkbox_all(),POPUP_BUYCOUNTRY.draw_buygold());util.enable_key(1,"POPUP_BUYCOUNTRY.menu_run_run()에서 활성화");break;case 5:BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage==ENUM.DEV_STAGE.DEV4?(POPUP_BUYCOUNTRY.after_dev_stage=POPUP_BUYCOUNTRY.focus,POPUP_BUYCOUNTRY.make_screen_chkbox_all(),POPUP_BUYCOUNTRY.draw_buygold()):util.notice(TXT.landmark_can_build_after_city,2);util.enable_key(1,"POPUP_BUYCOUNTRY.menu_run_run()에서 활성화");break;case 6:POPUP_BUYCOUNTRY.buy();break;case 7:POPUP_BUYCOUNTRY.close()}};POPUP_BUYCOUNTRY.buy=function(){var i=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage,n;if(POPUP_BUYCOUNTRY.after_dev_stage<=i){util.log("구매를 눌렀으나 발전단계 이상을 선택하지 않아 취소로 작동 합니다");POPUP_BUYCOUNTRY.close();return}if(POPUP_BUYCOUNTRY.after_dev_stage==ENUM.DEV_STAGE.DEV5&&PLAYER.info[POPUP_BUYCOUNTRY.player].rotate_num==0){util.notice(TXT.rotate2_can_be_create_landmark,2);util.enable_key(1,"POPUP_BUYCOUNTRY.buy()에서  key 입력 받기");return}if(n=POPUP_BUYCOUNTRY.get_buygold(),PLAYER.info[POPUP_BUYCOUNTRY.player].bougold>=n){util.enable_key(0,"POPUP_BUYCOUNTRY.buy()에서  연속키 입력 방지를 위해");S_GAME.mode.online==1&&S_GAME.turn==1&&(POPUP_BUYCOUNTRY.before_scene==ENUM.SCENE.EDGE_START?WSS.send_startedge(POPUP_BUYCOUNTRY.board_index,POPUP_BUYCOUNTRY.after_dev_stage,POPUP_BUYCOUNTRY.before_scene):WSS.send_buycountry(POPUP_BUYCOUNTRY.after_dev_stage));REMAINTIME.stop();var r=POPUP_BUYCOUNTRY.player,u=n,t="player"+POPUP_BUYCOUNTRY.player+"가 "+eval("TXT.tile"+POPUP_BUYCOUNTRY.board_index+"_title")+"에  비용 "+n+"를 지급하고 발전도 "+POPUP_BUYCOUNTRY.after_dev_stage+"에 도달했습니다";util.log(t);BOARD.info[POPUP_BUYCOUNTRY.board_index].country.owner!=POPUP_BUYCOUNTRY.player?util.notice_player_num(POPUP_BUYCOUNTRY.player,TXT.buy,-n):util.notice_player_num(POPUP_BUYCOUNTRY.player,TXT.develop,-n);CAL.move_gold(r,0,u,t,function(){var n=BOARD.info[POPUP_BUYCOUNTRY.board_index].country.owner;n!=0&&S_GAME.mode.team==1&&n!=POPUP_BUYCOUNTRY.player&&PLAYER.info[n].team&&PLAYER.info[n].team==PLAYER.info[POPUP_BUYCOUNTRY.player].team?util.log("팀원 땅 발전 시켜 주기.."):BOARD.info[POPUP_BUYCOUNTRY.board_index].country.owner=POPUP_BUYCOUNTRY.player;BOARD.info[POPUP_BUYCOUNTRY.board_index].country.dev_stage=POPUP_BUYCOUNTRY.after_dev_stage;BOARD.draw_tile_country_object(POPUP_BUYCOUNTRY.board_index);SOUND.play_effect(SOUND.EFFECT.BUY_COUNTRY);PLAYER.ui_draw();CAL.check_line_monopoly(POPUP_BUYCOUNTRY.board_index);POPUP_BUYCOUNTRY.close()})}else SOUND.play_effect(SOUND.EFFECT.POPUP_ERROR),util.notice_box(TXT.lackof_gold,2),util.enable_key(1,"POPUP_BUYCOUNTRY.buy()에서 활성화")};POPUP_BUYCOUNTRY.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_buycountry").css({display:"none"}).empty();REMAINTIME.stop();switch(POPUP_BUYCOUNTRY.before_scene){case ENUM.SCENE.EDGE_START:S_GAME.mode.online==1?S_GAME.turn==1&&(WSS.send_startedge_donate(),BOARD.arrive_EDGE_START_next_next(POPUP_BUYCOUNTRY.player)):BOARD.arrive_EDGE_START_next_next(POPUP_BUYCOUNTRY.player);break;default:BOARD.arrive_player_end()}} 
var POPUP_SELLCOUNTRY={focus:1,player:0,num_player_got_country:0,before_scene:ENUM.SCENE.NONE,board_index_sell_country:0,board_index_player_got:null};POPUP_SELLCOUNTRY.init=function(){if(S_GAME.winner==0){POPUP_SELLCOUNTRY.before_scene=S_GAME.scene;S_GAME.scene=ENUM.SCENE.P_SELLCOUNTRY;util.enable_key(1,"POPUP_SELLCOUNTRY.init에서   key 입력 받기");POPUP_SELLCOUNTRY.player=S_GAME.turn;POPUP_SELLCOUNTRY.num_player_got_country=BOARD.get_num_player_got_country(POPUP_SELLCOUNTRY.player);POPUP_SELLCOUNTRY.board_index_player_got=BOARD.get_index_player_got_country(POPUP_SELLCOUNTRY.player);switch(POPUP_SELLCOUNTRY.num_player_got_country){case 0:console.error("가진 나라 0개인데 호출? POPUP_SELLCOUNTRY.init()");return;case 1:POPUP_SELLCOUNTRY.board_index_sell_country=POPUP_SELLCOUNTRY.board_index_player_got[1];POPUP_SELLCOUNTRY.init_one();break;default:var n=POPUP_SELLCOUNTRY.board_index_player_got;util.notice_player(POPUP_SELLCOUNTRY.player,TXT.select_country_for_sell);SELECTTILE.init(POPUP_SELLCOUNTRY.player,n)}return}};POPUP_SELLCOUNTRY.init_one=function(){if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_SELLCOUNTRY,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){glo.enable_key=0;POPUP_SELLCOUNTRY.focus=2;POPUP_SELLCOUNTRY.menu_run_run();return}PLAYER.ui_top(POPUP_SELLCOUNTRY.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_SELLCOUNTRY.make_tag();POPUP_SELLCOUNTRY.make_screen();POPUP_SELLCOUNTRY.draw_focus()}};POPUP_SELLCOUNTRY.make_tag=function(){$("#GA_popup_sellcountry").empty();var n=document.getElementById("GA_popup_sellcountry"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_sellcountry_bg" class="dim70"><\/div><div id="sellcountry"  \tclass="'+t+'"><img id="sellcountry_bg"><div id="sellcountry_title">\t<img id="sellcountry_title_bg">\t<div id="sellcountry_title_text"><\/div><\/div><div id="sellcountry_devstage"><\/div><img id="sellcountry_icon"><img id="sellcountry_buygold_icon"><div id="sellcountry_buygold"><\/div><div id="sellcountry_buygold_value"><\/div>\t<div id="sellcountry_btn1" class="button">\t\t<img id="sellcountry_btn1_bg">\t\t<div id="sellcountry_btn1_text"><\/div>\t\t<img id="sellcountry_btn1_focus" class="focus">\t<\/div>\t<div id="sellcountry_btn2" class="button">\t\t<img id="sellcountry_btn2_bg">\t\t<div id="sellcountry_btn2_text"><\/div>\t\t<img id="sellcountry_btn2_focus" class="focus">\t<\/div><\/div><\/div>'};POPUP_SELLCOUNTRY.make_screen=function(){var t,i,r,n,u;$("#GA_popup_sellcountry").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#sellcountry").css({left:"577px",top:"248px",width:"842px",height:"624px",position:"absolute"});util.draw_image_no_wh_pos("sellcountry_bg","./image/game/popup_sellcountry/p_sellland_bg.png",0,0);t=BOARD_DEFINE[POPUP_SELLCOUNTRY.board_index_sell_country].COLOR_MONOPOLY;i="./image/game/popup_buycountry/p_buyland_colorbox_"+t+".png";util.draw_image_no_wh_pos("sellcountry_title_bg",i,196,-13);r=eval("TXT.tile"+POPUP_SELLCOUNTRY.board_index_sell_country+"_title");util.draw_text_html(r,"sellcountry_title_text",196,-11,374,78,78,50,"center","#ffffff");util.draw_textshadow("sellcountry_title_text","#2b2524",2);n=BOARD.info[POPUP_SELLCOUNTRY.board_index_sell_country].country.dev_stage;util.draw_text_html(TXT.dev_stage+" : "+eval("TXT.DEV"+n),"sellcountry_devstage",104,95,559,42,42,40,"center","#92210f");n<5?util.draw_image_no_wh_pos("sellcountry_icon","./image/game/popup_sellcountry/p_sellland_icon_step"+n+"_"+PLAYER.get_color(POPUP_SELLCOUNTRY.player)+".png",209,139):util.draw_image_no_wh_pos("sellcountry_icon","./image/game/popup_sellcountry/p_sellland_icon_step"+n+"_"+POPUP_SELLCOUNTRY.board_index_sell_country+"_"+PLAYER.get_color(POPUP_SELLCOUNTRY.player)+".png",209,139);util.draw_image_no_wh_pos("sellcountry_buygold_icon","./image/game/popup_buycountry/p_buyland_goldicon.png",173,396);u=POPUP_SELLCOUNTRY.get_sellgold();util.draw_text_html(TXT.sellgold,"sellcountry_buygold",212,396,128,37,37,30,"center","#51301c");util.draw_text_html(util.get_number_with_comma(u),"sellcountry_buygold_value",350,396,280,37,37,30,"center","#304da1");$("#sellcountry_btn1").css({left:"184px",top:"477px",position:"absolute"});util.draw_image_no_wh_pos("sellcountry_btn1_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_image_no_wh_pos("sellcountry_btn1_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.sell,"sellcountry_btn1_text",0,0,176,87,87,40,"center","#ffffff");util.draw_textshadow("sellcountry_btn1_text","#a23100",2);$("#sellcountry_btn2").css({left:"405px",top:"477px",position:"absolute"});util.draw_image_no_wh_pos("sellcountry_btn2_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_image_no_wh_pos("sellcountry_btn2_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.cancel,"sellcountry_btn2_text",0,0,176,87,87,40,"center","#ffffff");util.draw_textshadow("sellcountry_btn2_text","#a23100",2)};POPUP_SELLCOUNTRY.get_sellgold=function(){return CAL.get_country_sell_gold(POPUP_SELLCOUNTRY.board_index_sell_country)};POPUP_SELLCOUNTRY.draw_focus=function(){$(".focus").css({display:"none"});$("#sellcountry_btn"+POPUP_SELLCOUNTRY.focus+"_focus").css({display:"block"})};POPUP_SELLCOUNTRY.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:POPUP_SELLCOUNTRY.focus==1&&(POPUP_SELLCOUNTRY.focus=2,POPUP_SELLCOUNTRY.draw_focus());break;case KeyDefine.left:POPUP_SELLCOUNTRY.focus==2&&(POPUP_SELLCOUNTRY.focus=1,POPUP_SELLCOUNTRY.draw_focus());break;case KeyDefine.enter:POPUP_SELLCOUNTRY.menu_run()}};POPUP_SELLCOUNTRY.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("sellcountry_btn"+POPUP_SELLCOUNTRY.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("sellcountry_btn"+POPUP_SELLCOUNTRY.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_SELLCOUNTRY.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_SELLCOUNTRY.menu_run_run=function(){util.enable_key(0,"POPUP_SELLCOUNTRY.menu_run_run()에서   key 막기");switch(POPUP_SELLCOUNTRY.focus){case 1:POPUP_SELLCOUNTRY.sell();break;case 2:POPUP_SELLCOUNTRY.close()}};POPUP_SELLCOUNTRY.sell=function(){S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_sellcountry(POPUP_SELLCOUNTRY.board_index_sell_country);REMAINTIME.stop();var n=POPUP_SELLCOUNTRY.get_sellgold();CAL.move_gold(0,POPUP_SELLCOUNTRY.player,n,"건물판매",function(){POPUP_SELLCOUNTRY.close();return});BOARD.info[POPUP_SELLCOUNTRY.board_index_sell_country].country.owner=0;BOARD.info[POPUP_SELLCOUNTRY.board_index_sell_country].country.dev_stage=ENUM.DEV_STAGE.DEV0;BOARD.draw_tile_country_object(POPUP_SELLCOUNTRY.board_index_sell_country)};POPUP_SELLCOUNTRY.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_sellcountry").css({display:"none"}).empty();switch(POPUP_SELLCOUNTRY.before_scene){case ENUM.SCENE.P_MYTURN:POPUP_MYTURN.focus=1;POPUP_MYTURN.menu_run_run();break;default:console.log("error in \t  POPUP_SELLCOUNTRY.close() : 정의해주라 : "+POPUP_SELLCOUNTRY.before_scene)}} 
var POPUP_SELLZASAN={focus:1,player:0,num_player_got_zasan:0,before_scene:ENUM.SCENE.NONE,board_index_sell_zasan:0,board_index_player_got:null};POPUP_SELLZASAN.init=function(){if(S_GAME.winner==0){POPUP_SELLZASAN.before_scene=S_GAME.scene;S_GAME.scene=ENUM.SCENE.P_SELLZASAN;util.enable_key(1,"POPUP_SELLZASAN.init에서   key 입력 받기");POPUP_SELLZASAN.player=S_GAME.turn;POPUP_SELLZASAN.num_player_got_zasan=BOARD.get_num_player_got_zasan(POPUP_SELLZASAN.player);POPUP_SELLZASAN.board_index_player_got=BOARD.get_index_player_got_zasan(POPUP_SELLZASAN.player);switch(POPUP_SELLZASAN.num_player_got_zasan){case 0:console.error("가진 자산 0개인데 호출? POPUP_SELLZASAN.init()");return;case 1:POPUP_SELLZASAN.board_index_sell_zasan=POPUP_SELLZASAN.board_index_player_got[1];POPUP_SELLZASAN.init_one();break;default:var n=POPUP_SELLZASAN.board_index_player_got;util.notice_player(POPUP_SELLZASAN.player,TXT.select_zasan_for_sell);SELECTTILE.init(POPUP_SELLZASAN.player,n)}return}};POPUP_SELLZASAN.init_one=function(){if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_SELLZASAN,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){glo.enable_key=0;POPUP_SELLZASAN.focus=2;POPUP_SELLZASAN.menu_run_run();return}PLAYER.ui_top(POPUP_SELLZASAN.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_SELLZASAN.make_tag();POPUP_SELLZASAN.make_screen();POPUP_SELLZASAN.draw_focus()}};POPUP_SELLZASAN.make_tag=function(){$("#GA_popup_sellzasan").empty();var n=document.getElementById("GA_popup_sellzasan"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_sellzasan_bg" class="dim70"><\/div><div id="sellzasan"  \tclass="'+t+'"><img id="sellzasan_bg"><div id="sellzasan_title">\t<img id="sellzasan_title_bg">\t<div id="sellzasan_title_text"><\/div>\t<\/div><div id="sellzasan_devstage"><\/div><img id="sellzasan_icon"><img id="sellzasan_buygold_icon"><div id="sellzasan_buygold"><\/div><div id="sellzasan_buygold_value"><\/div>\t<div id="sellzasan_btn1" class="button">\t\t<img id="sellzasan_btn1_bg">\t\t<div id="sellzasan_btn1_text"><\/div>\t\t<img id="sellzasan_btn1_focus" class="focus">\t<\/div>\t<div id="sellzasan_btn2" class="button">\t\t<img id="sellzasan_btn2_bg">\t\t<div id="sellzasan_btn2_text"><\/div>\t\t<img id="sellzasan_btn2_focus" class="focus">\t<\/div><\/div><\/div>'};POPUP_SELLZASAN.make_screen=function(){var t,i,r,n,u;$("#GA_popup_sellzasan").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#sellzasan").css({left:"577px",top:"248px",width:"842px",height:"624px",position:"absolute"});util.draw_image_no_wh_pos("sellzasan_bg","./image/game/popup_sellcountry/p_sellland_bg.png",0,0);t=BOARD_DEFINE[POPUP_SELLZASAN.board_index_sell_zasan].COLOR_MONOPOLY;i="./image/game/popup_buycountry/p_buyland_colorbox_"+t+".png";util.draw_image_no_wh_pos("sellzasan_title_bg",i,196,-13);r=eval("TXT.tile"+POPUP_SELLZASAN.board_index_sell_zasan+"_title");util.draw_text_html(r,"sellzasan_title_text",196,-11,374,78,78,50,"center","#ffffff");util.draw_textshadow("sellzasan_title_text","#2b2524",2);BOARD_DEFINE[POPUP_SELLZASAN.board_index_sell_zasan].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY?(n=BOARD.info[POPUP_SELLZASAN.board_index_sell_zasan].country.dev_stage,util.draw_text_html(TXT.dev_stage+" : "+eval("TXT.DEV"+n),"sellzasan_devstage",104,95,559,42,42,40,"center","#92210f"),n<5?util.draw_image_no_wh_pos("sellzasan_icon","./image/game/popup_sellcountry/p_sellland_icon_step"+n+"_"+PLAYER.get_color(POPUP_SELLZASAN.player)+".png",209,139):util.draw_image_no_wh_pos("sellzasan_icon","./image/game/popup_sellcountry/p_sellland_icon_step"+n+"_"+POPUP_SELLZASAN.board_index_sell_zasan+"_"+PLAYER.get_color(POPUP_SELLZASAN.player)+".png",209,139)):util.draw_image("sellzasan_icon","./image/game/popup_sellabs/bigtile"+POPUP_SELLZASAN.board_index_sell_zasan+".png",209,110,350,242,"absolute");util.draw_image_no_wh_pos("sellzasan_buygold_icon","./image/game/popup_buycountry/p_buyland_goldicon.png",173,396);u=POPUP_SELLZASAN.get_sellgold();util.draw_text_html(TXT.sellgold,"sellzasan_buygold",212,396,210,37,37,30,"left","#51301c");util.draw_text_html(util.get_number_with_comma(u),"sellzasan_buygold_value",350,396,280,37,37,30,"center","#304da1");$("#sellzasan_btn1").css({left:"184px",top:"477px",position:"absolute"});util.draw_image_no_wh_pos("sellzasan_btn1_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_image_no_wh_pos("sellzasan_btn1_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.sell,"sellzasan_btn1_text",0,0,176,87,87,40,"center","#ffffff");util.draw_textshadow("sellzasan_btn1_text","#a23100",2);$("#sellzasan_btn2").css({left:"405px",top:"477px",position:"absolute"});util.draw_image_no_wh_pos("sellzasan_btn2_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_image_no_wh_pos("sellzasan_btn2_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.cancel,"sellzasan_btn2_text",0,0,176,87,87,40,"center","#ffffff");util.draw_textshadow("sellzasan_btn2_text","#a23100",2)};POPUP_SELLZASAN.get_sellgold=function(){return CAL.get_zasan_sell_gold(POPUP_SELLZASAN.board_index_sell_zasan)};POPUP_SELLZASAN.draw_focus=function(){$(".focus").css({display:"none"});$("#sellzasan_btn"+POPUP_SELLZASAN.focus+"_focus").css({display:"block"})};POPUP_SELLZASAN.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:POPUP_SELLZASAN.focus==1&&(POPUP_SELLZASAN.focus=2,POPUP_SELLZASAN.draw_focus());break;case KeyDefine.left:POPUP_SELLZASAN.focus==2&&(POPUP_SELLZASAN.focus=1,POPUP_SELLZASAN.draw_focus());break;case KeyDefine.enter:POPUP_SELLZASAN.menu_run()}};POPUP_SELLZASAN.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("sellzasan_btn"+POPUP_SELLZASAN.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("sellzasan_btn"+POPUP_SELLZASAN.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_SELLZASAN.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_SELLZASAN.menu_run_run=function(){util.enable_key(0,"POPUP_SELLZASAN.menu_run_run()에서   key 막기");switch(POPUP_SELLZASAN.focus){case 1:POPUP_SELLZASAN.sell();break;case 2:POPUP_SELLZASAN.close()}};POPUP_SELLZASAN.sell=function(){S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_sellzasan(POPUP_SELLZASAN.board_index_sell_zasan);REMAINTIME.stop();var n=POPUP_SELLZASAN.get_sellgold();CAL.move_gold(0,POPUP_SELLZASAN.player,n,"건물판매",function(){POPUP_SELLZASAN.close();return});switch(BOARD_DEFINE[POPUP_SELLZASAN.board_index_sell_zasan].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[POPUP_SELLZASAN.board_index_sell_zasan].country.owner=0;BOARD.info[POPUP_SELLZASAN.board_index_sell_zasan].country.dev_stage=ENUM.DEV_STAGE.DEV0;break;case ENUM.TILE_TYPE.RESORT:BOARD.info[POPUP_SELLZASAN.board_index_sell_zasan].resort.owner=0;BOARD.init_i(POPUP_SELLZASAN.board_index_sell_zasan);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[POPUP_SELLZASAN.board_index_sell_zasan].invention.owner=0}BOARD.draw_tile_update(POPUP_SELLZASAN.board_index_sell_zasan)};POPUP_SELLZASAN.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_sellzasan").css({display:"none"}).empty();switch(POPUP_SELLZASAN.before_scene){case ENUM.SCENE.P_MYTURN:POPUP_MYTURN.focus=1;POPUP_MYTURN.menu_run_run();break;default:console.log("error in \t  POPUP_SELLZASAN.close() : 정의해주라 : "+POPUP_SELLZASAN.before_scene)}} 
var POPUP_SELLABS={focus:1,player:0,before_scene:ENUM.SCENE.NONE,board_index_sell_zasan:null,board_index_player_got:null,num_player_got_zasan:0,need_gold:0};POPUP_SELLABS.init=function(n,t){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_SELLABS.init,n,t);return}if(S_GAME.winner==0){if(POPUP_SELLABS.before_scene=S_GAME.scene,S_GAME.scene=ENUM.SCENE.P_SELLABS,util.enable_key(1,"POPUP_SELLABS.init에서   key 입력 받기"),POPUP_SELLABS.player=S_GAME.turn,POPUP_SELLABS.need_gold=n,POPUP_SELLABS.callback_fn=t,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_SELLABS.init()에서 ai일경우 key 않받기 위해");POPUP_SELLABS.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_SELLABS.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.sellabs_ing);return}PLAYER.ui_top(POPUP_SELLABS.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_SELLABS.num_player_got_zasan=BOARD.get_num_player_got_zasan(POPUP_SELLABS.player);POPUP_SELLABS.board_index_player_got=BOARD.get_index_player_got_zasan(POPUP_SELLABS.player);POPUP_SELLABS.make_tag();POPUP_SELLABS.make_screen();POPUP_SELLABS.draw_focus();REMAINTIME.start()}};POPUP_SELLABS.init_ai=function(){POPUP_SELLABS.board_index_player_got=BOARD.get_index_player_got_zasan(POPUP_SELLABS.player);var n=POPUP_SELLABS.board_index_player_got;SELECTTILE_ABS.init(S_GAME.turn,n);util.enable_key(0,"POPUP_SELLABS.init_ai()에서  key막아라 로봇이니깐");SELECTTILE_ABS.where_focus=2;SELECTTILE_ABS.abs_focus=1;SELECTTILE_ABS.menu_run_run()};POPUP_SELLABS.make_tag=function(){$("#GA_popup_sellabs").empty();var n=document.getElementById("GA_popup_sellabs"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_sellabs_bg" class="dim70"><\/div><div id="sellabs"  \tclass="'+t+'">\t<img id="sellabs_bg">\t<div id="sellabs_comment"><\/div>\t<div id="sellabs_btn1" class="button">\t\t<img id="sellabs_btn1_bg">\t\t<div id="sellabs_btn1_text"><\/div>\t\t<img id="sellabs_btn1_focus" class="focus">\t<\/div>\t<div id="sellabs_btn2" class="button">\t\t<img id="sellabs_btn2_bg">\t\t<div id="sellabs_btn2_text"><\/div>\t\t<img id="sellabs_btn2_focus" class="focus">\t<\/div><\/div>'};POPUP_SELLABS.make_screen=function(){$("#GA_popup_sellabs").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#sellabs").css({left:"713px",top:"387px",width:"494px",height:"345px",position:"absolute"});util.draw_image_no_wh_pos("sellabs_bg","./image/pvp/matching/p_match_ing_bg.png",0,0);util.draw_text_html(TXT.sellabs_comment,"sellabs_comment",31,37,431,232,58,38,"center","#936a5b");$("#sellabs_btn1").css({left:"52px",top:"289px",position:"absolute"});util.draw_image_no_wh_pos("sellabs_btn1_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_image_no_wh_pos("sellabs_btn1_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.sellabs,"sellabs_btn1_text",0,0,176,87,87,32,"center","#ffffff");util.draw_textshadow("sellabs_btn1_text","#a23100",2);$("#sellabs_btn2").css({left:"269px",top:"289px",position:"absolute"});util.draw_image_no_wh_pos("sellabs_btn2_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_image_no_wh_pos("sellabs_btn2_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);USER.lang==LANG.KOREA?util.draw_text_html(TXT.giveup,"sellabs_btn2_text",0,0,176,87,87,32,"center","#ffffff"):util.draw_text_html(TXT.giveup,"sellabs_btn2_text",0,0,176,87,87,26,"center","#ffffff");util.draw_textshadow("sellabs_btn2_text","#a23100",2)};POPUP_SELLABS.draw_focus=function(){$(".focus").css({display:"none"});$("#sellabs_btn"+POPUP_SELLABS.focus+"_focus").css({display:"block"})};POPUP_SELLABS.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:POPUP_SELLABS.focus==1&&(POPUP_SELLABS.focus=2);POPUP_SELLABS.draw_focus();break;case KeyDefine.left:POPUP_SELLABS.focus==2&&(POPUP_SELLABS.focus=1);POPUP_SELLABS.draw_focus();break;case KeyDefine.enter:POPUP_SELLABS.menu_run()}};POPUP_SELLABS.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("sellabs_btn"+POPUP_SELLABS.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("sellabs_btn"+POPUP_SELLABS.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_SELLABS.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_SELLABS.menu_run_run=function(){util.enable_key(0,"POPUP_SELLABS.menu_run_run()에서   key 막기");switch(POPUP_SELLABS.focus){case 1:POPUP_SELLABS.board_index_player_got=BOARD.get_index_player_got_zasan(POPUP_SELLABS.player);var n=POPUP_SELLABS.board_index_player_got;POPUP_SELLABS.close();SELECTTILE_ABS.init(POPUP_SELLABS.player,n);break;case 2:S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_pasan();POPUP_SELLABS.close();REMAINTIME.stop();PLAYER.info[S_GAME.turn].pasan_flag=1;POPUP_SELLABS.callback_fn&&POPUP_SELLABS.callback_fn(S_GAME.turn)}};POPUP_SELLABS.sellabs=function(){S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_sellabs(POPUP_SELLABS.board_index_sell_zasan);var n=POPUP_SELLABS.get_sellgold();CAL.move_gold(0,POPUP_SELLABS.player,n,"건물판매",function(){POPUP_SELLABS.close();return});switch(BOARD_DEFINE[POPUP_SELLABS.board_index_sell_zasan].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[POPUP_SELLABS.board_index_sell_zasan].country.owner=0;BOARD.info[POPUP_SELLABS.board_index_sell_zasan].country.dev_stage=ENUM.DEV_STAGE.DEV0;break;case ENUM.TILE_TYPE.RESORT:BOARD.info[POPUP_SELLABS.board_index_sell_zasan].resort.owner=0;BOARD.init_i(POPUP_SELLABS.board_index_sell_zasan);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[POPUP_SELLABS.board_index_sell_zasan].invention.owner=0}BOARD.draw_tile_update(POPUP_SELLABS.board_index_sell_zasan)};POPUP_SELLABS.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_sellabs").css({display:"none"}).empty()} 
var POPUP_JOINNUM={focus:5,player_num:2,ai_num:0,result:[0,ENUM.PLAYER_TYPE.OFFLINE_USER,ENUM.PLAYER_TYPE.OFFLINE_USER,ENUM.PLAYER_TYPE.NONE,ENUM.PLAYER_TYPE.NONE,],sun:0,team_ai:0};POPUP_JOINNUM.init=function(){S_GAME.winner==0&&(S_GAME.scene=ENUM.SCENE.P_JOINNUM,glo.enable_key=1,POPUP_JOINNUM.sun=0,POPUP_JOINNUM.team_ai=0,POPUP_JOINNUM.make_tag(),POPUP_JOINNUM.make_screen(),POPUP_JOINNUM.draw_focus())};POPUP_JOINNUM.make_tag=function(){var n=document.getElementById("GA_popup_joinnum");n.innerHTML='<div id="GA_popup_joinnum_bg" class="dim70"><\/div><div id="joinnum" class="popup1">\t<img id="joinnum_bg">\t<img id="joinnum_title">\t<img id="joinnum_player">\t<div id="joinnum_player_num"><\/div>\t<img id="joinnum_ai">\t<div id="joinnum_ai_num"><\/div>\t<div id="joinnum_btn1" class="button">\t\t<img id="joinnum_btn1_bg">\t\t<img id="joinnum_btn1_focus" class="focus">\t<\/div>\t<div id="joinnum_btn2" class="button">\t\t<img id="joinnum_btn2_bg">\t\t<img id="joinnum_btn2_focus" class="focus">\t<\/div>\t<div id="joinnum_btn3" class="button">\t\t<img id="joinnum_btn3_bg">\t\t<img id="joinnum_btn3_focus" class="focus">\t<\/div>\t<div id="joinnum_btn4" class="button">\t\t<img id="joinnum_btn4_bg">\t\t<img id="joinnum_btn4_focus" class="focus">\t<\/div>\t<div id="joinnum_btn5" class="button">\t\t<img id="joinnum_btn5_bg">\t\t<img id="joinnum_btn5_text">\t\t<img id="joinnum_btn5_focus" class="focus">\t<\/div>\t<div id="joinnum_btn6" class="button">\t\t<img id="joinnum_btn6_bg">\t\t<img id="joinnum_btn6_text">\t\t<img id="joinnum_btn6_focus" class="focus">\t<\/div>\t<div id="joinnum_btn7" class="button">\t\t<img id="joinnum_btn7_bg">\t\t<img id="joinnum_btn7_text">\t\t<img id="joinnum_btn7_focus" class="focus">\t<\/div>\t<div id="joinnum_tot">\t\t<img id="joinnum_tot_bg">\t\t<div id="joinnum_tot_value"><\/div>\t<\/div>\t<img id="joinnum_team_ai1">\t<img id="joinnum_team_ai2"><\/div>'};POPUP_JOINNUM.make_screen=function(){if($("#GA_popup_joinnum").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080}),$("#joinnum").css({left:"472px",top:"369px",width:"978px",height:"396px",position:"absolute"}),util.draw_image_no_wh_pos("joinnum_bg","./image/game/popup_joinnum/p_joinnum_bg.png",0,0),util.draw_image_no_wh_pos("joinnum_title","./image/game/popup_joinnum/p_joinnum_titletxt"+util.get_postfix_lang()+".png",389,21),$("#joinnum_btn5").css({left:"70px",top:"398px",position:"absolute"}),util.draw_image_no_wh_pos("joinnum_btn5_bg","./image/game/popup_joinnum/p_joinnum_startbt.png",0,0),util.draw_image_no_wh_pos("joinnum_btn5_text","./image/game/popup_joinnum/p_getstart_title"+util.get_postfix_lang()+".png",28,22),util.draw_image_no_wh_pos("joinnum_btn5_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27),$("#joinnum_btn5_focus").css({display:"none"}),$("#joinnum_btn6").css({left:"354px",top:"398px",position:"absolute"}),util.draw_image_no_wh_pos("joinnum_btn6_bg","./image/game/popup_joinnum/p_joinnum_exitbt.png",0,0),util.draw_image_no_wh_pos("joinnum_btn6_text","./image/game/popup_joinnum/p_select_char_title"+util.get_postfix_lang()+".png",28,22),util.draw_image_no_wh_pos("joinnum_btn6_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27),$("#joinnum_btn6_focus").css({display:"none"}),$("#joinnum_btn7").css({left:"637px",top:"398px",position:"absolute"}),util.draw_image_no_wh_pos("joinnum_btn7_bg","./image/game/popup_joinnum/p_joinnum_exitbt.png",0,0),util.draw_image_no_wh_pos("joinnum_btn7_text","./image/game/popup_joinnum/p_joinnum_startbt_exit_title"+util.get_postfix_lang()+".png",28,22),util.draw_image_no_wh_pos("joinnum_btn7_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27),$("#joinnum_btn7_focus").css({display:"none"}),S_GAME.mode.team==1){util.draw_image_no_wh_pos("joinnum_player","./image/game/popup_joinnum/p_maketeam_info.png",53,141);$("#joinnum_btn1").css({left:"812px",top:"66px",position:"absolute"});POPUP_JOINNUM.update_team_ai();util.draw_image_no_wh_pos("joinnum_btn1_focus","./image/game/popup_joinnum/p_team_ai_bt_f.png",-30,-30);$("#joinnum_btn1_focus").css({display:"none"});return}util.draw_image_no_wh_pos("joinnum_player","./image/game/popup_joinnum/p_joinnum_player_bg.png",157,146);util.draw_image_no_wh_pos("joinnum_ai","./image/game/popup_joinnum/p_joinnum_ai_bg.png",540,146);$("#joinnum_btn1").css({left:"350px",top:"146px",position:"absolute"});util.draw_image_no_wh_pos("joinnum_btn1_bg","./image/game/popup_joinnum/p_joinnum_up_bt.png",0,0);util.draw_image_no_wh_pos("joinnum_btn1_focus","./image/game/popup_joinnum/p_joinnum_updown_bt_focus.png",-27,-28);$("#joinnum_btn1_focus").css({display:"none"});$("#joinnum_btn2").css({left:"733px",top:"146px",position:"absolute"});util.draw_image_no_wh_pos("joinnum_btn2_bg","./image/game/popup_joinnum/p_joinnum_up_bt.png",0,0);util.draw_image_no_wh_pos("joinnum_btn2_focus","./image/game/popup_joinnum/p_joinnum_updown_bt_focus.png",-27,-28);$("#joinnum_btn2_focus").css({display:"none"});$("#joinnum_btn3").css({left:"350px",top:"246px",position:"absolute"});util.draw_image_no_wh_pos("joinnum_btn3_bg","./image/game/popup_joinnum/p_joinnum_down_bt.png",0,0);util.draw_image_no_wh_pos("joinnum_btn3_focus","./image/game/popup_joinnum/p_joinnum_updown_bt_focus.png",-27,-28);$("#joinnum_btn3_focus").css({display:"none"});$("#joinnum_btn4").css({left:"733px",top:"246px",position:"absolute"});util.draw_image_no_wh_pos("joinnum_btn4_bg","./image/game/popup_joinnum/p_joinnum_down_bt.png",0,0);util.draw_image_no_wh_pos("joinnum_btn4_focus","./image/game/popup_joinnum/p_joinnum_updown_bt_focus.png",-27,-28);$("#joinnum_btn4_focus").css({display:"none"});$("#joinnum_tot").css({left:"776px",top:"-27px",position:"absolute"});util.draw_image_no_wh_pos("joinnum_tot_bg","./image/game/popup_joinnum/p_joinnum_all_bg.png",0,0);POPUP_JOINNUM.make_screen_player_ai_num()};POPUP_JOINNUM.update_team_ai=function(){POPUP_JOINNUM.team_ai==0?(util.draw_image_no_wh_pos("joinnum_btn1_bg","./image/game/popup_joinnum/p_team_ai_bt_off.png",0,0),$("#joinnum_team_ai1").css({display:"none"}),$("#joinnum_team_ai2").css({display:"none"})):(util.draw_image_no_wh_pos("joinnum_btn1_bg","./image/game/popup_joinnum/p_team_ai_bt_on.png",0,0),util.draw_image_no_wh_pos("joinnum_team_ai1","./image/game/popup_joinnum/p_team_ai.png",643,236),util.draw_image_no_wh_pos("joinnum_team_ai2","./image/game/popup_joinnum/p_team_ai.png",838,236),$("#joinnum_team_ai1").css({display:"block"}),$("#joinnum_team_ai2").css({display:"block"}))};POPUP_JOINNUM.make_screen_player_ai_num=function(){util.draw_text_html(this.player_num,"joinnum_player_num",209,181,79,79,79,80,"center","#fff4b8");util.draw_text_html(this.ai_num,"joinnum_ai_num",592,181,79,79,79,80,"center","#fff4b8");var n=this.player_num+this.ai_num;USER.lang==LANG.KOREA?util.draw_text_html("총 "+n+"명","joinnum_tot_value",15,15,188,106,106,50,"center","#b64a4a"):util.draw_text_html("Total "+n,"joinnum_tot_value",15,15,188,106,106,40,"center","#b64a4a")};POPUP_JOINNUM.draw_focus=function(){$(".focus").css({display:"none"});$("#joinnum_btn"+this.focus+"_focus").css({display:"block"})};POPUP_JOINNUM.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:if(S_GAME.mode.team==1){this.focus>=5&&(this.focus=1,this.draw_focus());return}switch(this.focus){case 3:this.focus=1;break;case 4:this.focus=2;break;case 5:this.focus=3;break;case 6:this.focus=3;break;case 7:this.focus=4}this.draw_focus();break;case KeyDefine.down:S_GAME.mode.team==1&&(this.focus=7);switch(this.focus){case 1:this.focus=3;break;case 2:this.focus=4;break;case 3:this.focus=5;break;case 4:this.focus=7}this.draw_focus();break;case KeyDefine.right:if(S_GAME.mode.team==1){this.focus==5?(this.focus=6,this.draw_focus()):this.focus==6&&(this.focus=7,this.draw_focus());return}switch(this.focus){case 1:this.focus=2;break;case 3:this.focus=4;break;case 5:this.focus=6;break;case 6:this.focus=7}this.draw_focus();break;case KeyDefine.left:if(S_GAME.mode.team==1){this.focus==7?(this.focus=6,this.draw_focus()):this.focus==6&&(this.focus=5,this.draw_focus());return}switch(this.focus){case 2:this.focus=1;break;case 4:this.focus=3;break;case 6:this.focus=5;break;case 7:this.focus=6}this.draw_focus();break;case KeyDefine.enter:this.menu_run()}};POPUP_JOINNUM.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("joinnum_btn"+this.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("joinnum_btn"+POPUP_JOINNUM.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_JOINNUM.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_JOINNUM.menu_run_run=function(){var t,n;switch(this.focus){case 1:S_GAME.mode.team==1?(POPUP_JOINNUM.team_ai=POPUP_JOINNUM.team_ai==0?1:0,POPUP_JOINNUM.update_team_ai()):this.player_num+1+this.ai_num<=4&&(this.player_num++,this.make_screen_player_ai_num());break;case 2:this.player_num+1+this.ai_num<=4&&(this.ai_num++,this.make_screen_player_ai_num());break;case 3:this.player_num>1&&(this.player_num--,this.make_screen_player_ai_num());break;case 4:this.ai_num>=1&&(this.ai_num--,this.make_screen_player_ai_num());break;case 5:if(S_GAME.mode.team==1)this.player_num=4,this.ai_num=0,POPUP_JOINNUM.team_ai==1?(POPUP_JOINNUM.result[1]=ENUM.PLAYER_TYPE.OFFLINE_USERI,POPUP_JOINNUM.result[2]=ENUM.PLAYER_TYPE.AI,POPUP_JOINNUM.result[3]=ENUM.PLAYER_TYPE.OFFLINE_USER,POPUP_JOINNUM.result[4]=ENUM.PLAYER_TYPE.AI):(POPUP_JOINNUM.result[1]=ENUM.PLAYER_TYPE.OFFLINE_USERI,POPUP_JOINNUM.result[2]=ENUM.PLAYER_TYPE.OFFLINE_USERI,POPUP_JOINNUM.result[3]=ENUM.PLAYER_TYPE.OFFLINE_USER,POPUP_JOINNUM.result[4]=ENUM.PLAYER_TYPE.OFFLINE_USERI);else{if(this.player_num+this.ai_num<=1){util.notice(TXT.atleast_2player,3);return}for(t=0,n=1;n<=this.player_num;n++)t++,this.result[t]=ENUM.PLAYER_TYPE.OFFLINE_USER;for(n=1;n<=this.ai_num;n++)t++,this.result[t]=ENUM.PLAYER_TYPE.AI;for(n=this.player_num+this.ai_num+1;n<=4;n++)t++,this.result[t]=ENUM.PLAYER_TYPE.NONE}POPUP_SELECTCHAR.player_tot=this.player_num+this.ai_num;POPUP_SELECTCHAR.force_run();POPUP_JOINNUM.after_select_sun();break;case 6:if(S_GAME.mode.team==1)POPUP_JOINNUM.team_ai==1?(POPUP_JOINNUM.player_num=2,POPUP_JOINNUM.ai_num=2):(POPUP_JOINNUM.player_num=4,POPUP_JOINNUM.ai_num=0);else if(this.player_num+this.ai_num<=1){util.notice(TXT.atleast_2player,3);return}POPUP_SELECTCHAR.init();break;case 7:S_GAME.end();ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL);SOUND.play_bgm(SOUND.BGM.BGM0)}};POPUP_JOINNUM.get_num=function(){for(var t=0,n=1;n<=4;n++)this.result[n]!=ENUM.PLAYER_TYPE.NONE&&t++;return t};POPUP_JOINNUM.close=function(){$("#GA_popup_joinnum").css({display:"none"}).empty();S_GAME.scene=ENUM.SCENE.GAME};POPUP_JOINNUM.start_game=function(){util.enable_key(0,"POPUP_JOINNUM.start_game()에서 key 받지 않기 위해");PHP.daily_add_play_count();PLAYER.set_offline();PLAYER.ui_draw();PLAYER.info[this.sun].turn_count=1;POPUP_JOINNUM.close();CHAR.draw_all();util.draw_image_no_wh_pos("GA_gamestart","./image/game/ui/game_start_title.png",551,471);setTimeout(function(){$("#GA_gamestart").css({display:"none"})},1800);SOUND.play_effect(SOUND.EFFECT.READY_START);S_GAME.timer.POPUP_JOINNUM_start_game=setTimeout(function(){S_GAME.run_after_change_turn()},1500)};POPUP_JOINNUM.after_select_sun=function(){var t,i,r,u,f,n,e;for(util.enable_key(0,"POPUP_JOINNUM.after_select_sun()은 자동으로 선정하는 것이니깐 key 받지 않음"),$("#GA_popup_joinnum").empty(),t=[0,6,5,4,3,2,1],util.array_suffle(t),i=0,r=0,n=1;n<=this.get_num();n++)t[n]>r&&(i=n,r=t[n]);for(this.sun=i,S_GAME.mode.online&&(t[1]=S_PVP_MATCHING.me.sun_dice,t[2]=S_PVP_MATCHING.other.sun_dice,this.sun=t[1]>t[2]?1:3),u="",n=1;n<=this.get_num();n++)u+='<div id="joinnum_card'+n+'">\t<div class="joinnum_container">\t\t<div id="card'+n+'_front" class="joinnum_item joinnum_front"><img src="./image/game/popup_selectsun/p_number_common_card.png" /><\/div>\t\t<div id="card'+n+'_back"class="joinnum_item joinnum_back"><img src="./image/game/popup_selectsun/p_number_card'+t[n]+'.png" /><\/div>\t<\/div><\/div>';for(f=document.getElementById("GA_popup_joinnum"),f.innerHTML=u,n=1;n<=this.get_num();n++)$("#joinnum_card"+n).css({left:"864px",top:"412px",position:"absolute"});for(PLAYER.set_offline(),PLAYER.ui_draw(),GA_player1.style.animation="move_up_player12 0.9s cubic-bezier(0.81, -0.14, 0.63, 0.98) forwards",GA_player2.style.animation="move_up_player12 0.9s cubic-bezier(0.81, -0.14, 0.63, 0.98) forwards",GA_player3.style.animation="move_right_player3_offline 1.1s cubic-bezier(0.81, -0.14, 0.63, 0.98) forwards",GA_player4.style.animation="move_left_player4_online 1.3s cubic-bezier(0.81, -0.14, 0.63, 0.98) forwards",n=1;n<=4;n++)$("#GA_player"+n+"_focus").css({display:"none"});e={icon_fname:"./image/common/onepixel.png",icon_x:0,icon_y:0,top:200,line1_text:TXT.selectsun_comment1,line2_text:TXT.selectsun_comment2,time:7e3};S_GAME.draw_message_icon(e,"popup1");SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_JOINNUM.divide_card();POPUP_JOINNUM.flip_card();setTimeout(function(){POPUP_JOINNUM.defined_sun()},2e3*1.5+1e3)};POPUP_JOINNUM.divide_card=function(){S_GAME.mode.online==1?($("#joinnum_card1").addClass("joinnum_p1"),$("#joinnum_card2").addClass("joinnum_p3")):setTimeout(function(){for(var n=1;n<=POPUP_JOINNUM.get_num();n++)glo.platform==glo.PLATFORM.LG_WEEKEND&&n>=3?$("#joinnum_card"+n).addClass("joinnum_p"+n+"_weekend"):$("#joinnum_card"+n).addClass("joinnum_p"+n)},600)};POPUP_JOINNUM.flip_card=function(){POPUP_JOINNUM.get_num()>=1&&setTimeout(function(){SOUND.play_effect(SOUND.EFFECT.CARD_TURN);$("#card1_front").css({transform:"rotateY(180deg)"});$("#card1_back").css({transform:"rotateY(0deg)"})},2e3*.6);POPUP_JOINNUM.get_num()>=2&&setTimeout(function(){SOUND.play_effect(SOUND.EFFECT.CARD_TURN);$("#card2_front").css({transform:"rotateY(180deg)"});$("#card2_back").css({transform:"rotateY(0deg)"})},2e3*.9);POPUP_JOINNUM.get_num()>=3&&setTimeout(function(){SOUND.play_effect(SOUND.EFFECT.CARD_TURN);$("#card3_front").css({transform:"rotateY(180deg)"});$("#card3_back").css({transform:"rotateY(0deg)"})},2e3*1.2);POPUP_JOINNUM.get_num()>=4&&setTimeout(function(){SOUND.play_effect(SOUND.EFFECT.CARD_TURN);$("#card4_front").css({transform:"rotateY(180deg)"});$("#card4_back").css({transform:"rotateY(0deg)"})},2e3*1.5)};POPUP_JOINNUM.defined_sun=function(){S_GAME.turn=this.sun;$("#GA_player"+POPUP_JOINNUM.sun+"_focus").css({display:"block"});$("#GA_message_icon").css({display:"none"});GA_player1.style.animation="";GA_player2.style.animation="";GA_player3.style.animation="";GA_player4.style.animation="";$("#GA_player"+POPUP_JOINNUM.sun).addClass("joinnum_select_sun");setTimeout(function(){glo.scene.cur==glo.S.GAME&&POPUP_JOINNUM.start_game()},2e3)} 
var POPUP_SELECTCHAR={CHAR_NUM:4,focus:5,count:1,result:[0,0,0,0,0,],player_tot:0};POPUP_SELECTCHAR.init=function(){S_GAME.scene=ENUM.SCENE.P_SELECTCHAR;glo.enable_key=1;POPUP_SELECTCHAR.count=1;POPUP_SELECTCHAR.result=[0,0,0,0,0];POPUP_SELECTCHAR.player_tot=POPUP_JOINNUM.player_num+POPUP_JOINNUM.ai_num;POPUP_SELECTCHAR.make_tag();POPUP_SELECTCHAR.make_screen();POPUP_SELECTCHAR.draw_focus()};POPUP_SELECTCHAR.make_tag=function(){var n=document.getElementById("GA_popup_selectchar");n.innerHTML='<div id="GA_popup_selectchar_bg" class="dim70"><\/div><div id="selectchar" class="popup1">\t<img id="selectchar_bg">\t<img id="selectchar_title">\t<div id="selectchar_comment"><\/div>\t<div id="selectchar_btn1" class="button">\t\t<img id="selectchar_btn1_bg">\t\t<img id="selectchar_btn1_check">\t\t<img id="selectchar_btn1_focus" class="focus">\t<\/div>\t<div id="selectchar_btn2" class="button">\t\t<img id="selectchar_btn2_bg">\t\t<img id="selectchar_btn2_check">\t\t<img id="selectchar_btn2_focus" class="focus">\t<\/div>\t<div id="selectchar_btn3" class="button">\t\t<img id="selectchar_btn3_bg">\t\t<img id="selectchar_btn3_check">\t\t<img id="selectchar_btn3_focus" class="focus">\t<\/div>\t<div id="selectchar_btn4" class="button">\t\t<img id="selectchar_btn4_bg">\t\t<img id="selectchar_btn4_check">\t\t<img id="selectchar_btn4_focus" class="focus">\t<\/div>\t<div id="selectchar_btn5" class="button">\t\t<img id="selectchar_btn5_bg">\t\t<img id="selectchar_btn5_text">\t\t<img id="selectchar_btn5_focus" class="focus">\t<\/div>\t<div id="selectchar_btn6" class="button">\t\t<img id="selectchar_btn6_bg">\t\t<img id="selectchar_btn6_text">\t\t<img id="selectchar_btn6_focus" class="focus">\t<\/div>\t<div id="selectchar_p1">\t\t<img id="selectchar_p1_bg">\t\t<div id="selectchar_p1_txt"><\/div>\t<\/div>\t<div id="selectchar_p2">\t\t<img id="selectchar_p2_bg">\t\t<div id="selectchar_p2_txt"><\/div>\t<\/div>\t<div id="selectchar_p3">\t\t<img id="selectchar_p3_bg">\t\t<div id="selectchar_p3_txt"><\/div>\t<\/div>\t<div id="selectchar_p4">\t\t<img id="selectchar_p4_bg">\t\t<div id="selectchar_p4_txt"><\/div>\t<\/div><\/div>'};POPUP_SELECTCHAR.make_screen=function(){$("#GA_popup_selectchar").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#selectchar").css({left:"473px",top:"286px",width:"987px",height:"470px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_bg","./image/game/popup_selectchar/p_char_choose_bg.png",0,0);util.draw_image_no_wh_pos("selectchar_title","./image/game/popup_selectchar/p_char_choose_title"+util.get_postfix_lang()+".png",379,4);$("#selectchar_btn1").css({left:"141px",top:"188px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_btn1_bg","./image/game/popup_selectchar/p_charbt1.png",0,0);util.draw_image_no_wh_pos("selectchar_btn1_focus","./image/game/popup_selectchar/p_charbt_f.png",-31,-31);$("#selectchar_btn1_focus").css({display:"none"});$("#selectchar_btn2").css({left:"323px",top:"188px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_btn2_bg","./image/game/popup_selectchar/p_charbt2.png",0,0);util.draw_image_no_wh_pos("selectchar_btn2_focus","./image/game/popup_selectchar/p_charbt_f.png",-31,-31);$("#selectchar_btn2_focus").css({display:"none"});$("#selectchar_btn3").css({left:"505px",top:"188px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_btn3_bg","./image/game/popup_selectchar/p_charbt3.png",0,0);util.draw_image_no_wh_pos("selectchar_btn3_focus","./image/game/popup_selectchar/p_charbt_f.png",-31,-31);$("#selectchar_btn3_focus").css({display:"none"});$("#selectchar_btn4").css({left:"687px",top:"188px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_btn4_bg","./image/game/popup_selectchar/p_charbt4.png",0,0);util.draw_image_no_wh_pos("selectchar_btn4_focus","./image/game/popup_selectchar/p_charbt_f.png",-31,-31);$("#selectchar_btn4_focus").css({display:"none"});$("#selectchar_btn5").css({left:"204px",top:"469px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_btn5_bg","./image/game/popup_joinnum/p_joinnum_startbt.png",0,0);util.draw_image_no_wh_pos("selectchar_btn5_text","./image/game/popup_joinnum/p_getstart_title"+util.get_postfix_lang()+".png",28,22);util.draw_image_no_wh_pos("selectchar_btn5_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27);$("#selectchar_btn5_focus").css({display:"none"});$("#selectchar_btn6").css({left:"508px",top:"469px",position:"absolute"});util.draw_image_no_wh_pos("selectchar_btn6_bg","./image/game/popup_joinnum/p_joinnum_exitbt.png",0,0);util.draw_image_no_wh_pos("selectchar_btn6_text","./image/game/popup_joinnum/p_joinnum_startbt_exit_title"+util.get_postfix_lang()+".png",28,22);util.draw_image_no_wh_pos("selectchar_btn6_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27);$("#selectchar_btn6_focus").css({display:"none"});POPUP_SELECTCHAR.make_screen_comment()};POPUP_SELECTCHAR.make_screen_comment=function(){var t,n;if(POPUP_SELECTCHAR.count>POPUP_SELECTCHAR.player_tot){util.draw_text_html(TXT.complete_selectchar,"selectchar_comment",31,131,923,47,47,30,"center","#92210f");return}t=" Player";POPUP_SELECTCHAR.is_ai(POPUP_SELECTCHAR.count)?(n="AI의 캐릭터를 선택하세요.",USER.lang!=LANG.KOREA&&(n="Select char for AI"),util.draw_text_html(n,"selectchar_comment",31,131,923,47,47,30,"center","#92210f")):(n=POPUP_SELECTCHAR.count+" Player의 캐릭터를 선택하세요.",USER.lang!=LANG.KOREA&&(n="Select char for Player "+POPUP_SELECTCHAR.count),util.draw_text_html(n,"selectchar_comment",31,131,923,47,47,30,"center","#92210f"))};POPUP_SELECTCHAR.is_ai=function(n){return S_GAME.mode.team==0?n>POPUP_JOINNUM.player_num?!0:!1:POPUP_JOINNUM.team_ai==1?n==2||n==4?!0:!1:!1};POPUP_SELECTCHAR.make_screen_check=function(){for(var t,n=1;n<=POPUP_SELECTCHAR.CHAR_NUM;n++)if(POPUP_SELECTCHAR.result[n]>0){util.draw_image_no_wh_pos("selectchar_btn"+n+"_check","./image/game/popup_selectchar/p_charbt_dim.png",0,0);$("#selectchar_btn"+n+"_check").css({display:"block"});switch(n){case 1:$("#selectchar_p1").css({left:"141px",top:"362px",width:"155px",height:"61px",position:"absolute"});break;case 2:$("#selectchar_p2").css({left:"323px",top:"362px",width:"155px",height:"61px",position:"absolute"});break;case 3:$("#selectchar_p3").css({left:"505px",top:"362px",width:"155px",height:"61px",position:"absolute"});break;case 4:$("#selectchar_p4").css({left:"687px",top:"362px",width:"155px",height:"61px",position:"absolute"})}t=POPUP_SELECTCHAR.result[n];util.draw_image_no_wh_pos("selectchar_p"+n+"_bg","./image/game/popup_selectchar/p_char_"+PLAYER.get_color(t)+".png",0,0);S_GAME.mode.team==0?POPUP_SELECTCHAR.result[n]>POPUP_JOINNUM.player_num?util.draw_text_html("AI","selectchar_p"+n+"_txt",0,0,155,61,61,25,"center","#fff4b8"):util.draw_text_html(t+" Player","selectchar_p"+n+"_txt",0,0,155,61,61,25,"center","#fff4b8"):POPUP_JOINNUM.team_ai==1?POPUP_SELECTCHAR.result[n]==2||POPUP_SELECTCHAR.result[n]==4?util.draw_text_html("AI","selectchar_p"+n+"_txt",0,0,155,61,61,25,"center","#fff4b8"):util.draw_text_html(t+" Player","selectchar_p"+n+"_txt",0,0,155,61,61,25,"center","#fff4b8"):util.draw_text_html(t+" Player","selectchar_p"+n+"_txt",0,0,155,61,61,25,"center","#fff4b8");util.draw_textshadow("selectchar_p"+n+"_txt","#981900",2)}else $("#selectchar_btn"+n+"_check").css({display:"none"}),$("selectchar_p"+n).css({display:"none"})};POPUP_SELECTCHAR.draw_focus=function(){$(".focus").css({display:"none"});$("#selectchar_btn"+this.focus+"_focus").css({display:"block"})};POPUP_SELECTCHAR.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:if(POPUP_SELECTCHAR.count>POPUP_SELECTCHAR.player_tot)return;this.focus==5&&(this.focus=1);this.focus==6&&(this.focus=3);this.draw_focus();break;case KeyDefine.down:(this.focus==1||this.focus==2)&&(this.focus=5);(this.focus==3||this.focus==4)&&(this.focus=6);this.draw_focus();break;case KeyDefine.right:this.focus<=3?this.focus++:this.focus==5&&(this.focus=6);this.draw_focus();break;case KeyDefine.left:switch(this.focus){case 2:case 3:case 4:this.focus--;break;case 6:this.focus--}this.draw_focus();break;case KeyDefine.enter:this.menu_run()}};POPUP_SELECTCHAR.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("selectchar_btn"+this.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("selectchar_btn"+POPUP_SELECTCHAR.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_SELECTCHAR.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_SELECTCHAR.menu_run_run=function(){switch(this.focus){case 1:case 2:case 3:case 4:if(POPUP_SELECTCHAR.count>POPUP_SELECTCHAR.player_tot)return;if(POPUP_SELECTCHAR.result[this.focus]==0&&(POPUP_SELECTCHAR.result[this.focus]=POPUP_SELECTCHAR.count,POPUP_SELECTCHAR.count++,POPUP_SELECTCHAR.count>POPUP_SELECTCHAR.player_tot)){for(var n=1;n<=POPUP_SELECTCHAR.CHAR_NUM;n++)POPUP_SELECTCHAR.result[n]==0&&$("#selectchar_btn"+n).css({display:"none"});POPUP_SELECTCHAR.focus=5;POPUP_SELECTCHAR.draw_focus()}POPUP_SELECTCHAR.make_screen_check();POPUP_SELECTCHAR.make_screen_comment();break;case 5:POPUP_SELECTCHAR.count>POPUP_SELECTCHAR.player_tot?POPUP_SELECTCHAR.start_game():(POPUP_SELECTCHAR.force_run(),POPUP_SELECTCHAR.make_screen_check(),POPUP_SELECTCHAR.make_screen_comment(),glo.enable_key=0,$("#selectchar_btn5").css({display:"none"}),$("#selectchar_btn6").css({display:"none"}),setTimeout(function(){POPUP_SELECTCHAR.start_game()},1500));break;case 6:POPUP_SELECTCHAR.result=[0,0,0,0,0];POPUP_SELECTCHAR.count=1;POPUP_SELECTCHAR.close();POPUP_JOINNUM.draw_focus()}};POPUP_SELECTCHAR.force_run=function(){for(var n=1;n<=POPUP_SELECTCHAR.CHAR_NUM;n++){if(POPUP_SELECTCHAR.count>POPUP_SELECTCHAR.player_tot)return;POPUP_SELECTCHAR.result[n]==0&&(POPUP_SELECTCHAR.result[n]=POPUP_SELECTCHAR.count,POPUP_SELECTCHAR.count++)}};POPUP_SELECTCHAR.start_game=function(){POPUP_SELECTCHAR.close();POPUP_JOINNUM.focus=5;POPUP_JOINNUM.menu_run_run()};POPUP_SELECTCHAR.close=function(){$("#GA_popup_selectchar").css({display:"none"}).empty();S_GAME.scene=ENUM.SCENE.P_JOINNUM};POPUP_SELECTCHAR.get_char_bunho=function(n){for(var t=1;t<=POPUP_SELECTCHAR.CHAR_NUM;t++)if(POPUP_SELECTCHAR.result[t]==n)return t;return util.log("======[ERROR] ======= POPUP_SELECTCHAR.get_char_bunho()에서 player"+n+"에 대한 캐릭터 번호 못찾음"),0} 
var POPUP_RESORT={focus:1,player:0,board_index:0};POPUP_RESORT.init=function(){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_RESORT.init);return}if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_RESORT,util.enable_key(1,"POPUP_RESORT.init()에서  key 받기"),POPUP_RESORT.player=S_GAME.turn,POPUP_RESORT.board_index=PLAYER.info[S_GAME.turn].location,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_RESORT.init()에서  ai key 막기");POPUP_RESORT.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_RESORT.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.buy_ing);return}PLAYER.ui_top(POPUP_RESORT.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_RESORT.make_tag();POPUP_RESORT.make_screen();POPUP_RESORT.draw_focus();REMAINTIME.start()}};POPUP_RESORT.init_ai=function(){var n=BOARD.info[POPUP_RESORT.board_index].resort.gold_tot;POPUP_RESORT.focus=PLAYER.info[POPUP_RESORT.player].bougold>=n?1:2;POPUP_RESORT.menu_run_run()};POPUP_RESORT.make_tag=function(){for(var n,i,r=document.getElementById("GA_popup_resort"),u="",t=1;t<=5;t++)n="resort_btn"+t,u+='\t<div id="'+n+'" class="button">\t\t<img id="'+n+'_bg">\t\t<div id="'+n+'_title"><\/div>\t\t<div id="'+n+'_gold"><\/div>\t\t<img id="'+n+'_icon">\t\t<img id="'+n+'_complete">\t\t<img id="'+n+'_focus" class="focus">\t\t<img id="'+n+'_chkbox">\t<\/div>';i=S_GAME.get_popup_class(S_GAME.turn);r.innerHTML='<div id="GA_popup_resort_bg" class="dim70"><\/div><div id="resort"  class="'+i+'">\t<img id="resort_bg">\t<img id="resort_title">\t<div id="resort_passgold"><\/div>\t<div id="resort_passgold_value"><\/div>\t<img id="resort_buygold_icon">\t<div id="resort_buygold"><\/div>\t<div id="resort_buygold_value"><\/div>\t<div id="resort_btn1" class="button">\t\t<img id="resort_btn1_bg">\t\t<div id="resort_btn1_text"><\/div>\t\t<img id="resort_btn1_focus" class="focus">\t<\/div>\t<div id="resort_btn2" class="button">\t\t<img id="resort_btn2_bg">\t\t<div id="resort_btn2_text"><\/div>\t\t<img id="resort_btn2_focus" class="focus">\t<\/div><\/div>'};POPUP_RESORT.make_screen=function(){var i,t,n;$("#GA_popup_resort").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#resort").css({left:"556px",top:"308px",width:"746px",height:"460px",position:"absolute"});util.draw_image_no_wh_pos("resort_bg","./image/game/popup_resort/p_resort_bg.png",0,0);i=BOARD_DEFINE[POPUP_RESORT.board_index].COLOR_MONOPOLY;t="./image/game/popup_resort/p_resort_title"+POPUP_RESORT.board_index+util.get_postfix_lang()+".png";util.draw_image_no_wh_pos("resort_title",t,353,49);util.draw_image_no_wh_pos("resort_buygold_icon","./image/game/popup_resort/p_resort_goldicon.png",198,233);n=BOARD.info[POPUP_RESORT.board_index].resort.gold_pass;util.draw_text_html(TXT.passgold,"resort_passgold",248,178,188,46,46,35,"center","#ffffff");util.draw_textshadow("resort_passgold","#51301c",3);util.draw_text_html(util.get_number_with_comma(n),"resort_passgold_value",436,178,252,46,46,35,"center","#ffffff");util.draw_textshadow("resort_passgold_value","#304da1",3);n=BOARD.info[POPUP_RESORT.board_index].resort.gold_tot;util.draw_text_html(TXT.buygold,"resort_buygold",248,237,188,46,46,35,"center","#ffffff");util.draw_textshadow("resort_buygold","#51301c",3);util.draw_text_html(util.get_number_with_comma(n),"resort_buygold_value",436,237,252,46,46,35,"center","#ffffff");util.draw_textshadow("resort_buygold_value","#9b2c05",3);$("#resort_btn1").css({left:"272px",top:"332px",position:"absolute"});util.draw_image_no_wh_pos("resort_btn1_bg","./image/game/popup_common/p_common_bt1_90.png",0,0);util.draw_image_no_wh_pos("resort_btn1_focus","./image/game/popup_common/p_common_bt_90_f.png",-25,-25);util.draw_text_html(TXT.buy,"resort_btn1_text",0,0,158,79,79,30,"center","#ffffff");util.draw_textshadow("resort_btn1_text","#a23100",2);$("#resort_btn2").css({left:"456px",top:"332px",position:"absolute"});util.draw_image_no_wh_pos("resort_btn2_bg","./image/game/popup_common/p_common_bt2_90.png",0,0);util.draw_image_no_wh_pos("resort_btn2_focus","./image/game/popup_common/p_common_bt_90_f.png",-25,-25);util.draw_text_html(TXT.cancel,"resort_btn2_text",0,0,158,79,79,30,"center","#ffffff");util.draw_textshadow("resort_btn2_text","#a23100",2)};POPUP_RESORT.draw_focus=function(){$(".focus").css({display:"none"});$("#resort_btn"+POPUP_RESORT.focus+"_focus").css({display:"block"})};POPUP_RESORT.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:POPUP_RESORT.focus==1&&(POPUP_RESORT.focus=2,POPUP_RESORT.draw_focus());break;case KeyDefine.left:POPUP_RESORT.focus==2&&(POPUP_RESORT.focus=1,POPUP_RESORT.draw_focus());break;case KeyDefine.enter:POPUP_RESORT.menu_run()}};POPUP_RESORT.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("resort_btn"+POPUP_RESORT.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("resort_btn"+POPUP_RESORT.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_RESORT.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_RESORT.menu_run_run=function(){switch(POPUP_RESORT.focus){case 1:POPUP_RESORT.buy();break;case 2:POPUP_RESORT.close()}};POPUP_RESORT.buy=function(){var n=BOARD.info[POPUP_RESORT.board_index].resort.gold_tot;if(PLAYER.info[POPUP_RESORT.player].bougold>=n){util.enable_key(0,"POPUP_RESORT.buy()에서  key막기");var i=POPUP_RESORT.player,r=n,t="player"+POPUP_RESORT.player+"가 "+eval("TXT.tile"+POPUP_RESORT.board_index+"_title")+"에  비용 "+n+"를 지급하고 소유주가 됨.";util.log(t);S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_buyresort(POPUP_RESORT.board_index);REMAINTIME.stop();CAL.move_gold(i,0,r,t,function(){BOARD.info[POPUP_RESORT.board_index].resort.owner=POPUP_RESORT.player;BOARD.draw_tile_resort_object(POPUP_RESORT.board_index);SOUND.play_effect(SOUND.EFFECT.BUY_COUNTRY);PLAYER.ui_draw();POPUP_RESORT.close();CAL.check_resort_monopoly(POPUP_RESORT.player)})}else SOUND.play_effect(SOUND.EFFECT.POPUP_ERROR),util.notice_box(TXT.lackof_gold,2)};POPUP_RESORT.close=function(){util.enable_key(0,"POPUP_RESORT.close()에서  key막기");$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_resort").css({display:"none"}).empty();REMAINTIME.stop();BOARD.arrive_player_end()} 
var POPUP_ANGEL={player:0,board_index:0};POPUP_ANGEL.init=function(){var n;if(S_GAME.winner==0)if(util.enable_key(0,"POPUP_ANGEL.init()에서   key 받지 않기 위해"),S_GAME.scene=ENUM.SCENE.P_ANGEL,this.player=S_GAME.turn,this.board_index=PLAYER.info[S_GAME.turn].location,PLAYER.ui_top(this.player),SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL),POPUP_ANGEL.make_tag(),POPUP_ANGEL.make_screen(),n=BOARD.info[this.board_index].angel.gold_tot,n>0){var i=this.player,r=n,t="player"+this.player+"가 "+eval("TXT.tile"+this.board_index+"_title")+"에서 기부금  "+n+"를 수령함.";util.log(t);CAL.move_gold(0,i,r,t,function(){BOARD.info[POPUP_ANGEL.board_index].angel.gold_tot=0;BOARD.draw_angel_value();PLAYER.ui_draw();setTimeout(function(){POPUP_ANGEL.close()},1500)})}else setTimeout(function(){POPUP_ANGEL.close()},1500)};POPUP_ANGEL.make_tag=function(){var n=document.getElementById("GA_popup_angel"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_angel_bg" class="dim70"><\/div><div id="angel"  class="'+t+'">\t<img id="angel_bg">\t<img id="angel_title">\t<div id="angel_comment"><\/div>\t<div id="angel_gold"><\/div>\t<div id="angel_gold_value"><\/div>\t<\/div><\/div>'};POPUP_ANGEL.make_screen=function(){var t,n;$("#GA_popup_angel").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#angel").css({left:"577px",top:"163px",width:"770px",height:"662px",position:"absolute"});util.draw_image_no_wh_pos("angel_bg","./image/game/popup_angel/p_donation_bg.png",0,0);t="./image/game/popup_angel/p_donation_title"+util.get_postfix_lang()+".png";util.draw_image_no_wh_pos("angel_title",t,251,543);n=BOARD.info[this.board_index].angel.gold_tot;n>0?util.draw_text_html(TXT.angel_comment1,"angel_comment",235,281,297,77,38,24,"center","#9a959c"):util.draw_text_html(TXT.angel_comment0,"angel_comment",235,281,297,77,38,24,"center","#9a959c");util.draw_text_html(TXT.acc_goldtot,"angel_gold",294,363,180,69,69,30,"center","#9a959c");util.draw_text_html(util.get_number_with_comma(n),"angel_gold_value",235,432,297,51,51,48,"center","#825e73")};POPUP_ANGEL.draw_focus=function(){};POPUP_ANGEL.key_down=function(){};POPUP_ANGEL.menu_run=function(){};POPUP_ANGEL.menu_run_run=function(){};POPUP_ANGEL.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_angel").css({display:"none"}).empty();BOARD.arrive_player_end()} 
var POPUP_ISLAND={focus:1,player:0};POPUP_ISLAND.init=function(){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_ISLAND.init);return}if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_ISLAND,glo.enable_key=1,POPUP_ISLAND.player=S_GAME.turn,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){glo.enable_key=0;POPUP_ISLAND.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_ISLAND.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.island_ing);return}PLAYER.ui_top(POPUP_ISLAND.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_ISLAND.make_tag();POPUP_ISLAND.make_screen();POPUP_ISLAND.draw_focus();REMAINTIME.start()}};POPUP_ISLAND.init_ai=function(){POPUP_ISLAND.focus=2;POPUP_ISLAND.menu_run_run()};POPUP_ISLAND.make_tag=function(){var n=document.getElementById("GA_popup_island"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_island_bg" class="dim70"><\/div><div id="island"  class="'+t+'">\t<img id="island_bg">\t<img id="island_title">\t<div id="island_text1"><\/div>\t<div id="island_text2"><\/div>\t<div id="island_btn1" class="button">\t\t<img id="island_btn1_bg">\t\t<img id="island_btn1_gold">\t\t<div id="island_btn1_text1"><\/div>\t\t<div id="island_btn1_text2"><\/div>\t\t<img id="island_btn1_focus" class="focus">\t<\/div>\t<div id="island_btn2" class="button">\t\t<img id="island_btn2_bg">\t\t<div id="island_btn2_text"><\/div>\t\t<img id="island_btn2_focus" class="focus">\t<\/div><\/div>'};POPUP_ISLAND.make_screen=function(){var n,t;$("#GA_popup_island").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#island").css({left:"726px",top:"165px",width:"473px",height:"697px",position:"absolute"});util.draw_image_no_wh_pos("island_bg","./image/game/popup_island/p_island_bg.png",0,0);util.draw_image_no_wh_pos("island_title","./image/game/popup_island/p_island_title"+util.get_postfix_lang()+".png",132,155);n=TXT.island_day+":"+(PLAYER.info[POPUP_ISLAND.player].island_count-1);util.draw_text_html(n,"island_text1",27,265,418,59,59,44,"center","#8f5e49");util.draw_text_html(TXT.island_comment,"island_text2",27,325,418,51,51,32,"center","#ac755f");$("#island_btn1").css({left:"53px",top:"414px",position:"absolute"});util.draw_image_no_wh_pos("island_btn1_bg","./image/game/popup_island/p_island_exitbt.png",0,0);util.draw_image("island_btn1_gold","./image/game/popup_resort/p_resort_goldicon.png",20,22,50*.95,52*.95,"absolute");t=CAL.get_how_gold_exit_island();util.draw_text_html(util.get_number_with_comma(t),"island_btn1_text1",68,28,162,38,38,27,"center","#8f5e49");util.draw_text_html(TXT.island_exit,"island_btn1_text2",230,28,130,38,38,27,"center","#ac755f");util.draw_image_no_wh_pos("island_btn1_focus","./image/game/popup_island/p_island_exitbt_focus.png",-28,-28);$("#island_btn1_focus").css({display:"none"});$("#island_btn2").css({left:"53px",top:"524px",position:"absolute"});util.draw_image_no_wh_pos("island_btn2_bg","./image/game/popup_island/p_island_dicerollbt.png",0,0);util.draw_text_html(TXT.island_throwdice,"island_btn2_text",142,28,218,38,38,27,"center","#ac755f");util.draw_image_no_wh_pos("island_btn2_focus","./image/game/popup_island/p_island_dicerollbt_focus.png",-28,-28);$("#island_btn2_focus").css({display:"none"})};POPUP_ISLAND.draw_focus=function(){$(".focus").css({display:"none"});$("#island_btn"+POPUP_ISLAND.focus+"_focus").css({display:"block"})};POPUP_ISLAND.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:POPUP_ISLAND.focus<=2&&(POPUP_ISLAND.focus--,POPUP_ISLAND.draw_focus());break;case KeyDefine.down:POPUP_ISLAND.focus<2&&(POPUP_ISLAND.focus++,POPUP_ISLAND.draw_focus());break;case KeyDefine.enter:POPUP_ISLAND.menu_run()}};POPUP_ISLAND.menu_run=function(){var n=glo.enable_key;util.enable_key(0,"POPUP_ISLAND.menu_run()에서   key 막기");util.scale_xy_center("island_btn"+POPUP_ISLAND.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("island_btn"+POPUP_ISLAND.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_ISLAND.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_ISLAND.menu_run_run=function(){var n;switch(POPUP_ISLAND.focus){case 1:n=CAL.get_how_gold_exit_island();PLAYER.info[POPUP_ISLAND.player].island_count=0;var t=POPUP_ISLAND.player,i=n,r=TXT.pay_island_exit_gold+":"+util.get_number_with_comma(n);util.notice_player_num(t,TXT.pay_island_exit_gold,-n);util.log(POPUP_ISLAND.player+"player 무인도 탈출비용 지불:"+util.get_number_with_comma(n));util.enable_key(0,"POPUP_ISLAND.menu_run_run(1)에서  주사위 던질때 key 받지 않기 위해");S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_exitisland();CAL.move_gold(t,0,i,r,function(){POPUP_ISLAND.close();DICE.throw()});break;case 2:POPUP_ISLAND.close();util.enable_key(0,"POPUP_ISLAND.menu_run_run(2)에서  주사위 던질때 key 받지 않기 위해");DICE.throw()}};POPUP_ISLAND.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_island").css({display:"none"}).empty()};POPUP_ISLAND.is_not_move=function(n,t){var i=0,r;return((DICE.is_triple(n)||DICE.is_double(n))&&(i=1),r=PLAYER.info[t].location,BOARD_DEFINE[r].TILE_TYPE==ENUM.TILE_TYPE.EDGE_ISLAND&&i==0&&(PLAYER.info[t].island_count==2||PLAYER.info[t].island_count==3))?!0:(BOARD_DEFINE[r].TILE_TYPE==ENUM.TILE_TYPE.EDGE_ISLAND&&i==1&&(PLAYER.info[t].island_count=0),!1)} 
var POPUP_GOTO={player:0,board_index:0};POPUP_GOTO.init=function(){S_GAME.winner==0&&(S_GAME.scene=ENUM.SCENE.P_GOTO,this.player=S_GAME.turn,this.board_index=PLAYER.info[S_GAME.turn].location,PLAYER.ui_top(this.player),SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL),POPUP_GOTO.make_tag(),POPUP_GOTO.make_screen(),util.enable_key(0,"POPUP_GOTO.init()에서  key 막기"),PLAYER.info[S_GAME.turn].goto_flag=1,setTimeout(function(){S_GAME.scene==ENUM.SCENE.P_GOTO?(POPUP_GOTO.close(),util.log("%c############################# POPUP_GOTO.init()에서 실행 됨 #################","background:#222;color:yellow")):util.log("%c#############################상황바뀜. 오류임 POPUP_GOTO.init() #################","background:#222;color:white")},3e3))};POPUP_GOTO.make_tag=function(){var n=document.getElementById("GA_popup_goto"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_goto_bg" class="dim70"><\/div><div id="goto"  class="'+t+'">\t<img id="goto_bg">\t<img id="goto_gold_icon">\t<div id="goto_gold_value"><\/div>\t<div id="goto_text1"><\/div>\t<div id="goto_text2"><\/div><\/div>'};POPUP_GOTO.make_screen=function(){$("#GA_popup_goto").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#goto").css({left:"535px",top:"363px",width:"747px",height:"355px",position:"absolute"});util.draw_image_no_wh_pos("goto_bg","./image/game/popup_goto/p_airport_bg_"+PLAYER.get_color(S_GAME.turn)+".png",0,0);util.draw_image("goto_gold_icon","./image/game/popup_resort/p_resort_goldicon.png",243,175,50*.95,52*.95,"absolute");var n=CAL.get_goto_gold();util.draw_text_html(util.get_number_with_comma(n),"goto_gold_value",295,180,205,43,43,36,"center","#2e2e2e");util.draw_text_html(TXT.goto_comment1,"goto_text1",163,263,411,33,33,30,"center","#808080");USER.lang==LANG.KOREA?util.draw_text_html(TXT.goto_comment2,"goto_text2",163,298,411,23,23,18,"center","#808080"):util.draw_text_html(TXT.goto_comment2,"goto_text2",163,298,550,23,23,18,"left","#808080")};POPUP_GOTO.draw_focus=function(){};POPUP_GOTO.key_down=function(){};POPUP_GOTO.menu_run=function(){};POPUP_GOTO.menu_run_run=function(){};POPUP_GOTO.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_goto").css({display:"none"}).empty();BOARD.arrive_player_end()} 
var POPUP_CHANCE={focus:1,player:0,index:0,DEFINE:null};POPUP_CHANCE.init=function(){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_CHANCE.init);return}if((S_GAME.mode.online!=1||S_GAME.turn!=3)&&S_GAME.winner==0){S_GAME.scene=ENUM.SCENE.P_CHANCE;util.enable_key(1,"POPUP_CHANCE.init()에서   key 받기 위해");$("#GA_player"+S_GAME.turn).css({zIndex:1082});POPUP_CHANCE.player=S_GAME.turn;POPUP_CHANCE.define_init();var n=POPUP_CHANCE.DEFINE.length-1;if(POPUP_CHANCE.index=Math.floor(Math.random()*n)+1,util.log("##########1#######POPUP_CHANCE.index ="+POPUP_CHANCE.index),S_GAME.mode.online==1){if(S_GAME.turn==3){util.enable_key(0,"POPUP_CHANCE.init()에서   ai일경우 key 안받기");return}S_GAME.turn==1&&WSS.send_chance(POPUP_CHANCE.index)}if(SOUND.play_effect(SOUND.EFFECT.POPUP_CHANCE),POPUP_CHANCE.make_tag(),POPUP_CHANCE.make_screen(),POPUP_CHANCE.draw_focus(),PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_CHANCE.init()에서   ai일경우 key 안받기");POPUP_CHANCE.init_ai();return}REMAINTIME.start()}};POPUP_CHANCE.init_online=function(n){S_GAME.mode.online!=0&&S_GAME.turn!=1&&S_GAME.winner==0&&(S_GAME.scene=ENUM.SCENE.P_CHANCE,$("#GA_player"+S_GAME.turn).css({zIndex:1082}),POPUP_CHANCE.player=3,POPUP_CHANCE.define_init(),POPUP_CHANCE.index=n,util.log("##########online#######POPUP_CHANCE.index ="+POPUP_CHANCE.index),SOUND.play_effect(SOUND.EFFECT.POPUP_CHANCE),POPUP_CHANCE.make_tag(),POPUP_CHANCE.make_screen(),POPUP_CHANCE.draw_focus())};POPUP_CHANCE.init_ai=function(){setTimeout(function(){glo.scene.cur==glo.S.GAME&&POPUP_CHANCE.menu_run_run()},3500)};POPUP_CHANCE.define_init=function(){POPUP_CHANCE.DEFINE=[{},{title:TXT.chance1,comment:TXT.chance_comment1},{title:TXT.chance2,comment:TXT.chance_comment2},{title:TXT.chance3,comment:TXT.chance_comment3},{title:TXT.chance4,comment:TXT.chance_comment4},{title:TXT.chance5,comment:TXT.chance_comment5},{title:TXT.chance6,comment:TXT.chance_comment6},{title:TXT.chance7,comment:TXT.chance_comment7},{title:TXT.chance8,comment:TXT.chance_comment8},{title:TXT.chance9,comment:TXT.chance_comment9},{title:TXT.chance10,comment:TXT.chance_comment10},{title:TXT.chance11,comment:TXT.chance_comment11},{title:TXT.chance12,comment:TXT.chance_comment12},{title:TXT.chance13,comment:TXT.chance_comment13},{title:TXT.chance14,comment:TXT.chance_comment14},{title:TXT.chance15,comment:TXT.chance_comment15},{title:TXT.chance16,comment:TXT.chance_comment16},{title:TXT.chance17,comment:TXT.chance_comment17},{title:TXT.chance18,comment:TXT.chance_comment18},{title:TXT.chance19,comment:TXT.chance_comment19},{title:TXT.chance20,comment:TXT.chance_comment20},{title:TXT.chance21,comment:TXT.chance_comment21},{title:TXT.chance22,comment:TXT.chance_comment22},{title:TXT.chance23,comment:TXT.chance_comment23},{title:TXT.chance24,comment:TXT.chance_comment24},]};POPUP_CHANCE.make_tag=function(){var n=document.getElementById("GA_popup_chance");n.innerHTML='<div id="GA_popup_chance_bg" class="dim70"><\/div><img id="chance_card_ani"><div id="chance"  >\t<img id="chance_bg">\t<img id="chance_title">\t<div id="chance_comment"><\/div>\t<div id="chance_btn1" class="button">\t\t<img id="chance_btn1_bg">\t\t<div id="chance_btn1_text"><\/div>\t\t<img id="chance_btn1_focus" class="focus">\t<\/div><\/div>'};POPUP_CHANCE.make_screen=function(){$("#GA_popup_chance").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});POPUP_CHANCE.make_screen_ani(function(){POPUP_CHANCE.make_screen_popup();POPUP_CHANCE.draw_focus()})};POPUP_CHANCE.make_screen_ani=function(n){var t=1,r=19,i=function(){util.draw_image_no_wh_pos("chance_card_ani","./image/game/popup_chance/p_surprise_motion"+t+".png",496,-26);t<r?(t++,setTimeout(i,60)):setTimeout(function(){$("#chance_card_ani").css({display:"none"});var t=S_GAME.get_popup_class(S_GAME.turn);$("#chance").addClass(t);n()},300)};i()};POPUP_CHANCE.make_screen_popup=function(){util.log("#########2########POPUP_CHANCE.index ="+POPUP_CHANCE.index);$("#chance").css({left:"637px",top:"345px",width:"647px",height:"432px",position:"absolute"});util.draw_image_no_wh_pos("chance_bg","./image/game/popup_chance/p_surprise_bg.png",0,0);USER.lang!=LANG.KOREA&&(POPUP_CHANCE.index==3||POPUP_CHANCE.index==10||POPUP_CHANCE.index==21||POPUP_CHANCE.index==22)?util.draw_image_no_wh_pos("chance_title","./image/game/popup_chance/p_surprise_title"+POPUP_CHANCE.index+util.get_postfix_lang()+".png",115,0):util.draw_image_no_wh_pos("chance_title","./image/game/popup_chance/p_surprise_title"+POPUP_CHANCE.index+util.get_postfix_lang()+".png",116,14);$("#chance_btn1").css({left:"212px",top:"364px",position:"absolute"});util.draw_image_no_wh_pos("chance_btn1_bg","./image/game/popup_chance/p_surprise_okbt.png",0,0);util.draw_text_html(TXT.confirm,"chance_btn1_text",7,8,210,64,64,40,"center","#ffffff");util.draw_textshadow("chance_btn1_text","#a23100",2);util.draw_image_no_wh_pos("chance_btn1_focus","./image/game/popup_chance/p_surprise_okbt_focus.png",-30,-30);$("#chance_btn1_focus").css({display:"none"});S_GAME.mode.online==1&&S_GAME.turn==3&&$("#chance_btn1").css({display:"none"});util.draw_text_html(POPUP_CHANCE.DEFINE[POPUP_CHANCE.index].comment,"chance_comment",38,117,566,210,42,30,"center","#857d88");util.log(POPUP_CHANCE.DEFINE[POPUP_CHANCE.index].comment)};POPUP_CHANCE.draw_focus=function(){$(".focus").css({display:"none"});$("#chance_btn"+POPUP_CHANCE.focus+"_focus").css({display:"block"})};POPUP_CHANCE.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.enter:POPUP_CHANCE.menu_run()}};POPUP_CHANCE.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("chance_btn"+POPUP_CHANCE.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("chance_btn"+POPUP_CHANCE.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_CHANCE.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_CHANCE.menu_run_run=function(){util.enable_key(0,"POPUP_CHANCE.menu_run_run()에서  key 잠금");S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance_close();switch(POPUP_CHANCE.index){case 1:POPUP_CHANCE.menu_run_1();break;case 2:POPUP_CHANCE.menu_run_2();break;case 3:POPUP_CHANCE.menu_run_3();break;case 4:POPUP_CHANCE.menu_run_4();break;case 5:POPUP_CHANCE.menu_run_5();break;case 6:POPUP_CHANCE.menu_run_6();break;case 7:POPUP_CHANCE.menu_run_7();break;case 8:POPUP_CHANCE.menu_run_8();break;case 9:POPUP_CHANCE.menu_run_9();break;case 10:POPUP_CHANCE.menu_run_10();break;case 11:POPUP_CHANCE.menu_run_11();break;case 12:POPUP_CHANCE.menu_run_12();break;case 13:POPUP_CHANCE.menu_run_13();break;case 14:POPUP_CHANCE.menu_run_14();break;case 15:POPUP_CHANCE.menu_run_15();break;case 16:POPUP_CHANCE.menu_run_16();break;case 17:POPUP_CHANCE.menu_run_17();break;case 18:POPUP_CHANCE.menu_run_18();break;case 19:POPUP_CHANCE.menu_run_19();break;case 20:POPUP_CHANCE.menu_run_20();break;case 21:POPUP_CHANCE.menu_run_21();break;case 22:POPUP_CHANCE.menu_run_22();break;case 23:POPUP_CHANCE.menu_run_23();break;case 24:POPUP_CHANCE.menu_run_24();break;default:util.notice_box("깜짝상자 카드 정의 안됨!! "+POPUP_CHANCE.index+"  "+POPUP_CHANCE.DEFINE[POPUP_CHANCE.index].title)}};POPUP_CHANCE.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_chance").css({display:"none"}).empty();REMAINTIME.stop()};POPUP_CHANCE.menu_run_1=function(){var n=BOARD.get_index_player_got_chance1(POPUP_CHANCE.player),t=n.length-1;if(t<1){util.notice_box(TXT.other_zone_none,3);POPUP_CHANCE.close();BOARD.arrive_player_end();return}util.notice_player(POPUP_CHANCE.player,TXT.select_other_zone);POPUP_CHANCE.close();setTimeout(function(){REMAINTIME.start()},500);SELECTTILE.init(POPUP_CHANCE.player,n)};POPUP_CHANCE.menu_run_1_select=function(n){var t,i,r;(S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance1(n),t=BOARD.info[n].country.owner,PLAYER.info[t].defence_card>=1?(PLAYER.info[t].defence_card--,PLAYER.ui_draw_freedefence_card(t),util.notice_box(TXT.active_defence_card_not_chance1,3)):(BOARD.info[n].chance1_count=5,i=eval("TXT.tile"+n+"_title "),r=i+" : "+TXT.chance1_5turn_passgold0,util.notice_box(r,3)),S_GAME.mode.online!=1||S_GAME.turn!=3)&&(REMAINTIME.stop(),BOARD.arrive_player_end())};POPUP_CHANCE.menu_run_2=function(){S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance2();var u=PLAYER.info[POPUP_CHANCE.player].totzasan,f=PLAYER.info[POPUP_CHANCE.player].bougold,n=Math.min(Math.floor(u*.1),f),t=POPUP_CHANCE.player,i=n,r=TXT.chance2_donate;util.notice_player_num(t,r,-n);util.log("[깜짝상자카드 2.자선사업가]: 내자산의10%기부:"+n);CAL.move_gold(t,0,i,r,function(){(BOARD.info[10].angel.gold_tot+=i,util.log("자선사업가에 의해 기부금 "+i+"추가 적립됨. player"+t),BOARD.draw_angel_value(),S_GAME.mode.online!=1||S_GAME.turn!=3)&&(POPUP_CHANCE.close(),BOARD.arrive_player_end())})};POPUP_CHANCE.menu_run_3=function(){var n=BOARD.get_index_player_got_country(POPUP_CHANCE.player),t=n.length-1,i;t==0?(util.notice_player(POPUP_CHANCE.player,TXT.chance3_no_country_just_go),POPUP_CHANCE.close(),POPUP_CHANCE.menu_run_3_after()):t==1?(i=n[1],POPUP_CHANCE.close(),POPUP_CHANCE.menu_run_3_sell(i)):(util.notice_player(POPUP_CHANCE.player,TXT.select_country_for_halfsell),POPUP_CHANCE.close(),setTimeout(function(){REMAINTIME.start()},500),SELECTTILE.init(POPUP_CHANCE.player,n))};POPUP_CHANCE.menu_run_3_sell=function(n){S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance3(n);var u=BOARD.info[n].country.dev_stage,t=Math.floor(BOARD.info[n].country.gold_tot[u]/2),f=POPUP_CHANCE.player,i=t,r=TXT.chance3_halfsell+":"+eval("TXT.tile"+n+"_title");util.notice_player_num(POPUP_CHANCE.player,r,t);util.log("[깜짝상자카드 3.실패는성공의 어머니]: 내땅 한개 반값 판매:"+i);BOARD.info[n].country.owner=0;BOARD.info[n].country.dev_stage=0;BOARD.draw_tile_country_object(n);CAL.move_gold(0,f,i,r,function(){POPUP_CHANCE.menu_run_3_after()})};POPUP_CHANCE.menu_run_3_after=function(){var n=PLAYER.info[POPUP_CHANCE.player].location,t=37-n;S_GAME.mode.online==1&&S_GAME.turn==3||(S_GAME.status=ENUM.STATUS.CHAR_MOVE_START,CHAR.move(POPUP_CHANCE.player,t));POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_4=function(){POPUP_CHANCE.close();var n=Math.floor(Math.random()*6)+1;(util.enable_key(0,"POPUP_CHANCE.menu_run_4()에서  주사위 던질때 key 받지 않기 위해"),S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_dice_throw1(n),S_GAME.mode.online!=1||S_GAME.turn!=3)&&DICE.throw1(n,function(){CHAR.move(POPUP_CHANCE.player,n)})};POPUP_CHANCE.menu_run_5=function(){POPUP_CHANCE.close();var n=Math.floor(Math.random()*6)+1;(S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_dice_throw1_red(n),S_GAME.mode.online!=1||S_GAME.turn!=3)&&DICE.throw1_red(n,function(){CHAR.move(POPUP_CHANCE.player,-n)})};POPUP_CHANCE.menu_run_6=function(){(POPUP_CHANCE.close(),S_GAME.mode.online!=1||S_GAME.turn!=3)&&(setTimeout(function(){REMAINTIME.start()},500),SELECTLINE.init(POPUP_CHANCE.player))};POPUP_CHANCE.menu_run_6_select=function(n){var r,u,f,e,i,t;S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance6(n);r=0;u=0;switch(n){case 1:r=2;u=9;break;case 2:r=11;u=18;break;case 3:r=20;u=27;break;case 4:r=29;u=36;break;default:console.error("POPUP_CHANCE.menu_run_6_select()에서 1~4 이외의 값이 들어옴:"+n)}for(f=0,e=[0,0,0,0,0],i=r;i<=u;i++)if(BOARD_DEFINE[i].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[i].country.owner!=0){t=BOARD.info[i].country.owner;switch(BOARD.info[i].country.dev_stage){case ENUM.DEV_STAGE.DEV0:util.log("POPUP_CHANCE.menu_run_6_select()에서 나오지 말아야 하는데 나와 예외처리 함. 문제 있음!!!");continue;case ENUM.DEV_STAGE.DEV1:continue;case ENUM.DEV_STAGE.DEV2:case ENUM.DEV_STAGE.DEV3:case ENUM.DEV_STAGE.DEV4:if(PLAYER.info[t].defence_card>=1){e[t]=1;continue}else BOARD.info[i].country.dev_stage--,BOARD.draw_tile_country_object(i),f=1;break;case ENUM.DEV_STAGE.DEV5:continue}}for(f==1&&PLAYER.ui_draw(),t=1;t<=4;t++)e[t]==1&&(PLAYER.info[t].defence_card--,PLAYER.ui_draw_freedefence_card(t),util.notice_player(t,TXT.active_defence_card));(util.notice_box(TXT.chance6_selectline_1down,2),S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()};POPUP_CHANCE.menu_run_7=function(){(S_GAME.mode.online!=1||S_GAME.turn!=3)&&(S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance7(),POPUP_CHANCE.menu_run_3_after())};POPUP_CHANCE.menu_run_8=function(){if(POPUP_CHANCE.close(),S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance8(),PLAYER.info[POPUP_CHANCE.player].defence_card==0)util.log("방어카드 획득"),PLAYER.info[POPUP_CHANCE.player].defence_card++,PLAYER.ui_draw_freedefence_card(POPUP_CHANCE.player),util.notice_player(POPUP_CHANCE.player,TXT.chance8_defece_card_get),BOARD.arrive_player_end();else{PLAYER.info[POPUP_CHANCE.player].defence_card=1;util.notice_player(POPUP_CHANCE.player,TXT.chance8_duplicate_reward);var t=POPUP_CHANCE.player,n=TXT.chance8_duplicate_reward;util.log(n);CAL.move_gold(0,t,1e6,n,function(){(S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()})}};POPUP_CHANCE.menu_run_9=function(){(POPUP_CHANCE.close(),S_GAME.mode.online!=1||S_GAME.turn!=3)&&(setTimeout(function(){REMAINTIME.start()},500),SELECTLINE.init(POPUP_CHANCE.player))};POPUP_CHANCE.menu_run_9_select=function(n){var e,u,t,o;S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance9(n);e=0;u=0;switch(n){case 1:e=2;u=9;break;case 2:e=11;u=18;break;case 3:e=20;u=27;break;case 4:e=29;u=36;break;default:console.error("POPUP_CHANCE.menu_run_6_select()에서 1~4 이외의 값이 들어옴:"+n)}var i=0,r=1e7,f=0;for(t=e;t<=u;t++)switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:if(BOARD.info[t].country.owner==0)continue;o=BOARD.info[t].country.dev_stage;r>BOARD.info[t].country.gold_tot[o]&&(i=t,r=BOARD.info[t].country.gold_tot[o],f=BOARD.info[t].country.owner);break;case ENUM.TILE_TYPE.RESORT:if(BOARD.info[t].resort.owner==0)continue;r>BOARD.info[t].resort.gold_tot&&(i=t,r=BOARD.info[t].resort.gold_tot,f=BOARD.info[t].resort.owner);break;case ENUM.TILE_TYPE.INVENTION:if(BOARD.info[t].invention.owner==0)continue;r>BOARD.info[t].invention.gold_tot&&(i=t,r=BOARD.info[t].invention.gold_tot,f=BOARD.info[t].invention.owner)}if(i==0){if(util.notice_box(TXT.chance9_not_zone,3),S_GAME.mode.online==1&&S_GAME.turn==3)return;BOARD.arrive_player_end()}else if(PLAYER.info[f].defence_card>=1)PLAYER.info[f].defence_card--,PLAYER.ui_draw_freedefence_card(f),util.notice_box(TXT.active_defence_card_not_chance9+":"+eval("TXT.tile"+i+"_title "),3),util.notice_player(f,TXT.chance9_enforce_sell_defence+":"+eval("TXT.tile"+i+"_title ")),BOARD.arrive_player_end();else{var e=0,u=f,h=r,s=TXT.chance9_enforce_sell+":"+eval("TXT.tile"+i+"_title ");util.notice_player_num(u,s,r);util.log("[깜짝상자카드 9.경제부도]: 강제판매"+r);switch(BOARD_DEFINE[i].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[i].country.owner=0;BOARD.info[i].country.dev_stage=0;break;case ENUM.TILE_TYPE.RESORT:BOARD.info[i].resort.owner=0;BOARD.init_i(i);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[i].invention.owner=0}BOARD.draw_tile_update(i);REMAINTIME.stop();CAL.move_gold(e,u,h,s,function(){(S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()})}};POPUP_CHANCE.menu_run_10=function(){POPUP_CHANCE.close();ECONOMY.run("행운카드에의한경제효과",function(){BOARD.arrive_player_end()})};POPUP_CHANCE.menu_run_11=function(n,t){POPUP_CHANCE.close();var i=Math.floor(Math.random()*6)+1,r=Math.floor(Math.random()*6)+1;S_GAME.mode.online==1&&S_GAME.turn==3&&(i=n,r=t);S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_dice_throw2(i,r);util.enable_key(0,"POPUP_ISLAND.menu_run_11()에서  주사위 던질때 key 받지 않기 위해");DICE.throw2({dice1:i,dice2:r},function(){if(i==r){var n=Math.floor(PLAYER.info[POPUP_CHANCE.player].totzasan*.2),t=POPUP_CHANCE.player,f=n,u=TXT.lotto_success+":"+util.get_number_with_comma(n);util.notice_player_num(t,TXT.lotto_success,n);util.notice_box(u,3);util.log("[깜짝상자카드 11.복권담청]: 내자산의20% 받음:"+util.get_number_with_comma(n));REMAINTIME.stop();CAL.move_gold(0,t,f,u,function(){(POPUP_CHANCE.close(),S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()})}else{if(util.notice_box(TXT.lotto_fail,2),POPUP_CHANCE.close(),S_GAME.mode.online==1&&S_GAME.turn==3)return;BOARD.arrive_player_end()}})};POPUP_CHANCE.menu_run_12=function(){var n=10,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_13=function(){var n=19,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move_onestep_fromto(POPUP_CHANCE.player,19);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_14=function(){var n=BOARD.get_country_resort_invention_index_lowest(),t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_15=function(){var n=BOARD.get_country_index_highest(),t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_16=function(){var t,i,n,r;POPUP_CHANCE.chance16={stage:0,my:0,other:0};t=BOARD.get_num_player_got_country_resort_invention(POPUP_CHANCE.player);i=BOARD.get_num_player_got_country_resort_invention_other(POPUP_CHANCE.player);t==0?(util.notice_box(TXT.my_country_none,3),POPUP_CHANCE.close(),BOARD.arrive_player_end()):i==0?(util.notice_box(TXT.other_country_none,3),POPUP_CHANCE.close(),BOARD.arrive_player_end()):(POPUP_CHANCE.chance16.stage=1,util.notice_box(TXT.select_my_country_for_exchange,5),n=BOARD.get_index_player_got_country_resort_invention(POPUP_CHANCE.player),r=n.length-1,POPUP_CHANCE.close(),setTimeout(function(){REMAINTIME.start()},500),SELECTTILE.init(POPUP_CHANCE.player,n))};POPUP_CHANCE.menu_run_16_next=function(){REMAINTIME.stop();POPUP_CHANCE.chance16.stage=2;util.notice_box(TXT.select_other_country_for_exchange,5);var n=BOARD.get_index_player_got_country_resort_invention_other(POPUP_CHANCE.player),t=n.length-1;setTimeout(function(){REMAINTIME.start()},500);S_GAME.scene=ENUM.SCENE.P_CHANCE;SELECTTILE.init(POPUP_CHANCE.player,n)};POPUP_CHANCE.menu_run_16_next_next=function(){var n,t,i;REMAINTIME.stop();S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance16(POPUP_CHANCE.chance16);n=POPUP_CHANCE.chance16.other;t=0;switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:t=BOARD.info[n].country.owner;break;case ENUM.TILE_TYPE.RESORT:t=BOARD.info[n].resort.owner;break;case ENUM.TILE_TYPE.INVENTION:t=BOARD.info[n].invention.owner;break;default:console.error("POPUP_CHANCE.menu_run_16_next_next():"+BOARD_DEFINE[n].TILE_TYPE)}if(BOARD.info[t].defence_card>=1)BOARD.info[t].defence_card--,PLAYER.ui_draw_freedefence_card(owner),util.notice_box(TXT.not_exchange_for_defence,3),util.notice_player(t,TXT.active_defence_card_not_chance1);else{i=POPUP_CHANCE.chance16.my;switch(BOARD_DEFINE[i].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[i].country.owner=t;BOARD.draw_tile_country_object(i);CAL.check_line_monopoly(POPUP_BUYCOUNTRY.board_index);break;case ENUM.TILE_TYPE.RESORT:BOARD.init_i(i);BOARD.info[i].resort.owner=t;BOARD.draw_tile_resort_object(i);CAL.check_resort_monopoly(t);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[i].invention.owner=t;BOARD.draw_tile_invention_object(i);CAL.check_invention_monopoly(t);break;default:console.error("POPUP_CHANCE.menu_run_16_next_next(2):"+BOARD_DEFINE[i].TILE_TYPE)}switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[n].country.owner=POPUP_CHANCE.player;BOARD.draw_tile_country_object(n);CAL.check_line_monopoly(POPUP_BUYCOUNTRY.board_index);break;case ENUM.TILE_TYPE.RESORT:BOARD.init_i(n);BOARD.info[n].resort.owner=POPUP_CHANCE.player;BOARD.draw_tile_resort_object(n);CAL.check_resort_monopoly(POPUP_CHANCE.player);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[n].invention.owner=POPUP_CHANCE.player;BOARD.draw_tile_invention_object(n);CAL.check_invention_monopoly(POPUP_CHANCE.player);break;default:console.error("POPUP_CHANCE.menu_run_16_next_next(3):"+BOARD_DEFINE[n].TILE_TYPE)}PLAYER.ui_draw();util.notice_box(TXT.exchange_complete,3)}(S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()};POPUP_CHANCE.menu_run_17=function(){var u=BOARD.get_num_player_got_country_resort_invention(POPUP_CHANCE.player),n,t,r;if(POPUP_CHANCE.close(),u==0)util.notice_box(TXT.my_country_none,3),BOARD.arrive_player_end();else{S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance17();n=BOARD.get_country_resort_invention_index_lowest_i(POPUP_CHANCE.player);n==0&&console.error("board_index is 0 in POPUP_CHANCE.menu_run_17()");t=0;switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:r=BOARD.info[n].country.dev_stage;t=Math.floor(BOARD.info[n].country.gold_tot[r]*.9);BOARD.info[n].country.dev_stage=0;BOARD.info[n].country.owner=0;BOARD.draw_tile_country_object(n);break;case ENUM.TILE_TYPE.RESORT:t=Math.floor(BOARD.info[n].resort.gold_tot*.9);BOARD.info[n].resort.owner=0;BOARD.init_i(n);BOARD.draw_tile_resort_object(n);break;case ENUM.TILE_TYPE.INVENTION:t=Math.floor(BOARD.info[n].invention.gold_tot*.9);BOARD.info[n].invention.owner=0;BOARD.draw_tile_invention_object(n)}var f=POPUP_CHANCE.player,e=t,i=TXT.chance9_enforce_sell+":"+eval("TXT.tile"+n+"_title ");util.notice_player_num(POPUP_CHANCE.player,i,t);util.notice_box(i,3);util.log("[깜짝상자카드 17.부당한 거래]: 나의 가장 저렴한 땅 판매:"+util.get_number_with_comma(t));REMAINTIME.stop();CAL.move_gold(0,f,e,i,function(){var n=28,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;(i=t<n?n-t:n+36-t,S_GAME.mode.online!=1||S_GAME.turn!=3)&&(S_GAME.status=ENUM.STATUS.CHAR_MOVE_START,CHAR.move(POPUP_CHANCE.player,i),POPUP_CHANCE.close())})}};POPUP_CHANCE.menu_run_18=function(){(POPUP_CHANCE.close(),S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance18(),BOARD.info[28].goto.check>0?util.notice_box(TXT.airport_check_no_notwork,2):(BOARD.info[28].goto.notwork=PLAYER.get_num()*5-1,util.notice_box(TXT.airport_notwork,2)),S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()};POPUP_CHANCE.menu_run_19=function(){(POPUP_CHANCE.close(),S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance19(),BOARD.info[28].goto.check=PLAYER.get_num()*5-1,BOARD.draw_airport_value(),BOARD.info[28].goto.notwork>0&&(BOARD.info[28].goto.notwork=0,util.notice_box(TXT.stop_notwork_and_check,3)),S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()};POPUP_CHANCE.menu_run_20=function(){if(POPUP_CHANCE.close(),S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_chance20(),PLAYER.info[POPUP_CHANCE.player].freepass_card==0){if(PLAYER.info[POPUP_CHANCE.player].freepass_card++,PLAYER.ui_draw_freedefence_card(POPUP_CHANCE.player),util.log("프리패스 카드 1장 획득: 총 누적:"+PLAYER.info[POPUP_CHANCE.player].freepass_card),util.notice_player(POPUP_CHANCE.player,TXT.got_freepass_card),S_GAME.mode.online==1&&S_GAME.turn==3)return;BOARD.arrive_player_end()}else{PLAYER.info[POPUP_CHANCE.player].freepass_card=1;util.notice_player(POPUP_CHANCE.player,TXT.chance20_duplicate_reward);var t=POPUP_CHANCE.player,n=TXT.chance20_duplicate_reward;util.log(n);REMAINTIME.stop();CAL.move_gold(0,t,1e6,n,function(){(S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()})}};POPUP_CHANCE.menu_run_21=function(){var n=35,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_22=function(){var n=3,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_23=function(){var n=12,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()};POPUP_CHANCE.menu_run_24=function(){var n=20,t=PLAYER.info[POPUP_CHANCE.player].location,i=0;i=t<n?n-t:n+36-t;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(POPUP_CHANCE.player,i);POPUP_CHANCE.close()} 
var POPUP_FREEPASS={focus:1,player:0,callbackfn:null};POPUP_FREEPASS.init=function(n){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_FREEPASS.init);return}if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_FREEPASS,util.enable_key(1,"POPUP_FREEPASS.init()에서  key 받기 위해"),POPUP_FREEPASS.player=S_GAME.turn,POPUP_FREEPASS.callbackfn=n,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_BUYCOUNTRY.init()에서   ai일경우 key 막기");POPUP_FREEPASS.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_FREEPASS.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.freepass_ing);return}PLAYER.ui_top(POPUP_FREEPASS.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_FREEPASS.make_tag();POPUP_FREEPASS.make_screen();POPUP_FREEPASS.draw_focus();REMAINTIME.start()}};POPUP_FREEPASS.init_ai=function(){POPUP_FREEPASS.focus=1;POPUP_FREEPASS.menu_run_run();util.log("로봇이 프리패스카드 사용함")};POPUP_FREEPASS.make_tag=function(){var n=document.getElementById("GA_popup_freepass"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_freepass_bg" class="dim70"><\/div><div id="freepass"  class="'+t+'">\t<img id="freepass_bg">\t<img id="freepass_title">\t<div id="freepass_comment"><\/div>\t<div id="freepass_btn1" class="button">\t\t<img id="freepass_btn1_bg">\t\t<div id="freepass_btn1_text"><\/div>\t\t<img id="freepass_btn1_focus" class="focus">\t<\/div>\t<div id="freepass_btn2" class="button">\t\t<img id="freepass_btn2_bg">\t\t<div id="freepass_btn2_text"><\/div>\t\t<img id="freepass_btn2_focus" class="focus">\t<\/div><\/div>'};POPUP_FREEPASS.make_screen=function(){$("#GA_popup_freepass").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#freepass").css({left:"636px",top:"344px",width:"647px",height:"432px",position:"absolute"});util.draw_image_no_wh_pos("freepass_bg","./image/game/popup_chance/p_surprise_freepass_bg.png",0,0);util.draw_image_no_wh_pos("freepass_title","./image/game/popup_chance/p_surprise_title20"+util.get_postfix_lang()+".png",116,14);util.draw_text_html(TXT.chance_comment20,"freepass_comment",40,117,566,210,42,30,"center","#857d88");$("#freepass_btn1").css({left:"84px",top:"358px",position:"absolute"});util.draw_image_no_wh_pos("freepass_btn1_bg","./image/game/popup_chance/p_surprise_okbt.png",0,0);util.draw_text_html(TXT.use,"freepass_btn1_text",7,8,210,64,64,40,"center","#ffffff");util.draw_image_no_wh_pos("freepass_btn1_focus","./image/game/popup_chance/p_surprise_okbt_focus.png",-30,-30);$("#freepass_btn1_focus").css({display:"none"});$("#freepass_btn2").css({left:"339px",top:"358px",position:"absolute"});util.draw_image_no_wh_pos("freepass_btn2_bg","./image/game/popup_chance/p_surprise_okbt.png",0,0);util.draw_text_html(TXT.cancel,"freepass_btn2_text",7,8,210,64,64,40,"center","#ffffff");util.draw_image_no_wh_pos("freepass_btn2_focus","./image/game/popup_chance/p_surprise_okbt_focus.png",-30,-30);$("#freepass_btn2_focus").css({display:"none"})};POPUP_FREEPASS.draw_focus=function(){$(".focus").css({display:"none"});$("#freepass_btn"+POPUP_FREEPASS.focus+"_focus").css({display:"block"})};POPUP_FREEPASS.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:POPUP_FREEPASS.focus==2&&(POPUP_FREEPASS.focus=1,POPUP_FREEPASS.draw_focus());break;case KeyDefine.right:POPUP_FREEPASS.focus==1&&(POPUP_FREEPASS.focus=2,POPUP_FREEPASS.draw_focus());break;case KeyDefine.enter:POPUP_FREEPASS.menu_run()}};POPUP_FREEPASS.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("freepass_btn"+POPUP_FREEPASS.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("freepass_btn"+POPUP_FREEPASS.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_FREEPASS.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_FREEPASS.menu_run_run=function(){util.enable_key(0,"POPUP_FREEPASS.menu_run_run()에서  key 막기");POPUP_FREEPASS.close();switch(POPUP_FREEPASS.focus){case 1:util.notice_player(POPUP_FREEPASS.player,TXT.use_freepass);PLAYER.info[POPUP_FREEPASS.player].freepass_card--;PLAYER.ui_draw_freedefence_card(POPUP_FREEPASS.player);POPUP_FREEPASS.callbackfn("패스권사용함");S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_freepass();break;case 2:POPUP_FREEPASS.callbackfn("취소")}};POPUP_FREEPASS.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_freepass").css({display:"none"}).empty();REMAINTIME.stop()} 
var POPUP_INVENTION={focus:1,player:0,board_index:0,callbackfn:null};POPUP_INVENTION.init=function(n){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_INVENTION.init,n);return}if(S_GAME.winner==0){if(S_GAME.scene=ENUM.SCENE.P_INVENTION,util.enable_key(1,"POPUP_INVENTION.init()에서  key 입력 받기"),POPUP_INVENTION.player=S_GAME.turn,POPUP_INVENTION.board_index=PLAYER.info[S_GAME.turn].location,POPUP_INVENTION.callbackfn=n,PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_INVENTION.init()에서  ai일경우 key 입력 막기");POPUP_INVENTION.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_INVENTION.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.buy_ing);return}PLAYER.ui_top(POPUP_INVENTION.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_INVENTION.make_tag();POPUP_INVENTION.make_screen();POPUP_INVENTION.draw_focus();REMAINTIME.start()}};POPUP_INVENTION.init_ai=function(){var n=BOARD_DEFINE[POPUP_INVENTION.board_index].BUY_GOLD;POPUP_INVENTION.focus=PLAYER.info[POPUP_INVENTION.player].bougold>=n?1:2;POPUP_INVENTION.menu_run_run()};POPUP_INVENTION.make_tag=function(){var n=document.getElementById("GA_popup_invention"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_invention_bg" class="dim70"><\/div><div id="invention"  \tclass="'+t+'">\t<img id="invention_bg">\t<img id="invention_title">\t<img id="invention_icon">\t<img id="invention_bar">\t<div id="invention_comment1_left"><\/div>\t<div id="invention_comment1_right"><\/div>\t<div id="invention_comment2_left"><\/div>\t<div id="invention_comment2_right"><\/div>\t<div id="invention_comment3_left"><\/div>\t<div id="invention_comment3_right"><\/div>\t<div id="invention_passgold"><\/div>\t<div id="invention_passgold_value"><\/div>\t<div id="invention_buygold"><\/div>\t<div id="invention_buygold_value"><\/div>\t<div id="invention_btn1" class="button">\t\t<img id="invention_btn1_bg">\t\t<div id="invention_btn1_text"><\/div>\t\t<img id="invention_btn1_focus" class="focus">\t<\/div>\t<div id="invention_btn2" class="button">\t\t<img id="invention_btn2_bg">\t\t<div id="invention_btn2_text"><\/div>\t\t<img id="invention_btn2_focus" class="focus">\t<\/div><\/div>'};POPUP_INVENTION.make_screen=function(){var n,t,i;if($("#GA_popup_invention").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080}),$("#invention").css({left:"745px",top:"278px",width:"429px",height:"544px",position:"absolute"}),S_GAME.mode.online==0&&glo.platform==glo.PLATFORM.LG_WEEKEND)switch(S_GAME.turn){case 3:util.rotate("invention",90);break;case 4:util.rotate("invention",-90)}util.draw_image_no_wh_pos("invention_bg","./image/game/popup_invention/p_invention_bg.png",0,0);util.draw_image_no_wh_pos("invention_title","./image/game/popup_invention/p_invention_title"+POPUP_INVENTION.board_index+util.get_postfix_lang()+".png",143,17);util.draw_image_no_wh_pos("invention_icon","./image/game/popup_invention/p_invention_icon"+POPUP_INVENTION.board_index+".png",64,63);n=BOARD.get_num_invention_i(POPUP_INVENTION.player);switch(n){case 0:util.draw_text_html(TXT.invention_2bou,"invention_comment1_left",25,238,193,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_value2,"invention_comment1_right",253,238,153,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_3bou,"invention_comment2_left",25,267,193,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_value3,"invention_comment2_right",253,267,153,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_4bou,"invention_comment3_left",25,296,193,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_value4,"invention_comment3_right",253,296,153,24,24,21,"center","#a58c8c");break;case 1:util.draw_text_html(TXT.invention_2bou,"invention_comment1_left",25,238,193,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_value2,"invention_comment1_right",253,238,153,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_3bou,"invention_comment2_left",25,267,193,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_value3,"invention_comment2_right",253,267,153,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_4bou,"invention_comment3_left",25,296,193,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_value4,"invention_comment3_right",253,296,153,24,24,21,"center","#a58c8c");break;case 2:util.draw_text_html(TXT.invention_2bou,"invention_comment1_left",25,238,193,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_value2,"invention_comment1_right",253,238,153,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_3bou,"invention_comment2_left",25,267,193,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_value3,"invention_comment2_right",253,267,153,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_4bou,"invention_comment3_left",25,296,193,24,24,21,"center","#a58c8c");util.draw_text_html(TXT.invention_value4,"invention_comment3_right",253,296,153,24,24,21,"center","#a58c8c");break;case 3:util.draw_text_html(TXT.invention_2bou,"invention_comment1_left",25,238,193,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_value2,"invention_comment1_right",253,238,153,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_3bou,"invention_comment2_left",25,267,193,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_value3,"invention_comment2_right",253,267,153,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_4bou,"invention_comment3_left",25,296,193,24,24,21,"center","#9b2c05");util.draw_text_html(TXT.invention_value4,"invention_comment3_right",253,296,153,24,24,21,"center","#9b2c05")}util.draw_text_html(TXT.pass_gold,"invention_passgold",95,342,113,24,24,21,"center","#a51301c");util.draw_text_html(TXT.buygold,"invention_buygold",95,374,113,24,24,21,"center","#a51301c");t=util.get_number_with_comma(BOARD.info[POPUP_INVENTION.board_index].invention.gold_pass);i=util.get_number_with_comma(BOARD.info[POPUP_INVENTION.board_index].invention.gold_tot);util.draw_text_html(t,"invention_passgold_value",208,342,153,24,24,21,"center","#304da1");util.draw_text_html(i,"invention_buygold_value",208,374,153,24,24,21,"center","#9b2c05");util.draw_image_no_wh_pos("invention_bar","./image/game/popup_invention/p_invention_content_bar.png",221,249);$("#invention_btn1").css({left:"84px",top:"424px",position:"absolute"});util.draw_image_no_wh_pos("invention_btn1_bg","./image/game/popup_common/p_common_bt1_70.png",0,0);util.draw_text_html(TXT.buy,"invention_btn1_text",6,7,112,42,42,24,"center","#ffffff");util.draw_textshadow("invention_btn1_text","#a23100",2);util.draw_image_no_wh_pos("invention_btn1_focus","./image/game/popup_common/p_common_bt_70_f.png",-19,-21);$("#invention_btn1_focus").css({display:"none"});$("#invention_btn2").css({left:"227px",top:"424px",position:"absolute"});util.draw_image_no_wh_pos("invention_btn2_bg","./image/game/popup_common/p_common_bt2_70.png",0,0);util.draw_text_html(TXT.cancel,"invention_btn2_text",6,7,112,42,42,24,"center","#ffffff");util.draw_textshadow("invention_btn2_text","#a23100",2);util.draw_image_no_wh_pos("invention_btn2_focus","./image/game/popup_common/p_common_bt_70_f.png",-19,-21);$("#invention_btn2_focus").css({display:"none"})};POPUP_INVENTION.draw_focus=function(){$(".focus").css({display:"none"});$("#invention_btn"+POPUP_INVENTION.focus+"_focus").css({display:"block"})};POPUP_INVENTION.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:POPUP_INVENTION.focus==2&&(POPUP_INVENTION.focus=1,POPUP_INVENTION.draw_focus());break;case KeyDefine.right:POPUP_INVENTION.focus==1&&(POPUP_INVENTION.focus=2,POPUP_INVENTION.draw_focus());break;case KeyDefine.enter:POPUP_INVENTION.menu_run()}};POPUP_INVENTION.menu_run=function(){glo.enable_key=0;util.scale_xy_center("invention_btn"+POPUP_INVENTION.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("invention_btn"+POPUP_INVENTION.focus,1,1);setTimeout(function(){POPUP_INVENTION.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_INVENTION.menu_run_run=function(){var n;util.enable_key(0,"POPUP_INVENTION.menu_run_run()에서  key 막기");POPUP_INVENTION.close();switch(POPUP_INVENTION.focus){case 1:if(n=BOARD_DEFINE[POPUP_INVENTION.board_index].BUY_GOLD,PLAYER.info[POPUP_INVENTION.player].bougold>=n){var i=POPUP_INVENTION.player,r=n,t=TXT.buy+" : "+eval("TXT.tile"+POPUP_INVENTION.board_index+"_title ");BOARD.info[POPUP_INVENTION.board_index].invention.owner=POPUP_INVENTION.player;BOARD.draw_tile_update(POPUP_INVENTION.board_index);SOUND.play_effect(SOUND.EFFECT.BUY_COUNTRY);util.notice_player_num(POPUP_INVENTION.player,t,-n);util.log("[발명품 구매]:"+t);S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_buyinvention(POPUP_INVENTION.board_index);REMAINTIME.stop();CAL.move_gold(i,0,r,t,function(){CAL.check_invention_monopoly(i);POPUP_INVENTION.callbackfn("구매")})}else SOUND.play_effect(SOUND.EFFECT.POPUP_ERROR),util.notice_box(TXT.lackof_gold,3),POPUP_INVENTION.callbackfn("취소");break;case 2:POPUP_INVENTION.callbackfn("취소")}};POPUP_INVENTION.close=function(){$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_invention").css({display:"none"}).empty();REMAINTIME.stop()} 
var POPUP_TAKEOVER={focus:6,player:0,board_index:0,after_dev_stage:0,before_scene:ENUM.SCENE.NONE,callbackfn:null};POPUP_TAKEOVER.init=function(n){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(POPUP_TAKEOVER.init,n);return}if(S_GAME.winner==0){if(POPUP_TAKEOVER.before_scene=S_GAME.scene,S_GAME.scene=ENUM.SCENE.P_TAKEOVER,util.enable_key(1,"POPUP_TAKEOVER.init()에서  key 받기"),POPUP_TAKEOVER.player=S_GAME.turn,POPUP_TAKEOVER.board_index=PLAYER.info[S_GAME.turn].location,POPUP_TAKEOVER.after_dev_stage=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage,POPUP_TAKEOVER.callbackfn=n,POPUP_TAKEOVER.after_dev_stage==0&&console.error("POPUP_TAKEOVER.init() 인수할려는데 발전도가 0이라..이건 무제임"),PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){util.enable_key(0,"POPUP_TAKEOVER.init()에서 ai일경우 key 막기");POPUP_TAKEOVER.init_ai();return}if(S_GAME.mode.online==1&&S_GAME.turn==3){util.enable_key(0,"POPUP_TAKEOVER.init()에서 online게임인데 상대방 할 차례이기에 나의 key 않받기 위해");util.notice_player(3,TXT.takeover_ing);return}PLAYER.ui_top(POPUP_TAKEOVER.player);SOUND.play_effect(SOUND.EFFECT.POPUP_NORMAL);POPUP_TAKEOVER.make_tag();POPUP_TAKEOVER.make_screen();POPUP_TAKEOVER.draw_focus();REMAINTIME.start()}};POPUP_TAKEOVER.init_ai=function(){var n=POPUP_TAKEOVER.get_buygold();POPUP_TAKEOVER.focus=PLAYER.info[POPUP_TAKEOVER.player].bougold>=n?6:7;POPUP_TAKEOVER.menu_run_run()};POPUP_TAKEOVER.make_tag=function(){for(var n,r,u=document.getElementById("GA_popup_takeover"),i="",t=1;t<=5;t++)n="takeover_btn"+t,i+='\t<div id="'+n+'" class="button">\t\t<img id="'+n+'_bg">\t\t<div id="'+n+'_title"><\/div>\t\t<div id="'+n+'_gold"><\/div>\t\t<img id="'+n+'_icon">\t\t<img id="'+n+'_complete">\t\t<img id="'+n+'_focus" class="focus">\t\t<img id="'+n+'_chkbox">\t<\/div>';r=S_GAME.get_popup_class(S_GAME.turn);u.innerHTML='<div id="GA_popup_takeover_bg" class="dim70"><\/div><div id="takeover"  class="'+r+'">\t<img id="takeover_bg">\t<div id="takeover_title">\t\t<img id="takeover_title_bg">\t\t<div id="takeover_title_text"><\/div>\t<\/div><div id="takeover_comment"><\/div>'+i+'<div id="takeover_passgold"><\/div><div id="takeover_passgold_value"><\/div><div id="takeover_buygold"><\/div><div id="takeover_buygold_value"><\/div>\t<div id="takeover_btn6" class="button">\t\t<img id="takeover_btn6_bg">\t\t<div id="takeover_btn6_text"><\/div>\t\t<img id="takeover_btn6_focus" class="focus">\t<\/div>\t<div id="takeover_btn7" class="button">\t\t<img id="takeover_btn7_bg">\t\t<div id="takeover_btn7_text"><\/div>\t\t<img id="takeover_btn7_focus" class="focus">\t<\/div><\/div>'};POPUP_TAKEOVER.make_screen=function(){var t,i,r,u,n,f;for($("#GA_popup_takeover").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080}),$("#takeover").css({left:"483px",top:"196px",width:"1001px",height:"726px",position:"absolute"}),util.draw_image_no_wh_pos("takeover_bg","./image/game/popup_takeover/p_takeover_bg.png",0,0),t=BOARD_DEFINE[POPUP_TAKEOVER.board_index].COLOR_MONOPOLY,i="./image/game/popup_buycountry/p_buyland_colorbox_"+t+".png",util.draw_image_no_wh_pos("takeover_title_bg",i,289,-15),r=eval("TXT.tile"+POPUP_TAKEOVER.board_index+"_title"),util.draw_text_html(r,"takeover_title_text",289,-15,374,78,78,50,"center","#ffffff"),util.draw_textshadow("takeover_title_text","#2b2524",2),util.draw_text_html(TXT.takeover_cani,"takeover_comment",16,93,920,56,56,36,"center","#92210f"),u=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage,n=1;n<=5;n++)$("#takeover_btn"+n).css({left:37+178*(n-1)+"px",top:"180px",position:"absolute"}),util.draw_image_no_wh_pos("takeover_btn"+n+"_bg","./image/game/popup_buycountry/p_buyland_bt.png",0,0),n<5?util.draw_image_no_wh_pos("takeover_btn"+n+"_icon","./image/game/popup_buycountry/p_buyland_icon_step"+n+"_"+PLAYER.get_color(S_GAME.turn)+".png",5,77):util.draw_image_no_wh_pos("takeover_btn"+n+"_icon","./image/game/popup_buycountry/p_buyland_icon_step"+n+"_"+POPUP_TAKEOVER.board_index+"_"+PLAYER.get_color(S_GAME.turn)+".png",5,77),util.draw_text_html(eval("TXT.DEV"+n),"takeover_btn"+n+"_title",5,25,155,52,52,24,"center","#51301c"),f=BOARD.info[POPUP_TAKEOVER.board_index].country.gold_dev[n],util.draw_text_html(util.get_number_with_comma(f),"takeover_btn"+n+"_gold",36,186,124,41,41,20,"center","#ffffff"),util.draw_image_no_wh_pos("takeover_btn"+n+"_focus","./image/game/popup_buycountry/p_buyland_bt_f.png",-25,-25),$("#takeover_btn"+n+"_focus").css({display:"none"}),util.draw_image_no_wh_pos("takeover_btn"+n+"_complete","./image/game/popup_takeover/p_takeover_bt_complete"+util.get_postfix_lang()+".png",5,4),n>u&&$("#takeover_btn"+n+"_complete").css({display:"none"}),POPUP_TAKEOVER.make_screen_chkbox_i(n);POPUP_TAKEOVER.draw_buygold();$("#takeover_btn6").css({left:"277px",top:"578px",position:"absolute"});util.draw_image_no_wh_pos("takeover_btn6_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_image_no_wh_pos("takeover_btn6_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.takeover,"takeover_btn6_text",0,0,176,87,87,35,"center","#ffffff");util.draw_textshadow("takeover_btn6_text","#a23100",2);$("#takeover_btn7").css({left:"498px",top:"578px",position:"absolute"});util.draw_image_no_wh_pos("takeover_btn7_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_image_no_wh_pos("takeover_btn7_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);util.draw_text_html(TXT.cancel,"takeover_btn7_text",0,0,176,87,87,35,"center","#ffffff");util.draw_textshadow("takeover_btn7_text","#a23100",2)};POPUP_TAKEOVER.draw_buygold=function(){var n=POPUP_TAKEOVER.get_passgold();util.draw_text_html(TXT.passgold,"takeover_passgold",284,451,182,40,40,30,"center","#51301c");util.draw_text_html(util.get_number_with_comma(n),"takeover_passgold_value",466,451,232,40,40,30,"center","#304da1");n=POPUP_TAKEOVER.get_buygold();util.draw_text_html(TXT.tot_takeover_gold,"takeover_buygold",284,495,182,40,40,30,"center","#51301c");util.draw_text_html(util.get_number_with_comma(n),"takeover_buygold_value",466,495,232,40,40,30,"center","#9b2c05")};POPUP_TAKEOVER.get_buygold=function(){for(var t=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage,i=BOARD.info[POPUP_TAKEOVER.board_index].country.gold_tot[t],n=t+1;n<=POPUP_TAKEOVER.after_dev_stage;n++)i+=BOARD.info[POPUP_TAKEOVER.board_index].country.gold_dev[n];return i};POPUP_TAKEOVER.get_passgold=function(){var n=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage;return n<POPUP_TAKEOVER.after_dev_stage?BOARD.info[POPUP_TAKEOVER.board_index].country.gold_pass[POPUP_TAKEOVER.after_dev_stage]:BOARD.info[POPUP_TAKEOVER.board_index].country.gold_pass[n]};POPUP_TAKEOVER.make_screen_chkbox_i=function(n){var t=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage;if(n<=t){$("#takeover_btn"+n+"_chkbox").css({display:"none"});return}$("#takeover_btn"+n+"_chkbox").css({display:"block"});switch(n){case 1:util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30);break;case 2:case 3:case 4:n<=t?util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30):util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox.png",58,-30);break;case 5:PLAYER.info[POPUP_TAKEOVER.player].rotate_num==0||t<ENUM.DEV_STAGE.DEV4?($("#takeover_btn"+n+"_chkbox").css({display:"none"}),util.draw_image_no_wh_pos("takeover_btn"+n+"_complete","./image/game/popup_takeover/p_takeover_bt_cantbuy"+util.get_postfix_lang()+".png",5,4),$("#takeover_btn"+n+"_complete").css({display:"\tblock"})):n<=t?util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30):util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox.png",58,-30)}};POPUP_TAKEOVER.make_screen_chkbox_all=function(){for(var n=1;n<=5;n++){if(n==5)if(BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage!=ENUM.DEV_STAGE.DEV4||PLAYER.info[POPUP_TAKEOVER.player].rotate_num==0){$("#takeover_btn"+n+"_chkbox").css({display:"none"});continue}else $("#takeover_btn"+n+"_chkbox").css({display:"block"});n<=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage?$("#takeover_btn"+n+"_chkbox").css({display:"none"}):$("#takeover_btn"+n+"_chkbox").css({display:"block"});n==1||POPUP_TAKEOVER.after_dev_stage>=n?util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox_select.png",58,-30):util.draw_image_no_wh_pos("takeover_btn"+n+"_chkbox","./image/game/popup_buycountry/p_buyland_checkbox.png",58,-30)}};POPUP_TAKEOVER.draw_focus=function(){$(".focus").css({display:"none"});$("#takeover_btn"+POPUP_TAKEOVER.focus+"_focus").css({display:"block"})};POPUP_TAKEOVER.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:switch(POPUP_TAKEOVER.focus){case 6:POPUP_TAKEOVER.focus=1;POPUP_TAKEOVER.draw_focus();break;case 7:POPUP_TAKEOVER.focus=4;POPUP_TAKEOVER.draw_focus()}break;case KeyDefine.down:switch(POPUP_TAKEOVER.focus){case 1:case 2:POPUP_TAKEOVER.focus=6;POPUP_TAKEOVER.draw_focus();break;case 3:case 4:case 5:POPUP_TAKEOVER.focus=7;POPUP_TAKEOVER.draw_focus()}break;case KeyDefine.right:switch(POPUP_TAKEOVER.focus){case 1:case 2:case 3:case 4:POPUP_TAKEOVER.focus++;POPUP_TAKEOVER.draw_focus();break;case 6:POPUP_TAKEOVER.focus++;POPUP_TAKEOVER.draw_focus()}break;case KeyDefine.left:switch(POPUP_TAKEOVER.focus){case 2:case 3:case 4:case 5:POPUP_TAKEOVER.focus--;POPUP_TAKEOVER.draw_focus();break;case 7:POPUP_TAKEOVER.focus--;POPUP_TAKEOVER.draw_focus()}break;case KeyDefine.enter:POPUP_TAKEOVER.menu_run()}};POPUP_TAKEOVER.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("takeover_btn"+POPUP_TAKEOVER.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("takeover_btn"+POPUP_TAKEOVER.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_TAKEOVER.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_TAKEOVER.menu_run_run=function(){switch(POPUP_TAKEOVER.focus){case 1:case 2:case 3:case 4:POPUP_TAKEOVER.focus>=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage&&(POPUP_TAKEOVER.after_dev_stage=POPUP_TAKEOVER.focus,POPUP_TAKEOVER.make_screen_chkbox_all(),POPUP_TAKEOVER.draw_buygold());break;case 5:PLAYER.info[POPUP_TAKEOVER.player].rotate_num>=1&&BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage==ENUM.DEV_STAGE.DEV4&&(POPUP_TAKEOVER.after_dev_stage=POPUP_TAKEOVER.focus,POPUP_TAKEOVER.make_screen_chkbox_all(),POPUP_TAKEOVER.draw_buygold());break;case 6:POPUP_TAKEOVER.buy();break;case 7:POPUP_TAKEOVER.close()}};POPUP_TAKEOVER.buy=function(){var e=BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage,i=BOARD.info[POPUP_TAKEOVER.board_index].country.owner,n;if(POPUP_TAKEOVER.after_dev_stage==ENUM.DEV_STAGE.DEV5&&PLAYER.info[POPUP_TAKEOVER.player].rotate_num==0){util.notice(TXT.rotate2_can_be_create_landmark,2);util.enable_key(1,"POPUP_TAKEOVER.buy()에서  key 입력 받기");return}if(n=POPUP_TAKEOVER.get_buygold(),PLAYER.info[POPUP_TAKEOVER.player].bougold>=n){util.enable_key(0,"POPUP_TAKEOVER.buy()에서  key 막기");var r=POPUP_TAKEOVER.player,u=i,f=n,t="player"+POPUP_TAKEOVER.player+"가 "+eval("TXT.tile"+POPUP_TAKEOVER.board_index+"_title")+"을 인수함:  인수비용: "+n+"발전도:"+POPUP_TAKEOVER.after_dev_stage+"에 도달했습니다";util.notice_player_num(POPUP_TAKEOVER.player,TXT.takeover+" : "+eval("TXT.tile"+POPUP_TAKEOVER.board_index+"_title"),-n);util.log(t);S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_takeover(POPUP_TAKEOVER.board_index,POPUP_TAKEOVER.after_dev_stage);REMAINTIME.stop();CAL.move_gold(r,u,f,t,function(){BOARD.info[POPUP_TAKEOVER.board_index].country.owner=POPUP_TAKEOVER.player;BOARD.info[POPUP_TAKEOVER.board_index].country.dev_stage=POPUP_TAKEOVER.after_dev_stage;BOARD.draw_tile_country_object(POPUP_TAKEOVER.board_index);PLAYER.ui_draw();CAL.check_line_monopoly(POPUP_BUYCOUNTRY.board_index);POPUP_TAKEOVER.close()})}else SOUND.play_effect(SOUND.EFFECT.POPUP_ERROR),util.notice_box(TXT.lackof_gold,2)};POPUP_TAKEOVER.close=function(){util.enable_key(0,"POPUP_TAKEOVER.close()에서  key 막기");$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_takeover").css({display:"none"}).empty();switch(POPUP_TAKEOVER.before_scene){case ENUM.SCENE.EDGE_START:BOARD.arrive_EDGE_START_next_next(POPUP_TAKEOVER.player);break;default:REMAINTIME.stop();BOARD.arrive_player_end()}} 
var POPUP_SETTING={focus:3,player:0};POPUP_SETTING.init=function(n){if(S_GAME.winner==0&&S_GAME.setting_flag!=1&&ECONOMY.ing_flag!=1){if(S_GAME.mode.online==0&&S_GAME.pause(),n!=S_GAME.turn){util.notice_player(n,TXT.setting_only_myturn);return}S_GAME.setting_flag=1;this.player=n;glo.enable_key=1;SOUND.play_effect(SOUND.EFFECT.POPUP_SETTING);POPUP_SETTING.make_tag();POPUP_SETTING.make_screen();POPUP_SETTING.draw_focus()}};POPUP_SETTING.make_tag=function(){var n=document.getElementById("GA_popup_setting"),t=S_GAME.get_popup_class(S_GAME.turn);n.innerHTML='<div id="GA_popup_setting_bg" class="dim70"><\/div><div id="setting"  class="'+t+'">\t<img id="setting_bg">\t<div id="setting_btn1" class="button">\t\t<img id="setting_btn1_bg">\t\t<img id="setting_btn1_focus" class="focus">\t<\/div>\t<div id="setting_btn2" class="button">\t\t<img id="setting_btn2_bg">\t\t<img id="setting_btn2_focus" class="focus">\t<\/div>\t<div id="setting_btn3" class="button">\t\t<img id="setting_btn3_bg">\t\t<div id="setting_btn3_txt"><\/div>\t\t<img id="setting_btn3_focus" class="focus">\t<\/div>\t<div id="setting_btn4" class="button">\t\t<img id="setting_btn4_bg">\t\t<div id="setting_btn4_txt"><\/div>\t\t<img id="setting_btn4_focus" class="focus">\t<\/div><\/div>'};POPUP_SETTING.make_screen=function(){$("#GA_popup_setting").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#setting").css({left:"713px",top:"387px",width:"494px",height:"345px",position:"absolute"});util.draw_image_no_wh_pos("setting_bg","./image/pvp/matching/p_match_ing_bg.png",0,0);$("#setting_btn1").css({left:"82px",top:"82px",position:"absolute"});USER.sound_bgm==1?util.draw_image_no_wh_pos("setting_btn1_bg","./image/game/popup_setting/p_stop_menu_sound_background_on_bt.png",0,0):util.draw_image_no_wh_pos("setting_btn1_bg","./image/game/popup_setting/p_stop_menu_sound_background_off_bt.png",0,0);util.draw_image_no_wh_pos("setting_btn1_focus","./image/game/popup_setting/p_stop_menu_bt_f.png",-15,-15);$("#setting_btn1_focus").css({display:"none"});$("#setting_btn2").css({left:"276px",top:"82px",position:"absolute"});USER.sound_effect==1?util.draw_image_no_wh_pos("setting_btn2_bg","./image/game/popup_setting/p_stop_menu_sound_effect_on_bt.png",0,0):util.draw_image_no_wh_pos("setting_btn2_bg","./image/game/popup_setting/p_stop_menu_sound_effect_off_bt.png",0,0);util.draw_image_no_wh_pos("setting_btn2_focus","./image/game/popup_setting/p_stop_menu_bt_f.png",-15,-15);$("#setting_btn2_focus").css({display:"none"});$("#setting_btn3").css({left:"52px",top:"289px",position:"absolute"});util.draw_image_no_wh_pos("setting_btn3_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_text_html(TXT.continue,"setting_btn3_txt",0,6,176,68,68,32,"center","#ffffff");util.draw_textshadow("setting_btn3_txt","#a23100",2);util.draw_image_no_wh_pos("setting_btn3_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#setting_btn3_focus").css({display:"none"});$("#setting_btn4").css({left:"269px",top:"289px",position:"absolute"});util.draw_image_no_wh_pos("setting_btn4_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_text_html(TXT.game_exit,"setting_btn4_txt",0,6,176,68,68,32,"center","#ffffff");util.draw_textshadow("setting_btn4_txt","#a23100",2);util.draw_image_no_wh_pos("setting_btn4_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#setting_btn4_focus").css({display:"none"})};POPUP_SETTING.draw_focus=function(){$(".focus").css({display:"none"});$("#setting_btn"+this.focus+"_focus").css({display:"block"})};POPUP_SETTING.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.up:this.focus==3&&(this.focus=1);this.focus==4&&(this.focus=2);this.draw_focus();break;case KeyDefine.down:this.focus==1&&(this.focus=3);this.focus==2&&(this.focus=4);this.draw_focus();break;case KeyDefine.left:this.focus==2&&(this.focus=1);this.focus==4&&(this.focus=3);this.draw_focus();break;case KeyDefine.right:this.focus==1&&(this.focus=2);this.focus==3&&(this.focus=4);this.draw_focus();break;case KeyDefine.enter:this.menu_run()}};POPUP_SETTING.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("setting_btn"+this.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("setting_btn"+POPUP_SETTING.focus,1,1);setTimeout(function(){glo.enable_key=n;POPUP_SETTING.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};POPUP_SETTING.menu_run_run=function(){switch(this.focus){case 1:USER.sound_bgm==0?(USER.sound_bgm=1,SOUND.play_bgm(SOUND.get_bgm_index(S_GAME.map)),util.draw_image_no_wh_pos("setting_btn1_bg","./image/game/popup_setting/p_stop_menu_sound_background_on_bt.png",0,0)):(USER.sound_bgm=0,SOUND.stop_bgm(),util.draw_image_no_wh_pos("setting_btn1_bg","./image/game/popup_setting/p_stop_menu_sound_background_off_bt.png",0,0));PHP.put_userinfo_normal("사운드설정 변경:"+USER.sound_bgm);break;case 2:USER.sound_effect==0?(USER.sound_effect=1,util.draw_image_no_wh_pos("setting_btn2_bg","./image/game/popup_setting/p_stop_menu_sound_effect_on_bt.png",0,0)):(USER.sound_effect=0,SOUND.stop_effect(SOUND.cur_effect_index),util.draw_image_no_wh_pos("setting_btn2_bg","./image/game/popup_setting/p_stop_menu_sound_effect_off_bt.png",0,0));PHP.put_userinfo_normal("사운드설정 변경:"+USER.sound_effect);break;case 3:POPUP_SETTING.close();S_GAME.mode.online==0&&S_GAME.resume();break;case 4:POPUP_SETTING.close();S_GAME.end();S_GAME.mode.online==1&&(localStorage.setItem("busidol.bm.endtimestamp.txt",util.encrypt(util.get_cur_timestamp()+"")),WSS.send_roomout("게임진행중 나가기 선택함."));ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL);SOUND.play_bgm(SOUND.BGM.BGM0)}};POPUP_SETTING.close=function(){$("#GA_popup_setting").css({display:"none"}).empty();S_GAME.setting_flag=0} 
var BOARD_DEFINE=[{},{CX:960,CY:983,TX:845,TY:919,TILE_TYPE:ENUM.TILE_TYPE.EDGE_START,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:872,CY:923,TX:783,TY:876,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:6e5,COLOR_MONOPOLY:"red"},{CX:793,CY:878,TX:704,TY:831,TILE_TYPE:ENUM.TILE_TYPE.INVENTION,BUY_GOLD:1e6,COLOR_MONOPOLY:"orange"},{CX:715,CY:832,TX:625,TY:786,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:7e5,COLOR_MONOPOLY:"red"},{CX:635,CY:788,TX:546,TY:741,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:8e5,COLOR_MONOPOLY:"red"},{CX:556,CY:743,TX:467,TY:665,TILE_TYPE:ENUM.TILE_TYPE.RESORT,BUY_GOLD:16e5,COLOR_MONOPOLY:"resortblue"},{CX:477,CY:698,TX:388,TY:651,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:75e4,COLOR_MONOPOLY:"darkred"},{CX:398,CY:653,TX:309,TY:606,TILE_TYPE:ENUM.TILE_TYPE.CHANCE,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:319,CY:608,TX:230,TY:561,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:85e4,COLOR_MONOPOLY:"darkred"},{CX:213,CY:551,TX:99,TY:487,TILE_TYPE:ENUM.TILE_TYPE.EDGE_ANGEL,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:320,CY:509,TX:233,TY:461,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:9e5,COLOR_MONOPOLY:"skyblue"},{CX:399,CY:464,TX:312,TY:417,TILE_TYPE:ENUM.TILE_TYPE.INVENTION,BUY_GOLD:2e6,COLOR_MONOPOLY:"orange"},{CX:478,CY:419,TX:391,TY:371,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:1e6,COLOR_MONOPOLY:"skyblue"},{CX:557,CY:374,TX:470,TY:326,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:11e5,COLOR_MONOPOLY:"skyblue"},{CX:636,CY:329,TX:549,TY:282,TILE_TYPE:ENUM.TILE_TYPE.RESORT,BUY_GOLD:18e5,COLOR_MONOPOLY:"resortblue"},{CX:715,CY:284,TX:628,TY:236,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:105e4,COLOR_MONOPOLY:"green"},{CX:794,CY:239,TX:707,TY:192,TILE_TYPE:ENUM.TILE_TYPE.CHANCE,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:873,CY:194,TX:786,TY:146,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:115e4,COLOR_MONOPOLY:"green"},{CX:960,CY:127,TX:847,TY:63,TILE_TYPE:ENUM.TILE_TYPE.EDGE_ISLAND,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:1047,CY:194,TX:959,TY:147,TILE_TYPE:ENUM.TILE_TYPE.INVENTION,BUY_GOLD:3e6,COLOR_MONOPOLY:"orange"},{CX:1126,CY:239,TX:1038,TY:191,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:12e5,COLOR_MONOPOLY:"purple"},{CX:1205,CY:284,TX:1117,TY:236,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:13e5,COLOR_MONOPOLY:"purple"},{CX:1284,CY:329,TX:1196,TY:281,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:125e4,COLOR_MONOPOLY:"purple"},{CX:1363,CY:374,TX:1275,TY:327,TILE_TYPE:ENUM.TILE_TYPE.RESORT,BUY_GOLD:2e6,COLOR_MONOPOLY:"resortblue"},{CX:1442,CY:419,TX:1354,TY:371,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:135e4,COLOR_MONOPOLY:"yellow"},{CX:1521,CY:464,TX:1433,TY:417,TILE_TYPE:ENUM.TILE_TYPE.CHANCE,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:1600,CY:509,TX:1512,TY:461,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:155e4,COLOR_MONOPOLY:"yellow"},{CX:1707,CY:551,TX:1593,TY:487,TILE_TYPE:ENUM.TILE_TYPE.EDGE_GOTO,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:1600,CY:608,TX:1513,TY:561,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:15e5,COLOR_MONOPOLY:"blue"},{CX:1522,CY:653,TX:1435,TY:576,TILE_TYPE:ENUM.TILE_TYPE.RESORT,BUY_GOLD:2e6,COLOR_MONOPOLY:"resortblue"},{CX:1443,CY:698,TX:1356,TY:651,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:16e5,COLOR_MONOPOLY:"blue"},{CX:1364,CY:743,TX:1277,TY:696,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:17e5,COLOR_MONOPOLY:"blue"},{CX:1285,CY:788,TX:1198,TY:741,TILE_TYPE:ENUM.TILE_TYPE.CHANCE,BUY_GOLD:0,COLOR_MONOPOLY:"NONE"},{CX:1206,CY:833,TX:1119,TY:786,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:175e4,COLOR_MONOPOLY:"black"},{CX:1127,CY:878,TX:1040,TY:831,TILE_TYPE:ENUM.TILE_TYPE.INVENTION,BUY_GOLD:4e6,COLOR_MONOPOLY:"orange"},{CX:1048,CY:923,TX:961,TY:876,TILE_TYPE:ENUM.TILE_TYPE.COUNTRY,BUY_GOLD:185e4,COLOR_MONOPOLY:"black"},] 
var BOARD={TILE_W:128,TILE_H:152,TILE_COL:10,TILE_ROW:10,TILE_TOT:0,WIDTH:0,HEIGHT:0,info:null};BOARD.init=function(){BOARD.TILE_TOT=BOARD.TILE_COL*2+(BOARD.TILE_ROW-2)*2;BOARD.WIDTH=BOARD.TILE_W*(BOARD.TILE_COL-2)+BOARD.TILE_H*2;BOARD.HEIGHT=BOARD.WIDTH;BOARD.info=[];for(var n=1;n<=BOARD.TILE_TOT;n++)BOARD.init_i(n)};BOARD.init_i=function(n){BOARD.info[n]={country:{owner:0,dev_stage:ENUM.DEV_STAGE.DEV0,gold_dev:[0,Math.round(BOARD_DEFINE[n].BUY_GOLD*1),Math.round(BOARD_DEFINE[n].BUY_GOLD*.3),Math.round(BOARD_DEFINE[n].BUY_GOLD*.7),Math.round(BOARD_DEFINE[n].BUY_GOLD*1.3),Math.round(BOARD_DEFINE[n].BUY_GOLD*2.2),],gold_tot:[0,Math.round(BOARD_DEFINE[n].BUY_GOLD*1),Math.round(BOARD_DEFINE[n].BUY_GOLD*1.3),Math.round(BOARD_DEFINE[n].BUY_GOLD*2),Math.round(BOARD_DEFINE[n].BUY_GOLD*3.3),Math.round(BOARD_DEFINE[n].BUY_GOLD*5.5),],gold_pass:[0,Math.round(BOARD_DEFINE[n].BUY_GOLD*1*.4),Math.round(BOARD_DEFINE[n].BUY_GOLD*1.3*.8),Math.round(BOARD_DEFINE[n].BUY_GOLD*2*1.2),Math.round(BOARD_DEFINE[n].BUY_GOLD*3.3*1.6),Math.round(BOARD_DEFINE[n].BUY_GOLD*5.5*2),]},resort:{owner:0,count:0,gold_tot:BOARD_DEFINE[n].BUY_GOLD,gold_pass:BOARD_DEFINE[n].BUY_GOLD*.25},invention:{owner:0,gold_tot:BOARD_DEFINE[n].BUY_GOLD,gold_pass:BOARD_DEFINE[n].BUY_GOLD},angel:{gold_tot:0},goto:{notwork:0,check:0},chance1_count:0};$("#board_tile"+n+"_text").css({display:"none"})};BOARD.draw_tile=function(){for(var u,n=1;n<=BOARD.TILE_TOT;n++){var r="board_tile"+n,u=BOARD.get_tile_name(n),t=BOARD_DEFINE[n].TX,i=BOARD_DEFINE[n].TY;$("#"+r).css({left:t+"px",top:i+"px","pointer-events":"none",position:"absolute"});util.draw_image_no_wh_pos(r+"_bg",u,0,0);$("#"+r+"_bg").css({"-webkit-user-drag":"none"});var t=0,i=0,f=BOARD.get_focus_type(n);switch(f){case 1:t=-6;i=-11;break;case 2:t=-5;i=-14;break;case 3:t=-8;i=-13;break;case 4:t=-4;i=-8;break;case 5:t=-6;i=-9;break;case 6:t=-5;i=-14;break;case 7:t=-4;i=-9}u="./image/game/board/focus/ga_tile_focus"+f+".png";util.draw_image_no_wh_pos(r+"_focus",u,t,i);$("#"+r+"_focus").css({display:"none"});switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.draw_tile_text_COUNTRY(n)}}};BOARD.draw_tile_text_COUNTRY=function(n){var t=BOARD_DEFINE[n].BUY_GOLD,i="";i=USER.lang==LANG.KOREA?util.get_money_with_MAN(t):util.get_abbreviateNumber(t);BOARD.draw_tile_text(n,i)};BOARD.draw_tile_text=function(n,t){var r="board_tile"+n+"_text",u=91,f=5,o=85,e=25,i=30;if(n!=1&&n!=10&&n!=19&&n!=28&&n!=3&&n!=12&&n!=20&&n!=35&&n!=8&&n!=17&&n!=26&&n!=33){if(n==6||n==15||n==24||n==30){switch(n){case 6:u=32;f=69;i=30;$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"});util.draw_text_html(t,r,u,f,o,e,e,15,"center","#54839e");break;case 15:u=72;f=79;i=-30;$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"});util.draw_text_html(t,r,u,f,o,e,e,15,"center","#54839e");break;case 24:u=33;f=43;i=30;$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"});util.draw_text_html(t,r,u,f,o,e,e,15,"center","#54839e");break;case 30:u=74;f=111;i=-30;$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"});util.draw_text_html(t,r,u,f,o,e,e,15,"center","#54839e")}return}2<=n&&n<=9?(u=24,f=40,i=30,$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"})):11<=n&&n<=18?(u=4,f=41,i=-30,$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"})):20<=n&&n<=27?(u=99,f=-3,i=30,$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"})):29<=n&&n<=36&&(u=78,f=84,i=-30,$("#"+r).css({display:"block","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-webkit-transform":"rotate("+i+"deg) skewX("+i*-1+"deg)",position:"absolute"}));util.draw_text_html(t,r,u,f,o,e,e,13,"center","#ffffff")}};BOARD.draw_tile_country_object=function(n){var f=BOARD.info[n].country.owner,o=PLAYER.get_color(f)+"_flag",e="board_tile"+n+"_ani",t,i,s,r,u;if(f==0){$("#"+e).css({display:"none"}).removeClass(o);$("#board_tile"+n+"_obj").css({display:"none"});$("#tile_out"+n).css({display:"none"});$("#board_tile"+n+"_team").css({display:"none"});BOARD.draw_tile_text_COUNTRY(n);return}$("#"+e).removeClass("red_flag");$("#"+e).removeClass("green_flag");$("#"+e).removeClass("yellow_flag");$("#"+e).removeClass("blue_flag");$("#board_tile"+n+"_text").css({display:"none"});t=0;i=0;1<n&&n<10&&(t=106,i=-32);10<n&&n<19&&(t=37,i=-32);19<n&&n<28&&(t=106,i=-32);28<n&&n<37&&(t=37,i=-32);$("#"+e).css({display:"block",left:t+"px",top:i+"px",position:"absolute"}).addClass(o);s=BOARD.info[n].country.dev_stage;e="board_tile"+n+"_obj";switch(s){case ENUM.DEV_STAGE.DEV0:$("#"+e).css({display:"none"});$("#tile_out"+n).css({display:"none"});$("#board_tile"+n+"_team").css({display:"none"});return;case ENUM.DEV_STAGE.DEV1:r="./image/game/board/object/mono_land_"+PLAYER.get_color(f)+".png";BOARD.draw_tile_country_object_detail(n,r);break;case ENUM.DEV_STAGE.DEV2:r="./image/game/board/object/mono_farm_"+PLAYER.get_color(f)+".png";BOARD.draw_tile_country_object_detail(n,r);break;case ENUM.DEV_STAGE.DEV3:r="./image/game/board/object/mono_factory_"+PLAYER.get_color(f)+".png";BOARD.draw_tile_country_object_detail(n,r);break;case ENUM.DEV_STAGE.DEV4:r="./image/game/board/object/mono_city_"+PLAYER.get_color(f)+".png";BOARD.draw_tile_country_object_detail(n,r);break;case ENUM.DEV_STAGE.DEV5:r="./image/game/board/object/mono_landmark"+n+"_"+PLAYER.get_color(f)+".png";BOARD.draw_tile_country_object_detail(n,r)}var r="./image/game/board/tile/out/"+S_GAME.map+"/tileout_"+n+".png",t=0,i=0;switch(n){case 2:t=717;i=952;break;case 4:t=559;i=862;break;case 5:t=480;i=817;break;case 7:t=322;i=727;break;case 9:t=164;i=637;break;case 11:t=162;i=444;break;case 13:t=320;i=354;break;case 14:t=401;i=308;break;case 16:t=557;i=219;break;case 18:t=715;i=129;break;case 21:t=1151;i=174;break;case 22:t=1230;i=219;break;case 23:t=1309;i=264;break;case 25:t=1466;i=354;break;case 27:t=1624;i=444;break;case 29:t=1617;i=637;break;case 31:t=1460;i=727;break;case 32:t=1381;i=772;break;case 34:t=1223;i=862;break;case 36:t=1064;i=953}if(util.draw_image_no_wh_pos("tile_out"+n,r,t,i),$("#tile_out"+n).css({display:"block"}),S_GAME.mode.team==1){u="";switch(f){case 1:u="a";break;case 2:u="c";break;case 3:u="b";break;case 4:u="d"}var t=17,i=77,r="./image/game/ui/p_teamicon_"+u+"_left.png";2<=n&&n<=9?(t=-31,i=96,r="./image/game/ui/p_teamicon_"+u+"_left.png"):11<=n&&n<=18?(t=2,i=-1,r="./image/game/ui/p_teamicon_"+u+"_right.png"):20<=n&&n<=27?(t=139,i=-1,r="./image/game/ui/p_teamicon_"+u+"_left.png"):(t=175,i=97,r="./image/game/ui/p_teamicon_"+u+"_right.png");$("#board_tile"+n+"_team").css({display:"block"});util.draw_image_no_wh_pos("board_tile"+n+"_team",r,t,i)}};BOARD.draw_tile_resort_object=function(n){var i=BOARD.info[n].resort.owner,r=PLAYER.get_color(i)+"_flag",t="board_tile"+n+"_ani";if(i==0){$("#"+t).css({display:"none"}).removeClass(r);return}$("#"+t).removeClass("red_flag");$("#"+t).removeClass("green_flag");$("#"+t).removeClass("yellow_flag");$("#"+t).removeClass("blue_flag");switch(n){case 6:x=105;y=1;break;case 15:x=37;y=-32;break;case 24:x=106;y=-32;break;case 30:x=40;y=1}$("#"+t).css({display:"block",left:x+"px",top:y+"px",position:"absolute"}).addClass(r)};BOARD.draw_tile_invention_object=function(n){var u=BOARD.info[n].invention.owner,f=PLAYER.get_color(u)+"_flag",t="board_tile"+n+"_ani",i,r;if(u==0){$("#"+t).css({display:"none"}).removeClass(f);return}$("#"+t).removeClass("red_flag");$("#"+t).removeClass("green_flag");$("#"+t).removeClass("yellow_flag");$("#"+t).removeClass("blue_flag");i=0;r=0;switch(n){case 3:i=106;r=-32;break;case 12:i=37;r=-32;break;case 20:i=106;r=-32;break;case 35:i=37;r=-32}$("#"+t).css({display:"block",left:i+"px",top:r+"px",position:"absolute"}).addClass(f)};BOARD.draw_tile_update=function(n){switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.draw_tile_country_object(n);break;case ENUM.TILE_TYPE.RESORT:BOARD.draw_tile_resort_object(n);break;case ENUM.TILE_TYPE.INVENTION:BOARD.draw_tile_invention_object(n)}};BOARD.draw_tile_update_economy=function(n){var t="board_tile"+n+"_eco";$("#"+t).css({left:"54px",top:"-11px",position:"absolute"});var i=BOARD_DEFINE[n].BUY_GOLD*1,r=BOARD.info[n].country.gold_tot[1],u=Math.floor(r/i*100);r>i?($("#"+t).css({display:"block"}),util.draw_image_no_wh_pos(t+"_bg","./image/game/ui/p_economic_up_popup.png",0,0),util.draw_text_html(u+"%",t+"_value",7,21,53,23,23,14,"center","#ff8701"),util.draw_textshadow(t+"_value","#5e0000",2)):r<=i?($("#"+t).css({display:"block"}),util.draw_image_no_wh_pos(t+"_bg","./image/game/ui/p_economic_down_popup.png",0,0),util.draw_text_html(u+"%",t+"_value",7,3,53,23,23,14,"center","#00ffd0"),util.draw_textshadow(t+"_value","#00444e",2)):$("#"+t).css({display:"none"})};BOARD.draw_tile_country_object_detail=function(n,t){var i="board_tile"+n+"_obj";$("#"+i).css({display:"block"});n<=10?util.draw_image_no_wh_pos(i,t,-56,-30):n<=19?util.draw_image_no_wh_pos_rotate(i,t,-66,-125):n<=28?util.draw_image_no_wh_pos(i,t,112,-126):util.draw_image_no_wh_pos_rotate(i,t,106,-29)};BOARD.draw_angel_value=function(){if(BOARD.info[10].angel.gold_tot==0){$("#GA_donation").css({display:"none"});return}$("#GA_donation").css({display:"block"});$("#GA_donation").css({left:"18px",top:"600px",position:"absolute"});var n="./image/game/ui/p_coin1.png";n=BOARD.info[10].angel.gold_tot<1e6?"./image/game/ui/p_coin1.png":BOARD.info[10].angel.gold_tot<3e6?"./image/game/ui/p_coin2.png":BOARD.info[10].angel.gold_tot<6e6?"./image/game/ui/p_coin3.png":BOARD.info[10].angel.gold_tot<1e7?"./image/game/ui/p_coin4.png":"./image/game/ui/p_coin5.png";util.draw_image_no_wh_pos("GA_donation_icon",n,0,0);$("#GA_donation_balloon").css({left:"-6px",top:"-98px",position:"absolute"});util.draw_image_no_wh_pos("GA_donation_balloon_bg","./image/game/ui/p_donation_how_bg.png",0,0);util.draw_text_html(TXT.donation,"GA_donation_balloon_title",2,12,133,23,23,18,"center","#9b2c05");util.draw_text_html(util.get_number_with_comma(BOARD.info[10].angel.gold_tot),"GA_donation_balloon_value",2,39,133,23,23,18,"center","#9b2c05")};BOARD.draw_airport_value=function(){if(BOARD.info[28].goto.check==0){$("#GA_airport").css({display:"none"});return}$("#GA_airport").css({display:"block"});$("#GA_airport").css({left:"1771px",top:"569px",position:"absolute"});util.draw_image_no_wh_pos("GA_airport_bg","./image/game/ui/p_airport_cant_use_bg.png",0,0);var n=BOARD.info[28].goto.check;util.draw_text_html(n,"GA_airport_value",18,54,38,23,23,19,"center","#ffffff")};BOARD.get_tile_name=function(n){switch(n){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+".png";case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:return glo.platform==glo.PLATFORM.LG_WEEKEND?"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+"_offline.png":"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+".png";case 19:return"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+".png";case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:return glo.platform==glo.PLATFORM.LG_WEEKEND?"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+"_offline.png":"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+".png";case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:return"./image/game/board/tile/"+util.get_language_dir()+"/ga_tile"+n+".png"}};BOARD.get_tile_xy=function(n){var t={x:0,y:0,rotate:0};return n==1?(t.x=BOARD.WIDTH-BOARD.TILE_H,t.y=BOARD.HEIGHT-BOARD.TILE_H,t.rotate=-45):n<BOARD.TILE_COL?(t.x=BOARD.WIDTH-BOARD.TILE_W*n-(BOARD.TILE_H-BOARD.TILE_W),t.y=BOARD.HEIGHT-BOARD.TILE_H):n==BOARD.TILE_COL?(t.x=0,t.y=BOARD.HEIGHT-BOARD.TILE_H,t.rotate=45):n<BOARD.TILE_COL+BOARD.TILE_ROW-1?(t.x=0,t.y=BOARD.HEIGHT-BOARD.TILE_H-BOARD.TILE_W*(n-BOARD.TILE_COL+1)-(BOARD.TILE_H-BOARD.TILE_W),t.rotate=90):n==BOARD.TILE_COL+BOARD.TILE_ROW-1?(t.x=0,t.y=0,t.rotate=135):n<BOARD.TILE_COL+BOARD.TILE_ROW-1+BOARD.TILE_COL-1?(t.x=BOARD.TILE_W*(n-(BOARD.TILE_COL+BOARD.TILE_ROW-1))+(BOARD.TILE_H-BOARD.TILE_W),t.y=0,t.rotate=180):n==BOARD.TILE_COL+BOARD.TILE_ROW-1+BOARD.TILE_COL-1?(t.x=BOARD.WIDTH-BOARD.TILE_H,t.rotate=225):(t.x=BOARD.WIDTH-BOARD.TILE_W,t.y=BOARD.TILE_W*(n-(BOARD.TILE_COL+BOARD.TILE_ROW-1+BOARD.TILE_COL-1))-BOARD.TILE_W,t.rotate=-90),t};BOARD.tile_down_up=function(n){$("#board_tile"+n).addClass("tile_down_up").on("webkitAnimationEnd",function(){$("#board_tile"+n).removeClass("tile_down_up")})};BOARD.get_index_country=function(){var t=[],n;for(t.push(0),n=1;n<=36;n++)BOARD_DEFINE[n].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&t.push(n);return t};BOARD.get_num_player_got_country=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&i++;return i};BOARD.get_num_player_got_country_for_develop=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&BOARD.info[t].country.dev_stage<=ENUM.DEV_STAGE.DEV4&&i++;return i};BOARD.get_num_player_got_zasan=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&i++,BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner==n&&i++,BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner==n&&i++;return i};BOARD.get_num_player_got_country_team=function(n){for(var i,r,u=0,f=PLAYER.info[n].team,t=1;t<=36;t++)if(BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY){if(i=BOARD.info[t].country.owner,i==0)continue;if(r=PLAYER.info[i].team,r==0)continue;f==r&&u++}return u};BOARD.get_num_player_got_country_team_for_develop=function(n){for(var i,r,u=0,f=PLAYER.info[n].team,t=1;t<=36;t++)if(BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY){if(i=BOARD.info[t].country.owner,i==0)continue;if(r=PLAYER.info[i].team,r==0)continue;f==r&&BOARD.info[t].country.dev_stage<=ENUM.DEV_STAGE.DEV4&&u++}return u};BOARD.get_num_player_got_country_resort_invention=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n?i++:BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner==n?i++:BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner==n&&i++;return i};BOARD.get_num_player_got_country_other=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner!=0&&BOARD.info[t].country.owner!=n&&i++;return i};BOARD.get_num_player_got_country_resort_invention_other=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner!=0&&BOARD.info[t].country.owner!=n?i++:BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner!=0&&BOARD.info[t].resort.owner!=n?i++:BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner!=0&&BOARD.info[t].invention.owner!=n&&i++;return i};BOARD.get_num_invention_i=function(n){for(var i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner==n&&i++;return i};BOARD.get_index_player_got_country=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&i.push(t);return i};BOARD.get_index_player_got_country_for_develop=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&BOARD.info[t].country.dev_stage<=ENUM.DEV_STAGE.DEV4&&i.push(t);return i};BOARD.get_index_player_got_zasan=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&i.push(t),BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner==n&&i.push(t),BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner==n&&i.push(t);return i};BOARD.get_index_player_got_country_team=function(n){var i=[],f,t,r,u;for(i.push(0),f=PLAYER.info[n].team,t=1;t<=36;t++)if(BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY){if(r=BOARD.info[t].country.owner,r==0)continue;if(u=PLAYER.info[r].team,u==0)continue;f==u&&i.push(t)}return i};BOARD.get_index_player_got_country_team_for_develop=function(n){var i=[],f,t,r,u;for(i.push(0),f=PLAYER.info[n].team,t=1;t<=36;t++)if(BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY){if(r=BOARD.info[t].country.owner,r==0)continue;if(u=PLAYER.info[r].team,u==0)continue;f==u&&BOARD.info[t].country.dev_stage<=ENUM.DEV_STAGE.DEV4&&i.push(t)}return i};BOARD.get_index_player_got_country_resort_invention=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n?i.push(t):BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner==n?i.push(t):BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner==n&&i.push(t);return i};BOARD.get_index_player_got_country_other=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner!=0&&BOARD.info[t].country.owner!=n&&i.push(t);return i};BOARD.get_index_player_got_country_resort_invention_other=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner!=0&&BOARD.info[t].country.owner!=n?i.push(t):BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner!=0&&BOARD.info[t].resort.owner!=n?i.push(t):BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner!=0&&BOARD.info[t].invention.owner!=n&&i.push(t);return i};BOARD.get_index_player_got_chance1=function(n){var i=[],t;for(i.push(0),t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner!=0&&BOARD.info[t].country.owner!=n&&i.push(t),BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner!=0&&BOARD.info[t].resort.owner!=n&&i.push(t);return i};BOARD.get_index_player_goto=function(){var t=[],n;for(t.push(0),n=1;n<=36;n++)BOARD_DEFINE[n].TILE_TYPE!=ENUM.TILE_TYPE.EDGE_GOTO&&t.push(n);return t};BOARD.get_focus_type=function(n){switch(n){case 1:case 10:case 19:case 28:return 1;case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 20:case 21:case 22:case 23:case 25:case 26:case 27:return 2;case 11:case 12:case 13:case 14:case 16:case 17:case 18:case 29:case 31:case 32:case 33:case 34:case 35:case 36:return 3;case 15:return 4;case 24:return 5;case 6:return 6;case 30:return 7}};BOARD.get_country_index_lowest=function(){for(var t,i=0,r=1e8,n=1;n<=36;n++)t=BOARD.info[n].country.dev_stage,t==0&&(t=1),BOARD_DEFINE[n].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[n].country.gold_tot[t]<r&&(i=n,r=BOARD.info[n].country.gold_tot[t]);return i};BOARD.get_country_resort_invention_index_lowest=function(){for(var i,r=0,t=1e8,n=1;n<=36;n++)switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:i=BOARD.info[n].country.dev_stage;i==0&&(i=1);BOARD.info[n].country.gold_tot[i]<t&&(r=n,t=BOARD.info[n].country.gold_tot[i]);break;case ENUM.TILE_TYPE.RESORT:BOARD.info[n].resort.gold_tot<t&&(r=n,t=BOARD.info[n].resort.gold_tot);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[n].invention.gold_tot<t&&(r=n,t=BOARD.info[n].invention.gold_tot)}return r};BOARD.get_country_index_lowest_i=function(n){for(var i,r=0,u=1e8,t=1;t<=36;t++)i=BOARD.info[t].country.dev_stage,i==0&&(i=1),BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&BOARD.info[t].country.gold_tot[i]<u&&(r=t,u=BOARD.info[t].country.gold_tot[i]);return r};BOARD.get_country_resort_invention_index_lowest_i=function(n){for(var r,u=0,i=1e8,t=1;t<=36;t++)switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:r=BOARD.info[t].country.dev_stage;r==0&&(r=1);BOARD.info[t].country.owner==n&&BOARD.info[t].country.gold_tot[r]<i&&(u=t,i=BOARD.info[t].country.gold_tot[r]);break;case ENUM.TILE_TYPE.RESORT:BOARD.info[t].resort.owner==n&&BOARD.info[t].resort.gold_tot<i&&(u=t,i=BOARD.info[t].resort.gold_tot);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[t].invention.owner==n&&BOARD.info[t].invention.gold_tot<i&&(u=t,i=BOARD.info[t].invention.gold_tot)}return u};BOARD.get_country_index_highest=function(){for(var i,r=0,t=0,n=1;n<=36;n++)switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:i=BOARD.info[n].country.dev_stage;i==0&&(i=1);BOARD.info[n].country.gold_tot[i]>t&&(r=n,t=BOARD.info[n].country.gold_tot[i]);break;case ENUM.TILE_TYPE.RESORT:BOARD.info[n].resort.gold_tot>t&&(r=n,t=BOARD.info[n].resort.gold_tot);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[n].invention.gold_tot>t&&(r=n,t=BOARD.info[n].invention.gold_tot)}return r};BOARD.get_count_country_owner=function(n,t,i){var f=0,u=0,r;switch(i){case 1:u=3;break;case 2:u=4;break;case 3:u=1;break;case 4:u=2;break;default:u=99}for(r=n;r<=t;r++)BOARD_DEFINE[r].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&(S_GAME.mode.team==0?BOARD.info[r].country.owner==i&&f++:(BOARD.info[r].country.owner==i||BOARD.info[r].country.owner==u)&&f++);return f};BOARD.get_count_num_color_monopoly=function(n){var i=0,t=0;switch(n){case 1:t=3;break;case 2:t=4;break;case 3:t=1;break;case 4:t=2}return S_GAME.mode.team==0?(BOARD.info[2].country.owner==n&&BOARD.info[4].country.owner==n&&BOARD.info[5].country.owner==n&&i++,BOARD.info[7].country.owner==n&&BOARD.info[9].country.owner==n&&i++,BOARD.info[11].country.owner==n&&BOARD.info[13].country.owner==n&&BOARD.info[14].country.owner==n&&i++,BOARD.info[16].country.owner==n&&BOARD.info[18].country.owner==n&&i++,BOARD.info[21].country.owner==n&&BOARD.info[22].country.owner==n&&BOARD.info[23].country.owner==n&&i++,BOARD.info[25].country.owner==n&&BOARD.info[27].country.owner==n&&i++,BOARD.info[29].country.owner==n&&BOARD.info[31].country.owner==n&&BOARD.info[32].country.owner==n&&i++,BOARD.info[34].country.owner==n&&BOARD.info[36].country.owner==n&&i++):((BOARD.info[2].country.owner==n||BOARD.info[2].country.owner==t)&&(BOARD.info[4].country.owner==n||BOARD.info[4].country.owner==t)&&(BOARD.info[5].country.owner==n||BOARD.info[5].country.owner==t)&&i++,(BOARD.info[7].country.owner==n||BOARD.info[7].country.owner==t)&&(BOARD.info[9].country.owner==n||BOARD.info[9].country.owner==t)&&i++,(BOARD.info[11].country.owner==n||BOARD.info[11].country.owner==t)&&(BOARD.info[13].country.owner==n||BOARD.info[13].country.owner==t)&&(BOARD.info[14].country.owner==n||BOARD.info[14].country.owner==t)&&i++,(BOARD.info[16].country.owner==n||BOARD.info[16].country.owner==t)&&(BOARD.info[18].country.owner==n||BOARD.info[18].country.owner==t)&&i++,(BOARD.info[21].country.owner==n||BOARD.info[21].country.owner==t)&&(BOARD.info[22].country.owner==n||BOARD.info[22].country.owner==t)&&(BOARD.info[23].country.owner==n||BOARD.info[23].country.owner==t)&&i++,(BOARD.info[25].country.owner==n||BOARD.info[25].country.owner==t)&&(BOARD.info[27].country.owner==n||BOARD.info[27].country.owner==t)&&i++,(BOARD.info[29].country.owner==n||BOARD.info[29].country.owner==t)&&(BOARD.info[31].country.owner==n||BOARD.info[31].country.owner==t)&&(BOARD.info[32].country.owner==n||BOARD.info[32].country.owner==t)&&i++,(BOARD.info[34].country.owner==n||BOARD.info[34].country.owner==t)&&(BOARD.info[36].country.owner==n||BOARD.info[36].country.owner==t)&&i++),i};BOARD.get_playernum_board_index=function(n){for(var i=0,t=1;t<=4;t++)PLAYER.info[t].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[t].pasan_flag!=1&&PLAYER.info[t].location==n&&i++;return i} 
BOARD.text_base_init=function(){$("#GA_board_text").css({left:S_GAME.board_x+"px",top:S_GAME.board_y+"px",width:BOARD.WIDTH+"px",height:BOARD.HEIGHT+"px",display:"none",position:"absolute"});var n=S_GAME.scaleX,t=S_GAME.scaleY,i="scale("+n+","+t+") rotate(45deg)";$("#GA_board_text").css({"transform-origin":"50% 50%","-webkit-transform-origin":"50% 50%","-webkit-transform":i,position:"absolute"})};BOARD.text_display=function(n,t){var i=n,u="tile"+i+"_text",r=BOARD.get_tile_xy(i),f=BOARD.TILE_W;(i==1||i==BOARD.TILE_COL||i==BOARD.TILE_COL+BOARD.TILE_ROW-1||i==BOARD.TILE_COL+BOARD.TILE_ROW-1+BOARD.TILE_COL-1)&&(f=BOARD.TILE_H);util.draw_text_html(t,u,r.x,r.y,f,BOARD.TILE_H,BOARD.TILE_H,30,"center","black");i==1?util.rotate5050(u,r.rotate):i<BOARD.TILE_COL||(i==BOARD.TILE_COL?util.rotate5050(u,r.rotate):i<BOARD.TILE_COL+BOARD.TILE_ROW-1?util.rotate0100(u,r.rotate):i==BOARD.TILE_COL+BOARD.TILE_ROW-1?util.rotate5050(u,r.rotate):i<BOARD.TILE_COL+BOARD.TILE_ROW-1+BOARD.TILE_COL-1?util.rotate5050(u,r.rotate):i==BOARD.TILE_COL+BOARD.TILE_ROW-1+BOARD.TILE_COL-1?util.rotate5050(u,r.rotate):util.rotate100100(u,r.rotate))} 
BOARD.imagemap_get=function(){} 
BOARD.arrive_player=function(n){var t=PLAYER.info[n].location;util.log("player "+n+"가 "+PLAYER.info[n].location+"에 도착 했습니다. 사고팔고 하세요");switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.EDGE_START:BOARD.arrive_EDGE_START(n);break;case ENUM.TILE_TYPE.EDGE_ANGEL:BOARD.arrive_EDGE_ANGEL(n);break;case ENUM.TILE_TYPE.EDGE_ISLAND:BOARD.arrive_EDGE_ISLAND(n);break;case ENUM.TILE_TYPE.EDGE_GOTO:BOARD.arrive_EDGE_GOTO(n);break;case ENUM.TILE_TYPE.COUNTRY:BOARD.arrive_COUNTRY(n);break;case ENUM.TILE_TYPE.RESORT:BOARD.arrive_RESORT(n);break;case ENUM.TILE_TYPE.INVENTION:BOARD.arrive_INVENTION(n);break;case ENUM.TILE_TYPE.CHANCE:BOARD.arrive_CHANCE(n)}};BOARD.arrive_player_end=function(){(S_GAME.mode.online!=1||S_GAME.turn!=3)&&(S_GAME.timer.BOARD_arrive_player_end=setTimeout(function(){if(S_GAME.mode.online==1&&S_GAME.turn==1){var n=PLAYER.info[S_GAME.turn].location;DICE.double_onemore_flag==1?POPUP_CHANCE.index==3||POPUP_CHANCE.index==7||POPUP_CHANCE.index==10||n==19||n==28?(util.log("더블 했지만 턴 종료이니깐 메시지 보낸다.왔으니깐..."),WSS.send_change_turn()):util.log("더블 했어 한번 더 던질꺼니깐... CHANGE_TURN 메시지 안보냄!!"):WSS.send_change_turn()}S_GAME.change_turn()},800))};BOARD.arrive_EDGE_START=function(n){var t=CAL.get_start_arrived_gold(),i=n,r=t,u=TXT.get_star_arrived_gold+":"+t;util.notice_player_num(n,TXT.get_star_arrived_gold,t);util.log("[출발지점도착]: 월급수령 시작:"+t);PLAYER.info[n].rotate_num++;CAL.move_gold(0,i,r,u,function(){var r;if(util.log("[출발지점도착]: 월급수령 완료:"+t),r=CAL.get_zasan_value_of_player(n),r>0){var i=Math.floor(r*.1),u=n,f=i,e=TXT.get_star_arrived_tax+":"+i;util.notice_player_num(n,TXT.get_star_arrived_tax,i);util.log("[출발지점도착]: 세금받음(보유땅의10%):"+i);CAL.move_gold(0,u,f,e,function(){BOARD.arrive_EDGE_START_next(n)})}else BOARD.arrive_EDGE_START_next(n)})};BOARD.arrive_EDGE_START_next=function(n){var i=BOARD.get_num_player_got_country_for_develop(n),t;(S_GAME.mode.team==1&&(i=BOARD.get_num_player_got_country_team_for_develop(n)),S_GAME.mode.online!=1||S_GAME.turn!=3)&&(i>=1?(t=BOARD.get_index_player_got_country_for_develop(n),S_GAME.mode.team==1&&(t=BOARD.get_index_player_got_country_team_for_develop(n)),S_GAME.scene=ENUM.SCENE.EDGE_START,util.notice_player(n,TXT.select_country_for_dev),REMAINTIME.start(),SELECTTILE.init(n,t)):(S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_startedge_donate(),BOARD.arrive_EDGE_START_next_next(n)))};BOARD.arrive_EDGE_START_next_next=function(n){if(PLAYER.get_zasan_number1()==n){var r=CAL.get_donation_gold(n),t=Math.min(r,PLAYER.info[n].bougold),u=n,i=t,f=TXT.zasan1_donate+":"+t;util.notice_player_num(n,TXT.zasan1_donate,-t);util.log("[출발지점도착]: 자산1위 기부금 납부(자산의 5%:"+t);CAL.move_gold(u,0,i,f,function(){(BOARD.info[10].angel.gold_tot+=i,util.log("기부금갱신됨:"+BOARD.info[10].angel.gold_tot),BOARD.draw_angel_value(),S_GAME.mode.online!=1||S_GAME.turn!=3)&&BOARD.arrive_player_end()})}else{if(S_GAME.mode.online==1&&S_GAME.turn==3)return;BOARD.arrive_player_end()}};BOARD.arrive_EDGE_ANGEL=function(n){var t=PLAYER.info[n].location;POPUP_ANGEL.init()};BOARD.arrive_EDGE_ISLAND=function(n){var i;PLAYER.info[n].island_count++;switch(PLAYER.info[n].island_count){case 1:i={icon_fname:"./image/game/popup_island/p_island_icon.png",icon_x:390,icon_y:-100,line1_text:TXT.arrived_island,line2_text:TXT.island_3turn_stop,time:3e3};S_GAME.draw_message_icon(i,"popup1");S_GAME.timer.BOARD_arrive_EDGE_ISLAND=setTimeout(function(){$("#GA_message_icon").css({display:"none"}).empty();BOARD.arrive_player_end()},i.time);break;case 2:case 3:POPUP_ISLAND.init();break;case 4:PLAYER.info[n].island_count=0;var t=CAL.get_how_gold_exit_island(),r=n,u=t,f=TXT.island_enforce_exit_pay+":"+util.get_number_with_comma(t);util.notice_player(r,TXT.island_enforce_exit_pay,-t);util.log(n+"player 무인도 탈출비용 강제 지불:"+util.get_number_with_comma(t));util.enable_key(0,"BOARD.arrive_EDGE_ISLAND()에서  주사위 던질때 key 받지 않기 위해");CAL.move_gold(r,0,u,f,function(){DICE.throw()});break;default:console.error("감옥 count가 4 turn이상 오나? 초기화 시키는 부분 해라!")}};BOARD.arrive_EDGE_GOTO=function(n){if(BOARD.info[28].goto.check>0){PLAYER.info[n].goto_flag==0?(util.notice_box(TXT.not_use_airport_for_checking1,3),BOARD.arrive_player_end()):(util.notice_box(TXT.not_use_airport_for_checking2,3),PLAYER.info[n].goto_flag=0,util.enable_key(0,"BOARD.arrive_EDGE_GOTO()에서  주사위 던질때 key 받지 않기 위해"),DICE.throw());return}if(PLAYER.info[n].goto_flag==0)POPUP_GOTO.init();else{var t=n,u=CAL.get_goto_gold(),f=TXT.gogo_payment+":"+util.get_number_with_comma(u);if(util.log(f),util.notice_player_num(n,TXT.gogo_payment,-CAL.get_goto_gold()),S_GAME.mode.online==1&&S_GAME.turn==1){var i=PLAYER.info[S_GAME.turn].location,e=0,r=28;e=r>i?r-i:36-i+r;WSS.send_gotoedge(e)}PLAYER.info[n].bougold<=CAL.get_goto_gold()&&setTimeout(function(){PLAYER.info[n].pasan_flag==1&&S_GAME.winner==0&&BOARD.arrive_player_end()},3e3);CAL.move_gold(t,0,u,f,function(){var i,r;PLAYER.info[t].goto_flag=0;i={icon_fname:"./image/game/popup_goto/p_airport_airplane_"+PLAYER.get_color(t)+".png",icon_x:390,icon_y:-60,line1_text:TXT.goto_airplain_fly,line2_text:TXT.goto_select_tile,time:3e3};S_GAME.draw_message_icon(i,"popup1");setTimeout(function(){$("#GA_message_icon").css({display:"none"}).empty()},i.time);r=BOARD.get_index_player_goto(n);S_GAME.scene=ENUM.SCENE.EDGE_GOTO;SELECTTILE.init(n,r);SOUND.play_effect(SOUND.EFFECT.AIRPLANE_BELL);REMAINTIME.start()})}};BOARD.arrive_COUNTRY=function(n){var t=PLAYER.info[n].location,i=BOARD.info[t].country.owner,s=i==0?0:PLAYER.info[i].team,h=PLAYER.info[n].team,r,u,f,e,o;if(i==0)POPUP_BUYCOUNTRY.init();else if(i==S_GAME.turn||S_GAME.mode.team==1&&s==h){if(BOARD.info[t].country.dev_stage==ENUM.DEV_STAGE.DEV5){BOARD.arrive_player_end();return}BOARD.info[t].chance1_count>0&&(BOARD.info[t].chance1_count=0,util.log("정전해제함"),util.notice_player(n,TXT.chance1_release));POPUP_BUYCOUNTRY.init()}else{if(BOARD.info[t].chance1_count>0){util.log("정전이어서 통행료 내지 않음");util.notice_player(n,TXT.chance1_donotpay);BOARD.arrive_player_end();return}if(PLAYER.info[n].freepass_card>0){POPUP_FREEPASS.init(function(t){t=="패스권사용함"?BOARD.arrive_player_end():BOARD.arrive_COUNTRY_pass_gold_pay(n)});return}if(r=CAL.get_country_pass_gold(S_GAME.turn,t),PLAYER.info[S_GAME.turn].bougold<r){if(u=CAL.get_gold_all_zasan_sum_player(S_GAME.turn),f=PLAYER.info[S_GAME.turn].bougold+u,f<r){BOARD.arrive_COUNTRY_pass_gold_pay(n);return}e=r-PLAYER.info[S_GAME.turn].bougold;o=BOARD.arrive_COUNTRY_pass_gold_pay;POPUP_SELLABS.init(e,o);return}BOARD.arrive_COUNTRY_pass_gold_pay(n)}};BOARD.arrive_COUNTRY_pass_gold_pay=function(n){var t=PLAYER.info[n].location,i=CAL.get_country_pass_gold(S_GAME.turn,t),u=S_GAME.turn,f=BOARD.info[t].country.owner,e=i,r=eval("TXT.tile"+t+"_title ")+TXT.pass_gold+" "+TXT.pay+":"+i;PLAYER.info[n].bougold<i&&(r="<font color=red>"+r+" "+TXT.fail+"<\/font>");util.notice_player_num(u,TXT.pass_gold+" "+TXT.pay+" : "+eval("TXT.tile"+t+"_title "),-i);CAL.move_gold(u,f,e,r,function(){if(PLAYER.info[S_GAME.turn].pasan_flag==1){BOARD.arrive_player_end();return}POPUP_TAKEOVER.board_index=t;var n=POPUP_TAKEOVER.get_buygold(),i=BOARD.info[t].country.dev_stage;i==ENUM.DEV_STAGE.DEV5?BOARD.arrive_player_end():PLAYER.info[S_GAME.turn].bougold<n?(util.log("보유 골드가 부족하여 인수는 하지 않고 바로 게임 진행 함."),BOARD.arrive_player_end()):POPUP_TAKEOVER.init(function(){BOARD.arrive_player_end()})})};BOARD.arrive_RESORT=function(n){var t=PLAYER.info[n].location,r=BOARD.info[t].resort.owner,h=r==0?0:PLAYER.info[r].team,c=PLAYER.info[n].team,i,u,f,e,o,s;if(r==0)POPUP_RESORT.init();else if(r==S_GAME.turn||S_GAME.mode.team==1&&h==c)BOARD.info[t].resort.count++,BOARD.info[t].resort.gold_tot=BOARD.info[t].resort.gold_tot*2,BOARD.info[t].resort.gold_pass=BOARD.info[t].resort.gold_pass*2,BOARD.info[t].resort.count>=1&&(i="X "+Math.pow(2,BOARD.info[t].resort.count),BOARD.draw_tile_text(t,i)),i=TXT.revist_valueup,util.log("재방문으로 2배 가치 상승"),util.log("before 값어치:"+BOARD.info[t].resort.gold_tot/2),util.log("before 통행료:"+BOARD.info[t].resort.gold_pass/2),util.log("after 값어치:"+BOARD.info[t].resort.gold_tot),util.log("after 통행료:"+BOARD.info[t].resort.gold_pass),BOARD.info[t].chance1_count>0&&(BOARD.info[t].chance1_count=0,util.log("정전해제함"),i+="<br>"+TXT.chance1_release),util.notice_player(n,i),BOARD.arrive_player_end();else{if(PLAYER.info[n].freepass_card>0){POPUP_FREEPASS.init(function(t){t=="패스권사용함"?BOARD.arrive_player_end():BOARD.arrive_RESORT_pass_gold_pay(n)});return}if(u=BOARD.info[t].resort.gold_pass,PLAYER.info[S_GAME.turn].bougold<u&&(f=CAL.get_gold_all_zasan_sum_player(S_GAME.turn),e=PLAYER.info[S_GAME.turn].bougold+f,!(e<u))){o=u-PLAYER.info[S_GAME.turn].bougold;s=BOARD.arrive_RESORT_pass_gold_pay;POPUP_SELLABS.init(o,s);return}BOARD.arrive_RESORT_pass_gold_pay(n)}};BOARD.arrive_RESORT_pass_gold_pay=function(n){var t=PLAYER.info[n].location,i=BOARD.info[t].resort.gold_pass,r=S_GAME.turn,u=BOARD.info[t].resort.owner,f=i,e=eval("TXT.tile"+t+"_title ")+TXT.pass_gold+" "+TXT.pay+":"+i;util.notice_player_num(r,TXT.pass_gold+" "+TXT.pay+" : "+eval("TXT.tile"+t+"_title "),-i);CAL.move_gold(r,u,f,e,function(){BOARD.arrive_player_end()})};BOARD.arrive_INVENTION=function(n){var i=PLAYER.info[n].location,t,u,f,e,o;if(BOARD.info[i].invention.owner==0)POPUP_INVENTION.init(function(){BOARD.arrive_player_end()});else{var r=BOARD.info[i].invention.owner,s=r==0?0:PLAYER.info[r].team,h=PLAYER.info[n].team;if(r==n||S_GAME.mode.team==1&&s==h)BOARD.arrive_player_end();else{if(t=CAL.get_passgold_invention(i),PLAYER.info[n].bougold<t&&(u=CAL.get_gold_all_zasan_sum_player(n),f=PLAYER.info[n].bougold+u,!(f<t))){e=t-PLAYER.info[n].bougold;o=BOARD.arrive_INVENTION_pass_gold_pay;POPUP_SELLABS.init(e,o);return}BOARD.arrive_INVENTION_pass_gold_pay(n)}}};BOARD.arrive_INVENTION_pass_gold_pay=function(n){var t=PLAYER.info[n].location,i=CAL.get_passgold_invention(t),u=BOARD.info[t].invention.owner,f=n,e=u,o=i,r=TXT.pass_gold+" "+TXT.pay+"("+eval("TXT.tile"+t+"_title ")+")<br>-"+util.get_number_with_comma(i);util.notice_player_num(n,TXT.pass_gold+" "+TXT.pay+" : "+eval("TXT.tile"+t+"_title "),-i);util.log("[발명품 통행료지불]:"+r);CAL.move_gold(f,e,o,r,function(){BOARD.arrive_player_end()})};BOARD.arrive_CHANCE=function(){POPUP_CHANCE.init()} 
S_GAME.preload=function(){S_GAME.init_variable();var n=["./image/pvp/matching/p_match_ing_bg.png","./image/game/board/ga_bg"+S_GAME.map+".jpg","./image/game/board/ga_board_back"+S_GAME.map+".png","./image/game/board/1920x1080_blur.png","./image/game/board/focus/ga_tile_focus1.png","./image/game/board/focus/ga_tile_focus2.png","./image/game/board/focus/ga_tile_focus3.png","./image/game/board/focus/ga_tile_focus4.png","./image/game/board/focus/ga_tile_focus5.png","./image/game/board/focus/ga_tile_focus6.png","./image/game/board/focus/ga_tile_focus7.png","./image/game/board/object/mono_city_blue.png","./image/game/board/object/mono_city_green.png","./image/game/board/object/mono_city_red.png","./image/game/board/object/mono_city_yellow.png","./image/game/board/object/mono_factory_blue.png","./image/game/board/object/mono_factory_green.png","./image/game/board/object/mono_factory_red.png","./image/game/board/object/mono_factory_yellow.png","./image/game/board/object/mono_farm_blue.png","./image/game/board/object/mono_farm_green.png","./image/game/board/object/mono_farm_red.png","./image/game/board/object/mono_farm_yellow.png","./image/game/board/object/mono_land_blue.png","./image/game/board/object/mono_land_green.png","./image/game/board/object/mono_land_red.png","./image/game/board/object/mono_land_yellow.png","./image/game/board/object/mono_landmark2_blue.png","./image/game/board/object/mono_landmark2_green.png","./image/game/board/object/mono_landmark2_red.png","./image/game/board/object/mono_landmark2_yellow.png","./image/game/board/object/mono_landmark4_blue.png","./image/game/board/object/mono_landmark4_green.png","./image/game/board/object/mono_landmark4_red.png","./image/game/board/object/mono_landmark4_yellow.png","./image/game/board/object/mono_landmark5_blue.png","./image/game/board/object/mono_landmark5_green.png","./image/game/board/object/mono_landmark5_red.png","./image/game/board/object/mono_landmark5_yellow.png","./image/game/board/object/mono_landmark7_blue.png","./image/game/board/object/mono_landmark7_green.png","./image/game/board/object/mono_landmark7_red.png","./image/game/board/object/mono_landmark7_yellow.png","./image/game/board/object/mono_landmark9_blue.png","./image/game/board/object/mono_landmark9_green.png","./image/game/board/object/mono_landmark9_red.png","./image/game/board/object/mono_landmark9_yellow.png","./image/game/board/object/mono_landmark11_blue.png","./image/game/board/object/mono_landmark11_green.png","./image/game/board/object/mono_landmark11_red.png","./image/game/board/object/mono_landmark11_yellow.png","./image/game/board/object/mono_landmark13_blue.png","./image/game/board/object/mono_landmark13_green.png","./image/game/board/object/mono_landmark13_red.png","./image/game/board/object/mono_landmark13_yellow.png","./image/game/board/object/mono_landmark14_blue.png","./image/game/board/object/mono_landmark14_green.png","./image/game/board/object/mono_landmark14_red.png","./image/game/board/object/mono_landmark14_yellow.png","./image/game/board/object/mono_landmark16_blue.png","./image/game/board/object/mono_landmark16_green.png","./image/game/board/object/mono_landmark16_red.png","./image/game/board/object/mono_landmark16_yellow.png","./image/game/board/object/mono_landmark18_blue.png","./image/game/board/object/mono_landmark18_green.png","./image/game/board/object/mono_landmark18_red.png","./image/game/board/object/mono_landmark18_yellow.png","./image/game/board/object/mono_landmark21_blue.png","./image/game/board/object/mono_landmark21_green.png","./image/game/board/object/mono_landmark21_red.png","./image/game/board/object/mono_landmark21_yellow.png","./image/game/board/object/mono_landmark22_blue.png","./image/game/board/object/mono_landmark22_green.png","./image/game/board/object/mono_landmark22_red.png","./image/game/board/object/mono_landmark22_yellow.png","./image/game/board/object/mono_landmark23_blue.png","./image/game/board/object/mono_landmark23_green.png","./image/game/board/object/mono_landmark23_red.png","./image/game/board/object/mono_landmark23_yellow.png","./image/game/board/object/mono_landmark25_blue.png","./image/game/board/object/mono_landmark25_green.png","./image/game/board/object/mono_landmark25_red.png","./image/game/board/object/mono_landmark25_yellow.png","./image/game/board/object/mono_landmark27_blue.png","./image/game/board/object/mono_landmark27_green.png","./image/game/board/object/mono_landmark27_red.png","./image/game/board/object/mono_landmark27_yellow.png","./image/game/board/object/mono_landmark29_blue.png","./image/game/board/object/mono_landmark29_green.png","./image/game/board/object/mono_landmark29_red.png","./image/game/board/object/mono_landmark29_yellow.png","./image/game/board/object/mono_landmark31_blue.png","./image/game/board/object/mono_landmark31_green.png","./image/game/board/object/mono_landmark31_red.png","./image/game/board/object/mono_landmark31_yellow.png","./image/game/board/object/mono_landmark32_blue.png","./image/game/board/object/mono_landmark32_green.png","./image/game/board/object/mono_landmark32_red.png","./image/game/board/object/mono_landmark32_yellow.png","./image/game/board/object/mono_landmark34_blue.png","./image/game/board/object/mono_landmark34_green.png","./image/game/board/object/mono_landmark34_red.png","./image/game/board/object/mono_landmark34_yellow.png","./image/game/board/object/mono_landmark36_blue.png","./image/game/board/object/mono_landmark36_green.png","./image/game/board/object/mono_landmark36_red.png","./image/game/board/object/mono_landmark36_yellow.png","./image/game/board/tile/ENG/ga_tile1.png","./image/game/board/tile/ENG/ga_tile2.png","./image/game/board/tile/ENG/ga_tile3.png","./image/game/board/tile/ENG/ga_tile4.png","./image/game/board/tile/ENG/ga_tile5.png","./image/game/board/tile/ENG/ga_tile6.png","./image/game/board/tile/ENG/ga_tile7.png","./image/game/board/tile/ENG/ga_tile8.png","./image/game/board/tile/ENG/ga_tile9.png","./image/game/board/tile/ENG/ga_tile10.png","./image/game/board/tile/ENG/ga_tile11.png","./image/game/board/tile/ENG/ga_tile12.png","./image/game/board/tile/ENG/ga_tile13.png","./image/game/board/tile/ENG/ga_tile14.png","./image/game/board/tile/ENG/ga_tile15.png","./image/game/board/tile/ENG/ga_tile16.png","./image/game/board/tile/ENG/ga_tile17.png","./image/game/board/tile/ENG/ga_tile18.png","./image/game/board/tile/ENG/ga_tile19.png","./image/game/board/tile/ENG/ga_tile20.png","./image/game/board/tile/ENG/ga_tile21.png","./image/game/board/tile/ENG/ga_tile22.png","./image/game/board/tile/ENG/ga_tile23.png","./image/game/board/tile/ENG/ga_tile24.png","./image/game/board/tile/ENG/ga_tile25.png","./image/game/board/tile/ENG/ga_tile26.png","./image/game/board/tile/ENG/ga_tile27.png","./image/game/board/tile/ENG/ga_tile28.png","./image/game/board/tile/ENG/ga_tile29.png","./image/game/board/tile/ENG/ga_tile30.png","./image/game/board/tile/ENG/ga_tile31.png","./image/game/board/tile/ENG/ga_tile32.png","./image/game/board/tile/ENG/ga_tile33.png","./image/game/board/tile/ENG/ga_tile34.png","./image/game/board/tile/ENG/ga_tile35.png","./image/game/board/tile/ENG/ga_tile36.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_2.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_4.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_5.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_7.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_9.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_11.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_13.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_14.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_16.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_18.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_21.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_22.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_23.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_25.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_27.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_29.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_31.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_32.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_34.png","./image/game/board/tile/out/"+S_GAME.map+"/tileout_36.png","./image/game/char/char1.png","./image/game/char/char1_icon.png","./image/game/char/char2.png","./image/game/char/char2_icon.png","./image/game/char/char3.png","./image/game/char/char3_icon.png","./image/game/char/char4.png","./image/game/char/char4_icon.png","./image/game/char/p_match_char1.png","./image/game/char/p_match_char2.png","./image/game/char/p_match_char3.png","./image/game/char/p_match_char4.png","./image/game/dice/dice1.png","./image/game/dice/dice2.png","./image/game/dice/dice3.png","./image/game/dice/dice4.png","./image/game/dice/dice5.png","./image/game/dice/dice6.png","./image/game/dice/p_diceresult_bg.png","./image/game/dice/red_dice1.png","./image/game/dice/red_dice2.png","./image/game/dice/red_dice3.png","./image/game/dice/red_dice4.png","./image/game/dice/red_dice5.png","./image/game/dice/red_dice6.png","./image/game/popup_angel/p_donation_bg.png","./image/game/popup_angel/p_donation_title"+util.get_postfix_lang()+".png","./image/game/popup_buycountry/p_buyland_bg.png","./image/game/popup_buycountry/p_buyland_bt.png","./image/game/popup_buycountry/p_buyland_bt_cantbuy"+util.get_postfix_lang()+".png","./image/game/popup_buycountry/p_buyland_bt_complete"+util.get_postfix_lang()+".png","./image/game/popup_buycountry/p_buyland_bt_f.png","./image/game/popup_buycountry/p_buyland_checkbox.png","./image/game/popup_buycountry/p_buyland_checkbox_select.png","./image/game/popup_buycountry/p_buyland_colorbox_black.png","./image/game/popup_buycountry/p_buyland_colorbox_blue.png","./image/game/popup_buycountry/p_buyland_colorbox_darkred.png","./image/game/popup_buycountry/p_buyland_colorbox_green.png","./image/game/popup_buycountry/p_buyland_colorbox_none.png","./image/game/popup_buycountry/p_buyland_colorbox_orange.png","./image/game/popup_buycountry/p_buyland_colorbox_purple.png","./image/game/popup_buycountry/p_buyland_colorbox_red.png","./image/game/popup_buycountry/p_buyland_colorbox_resortblue.png","./image/game/popup_buycountry/p_buyland_colorbox_skyblue.png","./image/game/popup_buycountry/p_buyland_colorbox_yellow.png","./image/game/popup_buycountry/p_buyland_goldicon.png","./image/game/popup_buycountry/p_buyland_icon_step1_blue.png","./image/game/popup_buycountry/p_buyland_icon_step1_green.png","./image/game/popup_buycountry/p_buyland_icon_step1_red.png","./image/game/popup_buycountry/p_buyland_icon_step1_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step2_blue.png","./image/game/popup_buycountry/p_buyland_icon_step2_green.png","./image/game/popup_buycountry/p_buyland_icon_step2_red.png","./image/game/popup_buycountry/p_buyland_icon_step2_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step3_blue.png","./image/game/popup_buycountry/p_buyland_icon_step3_green.png","./image/game/popup_buycountry/p_buyland_icon_step3_red.png","./image/game/popup_buycountry/p_buyland_icon_step3_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step4_blue.png","./image/game/popup_buycountry/p_buyland_icon_step4_green.png","./image/game/popup_buycountry/p_buyland_icon_step4_red.png","./image/game/popup_buycountry/p_buyland_icon_step4_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_2_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_2_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_2_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_2_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_4_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_4_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_4_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_4_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_5_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_5_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_5_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_5_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_7_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_7_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_7_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_7_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_9_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_9_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_9_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_9_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_11_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_11_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_11_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_11_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_13_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_13_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_13_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_13_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_14_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_14_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_14_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_14_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_16_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_16_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_16_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_16_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_18_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_18_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_18_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_18_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_21_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_21_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_21_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_21_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_22_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_22_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_22_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_22_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_23_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_23_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_23_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_23_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_25_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_25_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_25_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_25_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_27_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_27_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_27_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_27_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_29_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_29_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_29_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_29_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_31_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_31_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_31_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_31_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_32_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_32_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_32_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_32_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_34_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_34_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_34_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_34_yellow.png","./image/game/popup_buycountry/p_buyland_icon_step5_36_blue.png","./image/game/popup_buycountry/p_buyland_icon_step5_36_green.png","./image/game/popup_buycountry/p_buyland_icon_step5_36_red.png","./image/game/popup_buycountry/p_buyland_icon_step5_36_yellow.png","./image/game/popup_buycountry/p_flag_2.png","./image/game/popup_buycountry/p_flag_4.png","./image/game/popup_buycountry/p_flag_5.png","./image/game/popup_buycountry/p_flag_7.png","./image/game/popup_buycountry/p_flag_9.png","./image/game/popup_buycountry/p_flag_11.png","./image/game/popup_buycountry/p_flag_13.png","./image/game/popup_buycountry/p_flag_14.png","./image/game/popup_buycountry/p_flag_16.png","./image/game/popup_buycountry/p_flag_18.png","./image/game/popup_buycountry/p_flag_21.png","./image/game/popup_buycountry/p_flag_22.png","./image/game/popup_buycountry/p_flag_23.png","./image/game/popup_buycountry/p_flag_25.png","./image/game/popup_buycountry/p_flag_27.png","./image/game/popup_buycountry/p_flag_29.png","./image/game/popup_buycountry/p_flag_31.png","./image/game/popup_buycountry/p_flag_32.png","./image/game/popup_buycountry/p_flag_34.png","./image/game/popup_buycountry/p_flag_36.png","./image/game/popup_chance/p_surprise_bg.png","./image/game/popup_chance/p_surprise_freepass_bg.png","./image/game/popup_chance/p_surprise_motion1.png","./image/game/popup_chance/p_surprise_motion2.png","./image/game/popup_chance/p_surprise_motion3.png","./image/game/popup_chance/p_surprise_motion4.png","./image/game/popup_chance/p_surprise_motion5.png","./image/game/popup_chance/p_surprise_motion6.png","./image/game/popup_chance/p_surprise_motion7.png","./image/game/popup_chance/p_surprise_motion8.png","./image/game/popup_chance/p_surprise_motion9.png","./image/game/popup_chance/p_surprise_motion10.png","./image/game/popup_chance/p_surprise_motion11.png","./image/game/popup_chance/p_surprise_motion12.png","./image/game/popup_chance/p_surprise_motion13.png","./image/game/popup_chance/p_surprise_motion14.png","./image/game/popup_chance/p_surprise_motion15.png","./image/game/popup_chance/p_surprise_motion16.png","./image/game/popup_chance/p_surprise_motion17.png","./image/game/popup_chance/p_surprise_motion18.png","./image/game/popup_chance/p_surprise_motion19.png","./image/game/popup_chance/p_surprise_okbt.png","./image/game/popup_chance/p_surprise_okbt_focus.png","./image/game/popup_chance/p_surprise_tilefocus1.png","./image/game/popup_chance/p_surprise_tilefocus2.png","./image/game/popup_chance/p_surprise_tilefocus3.png","./image/game/popup_chance/p_surprise_tilefocus4.png","./image/game/popup_chance/p_surprise_title1"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title2"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title3"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title4"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title5"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title6"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title7"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title8"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title9"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title10"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title11"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title12"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title13"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title14"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title15"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title16"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title17"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title18"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title19"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title20"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title21"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title22"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title23"+util.get_postfix_lang()+".png","./image/game/popup_chance/p_surprise_title24"+util.get_postfix_lang()+".png","./image/game/popup_common/p_common_bt.png","./image/game/popup_common/p_common_bt_70.png","./image/game/popup_common/p_common_bt_70_f.png","./image/game/popup_common/p_common_bt_90.png","./image/game/popup_common/p_common_bt_90_f.png","./image/game/popup_common/p_common_bt_f.png","./image/game/popup_common/p_common_bt1.png","./image/game/popup_common/p_common_bt1_70.png","./image/game/popup_common/p_common_bt1_90.png","./image/game/popup_common/p_common_bt2.png","./image/game/popup_common/p_common_bt2_70.png","./image/game/popup_common/p_common_bt2_90.png","./image/game/popup_common/p_common_popup.png","./image/game/popup_goto/p_airport_airplane_blue.png","./image/game/popup_goto/p_airport_airplane_green.png","./image/game/popup_goto/p_airport_airplane_red.png","./image/game/popup_goto/p_airport_airplane_yellow.png","./image/game/popup_goto/p_airport_bg_blue.png","./image/game/popup_goto/p_airport_bg_green.png","./image/game/popup_goto/p_airport_bg_red.png","./image/game/popup_goto/p_airport_bg_yellow.png","./image/game/popup_invention/p_invention_bg.png","./image/game/popup_invention/p_invention_content_bar.png","./image/game/popup_invention/p_invention_icon3.png","./image/game/popup_invention/p_invention_icon12.png","./image/game/popup_invention/p_invention_icon20.png","./image/game/popup_invention/p_invention_icon35.png","./image/game/popup_invention/p_invention_title3"+util.get_postfix_lang()+".png","./image/game/popup_invention/p_invention_title12"+util.get_postfix_lang()+".png","./image/game/popup_invention/p_invention_title20"+util.get_postfix_lang()+".png","./image/game/popup_invention/p_invention_title35"+util.get_postfix_lang()+".png","./image/game/popup_island/p_island_bg.png","./image/game/popup_island/p_island_dicerollbt.png","./image/game/popup_island/p_island_dicerollbt_focus.png","./image/game/popup_island/p_island_exitbt.png","./image/game/popup_island/p_island_exitbt_focus.png","./image/game/popup_island/p_island_icon.png","./image/game/popup_island/p_island_title"+util.get_postfix_lang()+".png","./image/game/popup_joinnum/p_getstart_title"+util.get_postfix_lang()+".png","./image/game/popup_joinnum/p_select_char_title"+util.get_postfix_lang()+".png","./image/game/popup_joinnum/p_team_ai.png","./image/game/popup_joinnum/p_team_ai_bt_f.png","./image/game/popup_joinnum/p_team_ai_bt_off.png","./image/game/popup_joinnum/p_team_ai_bt_on.png","./image/game/popup_joinnum/p_joinnum_bg.png","./image/game/popup_joinnum/p_joinnum_titletxt"+util.get_postfix_lang()+".png","./image/game/popup_joinnum/p_joinnum_startbt.png","./image/game/popup_joinnum/p_joinnum_startbt_text"+util.get_postfix_lang()+".png","./image/game/popup_joinnum/p_joinnum_startbt_f.png","./image/game/popup_joinnum/p_joinnum_exitbt.png","./image/game/popup_joinnum/p_maketeam_info.png","./image/game/popup_joinnum/p_joinnum_player_bg.png","./image/game/popup_joinnum/p_joinnum_ai_bg.png","./image/game/popup_joinnum/p_joinnum_up_bt.png","./image/game/popup_joinnum/p_joinnum_updown_bt_focus.png","./image/game/popup_joinnum/p_joinnum_down_bt.png","./image/game/popup_joinnum/p_joinnum_all_bg.png","./image/game/popup_selectsun/p_number_common_card.png","./image/game/popup_myturn/p_myturn_bg.png","./image/game/popup_myturn/p_myturn_bg_blue.png","./image/game/popup_myturn/p_myturn_bg_green.png","./image/game/popup_myturn/p_myturn_bg_red.png","./image/game/popup_myturn/p_myturn_bg_yellow.png","./image/game/popup_myturn/p_myturn_buildingsalesbt.png","./image/game/popup_myturn/p_myturn_buildingsalesbt_f.png","./image/game/popup_myturn/p_myturn_dicerollbt.png","./image/game/popup_myturn/p_myturn_dicerollbt_f.png","./image/game/popup_myturn/p_myturn_titletxt"+util.get_postfix_lang()+".png","./image/game/popup_resort/p_resort_bg.png","./image/game/popup_resort/p_resort_goldicon.png","./image/game/popup_resort/p_resort_title6"+util.get_postfix_lang()+".png","./image/game/popup_resort/p_resort_title15"+util.get_postfix_lang()+".png","./image/game/popup_resort/p_resort_title24"+util.get_postfix_lang()+".png","./image/game/popup_resort/p_resort_title30"+util.get_postfix_lang()+".png","./image/game/popup_selectchar/p_char_blue.png","./image/game/popup_selectchar/p_char_choose_bg.png","./image/game/popup_selectchar/p_char_choose_title"+util.get_postfix_lang()+".png","./image/game/popup_selectchar/p_char_green.png","./image/game/popup_selectchar/p_char_red.png","./image/game/popup_selectchar/p_char_yellow.png","./image/game/popup_selectchar/p_charbt_dim.png","./image/game/popup_selectchar/p_charbt_f.png","./image/game/popup_selectchar/p_charbt1.png","./image/game/popup_selectchar/p_charbt2.png","./image/game/popup_selectchar/p_charbt3.png","./image/game/popup_selectchar/p_charbt4.png","./image/game/popup_selectsun/p_number_card1.png","./image/game/popup_selectsun/p_number_card2.png","./image/game/popup_selectsun/p_number_card3.png","./image/game/popup_selectsun/p_number_card4.png","./image/game/popup_selectsun/p_number_card5.png","./image/game/popup_selectsun/p_number_card6.png","./image/game/popup_selectsun/p_number_common_card.png","./image/game/popup_selectsun/p_number_common_card_focus.png","./image/game/popup_sellabs/bigtile3.png","./image/game/popup_sellabs/bigtile6.png","./image/game/popup_sellabs/bigtile12.png","./image/game/popup_sellabs/bigtile15.png","./image/game/popup_sellabs/bigtile20.png","./image/game/popup_sellabs/bigtile24.png","./image/game/popup_sellabs/bigtile30.png","./image/game/popup_sellabs/bigtile35.png","./image/game/popup_sellabs/p_bankruptcy_bg.png","./image/game/popup_sellabs/p_bankruptcy_char1.png","./image/game/popup_sellabs/p_bankruptcy_char2.png","./image/game/popup_sellabs/p_bankruptcy_char3.png","./image/game/popup_sellabs/p_bankruptcy_char4.png","./image/game/popup_sellabs/p_bankruptcy_dim_left"+util.get_postfix_lang()+".png","./image/game/popup_sellabs/p_bankruptcy_dim_right"+util.get_postfix_lang()+".png","./image/game/popup_sellabs/p_bankruptcy_namebar_blue.png","./image/game/popup_sellabs/p_bankruptcy_namebar_green.png","./image/game/popup_sellabs/p_bankruptcy_namebar_red.png","./image/game/popup_sellabs/p_bankruptcy_namebar_yellow.png","./image/game/popup_sellabs/p_bankruptcy_reason"+util.get_postfix_lang()+".png","./image/game/popup_sellabs/p_common_bt_90_dim.png","./image/game/popup_sellabs/p_sale_bg.png","./image/game/popup_sellabs/p_sale_tile_check.png","./image/game/popup_sellcountry/p_sellland_bg.png","./image/game/popup_sellcountry/p_sellland_icon_step1_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step1_green.png","./image/game/popup_sellcountry/p_sellland_icon_step1_red.png","./image/game/popup_sellcountry/p_sellland_icon_step1_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step2_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step2_green.png","./image/game/popup_sellcountry/p_sellland_icon_step2_red.png","./image/game/popup_sellcountry/p_sellland_icon_step2_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step3_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step3_green.png","./image/game/popup_sellcountry/p_sellland_icon_step3_red.png","./image/game/popup_sellcountry/p_sellland_icon_step3_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step4_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step4_green.png","./image/game/popup_sellcountry/p_sellland_icon_step4_red.png","./image/game/popup_sellcountry/p_sellland_icon_step4_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_2_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_2_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_2_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_2_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_4_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_4_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_4_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_4_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_5_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_5_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_5_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_5_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_7_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_7_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_7_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_7_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_9_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_9_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_9_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_9_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_11_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_11_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_11_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_11_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_13_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_13_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_13_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_13_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_14_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_14_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_14_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_14_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_16_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_16_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_16_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_16_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_18_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_18_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_18_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_18_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_21_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_21_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_21_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_21_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_22_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_22_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_22_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_22_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_23_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_23_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_23_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_23_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_25_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_25_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_25_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_25_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_27_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_27_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_27_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_27_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_29_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_29_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_29_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_29_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_31_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_31_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_31_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_31_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_32_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_32_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_32_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_32_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_34_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_34_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_34_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_34_yellow.png","./image/game/popup_sellcountry/p_sellland_icon_step5_36_blue.png","./image/game/popup_sellcountry/p_sellland_icon_step5_36_green.png","./image/game/popup_sellcountry/p_sellland_icon_step5_36_red.png","./image/game/popup_sellcountry/p_sellland_icon_step5_36_yellow.png","./image/game/popup_setting/p_stop_bt.png","./image/game/popup_setting/p_stop_bt_focus.png","./image/game/popup_setting/p_stop_menu_bt_f.png","./image/game/popup_setting/p_stop_menu_sound_background_off_bt.png","./image/game/popup_setting/p_stop_menu_sound_background_on_bt.png","./image/game/popup_setting/p_stop_menu_sound_effect_off_bt.png","./image/game/popup_setting/p_stop_menu_sound_effect_on_bt.png","./image/game/popup_takeover/p_takeover_bg.png","./image/game/popup_takeover/p_takeover_bt_cantbuy"+util.get_postfix_lang()+".png","./image/game/popup_takeover/p_takeover_bt_complete"+util.get_postfix_lang()+".png","./image/game/ui/co_timebar.png","./image/game/ui/co_timebar_gauge.png","./image/game/ui/ga_userbox_timebar.png","./image/game/ui/ga_userbox1.png","./image/game/ui/ga_userbox2.png","./image/game/ui/ga_userbox3.png","./image/game/ui/ga_userbox4.png","./image/game/ui/game_start_title.png","./image/game/ui/p_airport_cant_use_bg.png","./image/game/ui/p_coin1.png","./image/game/ui/p_coin2.png","./image/game/ui/p_coin3.png","./image/game/ui/p_coin4.png","./image/game/ui/p_coin5.png","./image/game/ui/p_common_alarm.png","./image/game/ui/p_donation_how_bg.png","./image/game/ui/p_economic_down_popup.png","./image/game/ui/p_economic_downicon"+util.get_postfix_lang()+".png","./image/game/ui/p_economic_up_popup.png","./image/game/ui/p_economic_upicon"+util.get_postfix_lang()+".png","./image/game/ui/p_ownflag_blue.png","./image/game/ui/p_ownflag_green.png","./image/game/ui/p_ownflag_red.png","./image/game/ui/p_ownflag_yellow.png","./image/game/ui/p_rank_bt_blue.png","./image/game/ui/p_rank_bt_green.png","./image/game/ui/p_rank_bt_red.png","./image/game/ui/p_rank_bt_yellow.png","./image/game/ui/p_roll_goal_big.png","./image/game/ui/p_roll_goal_left.png","./image/game/ui/p_roll_goal_right.png","./image/game/ui/p_stop_bt.png","./image/game/ui/p_stop_bt_focus.png","./image/game/ui/p_surprise_card.png","./image/game/ui/p_surprise_player_focus1.png","./image/game/ui/p_surprise_player_focus2.png","./image/game/ui/p_talk_bg1.png","./image/game/ui/p_talk_bg2.png","./image/game/ui/p_team_userbox_blue.png","./image/game/ui/p_team_userbox_red.png","./image/game/ui/p_teamicon_a.png","./image/game/ui/p_teamicon_a_left.png","./image/game/ui/p_teamicon_a_right.png","./image/game/ui/p_teamicon_b.png","./image/game/ui/p_teamicon_b_left.png","./image/game/ui/p_teamicon_b_right.png","./image/game/ui/p_teamicon_c.png","./image/game/ui/p_teamicon_c_left.png","./image/game/ui/p_teamicon_c_right.png","./image/game/ui/p_teamicon_d.png","./image/game/ui/p_teamicon_d_left.png","./image/game/ui/p_teamicon_d_right.png","./image/game/ui/turn_blue.png","./image/game/ui/turn_green.png","./image/game/ui/turn_red.png","./image/game/ui/turn_yellow.png","",];ChangeScene.image_preload(n)};S_GAME.preload_add_enemy=function(n){var u,o,f,t,i,e,r;switch(glo.scene.cur){case glo.S.DAYTRY:u=S_SELECTSTAGE_POPUP.find_enemy(901);break;case glo.S.PROOFTOP:u=S_SELECTSTAGE_POPUP.find_enemy(902);break;case glo.S.PVP_MATCHING:u=S_SELECTSTAGE_POPUP.find_enemy(S_GAME.stage);break;case glo.S.SELECTSTAGE_POPUP:default:u=S_SELECTSTAGE_POPUP.find_enemy(S_SELECTSTAGE.map_focus)}for(o=u.length-1,f=1;f<=o;f++)if(t=u[f].bunho,glo.platform!=glo.PLATFORM.AZE||!(t>40)){for(i=ENEMY[t].MOVE_FRAME.UP,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_up"+j+".png",n.push(r);for(i=ENEMY[t].MOVE_FRAME.DOWN,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_down"+j+".png",n.push(r);for(i=ENEMY[t].MOVE_FRAME.LEFT,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_left"+j+".png",n.push(r);for(i=ENEMY[t].ATTACK_FRAME,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_attack"+j+".png",n.push(r);for(i=ENEMY[t].DEATH_FRAME,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_death"+j+".png",n.push(r);for(i=ENEMY[t].ATTACK_WAIT_FRAME,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_wait"+j+".png",n.push(r);if(ENEMY[t].FIRE!=null)for(i=ENEMY[t].FIRE.FRAME,j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/enemy"+t+"_fire"+j+".png",n.push(r);i=0;e="";switch(t){case 49:i=8;e="enemy49_attack_effect"}for(j=1;j<=i;j++)r="./image/game/char/enemy"+t+"/"+e+j+".png",n.push(r)}};S_GAME.preload_add_tower=function(n){for(var i,t,e=1;e<=5;e++)if(STORAGE.tower_selected[e]!=0){var o=STORAGE.tower_selected[e],r=S_GAME.tower_get_obj(o),f=S_GAME.tower_get_grade(o),u=o%1e3;if(u=Math.floor((u-1)/3)*3+1,t=r.TOWER_FNAME,n.push(t),r.CHAR!=null){for(i=r.CHAR.ATTACK_FRAME,j=1;j<=i;j++)t="./image/game/tower/tower_"+f+"/"+u+"/ally_down_attack"+j+".png",n.push(t),t="./image/game/tower/tower_"+f+"/"+u+"/ally_up_attack"+j+".png",n.push(t);for(i=r.CHAR.WAIT_FRAME,j=1;j<=i;j++)t="./image/game/tower/tower_"+f+"/"+u+"/ally_down_wait"+j+".png",n.push(t),t="./image/game/tower/tower_"+f+"/"+u+"/ally_up_wait"+j+".png",n.push(t)}if(r.FIRE!=null)for(i=r.FIRE.FRAME,j=1;j<=i;j++)t="./image/game/tower/tower_"+f+"/"+u+"/ally_fire"+j+".png",n.push(t);if(r.ALLY!=null){for(i=r.ALLY.MOVE_FRAME.LEFT,j=1;j<=i;j++)t="./image/game/tower/tower_"+f+"/"+u+"/ally_left"+j+".png",n.push(t);for(i=r.ALLY.ATTACK_FRAME,j=1;j<=i;j++)t="./image/game/tower/tower_"+f+"/"+u+"/ally_attack"+j+".png",n.push(t);for(i=r.ALLY.WAIT_FRAME,j=1;j<=i;j++)t="./image/game/tower/tower_"+f+"/"+u+"/ally_wait"+j+".png",n.push(t)}}};S_GAME.preload_add_hero=function(n){var e,f,r,i,o;if(STORAGE.hero_selected!=0)for(e=1,f=1;f<=e;f++){var u=STORAGE.hero_selected,t=Math.floor((u-1)/3)*3+1,i=HERO[u].MOVE_FRAME.LEFT;for(j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_left"+j+".png",n.push(r);for(i=HERO[u].ATTACK_FRAME,j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_attack"+j+".png",n.push(r);for(i=HERO[u].DEATH_FRAME,j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_death"+j+".png",n.push(r);for(i=HERO[u].WAIT_FRAME,j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_wait"+j+".png",n.push(r);if(HERO[u].FIRE!=null)for(i=HERO[u].FIRE.FRAME,j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_fire"+j+".png",n.push(r);if(HERO[u].ULTRA!=null){for(i=HERO[u].ULTRA.ATTACK_FRAME,j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_fever_attack"+j+".png",n.push(r);if(HERO[u].ULTRA.FIRE!=null)for(i=HERO[u].ULTRA.FIRE.FRAME,j=1;j<=i;j++)r="./image/game/char/hero"+t+"/hero"+t+"_fever_fire"+j+".png",n.push(r)}i=0;o="";switch(t){case 4:n.push("./image/game/char/hero"+t+"/fever_back1.png");n.push("./image/game/char/hero"+t+"/fever_back2.png");n.push("./image/game/char/hero"+t+"/fever_back3.png");n.push("./image/game/char/hero"+t+"/fever_back4.png");n.push("./image/game/char/hero"+t+"/fever_back5.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect1.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect2.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect3.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect4.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect5.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_fever_effect1.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_fever_effect2.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_fever_effect3.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_fever_effect4.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_fever_effect5.png");break;case 7:n.push("./image/game/char/hero"+t+"/fever_back1.png");n.push("./image/game/char/hero"+t+"/fever_back2.png");n.push("./image/game/char/hero"+t+"/fever_back3.png");n.push("./image/game/char/hero"+t+"/fever_back4.png");n.push("./image/game/char/hero"+t+"/fever_back5.png");break;case 10:n.push("./image/game/char/hero"+t+"/fever_back1.png");n.push("./image/game/char/hero"+t+"/fever_back2.png");n.push("./image/game/char/hero"+t+"/fever_back3.png");n.push("./image/game/char/hero"+t+"/fever_back4.png");n.push("./image/game/char/hero"+t+"/fever_back5.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect1.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect2.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect3.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect4.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effect5.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb1.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb2.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb3.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb4.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb5.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb6.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb7.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb8.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb9.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb10.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb11.png");n.push("./image/game/char/hero"+t+"/hero"+t+"_effectb12.png");break;case 13:n.push("./image/game/char/hero"+t+"/fever_back1.png");n.push("./image/game/char/hero"+t+"/fever_back2.png");n.push("./image/game/char/hero"+t+"/fever_back3.png");n.push("./image/game/char/hero"+t+"/fever_back4.png");n.push("./image/game/char/hero"+t+"/fever_back5.png")}}};var PRELOAD_ERROR=[];PRELOAD_ERROR.push("empty");S_GAME.preload_err_insert=function(n){for(var i=PRELOAD_ERROR.length-1,t=1;t<=i;t++)if(PRELOAD_ERROR[t]==n)return;PRELOAD_ERROR.push(n)};S_GAME.preload_err_exist=function(n){for(var i=PRELOAD_ERROR.length-1,t=1;t<=i;t++)if(PRELOAD_ERROR[t].indexOf(n)!=-1)return!0;return!1};S_GAME.preload_err_delete=function(n){for(var i,r,u=n.length-1,t=1;t<=u;t++)i=n[t],r=i.substr(1),S_GAME.preload_err_exist(r)&&delete S_GAME.canvas_preload[i];PRELOAD_ERROR=[];PRELOAD_ERROR.push("empty")} 
var USER={lang:LANG.KOREA,sound_bgm:1,sound_effect:1,grade:6};USER.init=function(){} 
var PLAYER={info:null,XY:[{},{x:1431,y:926},{x:-5,y:926},{x:-5,y:30},{x:1431,y:30},]};PLAYER.init=function(){PLAYER.info=[];for(var n=0;n<=4;n++)PLAYER.info[n]={},PLAYER.init_i(n)};PLAYER.init_i=function(n){var t={type:ENUM.PLAYER_TYPE.NONE,char_bunho:0,uniq_id:null,name:null,location:0,double_num:0,island_count:0,goto_flag:0,bougold:0,totzasan:0,defence_card:0,freepass_card:0,turn_count:0,rotate_num:0,pasan_flag:0,team:0};PLAYER.info[n]=t};PLAYER.set_offline=function(){PLAYER.info[1]={type:POPUP_JOINNUM.result[1],name:POPUP_JOINNUM.result[1]==ENUM.PLAYER_TYPE.AI?"AI":"PLAYER",char_bunho:1,location:1,double_num:0,island_count:0,goto_flag:0,bougold:S_GAME.BASE_GOLD,totzasan:S_GAME.BASE_GOLD,defence_card:0,freepass_card:0,turn_count:0,rotate_num:0,pasan_flag:0,team:S_GAME.mode.team==1?1:0};PLAYER.info[2]={type:POPUP_JOINNUM.result[2],name:POPUP_JOINNUM.result[2]==ENUM.PLAYER_TYPE.AI?"AI":"PLAYER",char_bunho:2,location:1,double_num:0,island_count:0,goto_flag:0,bougold:S_GAME.BASE_GOLD,totzasan:S_GAME.BASE_GOLD,defence_card:0,freepass_card:0,turn_count:0,rotate_num:0,pasan_flag:0,team:S_GAME.mode.team==1?2:0};PLAYER.info[3]={type:POPUP_JOINNUM.result[3],name:POPUP_JOINNUM.result[3]==ENUM.PLAYER_TYPE.AI?"AI":"PLAYER",char_bunho:1,location:1,double_num:0,island_count:0,goto_flag:0,bougold:S_GAME.BASE_GOLD,totzasan:S_GAME.BASE_GOLD,defence_card:0,freepass_card:0,turn_count:0,rotate_num:0,pasan_flag:0,team:S_GAME.mode.team==1?1:0};PLAYER.info[4]={type:POPUP_JOINNUM.result[4],name:POPUP_JOINNUM.result[4]==ENUM.PLAYER_TYPE.AI?"AI":"PLAYER",char_bunho:2,location:1,double_num:0,island_count:0,goto_flag:0,bougold:S_GAME.BASE_GOLD,totzasan:S_GAME.BASE_GOLD,defence_card:0,freepass_card:0,turn_count:0,rotate_num:0,pasan_flag:0,team:S_GAME.mode.team==1?2:0}};PLAYER.cal_totzasan=function(){for(var t,i,n=1;n<=4;n++)PLAYER.info.type!=ENUM.PLAYER_TYPE.NONE&&(t=PLAYER.info[n].bougold,i=PLAYER.cal_get_none_gold(n),PLAYER.info[n].totzasan=t+i,util.log("====Player"+n+" 총 자산:"+PLAYER.info[n].totzasan))};PLAYER.cal_get_none_gold=function(n){for(var i=0,t=1;t<=36;t++)switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[t].country.owner==n&&(i+=CAL.get_country_value(t));break;case ENUM.TILE_TYPE.RESORT:BOARD.info[t].resort.owner==n&&(i+=BOARD.info[t].resort.gold_tot);break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[t].invention.owner==n&&(i+=BOARD.info[t].invention.gold_tot)}return i};PLAYER.ui_draw=function(){var t,n,u,r,i,f;PLAYER.cal_totzasan();t=1;n="GA_player"+t;PLAYER.info[t].type!=ENUM.PLAYER_TYPE.NONE?($("#"+n).css({display:"block",left:PLAYER.XY[t].x+"px",top:PLAYER.XY[t].y+"px",width:"494px",height:"158px",position:"absolute"}),util.draw_image_no_wh_pos(n+"_bg","./image/game/ui/ga_userbox"+t+".png",0,0),u=POPUP_SELECTCHAR.get_char_bunho(t),r="./image/game/char/char"+u+"_icon.png",S_GAME.mode.online==1&&(r="./image/game/char/char"+S_PVP_MATCHING.me.char_info+"_icon.png"),util.draw_image_no_wh_pos(n+"_char",r,363,11),S_GAME.mode.online==1?util.draw_text_html(TXT.me,n+"_name",11,28,339,33,33,25,"right","#ffffff"):util.draw_text_html(PLAYER.info[t].name,n+"_name",11,28,339,33,33,25,"right","#ffffff"),util.draw_textshadow(n+"_name","#3b2a2a",2),PLAYER.draw_bougold(t,PLAYER.info[t].bougold),util.draw_text_html(TXT.bougold,n+"_bougold_txt",257,66,93,29,29,20,"center","#ebe3e3"),util.draw_text_html(util.get_number_with_comma(PLAYER.info[t].totzasan),n+"_totzasan",11,98,236,33,33,21,"right","#ffffff"),util.draw_text_html(TXT.totzasan,n+"_totzasan_txt",257,98,93,29,29,20,"center","#ebe3e3"),util.draw_image_no_wh_pos(n+"_gage","./image/game/ui/ga_userbox_timebar.png",196,139),util.draw_image_no_wh_pos(n+"_focus","./image/game/ui/p_surprise_player_focus1.png",-26,-18),PLAYER.info[t].pasan_flag==1&&$("#"+n+"_focus").css({display:"none"}),util.draw_image_no_wh_pos(n+"_pasan","./image/game/popup_sellabs/p_bankruptcy_dim_right"+util.get_postfix_lang()+".png",0,0),PLAYER.info[t].pasan_flag==1?$("#"+n+"_pasan").css({display:"block"}):$("#"+n+"_pasan").css({display:"none"}),i=PLAYER.get_rank(t),f=i+util.get_rank_postfix(i),$("#"+n+"_rank").css({left:"-10px",top:"-2px",width:"84px",height:"60x",background:"url(./image/game/ui/p_rank_bt_"+PLAYER.get_color(t)+".png) no-repeat 0 0","background-position":"0px 0px",display:PLAYER.info[t].pasan_flag==1?"none":"block","line-height":"60px","font-size":"30px","text-align":"center",color:"#ffffff",position:"absolute"}).html(f),util.draw_textshadow(n+"_rank","#1a1a1a",2),S_GAME.mode.team==1&&util.draw_image_no_wh_pos(n+"_team","./image/game/ui/p_teamicon_a.png",434,81),PLAYER.ui_draw_freedefence_card(t),PLAYER.ui_draw_setting(t)):$("#"+n).css({display:"none"});t=2;n="GA_player"+t;PLAYER.info[t].type!=ENUM.PLAYER_TYPE.NONE?($("#"+n).css({display:"block",left:PLAYER.XY[t].x+"px",top:PLAYER.XY[t].y+"px",width:"494px",height:"158px",position:"absolute"}),S_GAME.mode.team==1?util.draw_image_no_wh_pos(n+"_bg","./image/game/ui/p_team_userbox_blue.png",0,0):util.draw_image_no_wh_pos(n+"_bg","./image/game/ui/ga_userbox"+t+".png",0,0),u=POPUP_SELECTCHAR.get_char_bunho(t),r="./image/game/char/char"+u+"_icon.png",util.draw_image_no_wh_pos(n+"_char",r,11,11),util.draw_text_html(PLAYER.info[t].name,n+"_name",144,28,339,33,33,25,"left","#ffffff"),util.draw_textshadow(n+"_name","#3b2a2a",2),PLAYER.draw_bougold(t,PLAYER.info[t].bougold),util.draw_text_html(TXT.bougold,n+"_bougold_txt",144,66,93,29,29,20,"center","#ebe3e3"),util.draw_text_html(util.get_number_with_comma(PLAYER.info[t].totzasan),n+"_totzasan",247,98,236,33,33,21,"left","#ffffff"),util.draw_text_html(TXT.totzasan,n+"_totzasan_txt",144,98,93,29,29,20,"center","#ebe3e3"),util.draw_image_no_wh_pos(n+"_gage","./image/game/ui/ga_userbox_timebar.png",5,139),$("#"+n+"_gage").css({transform:"scaleX(-1)","-webkit-transform":"scaleX(-1)"}),util.draw_image_no_wh_pos(n+"_focus","./image/game/ui/p_surprise_player_focus2.png",-13,-18),PLAYER.info[t].pasan_flag==1&&$("#"+n+"_focus").css({display:"none"}),util.draw_image_no_wh_pos(n+"_pasan","./image/game/popup_sellabs/p_bankruptcy_dim_left"+util.get_postfix_lang()+".png",0,0),PLAYER.info[t].pasan_flag==1?$("#"+n+"_pasan").css({display:"block"}):$("#"+n+"_pasan").css({display:"none"}),i=PLAYER.get_rank(t),f=i+util.get_rank_postfix(i),$("#"+n+"_rank").css({left:"420px",top:"-2px",width:"84px",height:"60x",background:"url(./image/game/ui/p_rank_bt_"+PLAYER.get_color(t)+".png) no-repeat 0 0","background-position":"0px 0px",display:PLAYER.info[t].pasan_flag==1?"none":"block","line-height":"60px","font-size":"30px","text-align":"center",color:"#ffffff",position:"absolute"}).html(f),util.draw_textshadow(n+"_rank","#1a1a1a",2),S_GAME.mode.team==1&&util.draw_image_no_wh_pos(n+"_team","./image/game/ui/p_teamicon_c.png",82,81),PLAYER.ui_draw_freedefence_card(t),PLAYER.ui_draw_setting(t)):$("#"+n).css({display:"none"});t=3;n="GA_player"+t;PLAYER.info[t].type!=ENUM.PLAYER_TYPE.NONE?($("#"+n).css({display:"block",left:PLAYER.XY[t].x+"px",top:PLAYER.XY[t].y+"px",width:"494px",height:"158px",position:"absolute"}),S_GAME.mode.team==1?util.draw_image_no_wh_pos(n+"_bg","./image/game/ui/p_team_userbox_red.png",0,0):util.draw_image_no_wh_pos(n+"_bg","./image/game/ui/ga_userbox"+t+".png",0,0),u=POPUP_SELECTCHAR.get_char_bunho(t),r="./image/game/char/char"+u+"_icon.png",S_GAME.mode.online==1&&(r="./image/game/char/char"+S_PVP_MATCHING.other.char_info+"_icon.png"),util.draw_image_no_wh_pos(n+"_char",r,11,11),S_GAME.mode.online==1?util.draw_text_html(S_PVP_MATCHING.other.user_name,n+"_name",144,28,339,33,33,25,"left","#ffffff"):util.draw_text_html(PLAYER.info[t].name,n+"_name",144,28,339,33,33,25,"left","#ffffff"),util.draw_textshadow(n+"_name","#3b2a2a",2),PLAYER.draw_bougold(t,PLAYER.info[t].bougold),util.draw_text_html(TXT.bougold,n+"_bougold_txt",144,66,93,29,29,20,"center","#ebe3e3"),util.draw_text_html(util.get_number_with_comma(PLAYER.info[t].totzasan),n+"_totzasan",247,98,236,33,33,21,"left","#ffffff"),util.draw_text_html(TXT.totzasan,n+"_totzasan_txt",144,98,93,29,29,20,"center","#ebe3e3"),util.draw_image_no_wh_pos(n+"_gage","./image/game/ui/ga_userbox_timebar.png",5,139),$("#"+n+"_gage").css({transform:"scaleX(-1)","-webkit-transform":"scaleX(-1)"}),util.draw_image_no_wh_pos(n+"_focus","./image/game/ui/p_surprise_player_focus2.png",-13,-18),PLAYER.info[t].pasan_flag==1&&$("#"+n+"_focus").css({display:"none"}),util.draw_image_no_wh_pos(n+"_pasan","./image/game/popup_sellabs/p_bankruptcy_dim_left"+util.get_postfix_lang()+".png",0,0),PLAYER.info[t].pasan_flag==1?$("#"+n+"_pasan").css({display:"block"}):$("#"+n+"_pasan").css({display:"none"}),i=PLAYER.get_rank(t),f=i+util.get_rank_postfix(i),$("#"+n+"_rank").css({left:"420px",top:"-2px",width:"84px",height:"60x",background:"url(./image/game/ui/p_rank_bt_"+PLAYER.get_color(t)+".png) no-repeat 0 0","background-position":"0px 0px",display:PLAYER.info[t].pasan_flag==1?"none":"block","line-height":"60px","font-size":"30px","text-align":"center",color:"#ffffff",position:"absolute"}).html(f),util.draw_textshadow(n+"_rank","#1a1a1a",2),S_GAME.mode.team==1&&util.draw_image_no_wh_pos(n+"_team","./image/game/ui/p_teamicon_b.png",82,81),PLAYER.ui_draw_freedefence_card(t),PLAYER.ui_draw_setting(t),S_GAME.mode.online==0&&glo.platform==glo.PLATFORM.LG_WEEKEND&&$("#"+n).css({top:"0px","transform-origin":"82px 77px","-webkit-transform-origin":"82px 77px","-webkit-transform":"rotate(90deg)"})):$("#"+n).css({display:"none"});t=4;n="GA_player"+t;PLAYER.info[t].type!=ENUM.PLAYER_TYPE.NONE?($("#"+n).css({display:"block",left:PLAYER.XY[t].x+"px",top:PLAYER.XY[t].y+"px",width:"494px",height:"158px",position:"absolute"}),util.draw_image_no_wh_pos(n+"_bg","./image/game/ui/ga_userbox"+t+".png",0,0),u=POPUP_SELECTCHAR.get_char_bunho(t),r="./image/game/char/char"+u+"_icon.png",util.draw_image_no_wh_pos(n+"_char",r,363,11),util.draw_text_html(PLAYER.info[t].name,n+"_name",11,28,339,33,33,25,"right","#ffffff"),util.draw_textshadow(n+"_name","#3b2a2a",2),PLAYER.draw_bougold(t,PLAYER.info[t].bougold),util.draw_text_html(TXT.bougold,n+"_bougold_txt",257,66,93,29,29,20,"center","#ebe3e3"),util.draw_text_html(util.get_number_with_comma(PLAYER.info[t].totzasan),n+"_totzasan",11,98,236,33,33,21,"right","#ffffff"),util.draw_text_html(TXT.totzasan,n+"_totzasan_txt",257,98,93,29,29,20,"center","#ebe3e3"),util.draw_image_no_wh_pos(n+"_gage","./image/game/ui/ga_userbox_timebar.png",196,139),util.draw_image_no_wh_pos(n+"_focus","./image/game/ui/p_surprise_player_focus1.png",-26,-18),PLAYER.info[t].pasan_flag==1&&$("#"+n+"_focus").css({display:"none"}),util.draw_image_no_wh_pos(n+"_pasan","./image/game/popup_sellabs/p_bankruptcy_dim_right"+util.get_postfix_lang()+".png",0,0),PLAYER.info[t].pasan_flag==1?$("#"+n+"_pasan").css({display:"block"}):$("#"+n+"_pasan").css({display:"none"}),i=PLAYER.get_rank(t),f=i+util.get_rank_postfix(i),$("#"+n+"_rank").css({left:"-10px",top:"-2px",width:"84px",height:"60x",background:"url(./image/game/ui/p_rank_bt_"+PLAYER.get_color(t)+".png) no-repeat 0 0","background-position":"0px 0px",display:PLAYER.info[t].pasan_flag==1?"none":"block","line-height":"60px","font-size":"30px","text-align":"center",color:"#ffffff",position:"absolute"}).html(f),util.draw_textshadow(n+"_rank","#1a1a1a",2),S_GAME.mode.team==1&&util.draw_image_no_wh_pos(n+"_team","./image/game/ui/p_teamicon_d.png",434,81),PLAYER.ui_draw_freedefence_card(t),PLAYER.ui_draw_setting(t),glo.platform==glo.PLATFORM.LG_WEEKEND&&$("#"+n).css({top:"0px","transform-origin":"412px 77px","-webkit-transform-origin":"412px 77px","-webkit-transform":"rotate(-90deg)"})):$("#"+n).css({display:"none"})};PLAYER.ui_draw_setting=function(n){var r="GA_player"+n+"_setting",t=400,i=-91;switch(n){case 1:t=400;i=-91;break;case 2:t=26;i=-91;break;case 3:glo.platform==glo.PLATFORM.LG_WEEKEND?(t=26,i=-90):(t=26,i=164);break;case 4:glo.platform==glo.PLATFORM.LG_WEEKEND?(t=400,i=-90):(t=400,i=164)}$("#"+r).css({left:t+"px",top:i+"px",zIndex:0,position:"absolute",display:"block"});util.draw_image_no_wh_pos(r+"_bg","./image/game/popup_setting/p_stop_bt.png",0,0);util.draw_image_no_wh_pos(r+"_focus","./image/game/popup_setting/p_stop_bt_focus.png",-15,-15);$("#"+r+"_focus").css({display:"none"});(PLAYER.info[n].pasan_flag==1||PLAYER.info[n].type==ENUM.PLAYER_TYPE.NONE)&&$("#"+r).css({display:"none"});S_GAME.mode.online==1&&n!=1&&$("#"+r).css({display:"none"})};PLAYER.ui_draw_freedefence_card=function(n){var i=PLAYER.info[n].defence_card+PLAYER.info[n].freepass_card,t="GA_player"+n;switch(i){case 0:$("#"+t+"_chance_card1").css({display:"none"});$("#"+t+"_chance_card2").css({display:"none"});break;case 1:$("#"+t+"_chance_card1").css({display:"block"});$("#"+t+"_chance_card2").css({display:"none"});n==1||n==4?util.draw_image_no_wh_pos(t+"_chance_card1","./image/game/ui/p_surprise_card.png",306,-37):util.draw_image_no_wh_pos(t+"_chance_card1","./image/game/ui/p_surprise_card.png",152,-37);break;case 2:$("#"+t+"_chance_card1").css({display:"block"});$("#"+t+"_chance_card2").css({display:"block"});n==1||n==4?(util.draw_image_no_wh_pos(t+"_chance_card1","./image/game/ui/p_surprise_card.png",306,-37),util.draw_image_no_wh_pos(t+"_chance_card2","./image/game/ui/p_surprise_card.png",261,-37)):(util.draw_image_no_wh_pos(t+"_chance_card1","./image/game/ui/p_surprise_card.png",152,-37),util.draw_image_no_wh_pos(t+"_chance_card2","./image/game/ui/p_surprise_card.png",197,-37))}};PLAYER.draw_bougold=function(n,t){var i="GA_player"+n;switch(n){case 1:util.draw_text_html(util.get_number_with_comma(t),i+"_bougold",11,64,236,33,33,30,"right","#ecfa05");break;case 2:util.draw_text_html(util.get_number_with_comma(t),i+"_bougold",247,64,236,33,33,30,"left","#ecfa05");break;case 3:util.draw_text_html(util.get_number_with_comma(t),i+"_bougold",247,64,236,33,33,30,"left","#ecfa05");break;case 4:util.draw_text_html(util.get_number_with_comma(t),i+"_bougold",11,64,236,33,33,30,"right","#ecfa05")}};PLAYER.ui_top=function(n){$("#GA_player"+n).css({zIndex:1082})};PLAYER.get_color=function(n){if(S_GAME.mode.team==0)switch(n){case 1:return"red";case 2:return"yellow";case 3:return"green";case 4:return"blue"}else switch(n){case 1:return"red";case 3:return"red";case 2:return"blue";case 4:return"blue"}};PLAYER.get_rank=function(n){for(var i=1,r=PLAYER.info[n].totzasan,t=1;t<=4;t++)t!=n&&PLAYER.info[t].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[t].pasan_flag!=1&&PLAYER.info[t].totzasan>r&&i++;return i};PLAYER.get_bougold=function(n){return PLAYER.info[n].bougold};PLAYER.get_zasan_number1=function(){var t=0,i=0,n;for(PLAYER.cal_totzasan(),n=1;n<=4;n++)i<PLAYER.info[n].totzasan&&(t=n,i=PLAYER.info[n].totzasan);return t};PLAYER.get_num=function(){for(var t=0,n=1;n<=4;n++)PLAYER.info[n].type!=ENUM.PLAYER_TYPE.NONE&&t++;return t};PLAYER.die_pasan=function(n){for(var t=1;t<=36;t++)switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[t].country.owner==n&&(BOARD.info[t].country.owner=0,BOARD.info[t].country.dev_stage=0,BOARD.draw_tile_update(t));break;case ENUM.TILE_TYPE.RESORT:BOARD.info[t].resort.owner==n&&(BOARD.info[t].resort.owner=0,BOARD.init_i(t),BOARD.draw_tile_update(t));break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[t].invention.owner==n&&(BOARD.info[t].invention.owner=0,BOARD.draw_tile_update(t))}};PLAYER.die=function(n){var t,i;if(util.notice_player(n,TXT.pasan_do),S_GAME.draw_pasan_popup(n),PLAYER.die_pasan(n),SOUND.play_effect(SOUND.EFFECT.GAME_FAIL),S_GAME.mode.online==1&&n==1){S_GAME.winner=3;S_GAME.winwhy=ENUM.WINWHY.ECONOMY;S_GAME.pause();S_GAME.end();util.log("패배 팝업 : PLAYER.die()에서");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}PLAYER.info[n].pasan_flag=1;S_GAME.mode.team==0?(t=PLAYER.get_winner(),t>0&&(S_GAME.winner=t)):(i=PLAYER.get_winner_team(),i>0&&(S_GAME.winner=i));setTimeout(function(){var t,i,r;for($("#GA_char"+n).css({display:"none"}),$("#GA_player"+n+"_pasan").css({display:"block"}),t=1;t<=36;t++)switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[t].country.owner==n&&(BOARD.info[t].country.owner=0,BOARD.info[t].country.dev_stage=0,BOARD.draw_tile_update(t));break;case ENUM.TILE_TYPE.RESORT:BOARD.info[t].resort.owner==n&&(BOARD.info[t].resort.owner=0,BOARD.init_i(t),BOARD.draw_tile_update(t));break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[t].invention.owner==n&&(BOARD.info[t].invention.owner=0,BOARD.draw_tile_update(t))}if(S_GAME.mode.team==0){if(i=PLAYER.get_winner(),i>0){S_GAME.winner=i;S_GAME.winwhy=ENUM.WINWHY.ECONOMY;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : PLAYER.die()에서");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}}else if(r=PLAYER.get_winner_team(),r>0){S_GAME.winner=r;S_GAME.winwhy=ENUM.WINWHY.ECONOMY;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : PLAYER.die()에서");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}},1e3)};PLAYER.get_winner=function(){for(var t=0,i=0,n=1;n<=4;n++)PLAYER.info[n].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[n].pasan_flag!=1&&(t++,i=n);return t==1?i:0};PLAYER.get_winner_team=function(){return PLAYER.info[1].pasan_flag==1&&PLAYER.info[3].pasan_flag==1?2:PLAYER.info[2].pasan_flag==1&&PLAYER.info[4].pasan_flag==1?1:0} 
S_GAME.key_down=function(n){var t=n==null?event.keyCode:n;if(S_GAME.setting_flag==1){POPUP_SETTING.key_down(n);return}if(glo.enable_key!=0){switch(t){case KeyDefine.back:case KeyDefine.esc:S_GAME.key_down_esc();return;case KeyDefine.t:glo.app_release=="TEST"&&(util.notice_box("트리플 나오게수정"),DICE.get_result=function(){return{dice1:1,dice2:1,dice3:1,tot:0}});break;case KeyDefine.d:glo.app_release=="TEST"&&(util.notice_box("더블 나오게수정"),DICE.get_result=function(){return{dice1:3,dice2:3,dice3:1,tot:0}});break;case KeyDefine.w:glo.app_release=="TEST"&&(S_GAME.pause(),S_GAME.end(),S_GAME.winner=S_GAME.turn,S_GAME.winwhy=ENUM.WINWHY.ECONOMY,ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP));break;case KeyDefine.v:if(glo.app_release=="TEST"){if(S_GAME.mode.online==0){util.notice("Victory:  온라인 게임에서만 작동함");return}S_GAME.pvp_win(ENUM.WINWHY.CHEATKEY)}break;case KeyDefine.f:if(glo.app_release=="TEST"){if(S_GAME.mode.online==0){util.notice("Fail: 온라인 게임에서만 작동함");return}S_GAME.pause();S_GAME.end();S_GAME.winner=3;S_GAME.winwhy=ENUM.WINWHY.ECONOMY;ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP)}break;case KeyDefine.NUM0:glo.app_release=="TEST"&&(util.notice_game("랜덤 주사위로 변경"),DICE.get_result=function(){return{dice1:Math.floor(Math.random()*6+1),dice2:Math.floor(Math.random()*6+1),dice3:Math.floor(Math.random()*6+1),tot:0}});break;case KeyDefine.NUM1:glo.app_release=="TEST"&&(util.notice_box("1만 나오도록 셋팅함"),DICE.get_result=function(){return{dice1:1,dice2:5,dice3:5,tot:0}});break;case KeyDefine.NUM2:glo.app_release=="TEST"&&(util.notice_box("2만 나오도록 셋팅함"),DICE.get_result=function(){return{dice1:2,dice2:1,dice3:1,tot:0}});break;case KeyDefine.NUM3:glo.app_release=="TEST"&&(util.notice_box("3 나오게수정"),DICE.get_result=function(){return{dice1:1,dice2:2,dice3:3,tot:0}});break;case KeyDefine.NUM4:glo.app_release=="TEST"&&(util.notice_box("무조건 4 나오게 하기"),DICE.get_result=function(){return{dice1:1,dice2:3,dice3:2,tot:0}});break;case KeyDefine.NUM5:glo.app_release=="TEST"&&(util.notice_box("무조건 5 나오게 하기"),DICE.get_result=function(){return{dice1:2,dice2:3,dice3:1,tot:0}});break;case KeyDefine.NUM6:glo.app_release=="TEST"&&(util.notice_box("무조건 6 나오게 하기"),DICE.get_result=function(){return{dice1:2,dice2:4,dice3:1,tot:0}});break;case KeyDefine.NUM7:glo.app_release=="TEST"&&(util.notice_box("무조건 7 나오게 하기"),DICE.get_result=function(){return{dice1:3,dice2:4,dice3:1,tot:0}});break;case KeyDefine.NUM8:glo.app_release=="TEST"&&(util.notice_box("무조건 8 나오게 하기"),DICE.get_result=function(){return{dice1:4,dice2:4,dice3:1,tot:0}});break;case KeyDefine.NUM9:glo.app_release=="TEST"&&(util.notice_box("무조건 9 나오게 하기"),DICE.get_result=function(){return{dice1:5,dice2:4,dice3:1,tot:0}})}switch(this.scene){case ENUM.SCENE.P_MYTURN:POPUP_MYTURN.key_down(n);return;case ENUM.SCENE.P_BUYCOUNTRY:POPUP_BUYCOUNTRY.key_down(n);return;case ENUM.SCENE.P_SELLCOUNTRY:POPUP_SELLCOUNTRY.key_down(n);return;case ENUM.SCENE.P_SELLZASAN:POPUP_SELLZASAN.key_down(n);return;case ENUM.SCENE.P_SELLABS:POPUP_SELLABS.key_down(n);return;case ENUM.SCENE.P_JOINNUM:POPUP_JOINNUM.key_down(n);return;case ENUM.SCENE.P_SELECTCHAR:POPUP_SELECTCHAR.key_down(n);return;case ENUM.SCENE.P_RESORT:POPUP_RESORT.key_down(n);return;case ENUM.SCENE.P_ISLAND:POPUP_ISLAND.key_down(n);return;case ENUM.SCENE.P_CHANCE:POPUP_CHANCE.key_down(n);return;case ENUM.SCENE.P_FREEPASS:POPUP_FREEPASS.key_down(n);return;case ENUM.SCENE.P_INVENTION:POPUP_INVENTION.key_down(n);return;case ENUM.SCENE.P_TAKEOVER:POPUP_TAKEOVER.key_down(n);return;case ENUM.SCENE.SELECTTILE:SELECTTILE.key_down(n);return;case ENUM.SCENE.SELECTTILE_ABS:SELECTTILE_ABS.key_down(n);return;case ENUM.SCENE.SELECTLINE:SELECTLINE.key_down(n);return}switch(t){case KeyDefine.enter:S_GAME.key_down_enter();break;case KeyDefine.q:glo.app_release=="TEST"&&(S_GAME.INTERVAL_MS=50,util.notice_game("1배속: 20frame기반으로 작동"));break;case KeyDefine.e:glo.app_release=="TEST"&&(S_GAME.INTERVAL_MS=33,util.notice_game("1.5배속: 30frame기반으로 작동"));break;case KeyDefine.r:glo.app_release=="TEST"&&(S_GAME.INTERVAL_MS=16,util.notice_game("1배속: 60frame기반으로 작동"));break;case KeyDefine.back:case KeyDefine.esc:S_GAME.key_down_esc();break;case KeyDefine.z:glo.app_release=="TEST";break;case KeyDefine.x:glo.app_release=="TEST";break;case KeyDefine.c:glo.app_release=="TEST";break;case KeyDefine.b:glo.app_release=="TEST";break;case KeyDefine.l:glo.app_release=="TEST";break;case KeyDefine.n:glo.app_release=="TEST";break;case KeyDefine.m:glo.app_release=="TEST";break;case KeyDefine.h:glo.app_release=="TEST";break;case KeyDefine.space:glo.app_release=="TEST"}}};S_GAME.key_down_enter=function(){if(glo.enable_key!=0){glo.enable_key=0;util.log("glo.enable_key = 0 in S_GAME.key_down_enter()");switch(S_GAME.status){case ENUM.STATUS.DICE_GAGE_ENTER:DICE_GAGE.start();S_GAME.status=ENUM.STATUS.DICE_GAGE_START;return;case ENUM.STATUS.DICE_GAGE_START:DICE_GAGE.stop();REMAINTIME.stop();S_GAME.status=ENUM.STATUS.DICE_GAGE_END;setTimeout(function(){$("#GA_dice_gage_frame").css({display:"none"});var n=DICE.get_result(),t="꽝";if(DICE.is_triple(n)?(t="트리플",n.tot=37-PLAYER.info[S_GAME.turn].location):DICE.is_double(n)?(t="더블",n.tot=n.dice1*2):(t="꽝",n.tot=DICE.how_many_go(n)),DICE.result=n,glo.enable_key=0,S_GAME.mode.online==1){if(S_GAME.turn!=1){util.log("#########예외처리함. online에서 내턴이 아닌데 주사위 던질려 함. ########");return}WSS.send_dice_throw3(n,t)}DICE.throw3(n,function(){if(DICE.view_result(n.tot,t),DICE.is_double(n)&&PLAYER.info[S_GAME.turn].double_num++,PLAYER.info[S_GAME.turn].double_num==3)S_GAME.status=ENUM.STATUS.CHAR_MOVE_START,CHAR.move_onestep_fromto(S_GAME.turn,19),util.notice_player(S_GAME.turn,TXT.goto_island);else{if(POPUP_ISLAND.is_not_move(n,S_GAME.turn)){util.notice_player(S_GAME.turn,TXT.exit_fail);BOARD.arrive_player_end();return}S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(S_GAME.turn,n.tot)}})},100);return;case ENUM.STATUS.DICE_GAGE_END:return;case ENUM.STATUS.CHAR_MOVE_START:return;case ENUM.STATUS.CHAR_MOVE_END:return}console.error("S_GAME.key_down_enter()에서  S_GAME.status:"+S_GAME.status+" 의 값 정해지지 않음")}};S_GAME.key_down_esc=function(){POPUP_SETTING.init(S_GAME.turn)};S_GAME.on_mouse_move=function(){};S_GAME.on_mouse_out=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"GA_player1_setting":$("#GA_player1_setting_focus").css({display:"none"});break;case"GA_player2_setting":$("#GA_player2_setting_focus").css({display:"none"});break;case"GA_player3_setting":$("#GA_player3_setting_focus").css({display:"none"});break;case"GA_player4_setting":$("#GA_player4_setting_focus").css({display:"none"})}};S_GAME.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"GA_dice_gage_btn":Main.mouse_pressed("GA_dice_gage_btn");break;case"myturn_btn1":Main.mouse_pressed("myturn_btn1");break;case"myturn_btn2":Main.mouse_pressed("myturn_btn2");break;case"buycountry_btn1":Main.mouse_pressed("buycountry_btn1");break;case"buycountry_btn2":Main.mouse_pressed("buycountry_btn2");break;case"buycountry_btn3":Main.mouse_pressed("buycountry_btn3");break;case"buycountry_btn4":Main.mouse_pressed("buycountry_btn4");break;case"buycountry_btn5":Main.mouse_pressed("buycountry_btn5");break;case"buycountry_btn6":Main.mouse_pressed("buycountry_btn6");break;case"buycountry_btn7":Main.mouse_pressed("buycountry_btn7");break;case"takeover_btn1":Main.mouse_pressed("takeover_btn1");break;case"takeover_btn2":Main.mouse_pressed("takeover_btn2");break;case"takeover_btn3":Main.mouse_pressed("takeover_btn3");break;case"takeover_btn4":Main.mouse_pressed("takeover_btn4");break;case"takeover_btn5":Main.mouse_pressed("takeover_btn5");break;case"takeover_btn6":Main.mouse_pressed("takeover_btn6");break;case"takeover_btn7":Main.mouse_pressed("takeover_btn7");break;case"joinnum_btn1":Main.mouse_pressed(n.target.parentElement.id);break;case"joinnum_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"joinnum_btn3":Main.mouse_pressed(n.target.parentElement.id);break;case"joinnum_btn4":Main.mouse_pressed(n.target.parentElement.id);break;case"joinnum_btn5":Main.mouse_pressed(n.target.parentElement.id);break;case"joinnum_btn6":Main.mouse_pressed(n.target.parentElement.id);break;case"joinnum_btn7":Main.mouse_pressed(n.target.parentElement.id);break;case"selectchar_btn1":Main.mouse_pressed(n.target.parentElement.id);break;case"selectchar_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"selectchar_btn3":Main.mouse_pressed(n.target.parentElement.id);break;case"selectchar_btn4":Main.mouse_pressed(n.target.parentElement.id);break;case"selectchar_btn5":Main.mouse_pressed(n.target.parentElement.id);break;case"selectchar_btn6":Main.mouse_pressed(n.target.parentElement.id);break;case"sellcountry_btn1":Main.mouse_pressed("sellcountry_btn1");break;case"sellcountry_btn2":Main.mouse_pressed("sellcountry_btn2");break;case"sellzasan_btn1":Main.mouse_pressed("sellzasan_btn1");break;case"sellzasan_btn2":Main.mouse_pressed("sellzasan_btn2");break;case"sellabs_btn1":Main.mouse_pressed("sellabs_btn1");break;case"sellabs_btn2":Main.mouse_pressed("sellabs_btn2");break;case"resort_btn1":Main.mouse_pressed(n.target.parentElement.id);break;case"resort_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"island_btn1":Main.mouse_pressed(n.target.parentElement.id);break;case"island_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"chance_btn1":Main.mouse_pressed(n.target.parentElement.id);break;case"freepass_btn1":case"freepass_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"invention_btn1":case"invention_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"sellabs_selecttile_btn1":case"sellabs_selecttile_btn2":Main.mouse_pressed(n.target.parentElement.id);break;case"setting_btn1":case"setting_btn2":case"setting_btn3":case"setting_btn4":Main.mouse_pressed(n.target.parentElement.id);break;case"GA_player1_setting":Main.mouse_pressed(n.target.parentElement.id);$("#GA_player1_setting_focus").css({display:"block"});break;case"GA_player2_setting":Main.mouse_pressed(n.target.parentElement.id);$("#GA_player2_setting_focus").css({display:"block"});break;case"GA_player3_setting":Main.mouse_pressed(n.target.parentElement.id);$("#GA_player3_setting_focus").css({display:"block"});break;case"GA_player4_setting":Main.mouse_pressed(n.target.parentElement.id);$("#GA_player4_setting_focus").css({display:"block"})}};S_GAME.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"GA_dice_gage_btn":S_GAME.key_down_enter();break;case"myturn_btn1":case"myturn_btn2":POPUP_MYTURN.menu_run_run();break;case"buycountry_btn1":case"buycountry_btn2":case"buycountry_btn3":case"buycountry_btn4":case"buycountry_btn5":case"buycountry_btn6":case"buycountry_btn7":POPUP_BUYCOUNTRY.menu_run_run();break;case"takeover_btn1":case"takeover_btn2":case"takeover_btn3":case"takeover_btn4":case"takeover_btn5":case"takeover_btn6":case"takeover_btn7":POPUP_TAKEOVER.menu_run_run();break;case"joinnum_btn1":case"joinnum_btn2":case"joinnum_btn3":case"joinnum_btn4":case"joinnum_btn5":case"joinnum_btn6":case"joinnum_btn7":POPUP_JOINNUM.menu_run_run();break;case"selectchar_btn1":case"selectchar_btn2":case"selectchar_btn3":case"selectchar_btn4":case"selectchar_btn5":case"selectchar_btn6":POPUP_SELECTCHAR.menu_run_run();break;case"sellcountry_btn1":case"sellcountry_btn2":POPUP_SELLCOUNTRY.menu_run_run();break;case"sellzasan_btn1":case"sellzasan_btn2":POPUP_SELLZASAN.menu_run_run();break;case"sellabs_btn1":case"sellabs_btn2":POPUP_SELLABS.menu_run_run();break;case"resort_btn1":case"resort_btn2":POPUP_RESORT.menu_run_run();break;case"island_btn1":case"island_btn2":POPUP_ISLAND.menu_run_run();break;case"chance_btn1":POPUP_CHANCE.menu_run_run();break;case"freepass_btn1":case"freepass_btn2":POPUP_FREEPASS.menu_run_run();break;case"invention_btn1":case"invention_btn2":POPUP_INVENTION.menu_run_run();break;case"sellabs_selecttile_btn1":case"sellabs_selecttile_btn2":SELECTTILE_ABS.menu_run_run();break;case"setting_btn1":case"setting_btn2":case"setting_btn3":case"setting_btn4":POPUP_SETTING.menu_run_run();break;case"GA_player1_setting":POPUP_SETTING.init(1);break;case"GA_player2_setting":POPUP_SETTING.init(2);break;case"GA_player3_setting":POPUP_SETTING.init(3);break;case"GA_player4_setting":POPUP_SETTING.init(4)}};S_GAME.on_mouse_over=function(n){switch(n.target.parentElement.id){case"myturn_btn1":S_GAME.scene=ENUM.SCENE.P_MYTURN;POPUP_MYTURN.focus=1;POPUP_MYTURN.draw_focus();break;case"myturn_btn2":S_GAME.scene=ENUM.SCENE.P_MYTURN;POPUP_MYTURN.focus=2;POPUP_MYTURN.draw_focus();break;case"buycountry_btn1":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=1;POPUP_BUYCOUNTRY.draw_focus();break;case"buycountry_btn2":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=2;POPUP_BUYCOUNTRY.draw_focus();break;case"buycountry_btn3":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=3;POPUP_BUYCOUNTRY.draw_focus();break;case"buycountry_btn4":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=4;POPUP_BUYCOUNTRY.draw_focus();break;case"buycountry_btn5":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=5;POPUP_BUYCOUNTRY.draw_focus();break;case"buycountry_btn6":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=6;POPUP_BUYCOUNTRY.draw_focus();break;case"buycountry_btn7":S_GAME.scene=ENUM.SCENE.P_BUYCOUNTRY;POPUP_BUYCOUNTRY.focus=7;POPUP_BUYCOUNTRY.draw_focus();break;case"takeover_btn1":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=1;POPUP_TAKEOVER.draw_focus();break;case"takeover_btn2":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=2;POPUP_TAKEOVER.draw_focus();break;case"takeover_btn3":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=3;POPUP_TAKEOVER.draw_focus();break;case"takeover_btn4":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=4;POPUP_TAKEOVER.draw_focus();break;case"takeover_btn5":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=5;POPUP_TAKEOVER.draw_focus();break;case"takeover_btn6":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=6;POPUP_TAKEOVER.draw_focus();break;case"takeover_btn7":S_GAME.scene=ENUM.SCENE.P_TAKEOVER;POPUP_TAKEOVER.focus=7;POPUP_TAKEOVER.draw_focus();break;case"joinnum_btn1":POPUP_JOINNUM.focus=1;POPUP_JOINNUM.draw_focus();break;case"joinnum_btn2":POPUP_JOINNUM.focus=2;POPUP_JOINNUM.draw_focus();break;case"joinnum_btn3":POPUP_JOINNUM.focus=3;POPUP_JOINNUM.draw_focus();break;case"joinnum_btn4":POPUP_JOINNUM.focus=4;POPUP_JOINNUM.draw_focus();break;case"joinnum_btn5":POPUP_JOINNUM.focus=5;POPUP_JOINNUM.draw_focus();break;case"joinnum_btn6":POPUP_JOINNUM.focus=6;POPUP_JOINNUM.draw_focus();break;case"joinnum_btn7":POPUP_JOINNUM.focus=7;POPUP_JOINNUM.draw_focus();break;case"selectchar_btn1":POPUP_SELECTCHAR.focus=1;POPUP_SELECTCHAR.draw_focus();break;case"selectchar_btn2":POPUP_SELECTCHAR.focus=2;POPUP_SELECTCHAR.draw_focus();break;case"selectchar_btn3":POPUP_SELECTCHAR.focus=3;POPUP_SELECTCHAR.draw_focus();break;case"selectchar_btn4":POPUP_SELECTCHAR.focus=4;POPUP_SELECTCHAR.draw_focus();break;case"selectchar_btn5":POPUP_SELECTCHAR.focus=5;POPUP_SELECTCHAR.draw_focus();break;case"selectchar_btn6":POPUP_SELECTCHAR.focus=6;POPUP_SELECTCHAR.draw_focus();break;case"sellcountry_btn1":POPUP_SELLCOUNTRY.focus=1;POPUP_SELLCOUNTRY.draw_focus();break;case"sellcountry_btn2":POPUP_SELLCOUNTRY.focus=2;POPUP_SELLCOUNTRY.draw_focus();break;case"sellzasan_btn1":POPUP_SELLZASAN.focus=1;POPUP_SELLZASAN.draw_focus();break;case"sellzasan_btn2":POPUP_SELLZASAN.focus=2;POPUP_SELLZASAN.draw_focus();break;case"sellabs_btn1":POPUP_SELLABS.focus=1;POPUP_SELLABS.draw_focus();break;case"sellabs_btn2":POPUP_SELLABS.focus=2;POPUP_SELLABS.draw_focus();break;case"resort_btn1":POPUP_RESORT.focus=1;POPUP_RESORT.draw_focus();break;case"resort_btn2":POPUP_RESORT.focus=2;POPUP_RESORT.draw_focus();break;case"island_btn1":POPUP_ISLAND.focus=1;POPUP_ISLAND.draw_focus();break;case"island_btn2":POPUP_ISLAND.focus=2;POPUP_ISLAND.draw_focus();break;case"chance_btn1":POPUP_CHANCE.focus=1;POPUP_CHANCE.draw_focus();break;case"freepass_btn1":POPUP_FREEPASS.focus=1;POPUP_FREEPASS.draw_focus();break;case"freepass_btn2":POPUP_FREEPASS.focus=2;POPUP_FREEPASS.draw_focus();break;case"invention_btn1":POPUP_INVENTION.focus=1;POPUP_INVENTION.draw_focus();break;case"invention_btn2":POPUP_INVENTION.focus=2;POPUP_INVENTION.draw_focus();break;case"sellabs_selecttile_btn1":SELECTTILE_ABS.where_focus=2;SELECTTILE_ABS.abs_focus=1;SELECTTILE_ABS.draw_focus();break;case"sellabs_selecttile_btn2":SELECTTILE_ABS.where_focus=2;SELECTTILE_ABS.abs_focus=2;SELECTTILE_ABS.draw_focus();break;case"setting_btn1":POPUP_SETTING.focus=1;POPUP_SETTING.draw_focus();break;case"setting_btn2":POPUP_SETTING.focus=2;POPUP_SETTING.draw_focus();break;case"setting_btn3":POPUP_SETTING.focus=3;POPUP_SETTING.draw_focus();break;case"setting_btn4":POPUP_SETTING.focus=4;POPUP_SETTING.draw_focus();break;case"GA_player1_setting":$("#GA_player1_setting_focus").css({display:"block"});break;case"GA_player2_setting":$("#GA_player2_setting_focus").css({display:"block"});break;case"GA_player3_setting":$("#GA_player3_setting_focus").css({display:"block"});break;case"GA_player4_setting":$("#GA_player4_setting_focus").css({display:"block"})}};S_GAME.onclick_tile=function(n){if(glo.enable_key==0){util.log("지금은 마우스 클릭 받을때가 아닙니다.");return}switch(S_GAME.scene){case ENUM.SCENE.SELECTTILE:switch(SELECTTILE.before_scene){case ENUM.SCENE.P_SELLCOUNTRY:case ENUM.SCENE.P_SELLZASAN:SELECTTILE.focus=SELECTTILE.get_index(n);SELECTTILE.draw_focus();SELECTTILE.menu_run();event.preventDefault();event.stopPropagation();return;case ENUM.SCENE.EDGE_START:SELECTTILE.focus=SELECTTILE.get_index(n);SELECTTILE.draw_focus();SELECTTILE.menu_run();event.preventDefault();event.stopPropagation();return;case ENUM.SCENE.EDGE_GOTO:SELECTTILE.focus=SELECTTILE.get_index(n);SELECTTILE.draw_focus();SELECTTILE.menu_run();event.preventDefault();event.stopPropagation();return;default:util.log("=======S_GAME.onclick_tile()에서 정의안된 시나리오: defaut 실행함: "+SELECTTILE.before_scene);SELECTTILE.focus=SELECTTILE.get_index(n);SELECTTILE.draw_focus();SELECTTILE.menu_run();event.preventDefault();event.stopPropagation()}break;case ENUM.SCENE.SELECTTILE_ABS:SELECTTILE_ABS.where_focus=1;SELECTTILE_ABS.focus=SELECTTILE_ABS.get_index(n);SELECTTILE_ABS.draw_focus();SELECTTILE_ABS.menu_run();event.preventDefault();event.stopPropagation();break;default:util.log("===========(무시)S_GAME.onclick_tile()에서 by pass:"+S_GAME.scene)}};S_GAME.onmouseup_tile=function(){event.preventDefault();event.stopPropagation()};S_GAME.onmouseover_tile=function(){event.preventDefault();event.stopPropagation()};S_GAME.onclick_line=function(n){if(glo.enable_key==0){util.log("지금은 마우스 클릭 받을때가 아닙니다.");return}SELECTLINE.focus=n;SELECTLINE.draw_focus();util.enable_key(0,"SELECTLINE.onclick_line()에서   key 막기");setTimeout(function(){SELECTLINE.menu_run()},500);event.preventDefault();event.stopPropagation()};S_GAME.onmouseover_line=function(n){SELECTLINE.focus=n;SELECTLINE.draw_focus();event.preventDefault();event.stopPropagation()} 
var DICE={ROULETTE_HITRATE:100,count_complete:0,callbackfn:null,result:{dice1:0,dice2:0,dice3:0,tot:0},double_onemore_flag:0,THROW_PLAYER:[{},{dice1:{sx:1900,sy:800,bezier:[{left:1685,top:574},{left:1317,top:502},{left:910,top:570}],bx:910,by:570,bounce_bezier:[{left:910,top:570},{left:890,top:560},{left:830,top:530},{left:700,top:520}]},dice2:{sx:1900,sy:800,bezier:[{left:1685,top:574},{left:1317,top:502},{left:1010,top:670}],bx:1010,by:670,bounce_bezier:[{left:1010,top:670},{left:1010,top:650},{left:860,top:600}]},dice3:{sx:1900,sy:800,bezier:[{left:1685,top:574},{left:1317,top:502},{left:1160,top:590}],bx:1160,by:590,bounce_bezier:[{left:1160,top:590},{left:1100,top:550},{left:860,top:450}]}},{dice1:{sx:20,sy:800,bezier:[{left:235,top:574},{left:603,top:502},{left:1010,top:570}],bx:1010,by:570,bounce_bezier:[{left:1010,top:570},{left:1030,top:560},{left:1090,top:530},{left:1220,top:520}]},dice2:{sx:20,sy:800,bezier:[{left:235,top:574},{left:603,top:502},{left:910,top:670}],bx:910,by:670,bounce_bezier:[{left:910,top:670},{left:910,top:650},{left:1060,top:600}]},dice3:{sx:20,sy:800,bezier:[{left:235,top:574},{left:603,top:502},{left:760,top:590}],bx:760,by:590,bounce_bezier:[{left:760,top:590},{left:820,top:550},{left:1060,top:450}]}},{dice1:{sx:20,sy:280,bezier:[{left:235,top:200},{left:603,top:350},{left:700,top:450}],bx:700,by:450,bounce_bezier:[{left:700,top:450},{left:800,top:500},{left:830,top:520}]},dice2:{sx:20,sy:280,bezier:[{left:235,top:200},{left:603,top:310},{left:800,top:550}],bx:800,by:550,bounce_bezier:[{left:800,top:550},{left:910,top:530},{left:1e3,top:600}]},dice3:{sx:20,sy:280,bezier:[{left:235,top:200},{left:703,top:340},{left:810,top:440}],bx:810,by:440,bounce_bezier:[{left:810,top:440},{left:850,top:380},{left:950,top:450}]}},{dice1:{sx:1900,sy:200,bezier:[{left:1900,top:200},{left:1420,top:180},{left:1110,top:450}],bx:1110,by:450,bounce_bezier:[{left:1110,top:450},{left:1e3,top:430},{left:900,top:480}]},dice2:{sx:1900,sy:200,bezier:[{left:1685,top:200},{left:1317,top:310},{left:1010,top:550}],bx:1010,by:550,bounce_bezier:[{left:1010,top:550},{left:1010,top:540},{left:860,top:600}]},dice3:{sx:1900,sy:200,bezier:[{left:1900,top:200},{left:1600,top:250},{left:1200,top:490}],bx:1200,by:490,bounce_bezier:[{left:1200,top:490},{left:1150,top:450},{left:1050,top:530}]}},]};DICE.throw3=function(n,t){if(DICE.double_onemore_flag=0,S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(DICE.throw3,n,t);return}DICE.show_dice();var i=DICE.THROW_PLAYER[S_GAME.turn];DICE.count_complete=0;DICE.callbackfn=t;$("#panel1").css({display:"block"});$("#panel1").css({left:i.dice1.sx+"px",top:i.dice1.sy+"px"});TweenMax.to("#panel1",.7,{bezier:i.dice1.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw3_end1,onCompleteParams:[n.dice1]});$("#dice1").css({transform:DICE.get_rotate_str_pre(n.dice1)});$("#panel2").css({display:"block"});$("#panel2").css({left:i.dice2.sx+"px",top:i.dice2.sy+"px"});TweenMax.to("#panel2",.7,{bezier:i.dice2.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw3_end2,onCompleteParams:[n.dice2]});$("#dice2").css({transform:DICE.get_rotate_str_pre(n.dice2)});$("#panel3").css({display:"none"})};DICE.throw3_end1=function(n){SOUND.play_effect(SOUND.EFFECT.THROW_DICE);var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel1").css({left:t.dice1.bx+"px",top:t.dice1.by+"px"});TweenMax.to("#panel1",.6,{bezier:t.dice1.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:DICE.throw3_end});$("#dice1").css({transform:DICE.get_rotate_str(n)});$("#panel3").css({display:"block"});$("#panel3").css({left:t.dice3.sx+"px",top:t.dice2.sy+"px"});TweenMax.to("#panel3",.7,{bezier:t.dice3.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw3_end3,onCompleteParams:[DICE.result.dice3]});$("#dice3").css({transform:DICE.get_rotate_str_pre(DICE.result.dice3)})};DICE.throw3_end2=function(n){var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel2").css({left:t.dice2.bx+"px",top:t.dice2.by+"px"});TweenMax.to("#panel2",.7,{bezier:t.dice2.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:DICE.throw3_end});$("#dice2").css({transform:DICE.get_rotate_str(n)})};DICE.throw3_end3=function(n){var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel3").css({left:t.dice3.bx+"px",top:t.dice3.by+"px"});TweenMax.to("#panel3",.8,{bezier:t.dice3.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:function(){DICE.is_triple(DICE.result)?DICE.throw3_end():DICE.result.dice3==DICE.result.dice1?($("#panel3").addClass("dice_blur"),$("#panel1").addClass("dice_blur"),setTimeout(function(){$("#panel3").removeClass("dice_blur").css({display:"none"});$("#panel1").removeClass("dice_blur").css({display:"none"});DICE.throw3_end()},500)):DICE.result.dice3==DICE.result.dice2?($("#panel3").addClass("dice_blur"),$("#panel2").addClass("dice_blur"),setTimeout(function(){$("#panel3").removeClass("dice_blur").css({display:"none"});$("#panel2").removeClass("dice_blur").css({display:"none"});DICE.throw3_end()},500)):($("#panel3").addClass("dice_blur"),setTimeout(function(){$("#panel3").removeClass("dice_blur").css({display:"none"});DICE.throw3_end()},500))}});$("#dice3").css({transform:DICE.get_rotate_str(n)})};DICE.throw3_end=function(){if(glo.scene.cur==glo.S.GAME&&(DICE.count_complete++,DICE.count_complete==3)){if(DICE.is_double(DICE.result)&&(DICE.double_onemore_flag=1),S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(DICE.callbackfn);return}DICE.callbackfn()}};DICE.get_rotate_str=function(n){var t="";switch(n){case 1:t="rotateX(-50deg) rotateY(-40deg) rotateZ(180deg)";break;case 2:t="rotateX(40deg) rotateY(180deg) rotateZ(40deg)";break;case 3:t="rotateX(-50deg) rotateY(-130deg) rotateZ(-90deg)";break;case 4:t="rotateX(40deg) rotateY(0deg) rotateZ(-50deg)";break;case 5:t="rotateX(-50deg) rotateY(-40deg) rotateZ(90deg)";break;case 6:t="rotateX(-50deg) rotateY(-40deg)"}return t};DICE.show_dice=function(){$("#panel1").css({display:"block"});$("#panel2").css({display:"block"});$("#panel3").css({display:"block"})};DICE.hide_dice=function(){$("#panel1").css({display:"none"});$("#panel2").css({display:"none"});$("#panel3").css({display:"none"})};DICE.get_rotate_str_pre=function(n){var t=[],u=S_GAME.turn,i,r;switch(u){case 1:switch(n){case 1:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(360deg)","rotateX(-50deg) rotateY(50deg) rotateZ(360deg)","rotateX(40deg) rotateY(-40deg) rotateZ(360deg)","rotateX(40deg) rotateY(-40deg) rotateZ(540deg)","rotateX(40deg) rotateY(-40deg) rotateZ(540deg)"];break;case 2:t=["","rotateX(-140deg) rotateY(180deg) rotateZ(-50deg)","rotateX(-140deg) rotateY(180deg) rotateZ(-140deg)","rotateX(-50deg) rotateY(180deg) rotateZ(-50deg)","rotateX(-50deg) rotateY(45deg) rotateZ(40deg)","rotateX(-90deg) rotateY(180deg) rotateZ(-140deg)"];break;case 3:t=["","rotateX(-50deg) rotateY(-130deg) rotateZ(0deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(0deg)","rotateX(-140deg) rotateY(-130deg) rotateZ(0deg)","rotateX(-140deg) rotateY(-130deg) rotateZ(-180deg)","rotateX(50deg) rotateY(-50deg) rotateZ(90deg)"];break;case 4:t=["","rotateX(40deg) rotateY(120deg) rotateZ(-50deg)","rotateX(40deg) rotateY(90deg) rotateZ(-50deg)","rotateX(90deg) rotateY(120deg) rotateZ(-50deg)","rotateX(40deg) rotateY(90deg) rotateZ(130deg)","rotateX(90deg) rotateY(120deg) rotateZ(0deg)"];break;case 5:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(180deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(270deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(225deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(315deg)","rotateX(-50deg) rotateY(50deg) rotateZ(180deg)"];break;case 6:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(90deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(180deg)","rotateX(40deg) rotateY(-40deg) rotateZ(225deg)","rotateX(40deg) rotateY(-100deg) rotateZ(90deg)","rotateX(-50deg) rotateY(-90deg) rotateZ(180deg)"]}break;case 2:switch(n){case 1:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(0deg)","rotateX(-50deg) rotateY(50deg) rotateZ(0deg)","rotateX(80deg) rotateY(-40deg) rotateZ(180deg)","rotateX(-50deg) rotateY(50deg) rotateZ(45deg)","rotateX(-50deg) rotateY(90deg) rotateZ(180deg)"];break;case 2:t=["","rotateX(40deg) rotateY(180deg) rotateZ(-50deg)","rotateX(-140deg) rotateY(220deg) rotateZ(10deg)","rotateX(-40deg) rotateY(180deg) rotateZ(-45deg)","rotateX(-50deg) rotateY(45deg) rotateZ(90deg)","rotateX(130deg) rotateY(90deg) rotateZ(-90deg)"];break;case 3:t=["","rotateX(-50deg) rotateY(-130deg) rotateZ(0deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(0deg)","rotateX(-140deg) rotateY(-130deg) rotateZ(0deg)","rotateX(-140deg) rotateY(-130deg) rotateZ(-180deg)","rotateX(-50deg) rotateY(-130deg) rotateZ(90deg)"];break;case 4:t=["","rotateX(40deg) rotateY(-120deg) rotateZ(-50deg)","rotateX(40deg) rotateY(-180deg) rotateZ(-50deg)","rotateX(90deg) rotateY(-90deg) rotateZ(-50deg)","rotateX(40deg) rotateY(-180deg) rotateZ(90deg)","rotateX(90deg) rotateY(-270deg) rotateZ(0deg)"];break;case 5:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(0deg)","rotateX(-50deg) rotateY(50deg) rotateZ(0deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(-45deg)","rotateX(-50deg) rotateY(50deg) rotateZ(-90deg)","rotateX(0deg) rotateY(-50deg) rotateZ(-40deg)"];break;case 6:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(-90deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(-180deg)","rotateX(40deg) rotateY(0deg) rotateZ(-90deg)","rotateX(40deg) rotateY(-100deg) rotateZ(90deg)","rotateX(-50deg) rotateY(-0deg) rotateZ(-180deg)"]}break;case 3:switch(n){case 1:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(0deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(90deg)","rotateX(40deg) rotateY(-40deg) rotateZ(90deg)","rotateX(-50deg) rotateY(-90deg) rotateZ(0deg)","rotateX(0deg) rotateY(-40deg) rotateZ(90deg)","rotateX(40deg) rotateY(-40deg) rotateZ(-0deg)"];break;case 2:t=["","rotateX(40deg) rotateY(90deg) rotateZ(80deg)","rotateX(40deg) rotateY(40deg) rotateZ(125deg)","rotateX(140deg) rotateY(180deg) rotateZ(100deg)","rotateX(50deg) rotateY(180deg) rotateZ(-100deg)","rotateX(-50deg) rotateY(45deg) rotateZ(40deg)","rotateX(90deg) rotateY(90deg) rotateZ(-100deg)"];break;case 3:t=["","rotateX(-50deg) rotateY(-130deg) rotateZ(0deg)","rotateX(-50deg) rotateY(-30deg) rotateZ(-90deg)","rotateX(140deg) rotateY(-130deg) rotateZ(-90deg)","rotateX(140deg) rotateY(-130deg) rotateZ(-180deg)","rotateX(150deg) rotateY(-100deg) rotateZ(0deg)"];break;case 4:t=["","rotateX(40deg) rotateY(-120deg) rotateZ(-50deg)","rotateX(40deg) rotateY(-90deg) rotateZ(-50deg)","rotateX(90deg) rotateY(-120deg) rotateZ(-50deg)","rotateX(40deg) rotateY(-90deg) rotateZ(130deg)","rotateX(90deg) rotateY(-120deg) rotateZ(0deg)"];break;case 5:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(0deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(-90deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(-45deg)","rotateX(0deg) rotateY(-40deg) rotateZ(-45deg)","rotateX(-50deg) rotateY(0deg) rotateZ(0deg)"];break;case 6:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(-90deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(-135deg)","rotateX(40deg) rotateY(-40deg) rotateZ(-45deg)","rotateX(40deg) rotateY(-100deg) rotateZ(-90deg)","rotateX(-50deg) rotateY(-90deg) rotateZ(-180deg)"]}break;case 4:switch(n){case 1:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(270deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(360deg)","rotateX(90deg) rotateY(-40deg) rotateZ(250deg)","rotateX(-50deg) rotateY(-190deg) rotateZ(180deg)","rotateX(-150deg) rotateY(-90deg) rotateZ(220deg)","rotateX(40deg) rotateY(-40deg) rotateZ(360deg)"];break;case 2:t=["","rotateX(40deg) rotateY(270deg) rotateZ(80deg)","rotateX(40deg) rotateY(360deg) rotateZ(80deg)","rotateX(40deg) rotateY(220deg) rotateZ(125deg)","rotateX(140deg) rotateY(180deg) rotateZ(100deg)","rotateX(50deg) rotateY(180deg) rotateZ(-100deg)","rotateX(90deg) rotateY(290deg) rotateZ(100deg)"];break;case 3:t=["","rotateX(-50deg) rotateY(-130deg) rotateZ(-180deg)","rotateX(-50deg) rotateY(-130deg) rotateZ(-225deg)","rotateX(-200deg) rotateY(-100deg) rotateZ(-135deg)","rotateX(-230deg) rotateY(-210deg) rotateZ(-180deg)","rotateX(150deg) rotateY(-100deg) rotateZ(45deg)"];break;case 4:t=["","rotateX(40deg) rotateY(180deg) rotateZ(-50deg)","rotateX(40deg) rotateY(90deg) rotateZ(-50deg)","rotateX(90deg) rotateY(90deg) rotateZ(-50deg)","rotateX(40deg) rotateY(130deg) rotateZ(0deg)","rotateX(90deg) rotateY(120deg) rotateZ(0deg)"];break;case 5:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(180deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(220deg)","rotateX(-50deg) rotateY(0deg) rotateZ(135deg)","rotateX(0deg) rotateY(-40deg) rotateZ(200deg)","rotateX(-50deg) rotateY(0deg) rotateZ(270deg)"];break;case 6:t=["","rotateX(-50deg) rotateY(-40deg) rotateZ(90deg)","rotateX(-50deg) rotateY(-40deg) rotateZ(180deg)","rotateX(-180deg) rotateY(-40deg) rotateZ(45deg)","rotateX(-135deg) rotateY(-100deg) rotateZ(90deg)","rotateX(-50deg) rotateY(-90deg) rotateZ(180deg)"]}}return i=t.length-1,r=Math.floor(Math.random()*i)+1,t[r]};DICE.get_rotate_str_pre_red=function(n){var t="";switch(n){case 1:t="rotateX(-50deg) rotateY(-40deg) rotateZ(720deg)";break;case 2:t="rotateX(-320deg) rotateY(180deg) rotateZ(-50deg)";break;case 3:t="rotateX(-50deg) rotateY(-130deg) rotateZ(360deg)";break;case 4:t="rotateX(40deg) rotateY(300deg) rotateZ(-50deg)";break;case 5:t="rotateX(-50deg) rotateY(-40deg) rotateZ(360deg)";break;case 6:t="rotateX(-50deg) rotateY(-40deg) rotateZ(270deg)"}return t};DICE.is_triple=function(n){return n.dice1==n.dice2&&n.dice2==n.dice3?!0:!1};DICE.is_double=function(n){return n.dice1==0?!1:n.dice2==0?!1:n.dice1==n.dice2&&n.dice2==n.dice3?!1:n.dice1==n.dice2?!0:!1};DICE.how_many_go=function(n){var t=n.dice1+n.dice2;return n.dice1==n.dice3?n.dice2:n.dice2==n.dice3?n.dice1:t};DICE.get_result=function(){var i=DICE.ROULETTE_HITRATE,n={dice1:0,dice2:0,dice3:Math.floor(Math.random()*6+1),tot:0},t;if(DICE_GAGE.ui_display==1&&Math.floor(Math.random()*100+1)<=i)switch(DICE_GAGE.result_value){case 3:t=2;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=2;break;case 2:n.dice1=2;n.dice2=1}break;case 4:t=3;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=3;break;case 2:n.dice1=3;n.dice2=1;break;case 3:n.dice1=2;n.dice2=2}break;case 5:t=4;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=4;break;case 2:n.dice1=4;n.dice2=1;break;case 3:n.dice1=2;n.dice2=3;break;case 4:n.dice1=3;n.dice2=2}break;case 6:t=5;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=5;break;case 2:n.dice1=5;n.dice2=1;break;case 3:n.dice1=2;n.dice2=4;break;case 4:n.dice1=4;n.dice2=2;break;case 5:n.dice1=3;n.dice2=3}break;case 7:t=6;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=6;break;case 2:n.dice1=6;n.dice2=1;break;case 3:n.dice1=2;n.dice2=5;break;case 4:n.dice1=5;n.dice2=2;break;case 5:n.dice1=3;n.dice2=4;break;case 6:n.dice1=4;n.dice2=3}break;case 8:t=5;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=2;n.dice2=6;break;case 2:n.dice1=6;n.dice2=2;break;case 3:n.dice1=3;n.dice2=5;break;case 4:n.dice1=5;n.dice2=3;break;case 5:n.dice1=4;n.dice2=4}break;case 9:t=4;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=3;n.dice2=6;break;case 2:n.dice1=6;n.dice2=3;break;case 3:n.dice1=4;n.dice2=5;break;case 4:n.dice1=5;n.dice2=4}break;case 10:t=3;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=4;n.dice2=6;break;case 2:n.dice1=6;n.dice2=4;break;case 3:n.dice1=5;n.dice2=5}break;case 11:t=2;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=5;n.dice2=6;break;case 2:n.dice1=6;n.dice2=5}break;case 12:t=6;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=1;break;case 2:n.dice1=2;n.dice2=2;break;case 3:n.dice1=3;n.dice2=3;break;case 4:n.dice1=4;n.dice2=4;break;case 5:n.dice1=5;n.dice2=5;break;case 6:n.dice1=6;n.dice2=6}break;case 18:t=6;switch(Math.floor(Math.random()*t+1)){case 1:n.dice1=1;n.dice2=1;n.dice3=1;break;case 2:n.dice1=2;n.dice2=2;n.dice3=2;break;case 3:n.dice1=3;n.dice2=3;n.dice3=3;break;case 4:n.dice1=4;n.dice2=4;n.dice3=4;break;case 5:n.dice1=5;n.dice2=5;n.dice3=5;break;case 6:n.dice1=6;n.dice2=6;n.dice3=6}break;default:n.dice1=Math.floor(Math.random()*6+1);n.dice2=Math.floor(Math.random()*6+1)}else n.dice1=Math.floor(Math.random()*6+1),n.dice2=Math.floor(Math.random()*6+1);return n};DICE.throw=function(){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(DICE.throw);return}DICE_GAGE.ui_display==1?(S_GAME.scene=ENUM.SCENE.DICE_GAGE,S_GAME.status=ENUM.STATUS.DICE_GAGE_ENTER,DICE_GAGE.enter(function(){DICE_GAGE.start();S_GAME.status=ENUM.STATUS.DICE_GAGE_START})):(S_GAME.status=ENUM.STATUS.DICE_GAGE_START,DICE_GAGE.bypass=1,glo.enable_key=1,S_GAME.key_down_enter())};DICE.throw1=function(n,t){$("#panel1").css({display:"block"});var i=DICE.THROW_PLAYER[S_GAME.turn];DICE.count_complete=0;DICE.callbackfn=t;DICE.result.dice1=n;DICE.result.dice2=0;DICE.result.dice3=0;$("#panel1").css({display:"block"});$("#panel1").css({left:i.dice1.sx+"px",top:i.dice1.sy+"px"});TweenMax.to("#panel1",.7,{bezier:i.dice1.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw1_end1,onCompleteParams:[DICE.result.dice1]});$("#dice1").css({transform:DICE.get_rotate_str_pre(DICE.result.dice1)})};DICE.throw1_end1=function(n){if(glo.scene.cur==glo.S.GAME){SOUND.play_effect(SOUND.EFFECT.THROW_DICE);var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel1").css({left:t.dice1.bx+"px",top:t.dice1.by+"px"});TweenMax.to("#panel1",.6,{bezier:t.dice1.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:function(){DICE.callbackfn&&DICE.callbackfn()}});$("#dice1").css({transform:DICE.get_rotate_str(n)})}};DICE.throw1_red=function(n,t){$("#panel3").css({display:"block"});var i=DICE.THROW_PLAYER[S_GAME.turn];DICE.count_complete=0;DICE.callbackfn=t;DICE.result.dice1=0;DICE.result.dice2=0;DICE.result.dice3=n;$("#panel3").css({display:"block"});$("#panel3").css({left:i.dice3.sx+"px",top:i.dice3.sy+"px"});TweenMax.to("#panel3",.7,{bezier:i.dice3.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw1_red_end3,onCompleteParams:[DICE.result.dice3]});$("#dice3").css({transform:DICE.get_rotate_str_pre(DICE.result.dice3)})};DICE.throw1_red_end3=function(n){if(glo.scene.cur==glo.S.GAME){if(SOUND.play_effect(SOUND.EFFECT.THROW_DICE),S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(DICE.throw1_red_end3);return}var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel3").css({left:t.dice3.bx+"px",top:t.dice3.by+"px"});TweenMax.to("#panel3",.6,{bezier:t.dice3.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:function(){DICE.callbackfn&&DICE.callbackfn()}});$("#dice3").css({transform:DICE.get_rotate_str(n)})}};DICE.throw2=function(n,t){$("#panel1").css({display:"block"});$("#panel2").css({display:"block"});var i=DICE.THROW_PLAYER[S_GAME.turn];DICE.count_complete=0;DICE.callbackfn=t;$("#panel1").css({display:"block"});$("#panel1").css({left:i.dice1.sx+"px",top:i.dice1.sy+"px"});TweenMax.to("#panel1",.7,{bezier:i.dice1.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw2_end1,onCompleteParams:[n.dice1]});$("#dice1").css({transform:DICE.get_rotate_str_pre(n.dice1)});$("#panel2").css({display:"block"});$("#panel2").css({left:i.dice2.sx+"px",top:i.dice2.sy+"px"});TweenMax.to("#panel2",.7,{bezier:i.dice2.bezier,ease:Power0.easeInOut,repeat:0,yoyo:!1,onComplete:DICE.throw2_end2,onCompleteParams:[n.dice2]});$("#dice2").css({transform:DICE.get_rotate_str_pre(n.dice2)})};DICE.throw2_end1=function(n){SOUND.play_effect(SOUND.EFFECT.THROW_DICE);var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel1").css({left:t.dice1.bx+"px",top:t.dice1.by+"px"});TweenMax.to("#panel1",.6,{bezier:t.dice1.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:DICE.throw2_end});$("#dice1").css({transform:DICE.get_rotate_str(n)})};DICE.throw2_end2=function(n){var t=DICE.THROW_PLAYER[S_GAME.turn];$("#panel2").css({left:t.dice2.bx+"px",top:t.dice2.by+"px"});TweenMax.to("#panel2",.7,{bezier:t.dice2.bounce_bezier,ease:Power1.easeOut,repeat:0,yoyo:!1,onComplete:DICE.throw2_end});$("#dice2").css({transform:DICE.get_rotate_str(n)})};DICE.throw2_end=function(){if(glo.scene.cur==glo.S.GAME){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(DICE.throw2_end);return}DICE.count_complete++;DICE.count_complete==2&&DICE.callbackfn()}};DICE.view_result=function(n,t){if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(DICE.view_result,n,t);return}$("#DICE_result").css({left:"843px",top:"202px",position:"absolute",display:"block"});util.draw_image_no_wh_pos("DICE_result_bg","./image/game/dice/p_diceresult_bg.png",0,0);switch(t){case"트리플":SOUND.play_effect(SOUND.EFFECT.TRIPLE);util.draw_text_html(TXT.triple,"DICE_result_value",40,59,154,112,112,50,"center","#230909");break;case"더블":SOUND.play_effect(SOUND.EFFECT.DOUBLE);util.draw_text_html(n/2+"<br>"+TXT.double,"DICE_result_value",40,59,154,112,56,50,"center","#230909");break;case"꽝":switch(n){case 1:SOUND.play_effect(SOUND.EFFECT.NUM1);break;case 2:SOUND.play_effect(SOUND.EFFECT.NUM2);break;case 3:SOUND.play_effect(SOUND.EFFECT.NUM3);break;case 4:SOUND.play_effect(SOUND.EFFECT.NUM4);break;case 5:SOUND.play_effect(SOUND.EFFECT.NUM5);break;case 6:SOUND.play_effect(SOUND.EFFECT.NUM6);break;case 7:SOUND.play_effect(SOUND.EFFECT.NUM7);break;case 8:SOUND.play_effect(SOUND.EFFECT.NUM8);break;case 9:SOUND.play_effect(SOUND.EFFECT.NUM9);break;case 10:SOUND.play_effect(SOUND.EFFECT.NUM10);break;case 11:SOUND.play_effect(SOUND.EFFECT.NUM11)}default:util.draw_text_html(n,"DICE_result_value",40,59,154,112,112,100,"center","#230909")}setTimeout(function(){$("#DICE_result").css({display:"none"})},1500)} 
var DICE_GAGE={callbackfn:null,angle:0,result_value:0,bypass:0,ui_display:0};DICE_GAGE.enter=function(n){DICE_GAGE.result_value=0;DICE_GAGE.make_screen();n()};DICE_GAGE.make_screen=function(){$("#GA_dice_gage_frame").css({display:"block",left:"688px",top:"298px",width:"547px",height:"546px",position:"absolute"});util.draw_image_no_wh_pos("GA_dice_gage_bg","./image/game/dice_gage/mono_roulette.png",0,0);util.draw_image_no_wh_pos("GA_dice_gage_clock","./image/game/dice_gage/mono_clock.png",75,62);$("#GA_dice_gage_btn").css({left:"228px",top:"218px",width:"87px",height:"87px",position:"absolute"});var n=PLAYER.get_color(S_GAME.turn);util.draw_image_no_wh_pos("GA_dice_gage_btn_bg","./image/game/dice_gage/mono_roulettebt_"+n+".png",0,0);util.draw_text_html(TXT.stop,"GA_dice_gage_btn_txt",8,29,71,28,28,20,"center","#ffffff");util.draw_textshadow("GA_dice_gage_btn_txt","#141414",3);$("#GA_dice_gage_clock").css({"animation-play-state":"paused"})};DICE_GAGE.start=function(){glo.enable_key=0;$("#GA_dice_gage_clock").css({"animation-play-state":"running"});setTimeout(function(){glo.enable_key=1},200)};DICE_GAGE.stop=function(){($("#GA_dice_gage_clock").css({"animation-play-state":"paused"}),DICE_GAGE.bypass!=1)&&(DICE_GAGE.cal_angle(),DICE_GAGE.cal_result(),util.log("====1="+GA_dice_gage_clock.getAttribute("transform")))};DICE_GAGE.cal_angle=function(){var r=document.getElementById("GA_dice_gage_clock"),t=window.getComputedStyle(r,null),u=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")||"fail...",n=u.split("(")[1];n=n.split(")")[0];n=n.split(",");var f=n[0],e=n[1],o=n[2],s=n[3],i=Math.round(Math.atan2(e,f)*(180/Math.PI));i<0&&(i+=360);DICE_GAGE.angle=i};DICE_GAGE.cal_result=function(){var n=DICE_GAGE.angle;result=n<=9?18:n<=33?3:n<=57?4:n<=81?5:n<=99?12:n<=123?7:n<=147?8:n<=171?9:n<=189?12:n<=213?5:n<=237?6:n<=261?7:n<=279?12:n<=303?9:n<=327?10:n<=351?11:n<=359?18:2;DICE_GAGE.result_value=result;util.log("주사위 룰렛 결과 ==========="+result)} 
var CHAR_DEFINE=[{},{FNAME_DIR:"./image/game/char",W:103,H:126},{FNAME_DIR:"./image/game/char",W:103,H:126},{FNAME_DIR:"./image/game/char",W:103,H:126},{FNAME_DIR:"./image/game/char",W:103,H:126},],CHAR={};CHAR.draw_all=function(){for(var n=1;n<=4;n++)PLAYER.info[n].type!=ENUM.PLAYER_TYPE.NONE&&CHAR.draw_i(n)};CHAR.draw_i=function(n){var t=PLAYER.info[n].location,i;if(t==null||t>36){console.error(n+" Player의 location 오류:"+t);return}var r=POPUP_SELECTCHAR.get_char_bunho(n),f=CHAR_DEFINE[r].W,o=CHAR_DEFINE[r].H,i="./image/game/char/char"+r+".png";S_GAME.mode.online==1&&(i=n==1?"./image/game/char/char"+S_PVP_MATCHING.me.char_info+".png":"./image/game/char/char"+S_PVP_MATCHING.other.char_info+".png");var e=CHAR.get_xy_boardindex(n,t),s=e.x,u=e.y;$("#GA_char"+n).css({left:s+"px",top:u+"px",widht:f+"px",height:o+"px",zIndex:u>0?u:0,position:"absolute"});util.draw_image_no_wh_pos("GA_char"+n+"_bg",i,0,0);$("#GA_char"+n+"_turn").css({display:"block"});i="./image/game/ui/turn_"+PLAYER.get_color(n)+".png";util.draw_image_no_wh_pos("GA_char"+n+"_turn",i,f/2-25,-74)};CHAR.show=function(){for(var n=1;n<=4;n++)PLAYER.info[n].type!=ENUM.PLAYER_TYPE.NONE&&PLAYER.info[n].pasan_flag!=1&&$("#GA_char"+n).css({display:"block"})};CHAR.hide=function(){for(var n=1;n<=4;n++)PLAYER.info[n].type!=ENUM.PLAYER_TYPE.NONE&&$("#GA_char"+n).css({display:"none"})};CHAR.get_xy_boardindex=function(n,t){var i=t;if(i==null||i>36){console.error(n+" Player의 location 오류:"+i);return}var r=0,u=0,f=i==1||i==10||i==19||i==18?30:10;switch(n){case 1:r=0;u=-f/2;break;case 2:r=-f;u=0;break;case 3:r=+f;u=0;break;case 4:r=0;u=+f}var o=BOARD_DEFINE[i].CX,s=BOARD_DEFINE[i].CY,e=PLAYER.info[n].char_bunho,h=CHAR_DEFINE[e].W,c=CHAR_DEFINE[e].H,v=CHAR_DEFINE[e].FNAME_DIR+"/"+n+"/wait.png",l=o-h/2+r,a=s-c+u;return{x:l,y:a}};CHAR.move=function(n,t){if(S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_char_move(t),S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(CHAR.move,n,t);return}CHAR.move_start(n,t);setTimeout(function(){t>0?CHAR.move_plus(n,t):t<0?CHAR.move_minus(n,t):util.log("CHAR.move()호출 했는데 gap이 0이다? 이상함.조사 바람")},800)};CHAR.move_plus=function(n,t){var i,u,r;if(t<=0){util.log(" CHAR.move()에서 plus_gap에 0보다 작네요:"+t);return}i=100;i=t<=5?100:Math.min(50,1e3/t);u=0;r=function(){if(S_GAME.winner==0){if(u+1>t){CHAR.move_end();setTimeout(function(){BOARD.arrive_player(n)},500);return}if(u++,PLAYER.info[n].location++,SOUND.play_effect(SOUND.EFFECT.CHAR_MOVE),PLAYER.info[n].location==37)if(PLAYER.info[n].location=1,CHAR.draw_i(n),u+1<=t){var f=CAL.get_start_arrived_gold(),e=n,o=f,s=TXT.get_star_arrived_gold+":"+f;util.notice_player_num(n,TXT.get_star_arrived_gold,f);PLAYER.info[n].rotate_num++;util.log("[출발지점도착]: 월급수령:"+f);CAL.move_gold(0,e,o,s,function(){var u=CAL.get_zasan_value_of_player(n);if(u>0){var t=Math.floor(u*.1),f=n,e=t,o=TXT.get_star_arrived_tax+":"+t;util.notice_player_num(n,TXT.get_star_arrived_tax,t);util.log("[출발지점지남]: 세금받음(보유땅의10%):"+t);CAL.move_gold(0,f,e,o,function(){CHAR.move_ing_start_pass_donation_check(n,function(){BOARD.tile_down_up(PLAYER.info[n].location);setTimeout(r,i)})})}else CHAR.move_ing_start_pass_donation_check(n,function(){BOARD.tile_down_up(PLAYER.info[n].location);setTimeout(r,i)})})}else BOARD.tile_down_up(PLAYER.info[n].location),CHAR.draw_i(n),setTimeout(r,i);else BOARD.tile_down_up(PLAYER.info[n].location),CHAR.draw_i(n),setTimeout(r,i)}};r()};CHAR.move_ing_start_pass_donation_check=function(n,t){if(PLAYER.get_zasan_number1()==n){var u=CAL.get_donation_gold(n),i=Math.min(u,PLAYER.info[n].bougold),f=n,r=i,e=TXT.zasan1_donate+":"+i;util.notice_player_num(n,TXT.zasan1_donate,-i);util.log("[출발지점도착]: 자산1위 기부금 납부(자산의 5%:"+i);CAL.move_gold(f,0,r,e,function(){BOARD.info[10].angel.gold_tot+=r;util.log("기부금 갱신됨:"+BOARD.info[10].angel.gold_tot);BOARD.draw_angel_value();t&&t()})}else t&&t()};CHAR.move_minus=function(n,t){if(t>0){util.log(" CHAR.move_minus()에서 gap에 0보다 큼:"+t);return}var i=0,r=function(){if(S_GAME.winner==0){if(i-1<t){CHAR.move_end();setTimeout(function(){BOARD.arrive_player(n)},500);return}i--;PLAYER.info[n].location--;SOUND.play_effect(SOUND.EFFECT.CHAR_MOVE);PLAYER.info[n].location==0&&(PLAYER.info[n].location=36);BOARD.tile_down_up(PLAYER.info[n].location);CHAR.draw_i(n);setTimeout(r,150)}};r()};CHAR.move_start=function(n,t){var e=PLAYER.info[n].location,i=e+t;i>36&&(i=i-36);i<1&&(i=i+36);var f="roll_goal_left",r=BOARD_DEFINE[i].TX,u=BOARD_DEFINE[i].TY;i==1||i==10||i==19||i==28?(f="roll_goal_big",r=r-5,u=u-14):i==6?(f="roll_goal_left",r=r-23,u=u+4):2<=i&&i<=9||20<=i&&i<=27?(f="roll_goal_left",r=r-20,u=u-25):(11<=i&&i<=18||29<=i&&i<=36)&&(f="roll_goal_right",r=r-24,u=u-25);$("#GA_roll_goal").css({display:"block",left:r+"px",top:u+"px",position:"absolute"}).addClass(f)};CHAR.move_end=function(){S_GAME.status=ENUM.STATUS.CHAR_MOVE_END;DICE.hide_dice();setTimeout(function(){$("#GA_roll_goal").css({display:"none"}).removeClass("roll_goal_left").removeClass("roll_goal_right").removeClass("roll_goal_big")},1e3)};CHAR.move_onestep_fromto=function(n,t){S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_char_move_onestep_fromto(t);var f="GA_char"+n,e=PLAYER.info[n].location,i=CHAR.get_xy_boardindex(n,t),r=CHAR.get_xy_boardindex(n,e),o=-r.x+i.x,s=-r.y+i.y,u="translate("+o+"px,"+s+"px)";$("#"+f).css({transform:u,"-webkit-transform":u,transition:"transform 1s","-webkit-transition":"transform 1s"}).on("webkitTransitionEnd",{player:n,to_board_index:t},CHAR.move_onestep_fromto_end)};CHAR.move_onestep_fromto_end=function(n){var t=n.data.player,i=n.data.to_board_index,r=CHAR.get_xy_boardindex(t,i),u="GA_char"+t;$("#"+u).off("webkitTransitionEnd");$("#"+u).css({transform:"none","-webkit-transform":"none",transition:"none","-webkit-transition":"none",left:r.x+"px",top:r.y+"px"});util.log("캐릭터 이동 완료 :"+t);PLAYER.info[t].location=i;S_GAME.status=ENUM.STATUS.CHAR_MOVE_END;switch(i){case 19:BOARD.arrive_EDGE_ISLAND(t)}} 
S_GAME.sun_decide=function(){S_GAME.status=ENUM.STATUS.DECIDE_SUN;POPUP_JOINNUM.after_select_sun()} 
var ECONOMY={type:[],result:[],board_index_arr:[],arr:[],callbackfn:null,flag_2turn:0,ing_flag:0};ECONOMY.run=function(n,t){var u,r,f,i,e;if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(ECONOMY.run,t);return}for(ECONOMY.ing_flag=1,util.enable_key(0,"ECONOMY.run()에서   key 막기"),REMAINTIME.stop(),S_GAME.scene=ENUM.SCENE.ECONOMY,this.callbackfn=t,this.num=3,this.type=[],this.result=[],this.board_index_arr=[],this.board_index_arr.push(0),r=1;r<=this.num;r++)i=Math.floor(Math.random()*100+1),this.type[r]=i<=50?ENUM.ECONOMY_TYPE.BAD:ENUM.ECONOMY_TYPE.GOOD,this.type[r]==ENUM.ECONOMY_TYPE.GOOD?(i=Math.floor(Math.random()*36)+15,i=Math.floor(Math.random()*36)+15,this.result[r]=i/10):(i=Math.floor(Math.random()*4)+4,this.result[r]=i/10);for(u=BOARD.get_index_country(),r=1;r<=this.num;r++)f=u.length-1,i=Math.floor(Math.random()*f)+1,this.board_index_arr.push(u[i]),e=u[i],u[i]=u[f],u[f]=e,u.pop();if(S_GAME.mode.online==1&&S_GAME.turn==1&&n=="행운카드에의한경제효과")WSS.send_economy(this.type,this.result,this.board_index_arr,n);else if(S_GAME.mode.online==1&&n=="정기적인경제효과")if(S_GAME.turn==1)WSS.send_economy(this.type,this.result,this.board_index_arr,n);else return;SOUND.play_effect(SOUND.EFFECT.ECONOMY);ECONOMY.make_screen();ECONOMY.make_random_focus()};ECONOMY.make_screen=function(){var n={icon_fname:"./image/common/onepixel.png",icon_x:0,icon_y:0,line1_text:TXT.economy_effect_occur,line2_text:TXT.select_economy_effct_zone,time:7e3};S_GAME.draw_message_icon(n,"popup_economy_in")};ECONOMY.make_random_focus=function(){ECONOMY.arr=BOARD.get_index_country();var i=ECONOMY.arr.length-1,n=0,t=function(){var u,r,f;n++;u=Math.floor(Math.random()*i)+1;r=ECONOMY.arr[u];$(".focus").css({display:"none"});$("#board_tile"+r+"_focus").css({display:"block"});f=TXT.chance10_searching+" : "+eval("TXT.tile"+r+"_title ");util.draw_text_html(f,"GA_message_icon_line2",0,89,987,54,54,36,"center","#ffffff");n<30?setTimeout(t,120):ECONOMY.make_random_focus_end()};t()};ECONOMY.make_random_focus_end=function(){var i,r,t,n,u,f;if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){S_GAME.pause_add(ECONOMY.make_random_focus_end);return}for(i="",t=1;t<=this.num;t++){for(n=1;n<=5;n++)BOARD.info[this.board_index_arr[t]].country.gold_tot[n]=Math.floor(BOARD.info[this.board_index_arr[t]].country.gold_tot[n]*ECONOMY.result[t]);BOARD.info[this.board_index_arr[t]].country.owner!=0&&(PLAYER.ui_draw(),util.notice_player(BOARD.info[this.board_index_arr[t]].country.owner,TXT.zasan_change_beacuse_economy));$(".focus").css({display:"none"});i+=t<this.num?eval("TXT.tile"+this.board_index_arr[t]+"_title ")+",":eval("TXT.tile"+this.board_index_arr[t]+"_title ")}for(i=TXT.chance10_searching_complete+" : "+i,util.draw_text_html(i,"GA_message_icon_line2",-10,89,1007,54,54,28,"center","yellow"),n=1;n<=36;n++){for(r=0,t=1;t<=ECONOMY.num;t++)this.board_index_arr[t]==n&&(r=1);r==1?$("#board_tile"+n).addClass("tile_up"):$("#board_tile"+n).addClass("tile_dim")}for(n=1;n<=ECONOMY.num;n++)u=BOARD_DEFINE[this.board_index_arr[n]].TX+1,f=BOARD_DEFINE[this.board_index_arr[n]].TY-83,this.type[n]==ENUM.ECONOMY_TYPE.GOOD?util.draw_image_no_wh_pos("economy_"+n,"./image/game/ui/p_economic_upicon"+util.get_postfix_lang()+".png",u,f):util.draw_image_no_wh_pos("economy_"+n,"./image/game/ui/p_economic_downicon"+util.get_postfix_lang()+".png",u,f),$("#economy_"+n).css({display:"block"});setTimeout(function(){$("#GA_message_icon").removeClass("popup_economy_in");$("#GA_message_icon").addClass("popup_economy_out");setTimeout(function(){var i,t,n,r;for($("#GA_message_icon").empty().css({display:"none"}).removeClass("popup_economy_out"),t=1;t<=ECONOMY.num;t++)$("#board_tile"+ECONOMY.board_index_arr[t]).removeClass("tile_up");for($(".focus").css({display:"none"}),n=1;n<=36;n++){for(i=0,t=1;t<=ECONOMY.num;t++)ECONOMY.board_index_arr[t]==n&&(i=1);i==1?($("#board_tile"+n).removeClass("tile_up"),BOARD.draw_tile_update_economy(n)):$("#board_tile"+n).removeClass("tile_dim")}for(n=1;n<=ECONOMY.num;n++)$("#economy_"+n).css({display:"none"});if(r=PLAYER.get_zasan_number1(),PLAYER.info[r].totzasan>CAL.get_win_gold()){S_GAME.winner=r;S_GAME.winwhy=ENUM.WINWHY.TENBILLION;PLAYER.ui_draw();S_GAME.pause();S_GAME.end();util.log("승리 팝업 : ECONOMY.make_random_focus_end() 에서");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}ECONOMY.ing_flag=0;ECONOMY.callbackfn&&ECONOMY.callbackfn();SOUND.stop_effect(SOUND.EFFECT.ECONOMY)},2e3)},1e3)};ECONOMY.check=function(){for(var n=1;n<=4;n++)if(PLAYER.info[n].type!=ENUM.PLAYER_TYPE.NONE&&(PLAYER.info[n].turn_count==0||PLAYER.info[n].turn_count%2==1)){this.flag_2turn=0;return}this.flag_2turn=1;util.log("2turn 경제효과 발동 flag 켜짐")} 
var SELECTTILE={focus:1,player:0,num:0,before_scene:ENUM.SCENE.NONE,board_index_array:null};SELECTTILE.init=function(n,t){var u,i,f,r;for(this.before_scene=S_GAME.scene,this.focus=1,S_GAME.scene=ENUM.SCENE.SELECTTILE,PLAYER.info[S_GAME.turn].type!=ENUM.PLAYER_TYPE.AI&&util.enable_key(1,"SELECTTILE.init()에서  key받기"),this.player=n,this.board_index_array=t,this.num=t.length-1,u="",i=1;i<=36;i++){for(f=0,r=1;r<=this.num;r++)i==this.board_index_array[r]&&(f=1);f==1?($("#board_tile"+i).addClass("tile_up"),u+=SELECTTILE.get_area_tag_str(i)):$("#board_tile"+i).addClass("tile_dim")}SELECTTILE.make_tag(u);SELECTTILE.make_screen();SELECTTILE.draw_focus();CHAR.hide();PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI&&(util.enable_key(0,"SELECTTILE.init()에서  AI는 key 막기"),SELECTTILE.focus=Math.floor(Math.random()*SELECTTILE.num)+1,SELECTTILE.draw_focus(),setTimeout(function(){SELECTTILE.menu_run()},1500))};SELECTTILE.init_many_end=function(){};SELECTTILE.make_tag=function(n){$("#GA_selecttile").empty();var t=document.getElementById("GA_selecttile");t.innerHTML='<img id="GA_imagemap" src="./image/game/board/1920x1080_blur.png" style="left: 0px; top: 0px; width: 1920px; height: 1080px; position: absolute; display: block;" usemap="#image-map-tile"><map name="image-map-tile">'+n+"<\/map>"};SELECTTILE.get_area_tag_str=function(n){switch(n){case 1:return'<area onClick="S_GAME.onclick_tile(1)"  onMouseOver="S_GAME.onmouseover_tile(1)" coords="956,917,849,975,960,1036,1068,978" shape="poly">';case 2:return'<area onClick="S_GAME.onclick_tile(2)"  onMouseOver="S_GAME.onmouseover_tile(2)" coords="878,866,788,921,861,966,960,912" shape="poly">';case 3:return'<area onClick="S_GAME.onclick_tile(3)"  onMouseOver="S_GAME.onmouseover_tile(3)" coords="802,824,707,875,785,921,878,865" shape="poly">';case 4:return'<area onClick="S_GAME.onclick_tile(4)"  onMouseOver="S_GAME.onmouseover_tile(4)" coords="720,782,629,831,702,875,800,822" shape="poly">';case 5:return'<area onClick="S_GAME.onclick_tile(5)"  onMouseOver="S_GAME.onmouseover_tile(5)" coords="642,732,549,790,625,831,724,777" shape="poly">';case 6:return'<area onClick="S_GAME.onclick_tile(6)"  onMouseOver="S_GAME.onmouseover_tile(6)" coords="642,731,563,690,476,744,547,785" shape="poly">';case 7:return'<area onClick="S_GAME.onclick_tile(7)"  onMouseOver="S_GAME.onmouseover_tile(7)" coords="485,644,395,693,469,741,561,688" shape="poly">';case 8:return'<area onClick="S_GAME.onclick_tile(8)"  onMouseOver="S_GAME.onmouseover_tile(8)" coords="407,602,317,653,391,695,483,641" shape="poly">';case 9:return'<area onClick="S_GAME.onclick_tile(9)"  onMouseOver="S_GAME.onmouseover_tile(9)" coords="324,553,230,607,308,652,401,597" shape="poly">';case 10:return'<area onClick="S_GAME.onclick_tile(10)"  onMouseOver="S_GAME.onmouseover_tile(10)" coords="210,476,100,541,215,614,324,551" shape="poly">';case 11:return'<area onClick="S_GAME.onclick_tile(11)"  onMouseOver="S_GAME.onmouseover_tile(11)" coords="312,451,237,492,335,549,410,510" shape="poly">';case 12:return'<area onClick="S_GAME.onclick_tile(12)"  onMouseOver="S_GAME.onmouseover_tile(12)" coords="390,405,315,449,407,504,483,461" shape="poly">';case 13:return'<area onClick="S_GAME.onclick_tile(13)"  onMouseOver="S_GAME.onmouseover_tile(13)" coords="468,361,395,405,490,463,559,420" shape="poly">';case 14:return'<area onClick="S_GAME.onclick_tile(14)"  onMouseOver="S_GAME.onmouseover_tile(14)" coords="551,320,478,359,563,422,641,375" shape="poly">';case 15:return'<area onClick="S_GAME.onclick_tile(15)"  onMouseOver="S_GAME.onmouseover_tile(15)" coords="626,273,551,317,646,371,722,331" shape="poly">';case 16:return'<area onClick="S_GAME.onclick_tile(16)"  onMouseOver="S_GAME.onmouseover_tile(16)" coords="707,232,632,271,722,327,802,283" shape="poly">';case 17:return'<area onClick="S_GAME.onclick_tile(17)"  onMouseOver="S_GAME.onmouseover_tile(17)" coords="783,185,707,227,804,280,878,241" shape="poly">';case 18:return'<area onClick="S_GAME.onclick_tile(18)"  onMouseOver="S_GAME.onmouseover_tile(18)" coords="863,137,790,181,880,236,960,195" shape="poly">';case 19:return'<area onClick="S_GAME.onclick_tile(19)"  onMouseOver="S_GAME.onmouseover_tile(19)" coords="960,183,1072,119,955,49,844,117" shape="poly">';case 20:return'<area onClick="S_GAME.onclick_tile(20)"  onMouseOver="S_GAME.onmouseover_tile(20)" coords="1061,140,961,194,1039,235,1129,181" shape="poly">';case 21:return'<area onClick="S_GAME.onclick_tile(21)"  onMouseOver="S_GAME.onmouseover_tile(21)" coords="1136,184,1046,237,1116,281,1209,228" shape="poly">';case 22:return'<area onClick="S_GAME.onclick_tile(22)"  onMouseOver="S_GAME.onmouseover_tile(22)" coords="1212,232,1122,284,1195,323,1285,271" shape="poly">';case 23:return'<area onClick="S_GAME.onclick_tile(23)"  onMouseOver="S_GAME.onmouseover_tile(23)" coords="1290,277,1202,325,1275,371,1365,316" shape="poly">';case 24:return'<area onClick="S_GAME.onclick_tile(24)"  onMouseOver="S_GAME.onmouseover_tile(24)" coords="1374,320,1282,371,1355,415,1448,360" shape="poly">';case 25:return'<area onClick="S_GAME.onclick_tile(25)"  onMouseOver="S_GAME.onmouseover_tile(25)" coords="1452,360,1358,418,1433,460,1531,405" shape="poly">';case 26:return'<area onClick="S_GAME.onclick_tile(26)"  onMouseOver="S_GAME.onmouseover_tile(26)" coords="1530,406,1433,462,1513,510,1606,452" shape="poly">';case 27:return'<area onClick="S_GAME.onclick_tile(27)"  onMouseOver="S_GAME.onmouseover_tile(27)" coords="1609,454,1516,506,1592,547,1682,493" shape="poly">';case 28:return'<area onClick="S_GAME.onclick_tile(28)"  onMouseOver="S_GAME.onmouseover_tile(28)" coords="1599,547,1706,608,1815,547,1703,484" shape="poly">';case 29:return'<area onClick="S_GAME.onclick_tile(29)"  onMouseOver="S_GAME.onmouseover_tile(29)" coords="1591,554,1516,594,1609,650,1689,610" shape="poly">';case 30:return'<area onClick="S_GAME.onclick_tile(30)"  onMouseOver="S_GAME.onmouseover_tile(30)" coords="1519,598,1440,640,1530,693,1604,652" shape="poly">';case 31:return'<area onClick="S_GAME.onclick_tile(31)"  onMouseOver="S_GAME.onmouseover_tile(31)" coords="1435,642,1360,683,1453,737,1528,696" shape="poly">';case 32:return'<area onClick="S_GAME.onclick_tile(32)"  onMouseOver="S_GAME.onmouseover_tile(32)" coords="1355,689,1285,730,1372,784,1446,740" shape="poly">';case 33:return'<area onClick="S_GAME.onclick_tile(33)"  onMouseOver="S_GAME.onmouseover_tile(33)" coords="1279,733,1204,776,1292,827,1367,786" shape="poly">';case 34:return'<area onClick="S_GAME.onclick_tile(34)"  onMouseOver="S_GAME.onmouseover_tile(34)" coords="1197,779,1122,820,1214,874,1289,833" shape="poly">';case 35:return'<area onClick="S_GAME.onclick_tile(35)"  onMouseOver="S_GAME.onmouseover_tile(35)" coords="1121,823,1043,864,1141,923,1211,879" shape="poly">';case 36:return'<area onClick="S_GAME.onclick_tile(36)"  onMouseOver="S_GAME.onmouseover_tile(36)" coords="1038,867,965,911,1056,962,1131,923" shape="poly">'}};SELECTTILE.make_screen=function(){$("#GA_selecttile").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block"})};SELECTTILE.draw_focus=function(){$(".focus").css({display:"none"});var n=this.board_index_array[this.focus];$("#board_tile"+n+"_focus").css({display:"block"})};SELECTTILE.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:this.focus>1?this.focus--:this.focus==1&&(this.focus=this.num);this.draw_focus();break;case KeyDefine.left:this.focus<this.num?this.focus++:this.focus==this.num&&(this.focus=1);this.draw_focus();break;case KeyDefine.enter:this.menu_run()}};SELECTTILE.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("board_tile"+this.board_index_array[this.focus],glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("board_tile"+SELECTTILE.board_index_array[SELECTTILE.focus],1,1);setTimeout(function(){glo.enable_key=n;SELECTTILE.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};SELECTTILE.menu_run_run=function(){var n,t,i;util.enable_key(0,"SELECTTILE.menu_run_run()에서  key 막기");SELECTTILE.close();n=this.board_index_array[this.focus];switch(this.before_scene){case ENUM.SCENE.EDGE_START:S_GAME.scene=this.before_scene;POPUP_BUYCOUNTRY.init();break;case ENUM.SCENE.P_SELLCOUNTRY:util.enable_key(1,"POPUP_SELLCOUNTRY.init_one()에서  key 받기");POPUP_SELLCOUNTRY.board_index_sell_country=this.board_index_array[this.focus];POPUP_SELLCOUNTRY.init_one();break;case ENUM.SCENE.P_SELLZASAN:util.enable_key(1,"POPUP_SELLZASAN.init_one()에서  key 받기");POPUP_SELLZASAN.board_index_sell_zasan=this.board_index_array[this.focus];POPUP_SELLZASAN.init_one();break;case ENUM.SCENE.EDGE_GOTO:REMAINTIME.stop();t=PLAYER.info[this.player].location;i=0;i=n>t?n-t:36-t+n;S_GAME.status=ENUM.STATUS.CHAR_MOVE_START;CHAR.move(this.player,i);break;case ENUM.SCENE.P_CHANCE:switch(POPUP_CHANCE.index){case 1:POPUP_CHANCE.menu_run_1_select(n);break;case 3:POPUP_CHANCE.menu_run_3_sell(n);break;case 16:POPUP_CHANCE.chance16.stage==1?(POPUP_CHANCE.chance16.my=n,POPUP_CHANCE.menu_run_16_next()):POPUP_CHANCE.chance16.stage==2?(POPUP_CHANCE.chance16.other=n,POPUP_CHANCE.menu_run_16_next_next()):console.error("SELECTTILE.menu_run_run() chance16 error");break;default:console.error("undefined in SELECTTILE.menu_run_run(1)")}default:console.log("undefined SELECTTILE.menu_run_run(2):"+this.before_scene)}};SELECTTILE.remaintime_out=function(){glo.enable_key=0;$(".focus").css({display:"none"});switch(this.before_scene){case ENUM.SCENE.EDGE_START:util.notice_player(this.player,TXT.timeout_edge_start);SELECTTILE.close();BOARD.arrive_EDGE_START_next_next(this.player);break;case ENUM.SCENE.EDGE_GOTO:util.notice_player(this.player,TXT.timeout_edge_goto);var n=SELECTTILE.board_index_array.length-1,t=Math.floor(Math.random()*n)+1;SELECTTILE.focus=t;SELECTTILE.menu_run();break;case ENUM.SCENE.P_SELLCOUNTRY:util.notice_player(this.player,TXT.timeout_sellcountry_cancel);SELECTTILE.close();POPUP_MYTURN.focus=1;POPUP_MYTURN.menu_run_run();break;case ENUM.SCENE.P_SELLZASAN:util.notice_player(this.player,TXT.timeout_sellzasan_cancel);SELECTTILE.close();POPUP_MYTURN.focus=1;POPUP_MYTURN.menu_run_run();break;case ENUM.SCENE.P_CHANCE:switch(POPUP_CHANCE.index){case 1:util.notice_box(TXT.timeout_occur+":"+TXT.enforce_select,2);setTimeout(function(){var n=Math.floor(Math.random()*SELECTTILE.num)+1;SELECTTILE.focus=n;SELECTTILE.draw_focus();SELECTTILE.menu_run()},2e3);break;case 2:POPUP_CHANCE.menu_run();break;case 3:util.notice_box(TXT.timeout_occur+":"+TXT.enforce_select,2);setTimeout(function(){var n=Math.floor(Math.random()*SELECTTILE.num)+1;SELECTTILE.focus=n;SELECTTILE.draw_focus();SELECTTILE.menu_run()},2e3);break;case 16:util.notice_box(TXT.timeout_occur+":"+TXT.enforce_select,2);setTimeout(function(){var n=Math.floor(Math.random()*SELECTTILE.num)+1;SELECTTILE.focus=n;SELECTTILE.draw_focus();SELECTTILE.menu_run()},2e3);break;default:util.log("SELECTTILE.remaintime_out()에서 깜짝상자 관련 case 정해지지 않음. 넣어야 함!! :"+POPUP_CHANCE.index)}break;default:console.log("SELECTTILE.remaintime_out()에서 정의 안됨. 넣어야 함.:"+this.before_scene)}};SELECTTILE.close=function(){for(var n=1;n<=36;n++)$("#board_tile"+n).removeClass("tile_up"),$("#board_tile"+n).removeClass("tile_dim");$("#GA_selecttile").css({display:"none"}).empty();CHAR.show()};SELECTTILE.get_index=function(n){for(var i=this.board_index_array.length-1,t=1;t<=i;t++)if(n==this.board_index_array[t])return t;return console.error("오류발생!!:SELECTTILE.get_index() 가 0이 나옴 break point 잡아서 추적해 볼것"),0} 
var SELECTTILE_ABS={focus:1,abs_focus:2,where_focus:1,player:0,num:0,before_scene:ENUM.SCENE.NONE,board_index_array:null,board_index_array_select:null};SELECTTILE_ABS.init=function(n,t){var u,i,f,r;for(this.before_scene=S_GAME.scene,this.focus=1,S_GAME.scene=ENUM.SCENE.SELECTTILE_ABS,util.enable_key(1,"SELECTTILE_ABS.init()에서  key받기"),this.player=n,this.board_index_array=t,this.num=t.length-1,this.board_index_array_select=[],i=1;i<=this.num;i++)this.board_index_array_select[i]=0;if(PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI){for(i=1;i<=this.num;i++)this.board_index_array_select[i]=1;return}for(CHAR.hide(),u="",i=1;i<=36;i++){for(f=0,r=1;r<=this.num;r++)i==this.board_index_array[r]&&(f=1);f==1?($("#board_tile"+i).addClass("tile_up"),u+=SELECTTILE.get_area_tag_str(i)):$("#board_tile"+i).addClass("tile_dim")}SELECTTILE_ABS.make_tag(u);SELECTTILE_ABS.make_screen();SELECTTILE_ABS.draw_focus()};SELECTTILE_ABS.make_tag=function(n){$("#GA_popup_sellabs_selecttile").empty();var t=document.getElementById("GA_popup_sellabs_selecttile"),i=S_GAME.get_popup_class(S_GAME.turn);t.innerHTML='<img id="GA_imagemap" src="./image/game/board/1920x1080_blur.png" style="left: 0px; top: 0px; width: 1920px; height: 1080px; position: absolute; display: block;" usemap="#image-map-tile"><map name="image-map-tile">'+n+'<\/map><div id="sellabs_selecttile"  \tclass="'+i+'">\t<img id="sellabs_selecttile_bg">\t<div id="sellabs_selecttile_title"><\/div>\t<div id="sellabs_selecttile_needgold"><\/div>\t<div id="sellabs_selecttile_needgold_value"><\/div>\t<div id="sellabs_selecttile_sellgold"><\/div>\t<div id="sellabs_selecttile_sellgold_value"><\/div>\t<div id="sellabs_selecttile_btn1" class="button">\t\t<img id="sellabs_selecttile_btn1_bg">\t\t<div id="sellabs_selecttile_btn1_text"><\/div>\t\t<img id="sellabs_selecttile_btn1_focus" class="focus">\t<\/div>\t<div id="sellabs_selecttile_btn2" class="button">\t\t<img id="sellabs_selecttile_btn2_bg">\t\t<div id="sellabs_selecttile_btn2_text"><\/div>\t\t<img id="sellabs_selecttile_btn2_focus" class="focus">\t<\/div><\/div>'};SELECTTILE_ABS.make_screen=function(){$("#GA_popup_sellabs_selecttile").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block",zIndex:1080});$("#sellabs_selecttile").css({left:"745px",top:"385px",width:"430px",height:"404px",position:"absolute"});util.draw_image_no_wh_pos("sellabs_selecttile_bg","./image/game/popup_sellabs/p_sale_bg.png",0,0);util.draw_text_html(TXT.select_sellabs,"sellabs_selecttile_title",-18,-62,465,52,52,28,"center","#ffffff");util.draw_textshadow("sellabs_selecttile_title","#000000",2);util.draw_text_html(TXT.need_gold,"sellabs_selecttile_needgold",85,20,259,50,50,28,"center","#ffffff");util.draw_text_html(util.get_number_with_comma(POPUP_SELLABS.need_gold),"sellabs_selecttile_needgold_value",138,78,259,50,50,28,"right","#00ffdd");var n=SELECTTILE_ABS.get_selected_totgold();util.draw_text_html(TXT.sellabs_gold,"sellabs_selecttile_sellgold",85,161,259,50,50,28,"center","#ffffff");util.draw_text_html(util.get_number_with_comma(n),"sellabs_selecttile_sellgold_value",138,221,259,50,50,28,"right","#ff8701");$("#sellabs_selecttile_btn1").css({left:"46px",top:"296px",position:"absolute"});n<POPUP_SELLABS.need_gold?(util.draw_image_no_wh_pos("sellabs_selecttile_btn1_bg","./image/game/popup_sellabs/p_common_bt_90_dim.png",0,0),util.draw_text_html(TXT.sellabs,"sellabs_selecttile_btn1_text",0,0,158,79,79,32,"center","gray")):(util.draw_image_no_wh_pos("sellabs_selecttile_btn1_bg","./image/game/popup_common/p_common_bt1_90.png",0,0),util.draw_text_html(TXT.sellabs,"sellabs_selecttile_btn1_text",0,0,158,79,79,32,"center","#ffffff"));util.draw_textshadow("sellabs_selecttile_btn1_text","#a23100",2);util.draw_image_no_wh_pos("sellabs_selecttile_btn1_focus","./image/game/popup_common/p_common_bt_90_f.png",-25,-25);$("#sellabs_selecttile_btn2").css({left:"229px",top:"296px",position:"absolute"});util.draw_image_no_wh_pos("sellabs_selecttile_btn2_bg","./image/game/popup_common/p_common_bt2_90.png",0,0);util.draw_image_no_wh_pos("sellabs_selecttile_btn2_focus","./image/game/popup_common/p_common_bt_90_f.png",-25,-25);USER.lang==LANG.KOREA?util.draw_text_html(TXT.giveup,"sellabs_selecttile_btn2_text",0,0,158,79,79,32,"center","#ffffff"):util.draw_text_html(TXT.giveup,"sellabs_selecttile_btn2_text",0,0,158,79,79,24,"center","#ffffff");util.draw_textshadow("sellabs_selecttile_btn2_text","#a23100",2)};SELECTTILE_ABS.get_selected_totgold=function(){for(var i,t=0,n=1;n<=this.num;n++)this.board_index_array_select[n]==1&&(i=this.board_index_array[n],t+=CAL.get_zasan_sell_gold(i));return t};SELECTTILE_ABS.init_many_end=function(){};SELECTTILE_ABS.draw_focus=function(){$(".focus").css({display:"none"});switch(this.where_focus){case 1:var n=this.board_index_array[this.focus];$("#board_tile"+n+"_focus").css({display:"block"});break;case 2:$("#sellabs_selecttile_btn"+this.abs_focus+"_focus").css({display:"block"})}};SELECTTILE_ABS.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:this.where_focus==1?this.focus>1?this.focus--:this.focus==1&&(this.focus=this.num):this.abs_focus==1&&(this.abs_focus=2);this.draw_focus();break;case KeyDefine.left:this.where_focus==1?this.focus<this.num?this.focus++:this.focus==this.num&&(this.focus=1):this.abs_focus==2&&(this.abs_focus=1);this.draw_focus();break;case KeyDefine.up:case KeyDefine.down:this.where_focus=this.where_focus==1?2:1;this.draw_focus();break;case KeyDefine.enter:this.menu_run()}};SELECTTILE_ABS.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;util.scale_xy_center("board_tile"+this.board_index_array[this.focus],glo.KeyScale,glo.KeyScale);setTimeout(function(){util.scale_xy_center("board_tile"+SELECTTILE_ABS.board_index_array[SELECTTILE_ABS.focus],1,1);setTimeout(function(){glo.enable_key=n;SELECTTILE_ABS.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};SELECTTILE_ABS.menu_run_run=function(){var n,t,i;if(this.where_focus==1)i=this.board_index_array[this.focus],this.board_index_array_select[this.focus]=this.board_index_array_select[this.focus]==0?1:0,SELECTTILE_ABS.draw_check_update(this.focus),SELECTTILE_ABS.make_screen(),n=SELECTTILE_ABS.get_selected_totgold(),n>=POPUP_SELLABS.need_gold&&(this.where_focus=2,this.abs_focus=1,this.draw_focus());else switch(this.abs_focus){case 1:if(n=SELECTTILE_ABS.get_selected_totgold(),n<POPUP_SELLABS.need_gold)util.notice_box(TXT.lack_of_sellabs_gold,1);else{for(REMAINTIME.stop(),S_GAME.mode.online==1&&S_GAME.turn==1&&WSS.send_sellabs_success(SELECTTILE_ABS.num,SELECTTILE_ABS.board_index_array,SELECTTILE_ABS.board_index_array_select),SELECTTILE_ABS.close(),t=1;t<=this.num;t++)i=this.board_index_array[t],$("#board_tile"+i+"_check").css({display:"none"});var r=this.player,u=n;CAL.move_gold(0,r,u,"",function(){for(var n,t=1;t<=SELECTTILE_ABS.num;t++)if(SELECTTILE_ABS.board_index_array_select[t]==1){n=SELECTTILE_ABS.board_index_array[t];switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[n].country.owner=0;BOARD.info[n].country.dev_stage=0;break;case ENUM.TILE_TYPE.RESORT:BOARD.info[n].resort.owner=0;break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[n].invention.owner=0}BOARD.draw_tile_update(n)}SELECTTILE_ABS.menu_run_run_after()})}break;case 2:SELECTTILE_ABS.close();POPUP_SELLABS.focus=2;POPUP_SELLABS.menu_run_run()}};SELECTTILE_ABS.menu_run_run_after=function(){var n={icon_fname:"./image/common/onepixel.png",icon_x:0,icon_y:0,line1_text:TXT.sellabs_complete,line2_text:TXT.sellabs_pay_after_acc,time:3e3};S_GAME.draw_message_icon(n,"popup1");setTimeout(function(){$("#GA_message_icon").css({display:"none"}).empty();POPUP_SELLABS.callback_fn&&POPUP_SELLABS.callback_fn(S_GAME.turn)},2500)};SELECTTILE_ABS.draw_check_update=function(n){var i=this.board_index_array[n],t="board_tile"+i+"_check";if(this.board_index_array_select[n]==1){$("#"+t).css({display:"block"});switch(i){case 6:case 30:util.draw_image_no_wh_pos(t,"./image/game/popup_sellabs/p_sale_tile_check.png",59,48);break;default:util.draw_image_no_wh_pos(t,"./image/game/popup_sellabs/p_sale_tile_check.png",59,16)}}else $("#"+t).css({display:"none"})};SELECTTILE_ABS.remaintime_out=function(){glo.enable_key=0;console.log("SELECTTILE_ABS.remaintime_out()에서 정의 안됨. 넣어야 함.:"+this.before_scene)};SELECTTILE_ABS.close=function(){for(var n=1;n<=36;n++)$("#board_tile"+n).removeClass("tile_up"),$("#board_tile"+n).removeClass("tile_dim"),$("#board_tile"+n+"_check").css({display:"none"});$("#GA_popup_sellabs_selecttile").css({display:"none"}).empty();CHAR.show()};SELECTTILE_ABS.get_index=function(n){for(var i=this.board_index_array.length-1,t=1;t<=i;t++)if(n==this.board_index_array[t])return t;return console.error("오류발생!!:SELECTTILE_ABS.get_index() 가 0이 나옴 break point 잡아서 추적해 볼것"),0} 
var SELECTLINE={focus:1,player:0,before_scene:ENUM.SCENE.NONE};SELECTLINE.init=function(n){this.before_scene=S_GAME.scene;this.focus=1;this.player=n;S_GAME.scene=ENUM.SCENE.SELECTLINE;util.enable_key(1,"SELECTLINE.init()에서  key 입력 받기");SELECTLINE.make_tag();SELECTLINE.make_screen();SELECTLINE.draw_focus();PLAYER.info[S_GAME.turn].type==ENUM.PLAYER_TYPE.AI&&(util.enable_key(0,"SELECTLINE.init()에서  ai key 입력 막기"),SELECTLINE.focus=Math.floor(Math.random()*4)+1,SELECTLINE.draw_focus(),util.log("SELECTLINE.focus (ai) = "+SELECTLINE.focus),setTimeout(function(){SELECTLINE.menu_run()},1500))};SELECTLINE.make_tag=function(){$("#GA_selectline").empty();var n=document.getElementById("GA_selectline");n.innerHTML='<img id="GA_selectline_focus1" class=focus><img id="GA_selectline_focus2" class=focus><img id="GA_selectline_focus3" class=focus><img id="GA_selectline_focus4" class=focus><img id="GA_imagemap" src="./image/game/board/1920x1080_blur.png" style="left: 0px; top: 0px; width: 1920px; height: 1080px; position: absolute; display: block;" usemap="#image-map-line"><map name="image-map-line">    <area onClick="S_GAME.onclick_line(1)"  onMouseOver="S_GAME.onmouseover_line(1)" coords="327,559,237,614,854,971,956,916" shape="poly">    <area onClick="S_GAME.onclick_line(2)"  onMouseOver="S_GAME.onmouseover_line(2)" coords="330,553,239,497,863,144,958,202" shape="poly">    <area onClick="S_GAME.onclick_line(3)"  onMouseOver="S_GAME.onmouseover_line(3)" coords="1063,146,963,202,1580,551,1677,497" shape="poly">    <area onClick="S_GAME.onclick_line(4)"  onMouseOver="S_GAME.onmouseover_line(4)" coords="965,917,1587,559,1687,619,1060,971" shape="poly"><\/map>'};SELECTLINE.make_screen=function(){$("#GA_selectline").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute",display:"block"});util.draw_image_no_wh_pos("GA_selectline_focus1","./image/game/popup_chance/p_surprise_tilefocus1.png",209,532);util.draw_image_no_wh_pos("GA_selectline_focus2","./image/game/popup_chance/p_surprise_tilefocus2.png",209,119);util.draw_image_no_wh_pos("GA_selectline_focus3","./image/game/popup_chance/p_surprise_tilefocus3.png",939,119);util.draw_image_no_wh_pos("GA_selectline_focus4","./image/game/popup_chance/p_surprise_tilefocus4.png",939,532)};SELECTLINE.draw_focus=function(){$(".focus").css({display:"none"});$("#GA_selectline_focus"+this.focus).css({display:"block"});for(var n=1;n<=36;n++)SELECTLINE.is_focus_board_index(n)?$("#board_tile"+n).css({opacity:"1.0"}):$("#board_tile"+n).css({opacity:"0.3"})};SELECTLINE.is_focus_board_index=function(n){switch(this.focus){case 1:if(2<=n&&n<=9)return!0;break;case 2:if(11<=n&&n<=18)return!0;break;case 3:if(20<=n&&n<=27)return!0;break;case 4:if(29<=n&&n<=36)return!0}return!1};SELECTLINE.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.right:this.focus>1?this.focus--:this.focus=4;this.draw_focus();break;case KeyDefine.left:this.focus<4?this.focus++:this.focus=1;this.draw_focus();break;case KeyDefine.enter:this.menu_run()}};SELECTLINE.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;setTimeout(function(){setTimeout(function(){glo.enable_key=n;SELECTLINE.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};SELECTLINE.menu_run_run=function(){util.enable_key(0,"SELECTLINE.menu_run_run()에서   key 막기");SELECTLINE.close();switch(this.before_scene){case ENUM.SCENE.P_CHANCE:switch(POPUP_CHANCE.index){case 6:POPUP_CHANCE.menu_run_6_select(this.focus);break;case 9:POPUP_CHANCE.menu_run_9_select(this.focus);break;default:console.error("undefined in SELECTLINE.menu_run_run(1)")}default:console.log("undefined SELECTLINE.menu_run_run(2):"+this.before_scene)}};SELECTLINE.remaintime_out=function(){glo.enable_key=0;switch(this.before_scene){case ENUM.SCENE.P_CHANCE:switch(POPUP_CHANCE.index){case 6:util.notice_box(TXT.timeout_occur+":"+TXT.enforce_select,2);setTimeout(function(){var n=Math.floor(Math.random()*4)+1;SELECTLINE.focus=n;SELECTLINE.draw_focus();SELECTLINE.menu_run()},2e3);break;case 9:util.notice_box(TXT.timeout_occur+":"+TXT.enforce_select,2);setTimeout(function(){var n=Math.floor(Math.random()*4)+1;SELECTLINE.focus=n;SELECTLINE.draw_focus();SELECTLINE.menu_run()},2e3);break;default:util.log("SELECTLINE.remaintime_out()에서 깜짝상자 관련 case 정해지지 않음. 넣어야 함!! :"+POPUP_CHANCE.index)}break;default:console.log("SELECTLINE.remaintime_out()에서 정의 안됨. 넣어야 함.:"+this.before_scene)}};SELECTLINE.close=function(){for(var n=1;n<=36;n++)$("#board_tile"+n).css({opacity:"1.0"});$("#GA_selectline").css({display:"none"}).empty();REMAINTIME.stop()} 
var REMAINTIME={scene:ENUM.SCENE.NONE,status:0,start_timestamp:0};REMAINTIME.start=function(){REMAINTIME.scene=S_GAME.scene;this.status=1;var n="GA_player"+S_GAME.turn+"_gage";S_GAME.turn==1||S_GAME.turn==4?$("#"+n).addClass("myturn_remaintime14"):$("#"+n).addClass("myturn_remaintime23");$("#"+n).off();$("#"+n).on("animationend",REMAINTIME.animationend);$("#"+n).css({"animation-play-state":"running",display:"block"});this.start_timestamp=(new Date).getTime()};REMAINTIME.stop=function(){var n="GA_player"+S_GAME.turn+"_gage";$("#"+n).css({"animation-play-state":"paused"});this.status=0;setTimeout(function(){var n="GA_player"+S_GAME.turn+"_gage";S_GAME.turn==1||S_GAME.turn==4?$("#"+n).removeClass("myturn_remaintime14").css({display:"none"}):$("#"+n).removeClass("myturn_remaintime23").css({display:"none"})},100);this.start_timestamp=0;S_GAME.setting_flag==1&&S_GAME.mode.online==1&&POPUP_SETTING.close()};REMAINTIME.pause=function(){var n="GA_player"+S_GAME.turn+"_gage";$("#"+n).css({"animation-play-state":"paused"})};REMAINTIME.resume=function(){var n="GA_player"+S_GAME.turn+"_gage";$("#"+n).css({"animation-play-state":"running"})};REMAINTIME.animationend=function(){if(util.log("##########REMAINTIME.animationend()#############"),S_GAME.winner==0){REMAINTIME.stop();switch(S_GAME.scene){case ENUM.SCENE.DICE_GAGE:REMAINTIME.animationend_throw_dice();break;case ENUM.SCENE.P_MYTURN:POPUP_MYTURN.close();REMAINTIME.animationend_throw_dice();break;case ENUM.SCENE.P_BUYCOUNTRY:util.enable_key(0,"REMAINTIME.animationend()에서  연속키 입력 방지를 위해:ENUM.SCENE.P_BUYCOUNTRY");POPUP_BUYCOUNTRY.close();break;case ENUM.SCENE.P_TAKEOVER:POPUP_TAKEOVER.close();break;case ENUM.SCENE.P_SELLCOUNTRY:$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_sellcountry").css({display:"none"}).empty();switch(POPUP_SELLCOUNTRY.before_scene){case ENUM.SCENE.P_MYTURN:REMAINTIME.animationend_throw_dice();break;default:console.log("error in \t  REMAINTIME.animationend() : 정의해주라 : "+POPUP_SELLCOUNTRY.before_scene)}break;case ENUM.SCENE.P_SELLZASAN:$("#GA_player"+S_GAME.turn).css({zIndex:0});$("#GA_popup_sellzasan").css({display:"none"}).empty();switch(POPUP_SELLZASAN.before_scene){case ENUM.SCENE.P_MYTURN:REMAINTIME.animationend_throw_dice();break;default:console.log("error in \t  REMAINTIME.animationend() : 정의해주라 : "+POPUP_SELLCOUNTRY.before_scene)}break;case ENUM.SCENE.P_SELLABS:POPUP_SELLABS.focus=2;POPUP_SELLABS.menu_run_run();break;case ENUM.SCENE.P_RESORT:POPUP_RESORT.close();break;case ENUM.SCENE.P_ISLAND:POPUP_ISLAND.focus=2;POPUP_ISLAND.menu_run_run();break;case ENUM.SCENE.P_CHANCE:POPUP_CHANCE.menu_run_run();break;case ENUM.SCENE.P_FREEPASS:POPUP_FREEPASS.focus=2;POPUP_FREEPASS.menu_run_run();break;case ENUM.SCENE.P_INVENTION:POPUP_INVENTION.focus=2;POPUP_INVENTION.menu_run_run();break;case ENUM.SCENE.SELECTTILE:SELECTTILE.remaintime_out();break;case ENUM.SCENE.SELECTTILE_ABS:SELECTTILE_ABS.where_focus=2;SELECTTILE_ABS.abs_focus=2;SELECTTILE_ABS.menu_run_run();break;case ENUM.SCENE.SELECTLINE:SELECTLINE.remaintime_out();break;default:console.error("REMAINTIME.animationend()에서 정의 되지 않음:"+S_GAME.scene)}}};REMAINTIME.animationend_throw_dice=function(){DICE_GAGE.bypass=1;DICE_GAGE.result_value=0;S_GAME.scene=ENUM.SCENE.GAME;S_GAME.status=ENUM.STATUS.DICE_GAGE_START;S_GAME.key_down_enter();DICE_GAGE.bypass=0};REMAINTIME.show_remain_time=function(){var t=200,n=200,i;switch(S_GAME.turn){case 1:t=1572;n=728;break;case 2:t=146;n=728;break;case 3:t=146;n=295;break;case 4:t=1572;n=295}glo.platform==glo.PLATFORM.LG_WEEKEND&&(S_GAME.turn==3?(t=346,n=135,$("#GA_remaintime").css({"-webkit-transform":"rotate(90deg)"})):S_GAME.turn==4?(n=333,$("#GA_remaintime").css({"-webkit-transform":"rotate(-90deg)"})):$("#GA_remaintime").css({"-webkit-transform":"rotate(0deg)"}));$("#GA_remaintime").css({display:"block",left:t+"px",top:n+"px",position:"absolute",zIndex:1085});$("#GA_remaintime_clock").css({left:"0px",top:"0px",position:"absolute",zIndex:1085});i=function(){var t,n;if(S_GAME.setting_flag==1&&S_GAME.mode.online==0){$("#GA_remaintime").css({display:"none"});$("#GA_remaintime_value").css({display:"none"});return}if(t=(new Date).getTime(),REMAINTIME.start_timestamp==0){$("#GA_remaintime").css({display:"none"});SOUND.stop_effect(SOUND.EFFECT.SAND_CLOCK);return}if(n=Math.floor((2e4-(t-REMAINTIME.start_timestamp))/1e3),util.draw_text_html(n,"GA_remaintime_value",36,-102,128,94,94,72,"center","#ffffff"),util.draw_textshadow("GA_remaintime_value","#000000",6),n>0)setTimeout(i,1e3),n==5&&SOUND.play_effect(SOUND.EFFECT.SAND_CLOCK);else{$("#GA_remaintime").css({display:"none"});SOUND.stop_effect(SOUND.EFFECT.SAND_CLOCK);return}};i()} 
var CAL={};CAL.move_gold=function(n,t,i,r,u){SOUND.play_effect(SOUND.EFFECT.COIN_UPDOWN);n==0?ANI.move_gold(n,t,i,function(){if(PLAYER.info[t].bougold+=i,PLAYER.cal_totzasan(),PLAYER.info[t].totzasan>=CAL.get_win_gold()){S_GAME.winner=t;S_GAME.winwhy=ENUM.WINWHY.TENBILLION;PLAYER.ui_draw();S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.move_gold 에서");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}PLAYER.ui_draw();u&&u()}):t==0?(PLAYER.info[n].bougold<0&&console.error(r+" 수행시 보유자산이 0보다 작음. CAL.move_gold()호출전에 미치 체크 바람1."),ANI.move_gold(n,t,i,function(){if(PLAYER.info[n].bougold-=i,PLAYER.info[n].bougold<0){PLAYER.info[n].bougold=0;PLAYER.ui_draw();PLAYER.die(n);return}PLAYER.ui_draw();u&&u()})):(PLAYER.info[n].bougold<0&&console.error(r+" 수행시 보유자산이 0보다 작음. CAL.move_gold()호출전에 미치 체크 바람2"),ANI.move_gold(n,t,i,function(){if(PLAYER.info[n].bougold-=i,PLAYER.info[t].bougold+=i,PLAYER.info[n].bougold<0&&(PLAYER.info[n].bougold=0,PLAYER.ui_draw(),PLAYER.die(n)),PLAYER.cal_totzasan(),PLAYER.info[t].totzasan>=CAL.get_win_gold()){S_GAME.winner=t;S_GAME.winwhy=ENUM.WINWHY.TENBILLION;PLAYER.ui_draw();S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.move_gold 2에서");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}PLAYER.ui_draw();u&&u()}))};CAL.get_country_pass_gold=function(n,t){if(BOARD.info[t].country.owner==0)return util.log(" CAL.get_country_pass_gold() : 주인없음 임대료 0"),0;if(BOARD.info[t].country.owner==n)return util.log(" CAL.get_country_pass_gold() : 주인이 바로 나 그래서 임대료 0"),0;var r=BOARD.info[t].country.dev_stage,i=BOARD.info[t].country.gold_pass[r];return util.log(" CAL.get_country_rend_gold() : 임대료:"+i),i};CAL.get_zasan_sell_gold=function(n){var t,i;switch(BOARD_DEFINE[n].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:return t=BOARD.info[n].country.dev_stage,i=Math.floor(BOARD.info[n].country.gold_tot[t]*.9),i;case ENUM.TILE_TYPE.RESORT:return Math.floor(BOARD.info[n].resort.gold_tot*.9);case ENUM.TILE_TYPE.INVENTION:return Math.floor(BOARD.info[n].invention.gold_tot*.9)}};CAL.get_gold_all_zasan_sum_player=function(n){for(var i=0,t=1;t<=36;t++)switch(BOARD_DEFINE[t].TILE_TYPE){case ENUM.TILE_TYPE.COUNTRY:BOARD.info[t].country.owner==n&&(i+=CAL.get_zasan_sell_gold(t));break;case ENUM.TILE_TYPE.RESORT:BOARD.info[t].resort.owner==n&&(i+=CAL.get_zasan_sell_gold(t));break;case ENUM.TILE_TYPE.INVENTION:BOARD.info[t].invention.owner==n&&(i+=CAL.get_zasan_sell_gold(t))}return i};CAL.get_country_sell_gold=function(n){var t=BOARD.info[n].country.dev_stage;return Math.floor(BOARD.info[n].country.gold_tot[t]*.9)};CAL.get_country_value=function(n){var t=BOARD.info[n].country.dev_stage;return BOARD.info[n].country.gold_tot[t]};CAL.get_zasan_value_of_player=function(n){for(var r,i=0,t=1;t<=36;t++)BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.COUNTRY&&BOARD.info[t].country.owner==n&&(r=BOARD.info[t].country.dev_stage,i+=BOARD.info[t].country.gold_tot[r]),BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.INVENTION&&BOARD.info[t].invention.owner==n&&(i+=BOARD.info[t].invention.gold_tot),BOARD_DEFINE[t].TILE_TYPE==ENUM.TILE_TYPE.RESORT&&BOARD.info[t].resort.owner==n&&(i+=BOARD.info[t].resort.gold_tot);return i};CAL.get_start_arrived_gold=function(){return 2e6};CAL.get_how_gold_exit_island=function(){return 1e6};CAL.get_goto_gold=function(){var n=1e6;return BOARD.info[28].goto.notwork>0?n*4:n};CAL.get_passgold_invention=function(n){var t=BOARD.info[n].invention.owner,i;if(t==0)return util.log("CAL.get_passgold_invention()에 주인없는데 호출됨. 조사바람"),0;i=BOARD.get_num_invention_i(t);switch(i){case 0:return util.log("ERROR CAL.get_passgold_invention(1)"),0;case 1:return BOARD_DEFINE[n].BUY_GOLD*1;case 2:return BOARD_DEFINE[n].BUY_GOLD*2;case 3:return BOARD_DEFINE[n].BUY_GOLD*3;case 4:return BOARD_DEFINE[n].BUY_GOLD*4;default:return util.log("ERROR CAL.get_passgold_invention(2)"),0}};CAL.get_win_gold=function(){return 1e9};CAL.get_donation_gold=function(n){return Math.floor(PLAYER.info[n].totzasan*.05)};CAL.check_line_monopoly=function(n){if(BOARD_DEFINE[n].TILE_TYPE!=ENUM.TILE_TYPE.COUNTRY)return!1;var t=BOARD.info[n].country.owner;if(t==0)return!1;if(2<=n&&n<=9&&BOARD.get_count_country_owner(2,9,t)==5){S_GAME.win_line_monopoly(1,t);return}if(11<=n&&n<=18&&BOARD.get_count_country_owner(11,18,t)==5){S_GAME.win_line_monopoly(2,t);return}if(20<=n&&n<=27&&BOARD.get_count_country_owner(20,27,t)==5){S_GAME.win_line_monopoly(3,t);return}if(29<=n&&n<=36&&BOARD.get_count_country_owner(29,36,t)==5){S_GAME.win_line_monopoly(4,t);return}if(BOARD.get_count_num_color_monopoly(t)>=3){S_GAME.winner=t;S_GAME.winwhy=ENUM.WINWHY.COLOR3;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.check_line_monopoly 에서 트리플칼러독점으로 승리:");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}};CAL.check_invention_monopoly=function(n){var t=0;switch(n){case 1:t=3;break;case 2:t=4;break;case 3:t=1;break;case 4:t=2;break;default:t=99}if(S_GAME.mode.team==0){if(BOARD.info[3].invention.owner==n&&BOARD.info[12].invention.owner==n&&BOARD.info[20].invention.owner==n&&BOARD.info[35].invention.owner==n){S_GAME.winner=n;S_GAME.winwhy=ENUM.WINWHY.CURTURE;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.check_invention_monopoly 에서 문화독점 승리:(발명품독점)");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}}else if((BOARD.info[3].invention.owner==n||BOARD.info[3].invention.owner==t)&&(BOARD.info[12].invention.owner==n||BOARD.info[12].invention.owner==t)&&(BOARD.info[20].invention.owner==n||BOARD.info[20].invention.owner==t)&&(BOARD.info[35].invention.owner==n||BOARD.info[35].invention.owner==t)){S_GAME.winner=n;S_GAME.winwhy=ENUM.WINWHY.CURTURE;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.check_invention_monopoly 에서 문화독점 승리:(발명품독점)");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}};CAL.check_resort_monopoly=function(n){var t=0;switch(n){case 1:t=3;break;case 2:t=4;break;case 3:t=1;break;case 4:t=2;break;default:t=99}if(S_GAME.mode.team==0){if(BOARD.info[6].resort.owner==n&&BOARD.info[15].resort.owner==n&&BOARD.info[24].resort.owner==n&&BOARD.info[30].resort.owner==n){S_GAME.winner=n;S_GAME.winwhy=ENUM.WINWHY.CURTURE;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.check_invention_monopoly 에서 문화독점 승리:(관광지독점)");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}}else if((BOARD.info[6].resort.owner==n||BOARD.info[6].resort.owner==t)&&(BOARD.info[15].resort.owner==n||BOARD.info[15].resort.owner==t)&&(BOARD.info[24].resort.owner==n||BOARD.info[24].resort.owner==t)&&(BOARD.info[30].resort.owner==n||BOARD.info[30].resort.owner==t)){S_GAME.winner=n;S_GAME.winwhy=ENUM.WINWHY.CURTURE;S_GAME.pause();S_GAME.end();util.log("승리 팝업 : CAL.check_invention_monopoly 에서 문화독점 승리:(관광지독점)");ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP);return}} 
var ANI={callbackfn:null,call_num:0,tween1:new TimelineMax,tween2:new TimelineMax,tween3:new TimelineMax,tween4:new TimelineMax,ing:[0,0,0,0,0]};ANI.move_gold=function(n,t,i,r){var f,u;if(this.callbackfn=r,this.call_num=0,n!=0&&t!=0){ANI.move_gold_from_to(n,t,i,r);return}if(n!=0){ANI.ing[n]=1;var f=eval("ANI.tween"+n),u={score:PLAYER.get_bougold(n)},e=PLAYER.get_bougold(n)-i<0?0:PLAYER.get_bougold(n)-i;f.to(u,1,{score:e,roundProps:"score",onUpdate:function(){PLAYER.draw_bougold(n,u.score)},onComplete:function(){ANI.move_gold_end(n)},onCompleteParams:[1,2],ease:Linear.easeNone})}else ANI.move_gold_end(n);t!=0?(ANI.ing[t]=1,f=eval("ANI.tween"+t),u={score:PLAYER.get_bougold(t)},f.to(u,1,{score:PLAYER.get_bougold(t)+i,roundProps:"score",onUpdate:function(){PLAYER.draw_bougold(t,u.score)},onComplete:function(){ANI.move_gold_end(t)},onCompleteParams:[1,2],ease:Linear.easeNone})):ANI.move_gold_end(t)};ANI.move_gold_end=function(n){ANI.ing[n]=0;this.call_num++;this.call_num==2&&this.callbackfn&&this.callbackfn()};ANI.move_gold_from_to=function(n,t,i,r){var f=eval("ANI.tween"+n),u={score:PLAYER.get_bougold(n)},e=PLAYER.get_bougold(n)-i<0?0:PLAYER.get_bougold(n)-i;f.to(u,1,{score:e,roundProps:"score",onUpdate:function(){PLAYER.draw_bougold(n,u.score)},onComplete:function(n,t,i,r){ANI.move_gold_end_from(n,t,i,r)},onCompleteParams:[n,t,i,r],ease:Linear.easeNone})};ANI.move_gold_end_from=function(n,t,i){var u=eval("ANI.tween"+t),r={score:PLAYER.get_bougold(t)};u.to(r,1,{score:PLAYER.get_bougold(t)+i,roundProps:"score",onUpdate:function(){PLAYER.draw_bougold(t,r.score)},onComplete:function(){ANI.move_gold_end_to()},onCompleteParams:[1,2],ease:Linear.easeNone})};ANI.move_gold_end_to=function(){ANI.callbackfn&&ANI.callbackfn()} 
S_GAME.pvp_win=function(n){util.log("[S_GAME.pvp_win()] 내가 승리했다 :"+n);S_GAME.pause();S_GAME.end();S_GAME.winner=1;S_GAME.winwhy=n;ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP)};S_GAME.pvp_lose=function(n){util.log("[S_GAME.pvp_win()] 내가 승리했다 :"+n);S_GAME.pause();S_GAME.end();S_GAME.winner=3;S_GAME.winwhy=ENUM.WINWHY.ECONOMY;ChangeScene.start(glo.scene.cur,glo.S.GAMERESULT,S_GAMERESULT,ChangeScene.TYPE_POPUP)} 
var S_GAMERESULT={focus:2,plus_score:0};S_GAMERESULT.preload=function(){ChangeScene.image_preload([])};S_GAMERESULT.init=function(){glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.GAMERESULT;glo.enable_key=0;util.log("S_GAMERESULT.init()");Main.top_hide();S_GAMERESULT.before_popup_empty();$("#GA_char1_turn").css({display:"none"});$("#GA_char2_turn").css({display:"none"});$("#GA_char3_turn").css({display:"none"});$("#GA_char4_turn").css({display:"none"});REMAINTIME.stop();$("#GA_player1_focus").css({display:"none"});$("#GA_player2_focus").css({display:"none"});$("#GA_player3_focus").css({display:"none"});$("#GA_player4_focus").css({display:"none"});$("#GA_player"+S_GAME.winner+"_focus").css({display:"block"});$("#GA_player"+S_GAME.winner).removeClass("joinnum_select_sun");setTimeout(function(){$("#GA_player"+S_GAME.winner).addClass("joinnum_select_sun")},100);S_GAMERESULT.init_var();S_GAMERESULT.make_tag();S_GAMERESULT.make_screen();S_GAMERESULT.make_screen_btn();S_GAMERESULT.draw_focus();setTimeout(function(){glo.enable_key=1},300)};S_GAMERESULT.before_popup_empty=function(){$("#GA_popup_joinnum").empty();$("#GA_popup_myturn").empty();$("#GA_popup_buycountry").empty();$("#GA_popup_sellcountry").empty();$("#GA_popup_resort").empty();$("#GA_popup_angel").empty();$("#GA_popup_island").empty();$("#GA_popup_goto").empty();$("#GA_popup_chance").empty();$("#GA_popup_freepass").empty();$("#GA_popup_invention").empty();$("#GA_popup_takeover").empty()};S_GAMERESULT.init_var=function(){var n,r,u,t,i;if(S_GAME.mode.online!=1){SOUND.play_effect(SOUND.EFFECT.POPUP_WINNER);return}localStorage.setItem("busidol.bm.endtimestamp.txt",util.encrypt("0"));n=0;r="";S_GAME.winner==1?(SOUND.play_effect(SOUND.EFFECT.POPUP_WINNER),n=PLAYER.info[1].turn_count<=8?40:100,util.log("기본승리점수: "+n),i=Math.floor(Math.random()*6),n+=i,util.log("랜덤에의한 값: "+i),u=0,t=STORAGE.pvp.score-S_PVP_MATCHING.other.score,u=t>3e3?-8:t>2e3?-4:t>1500?-2:t>-1500?0:t>-2e3?2:t>-3e3?4:8,util.log("감가에의한 값: "+u),n+=u,S_GAMERESULT.plus_score=n,r="승리점수 :"+n,STORAGE.pvp.firehistory.week.tot++,STORAGE.pvp.firehistory.week.win++):(SOUND.play_effect(SOUND.EFFECT.GAME_FAIL),n=PLAYER.info[3].turn_count<=8?10:30,util.log("기본패배점수: "+n),i=Math.floor(Math.random()*4),util.log("랜덤에의한 값: "+i),n+=i,S_GAMERESULT.plus_score=n,r="패배점수 :"+n,STORAGE.pvp.firehistory.week.tot++);STORAGE.pvp.score+=S_GAMERESULT.plus_score;PHP.put_pvp_data(S_GAMERESULT.plus_score,r,null)};S_GAMERESULT.pause=function(){};S_GAMERESULT.resume=function(){};S_GAMERESULT.back=function(){S_GAMERESULT.end();$("#S_GAMERESULT_div").css({display:"none"});util.log("S_GAMERESULT.back ():"+glo.scene.before);var n="S_GAME_div";$("#"+n).css({display:"none"});$("#"+n).empty();ChangeScene.start(glo.scene.cur,glo.S.SELECTSTAGE,S_SELECTSTAGE,ChangeScene.TYPE_NORMAL)};S_GAMERESULT.make_tag=function(){$("#S_GAMERESULT_div").empty();var n=document.getElementById("S_GAMERESULT_div");n.innerHTML='<div id="GRW_dim_bg" class="dim70"><\/div><div id="GRW"  class="popup1">\t<img id="GRW_bg">\t<img id="GRW_bg_color">\t<img id="GRW_title">\t<img id="GRW_char">\t<img id="GRW_char2">\t<div id="GRW_name"><\/div>\t<div id="GRW_totzasan_title"><\/div>\t<div id="GRW_totzasan_value"><\/div>\t<img id="GRW_why">\t<div id="GRW_up_score"><\/div>\t<img id="GRW_up_img">\t<div id="GRW_btn1" class="button">\t\t<img id="GRW_btn1_bg">\t\t<div id="GRW_btn1_txt"><\/div>\t\t<img id="GRW_btn1_focus" class="focus">\t<\/div>\t<div id="GRW_btn2" class="button">\t\t<img id="GRW_btn2_bg">\t\t<div id="GRW_btn2_txt"><\/div>\t\t<img id="GRW_btn2_focus" class="focus">\t<\/div><\/div>'};S_GAMERESULT.make_screen=function(){if(S_GAME.mode.online==1){S_GAMERESULT.make_screen_online();return}$("#S_GAMERESULT_div").css({zIndex:4e3});$("#GRW").css({left:"451px",top:"66px",width:"1029px",height:"713px",position:"absolute"});util.draw_image_no_wh_pos("GRW_bg","./image/gameresult/p_winner_bg.png",0,0);util.draw_image_no_wh_pos("GRW_bg_color","./image/gameresult/p_winner_"+PLAYER.get_color(S_GAME.winner)+".png",152,622);util.draw_image_no_wh_pos("GRW_title","./image/gameresult/p_winner_title.png",308,214);S_GAME.mode.team==0?util.draw_image_no_wh_pos("GRW_char","./image/gameresult/p_winner_char"+POPUP_SELECTCHAR.get_char_bunho(S_GAME.winner)+".png",139,347):S_GAME.winner==1||S_GAME.winner==3?(util.draw_image_no_wh_pos("GRW_char","./image/gameresult/p_winner_char"+POPUP_SELECTCHAR.get_char_bunho(1)+".png",139,328),util.draw_image_no_wh_pos("GRW_char2","./image/gameresult/p_winner_char"+POPUP_SELECTCHAR.get_char_bunho(3)+".png",9,328)):(util.draw_image_no_wh_pos("GRW_char","./image/gameresult/p_winner_char"+POPUP_SELECTCHAR.get_char_bunho(2)+".png",139,328),util.draw_image_no_wh_pos("GRW_char2","./image/gameresult/p_winner_char"+POPUP_SELECTCHAR.get_char_bunho(4)+".png",9,328));util.draw_text_html(PLAYER.info[S_GAME.winner].name,"GRW_name",383,394,235,61,61,36,"cener","#ffffff");util.draw_textshadow("GRW_name","#010202",2);util.draw_text_html(TXT.totzasan,"GRW_totzasan_title",618,430,235,61,61,36,"right","#ffffff");util.draw_textshadow("GRW_totzasan_title","#010202",2);util.draw_text_html(util.get_number_with_comma(PLAYER.info[S_GAME.winner].totzasan),"GRW_totzasan_value",453,491,403,63,63,54,"right","#ffffff");var n=S_GAMERESULT.get_fname_winwhy();util.draw_image_no_wh_pos("GRW_why",n,343,565);S_GAMERESULT.make_screen_btn()};S_GAMERESULT.make_screen_online=function(){var n,t;$("#S_GAMERESULT_div").css({zIndex:4e3});$("#GRW").css({left:"451px",top:"66px",width:"1029px",height:"713px",position:"absolute"});S_GAME.winner==1?(util.draw_image_no_wh_pos("GRW_bg","./image/gameresult/p_winner_bg.png",0,0),util.draw_image_no_wh_pos("GRW_title","./image/gameresult/p_winner_title.png",308,214)):(util.draw_image_no_wh_pos("GRW_bg","./image/gameresult/p_lose_bg.png",0,0),util.draw_image_no_wh_pos("GRW_title","./image/gameresult/p_lose_title.png",308,214));util.draw_image_no_wh_pos("GRW_up_img","./image/gameresult/p_winner_score.png",927,377);n=S_GAMERESULT.plus_score;util.draw_text_html("+"+util.get_number_with_comma(n),"GRW_up_score",888,312,178,66,66,48,"center","#ffffff");util.draw_textshadow("GRW_up_score","#691900",4);util.draw_image_no_wh_pos("GRW_bg_color","./image/gameresult/p_winner_red.png",152,622);util.draw_image_no_wh_pos("GRW_char","./image/gameresult/p_winner_char"+S_PVP_MATCHING.me.char_info+".png",139,347);util.draw_text_html(PLAYER.info[S_PVP_MATCHING.me.char_info].name,"GRW_name",383,394,235,61,61,36,"cener","#ffffff");util.draw_textshadow("GRW_name","#010202",2);util.draw_text_html(TXT.totzasan,"GRW_totzasan_title",618,430,235,61,61,36,"right","#ffffff");util.draw_textshadow("GRW_totzasan_title","#010202",2);util.draw_text_html(util.get_number_with_comma(PLAYER.info[1].totzasan),"GRW_totzasan_value",453,491,403,63,63,54,"right","#ffffff");S_GAME.winner==1&&(t=S_GAMERESULT.get_fname_winwhy(),util.draw_image_no_wh_pos("GRW_why",t,343,565));S_GAMERESULT.make_screen_btn()};S_GAMERESULT.get_fname_winwhy=function(){switch(S_GAME.winwhy){case ENUM.WINWHY.ECONOMY:return"./image/gameresult/p_winner_whywin_title1"+util.get_postfix_lang()+".png";case ENUM.WINWHY.TENBILLION:return"./image/gameresult/p_winner_whywin_title2"+util.get_postfix_lang()+".png";case ENUM.WINWHY.LINE:return"./image/gameresult/p_winner_whywin_title3"+util.get_postfix_lang()+".png";case ENUM.WINWHY.CURTURE:return"./image/gameresult/p_winner_whywin_title5"+util.get_postfix_lang()+".png";case ENUM.WINWHY.COLOR3:return"./image/gameresult/p_winner_whywin_title4"+util.get_postfix_lang()+".png";case ENUM.WINWHY.CHEATKEY:return"./image/common/onepixel.png";case ENUM.WINWHY.ROOMOUT:return"./image/common/onepixel.png"}console.error("S_GAMERESULT.get_fnamewinwhy() 에서 오류발생:"+S_GAME.winwhy)};S_GAMERESULT.make_screen_btn=function(){$("#GRW_btn1").css({left:"308px",top:"744px",width:"176px",height:"87px",display:"block",position:"absolute"});util.draw_image_no_wh_pos("GRW_btn1_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_text_html(TXT.newgame,"GRW_btn1_txt",0,0,176,87,87,40,"center","#ffffff");S_GAME.mode.online==1&&(USER.lang==LANG.KOREA?util.draw_text_html(TXT.onemore,"GRW_btn1_txt",0,0,176,87,87,40,"center","#ffffff"):util.draw_text_html(TXT.onemore,"GRW_btn1_txt",0,0,176,87,87,27,"center","#ffffff"));util.draw_textshadow("GRW_btn1_txt","#a23100",2);util.draw_image_no_wh_pos("GRW_btn1_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#GRW_btn1_focus").css({display:"none"});$("#GRW_btn2").css({left:"534px",top:"744px",width:"176px",height:"87px",position:"absolute"});util.draw_image_no_wh_pos("GRW_btn2_bg","./image/game/popup_common/p_common_bt2.png",0,0);USER.lang==LANG.KOREA?util.draw_text_html(TXT.game_exit,"GRW_btn2_txt",0,0,176,87,87,40,"center","#ffffff"):util.draw_text_html(TXT.game_exit,"GRW_btn2_txt",0,0,176,87,87,28,"center","#ffffff");util.draw_textshadow("GRW_btn2_txt","#a23100",2);util.draw_image_no_wh_pos("GRW_btn2_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#GRW_btn2_focus").css({display:"none"});S_GAME.mode.online==1&&S_GAME.winwhy==ENUM.WINWHY.ROOMOUT&&(S_PVP_MATCHING.room_bunho=0,$("#GRW_btn1").css({display:"none"}),$("#GRW_btn2").css({display:"block",left:"421px"}),S_GAMERESULT.focus=2);switch(glo.platform){case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:return;case glo.PLATFORM.LG_SMARTTV:default:glo.pay_30day_pass_end_timestamp==0&&($("#GRW_btn1").css({display:"none"}),$("#GRW_btn2").css({left:"421px"}))}};S_GAMERESULT.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:switch(glo.platform){case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.LG_WEEKEND:break;case glo.PLATFORM.LG_SMARTTV:default:if(glo.pay_30day_pass_end_timestamp==0)return}if(S_GAME.mode.online==1&&S_PVP_MATCHING.room_bunho==0)return;S_GAMERESULT.focus>1&&(S_GAMERESULT.focus--,S_GAMERESULT.draw_focus());break;case KeyDefine.right:if(S_GAME.mode.online==1&&S_PVP_MATCHING.room_bunho==0)return;S_GAMERESULT.focus<2&&(S_GAMERESULT.focus++,S_GAMERESULT.draw_focus());break;case KeyDefine.enter:S_GAMERESULT.menu_run();break;case KeyDefine.esc:case KeyDefine.back:S_GAMERESULT.back()}};S_GAMERESULT.draw_focus=function(){$("#GRW_btn1_focus").css({display:"none"});$("#GRW_btn2_focus").css({display:"none"});$("#GRW_btn"+S_GAMERESULT.focus+"_focus").css({display:"block"})};S_GAMERESULT.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;utilScale_xy_center("GRW_btn"+S_GAMERESULT.focus,glo.KeyScale,glo.KeyScale);setTimeout(function(){utilScale_xy_center("GRW_btn"+S_GAMERESULT.focus,1,1);setTimeout(function(){glo.enable_key=n;S_GAMERESULT.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_GAMERESULT.menu_run_run=function(){if(S_GAME.mode.online==1){S_GAMERESULT.menu_run_run_online();return}var n="S_GAME_div";$("#"+n).css({display:"none"});$("#"+n).empty();S_GAME.end();switch(S_GAMERESULT.focus){case 1:ChangeScene.start(glo.scene.cur,glo.S.GAME,S_GAME,ChangeScene.TYPE_NORMAL);break;case 2:Main.top_show();ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL)}};S_GAMERESULT.menu_run_run_online=function(){var n="S_GAME_div";$("#"+n).css({display:"none"});$("#"+n).empty();S_GAME.end();switch(S_GAMERESULT.focus){case 1:WSS.send_onemore("결과화면에서 한판더 선택");util.notice(TXT.ask_one_more,2);ChangeScene.start(glo.scene.cur,glo.S.PVP_MATCHING,S_PVP_MATCHING,ChangeScene.TYPE_NORMAL);break;case 2:Main.top_show();WSS.send_roomout("결과화면에서 나가기 선택");PHP.get_pvp_data(function(){ChangeScene.start(glo.scene.cur,glo.S.PVP_RANKING,S_PVP_RANKING,ChangeScene.TYPE_NORMAL)})}};S_GAMERESULT.end=function(){};S_GAMERESULT.on_mouse_move=function(){};S_GAMERESULT.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_GAMERESULT.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"GRW_btn1":case"GRW_btn2":Main.mouse_pressed(n.target.parentElement.id);return}};S_GAMERESULT.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"GRW_btn1":case"GRW_btn2":S_GAMERESULT.menu_run_run();return}};S_GAMERESULT.on_mouse_over=function(n){switch(n.target.parentElement.id){case"GRW_btn1":S_GAMERESULT.focus=1;S_GAMERESULT.draw_focus();return;case"GRW_btn2":S_GAMERESULT.focus=2;S_GAMERESULT.draw_focus();return}} 
var S_HELP={focus:1,num:16};S_HELP.preload=function(){var n=["./image/help/p_option_help1"+util.get_postfix_lang()+".jpg","./image/help/p_option_help2"+util.get_postfix_lang()+".jpg","./image/help/p_option_help3"+util.get_postfix_lang()+".jpg","./image/help/p_option_help4"+util.get_postfix_lang()+".jpg","./image/help/p_option_help5"+util.get_postfix_lang()+".jpg","./image/help/p_option_help6"+util.get_postfix_lang()+".jpg","./image/help/p_option_help7"+util.get_postfix_lang()+".jpg","./image/help/p_option_help8"+util.get_postfix_lang()+".jpg","./image/help/p_option_help9"+util.get_postfix_lang()+".jpg",];ChangeScene.image_preload(n)};S_HELP.init=function(){util.log("S_HELP.init()");$("#S_HELP_div").css({display:"block"});glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.HELP;Main.top_hide();S_HELP.focus=1;S_HELP.make_tag();S_HELP.make_screen();setTimeout(function(){glo.enable_key=1},300)};S_HELP.pause=function(){};S_HELP.resume=function(){util.log("S_HELP.resume()!!");$("#HE_btn1_focus").css({display:"block"});glo.enable_key=1};S_HELP.make_tag=function(){var n=document.getElementById("S_HELP_div"),t=document.getElementById("HE_bg");if(t){util.log("Already ready.");return}n.innerHTML='<img id="HE_bg"><div id="HE_left" class="button">\t<img id="HE_left_bg">\t<img id="HE_left_focus"><\/div><div id="HE_btn1" class="button">\t<img id="HE_btn1_bg">\t<img id="HE_btn1_focus" class="focus"><\/div><div id="HE_right" class="button">\t<img id="HE_right_bg">\t<img id="HE_right_focus"><\/div>'};S_HELP.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:S_HELP.focus>=2&&S_HELP.pressed_left();break;case KeyDefine.right:S_HELP.focus<S_HELP.num&&S_HELP.pressed_right();break;case KeyDefine.back:case KeyDefine.enter:case KeyDefine.esc:S_HELP.menu_run()}};S_HELP.back=function(){S_HELP.menu_run()};S_HELP.make_screen=function(){$("#HE_right").css({display:"none",left:"1834px",top:"534px",position:"absolute"});util.draw_image_no_wh_pos("HE_right_bg","./image/help/p_option_help_bt_right.png",0,0);util.draw_image_no_wh_pos("HE_right_focus","./image/help/p_option_help_bt_right_f.png",-27,-28);$("#HE_right_focus").css({display:"none"});$("#HE_left").css({display:"none",left:"32px",top:"534px",position:"absolute"});util.draw_image_no_wh_pos("HE_left_bg","./image/help/p_option_help_bt_left.png",0,0);util.draw_image_no_wh_pos("HE_left_focus","./image/help/p_option_help_bt_left_f.png",-27,-28);$("#HE_left_focus").css({display:"none"});S_HELP.make_screen_contents();S_HELP.make_screen_btn()};S_HELP.make_screen_contents=function(){utilDrawImage_no_wh_pos("HE_bg","./image/help/p_option_help"+S_HELP.focus+util.get_postfix_lang()+".jpg",0,0);S_HELP.draw_arrow()};S_HELP.make_screen_btn=function(){$("#HE_btn1").css({left:"1774px",top:"927px",position:"absolute"});utilDrawImage_no_wh_pos("HE_btn1_bg","./image/common/p_common_back_bt.png",0,0);utilDrawImage_no_wh_pos("HE_btn1_focus","./image/common/p_common_back_bt_f.png",-33,-33);$("#HE_btn1_focus").css({display:"block"})};S_HELP.pressed_left=function(){glo.enable_key=0;$("#HE_btn1_focus").css({display:"none"});$("#HE_left_focus").css({display:"block"});utilDrawImage_no_wh_pos("HE_left_focus","./image/help/p_option_help_bt_left_f.png",-27,-28);setTimeout(function(){$("#HE_left_focus").css({display:"none"});setTimeout(function(){$("#HE_btn1_focus").css({display:"block"});S_HELP.focus--;S_HELP.make_screen_contents();glo.enable_key=1},100)},400)};S_HELP.pressed_right=function(){glo.enable_key=0;$("#HE_btn1_focus").css({display:"none"});$("#HE_right_focus").css({display:"block"});utilDrawImage_no_wh_pos("HE_right_focus","./image/help/p_option_help_bt_right_f.png",-27,-28);setTimeout(function(){$("#HE_right_focus").css({display:"none"});setTimeout(function(){$("#HE_btn1_focus").css({display:"block"});S_HELP.focus++;S_HELP.make_screen_contents();glo.enable_key=1},100)},400)};S_HELP.draw_arrow=function(){S_HELP.focus>=2?$("#HE_left").css({display:"block"}):$("#HE_left").css({display:"none"});S_HELP.focus<S_HELP.num?$("#HE_right").css({display:"block"}):$("#HE_right").css({display:"none"});$("#HE_left_focus").css({display:"none"});$("#HE_right_focus").css({display:"none"})};S_HELP.menu_run=function(){glo.enable_key=0;utilScale_xy_center("HE_btn1",glo.KeyScale,glo.KeyScale);utilScale_xy_center("HE_btn1_focus",glo.KeyScale,glo.KeyScale);setTimeout(function(){utilScale_xy_center("HE_btn1",1,1);utilScale_xy_center("HE_btn1_focus",1,1);setTimeout(function(){glo.enable_key=1;S_HELP.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_HELP.menu_run_run=function(){S_HELP.end();$("#S_HELP_div").css({display:"none"});glo.scene.cur=glo.S.SETTING;Main.top_show()};S_HELP.end=function(){};S_HELP.on_mouse_move=function(){};S_HELP.on_mouse_out=function(){utilScale_xy_center_class("button",1,1);S_HELP.draw_arrow()};S_HELP.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"HE_btn1":Main.mouse_pressed(n.target.parentElement.id);return}};S_HELP.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"HE_btn1":S_HELP.menu_run_run();return;case"HE_right":S_HELP.focus++;S_HELP.make_screen_contents();return;case"HE_left":S_HELP.focus--;S_HELP.make_screen_contents();return}};S_HELP.on_mouse_over=function(n){switch(n.target.parentElement.id){case"HE_btn1":return;case"HE_right":$("#HE_right_focus").css({display:"block"});return;case"HE_left":$("#HE_left_focus").css({display:"block"});return}} 
var S_POPUPYN={focus:1,define:{},text_shadow_title:"#1a1a1a -2px -4px 4px,#1a1a1a 0px -4px 4px,#1a1a1a 4px -4px 4px,#1a1a1a -4px 0px 4px,#1a1a1a 4px 0px 4px,#1a1a1a -4px 4px 4px,#1a1a1a 0px 4px 4px,#1a1a1a 4px 4px 4px",text_shadow_text:"#1a1a1a -2px -2px 2px,#1a1a1a 0px -2px 2px,#1a1a1a 2px -2px 2px,#1a1a1a -2px 0px 2px,#1a1a1a 2px 0px 2px,#1a1a1a -2px 2px 2px,#1a1a1a 0px 2px 2px,#1a1a1a 2px 2px 2px",what:null};S_POPUPYN.init=function(){if(util.log("S_POPUPYN.init()"),glo.scene.cur==glo.S.POPUPYN){util.log("Error in S_POPUPYN.init()!: 아마도 연속키에 의한 POPUPYN이 따블 호출때문임. 근본 해결책을 찾아야 함. 우선 예외처리");return}S_POPUPYN.maketag();glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.POPUPYN;S_POPUPYN.define_tag();glo.scene.before==glo.S.MARKETSTORE&&S_MARKETSTORE.tab_focus==1&&DEFINE.MARKETSTORE_PACKAGE[S_MARKETSTORE.package_focus].title=="월정액"?S_POPUPYN.make_screen_monthly():glo.scene.before==glo.S.PROOFTOP?S_POPUPYN.make_screen_prooftop():S_POPUPYN.make_screen();S_POPUPYN.make_screen_center();S_POPUPYN.draw_focus();util.blink_focus_start(glo.scene.cur);setTimeout(function(){glo.scene.cur==glo.S.POPUPYN&&(glo.enable_key=1)},500);setTimeout(function(){glo.scene.cur==glo.S.POPUPYN&&(glo.enable_key=1)},3500)};S_POPUPYN.pause=function(){util.log("S_POPUPYN.pause()!!")};S_POPUPYN.resume=function(){util.log("S_POPUPYN.resume()!!");util.blink_focus_start(glo.scene.cur)};S_POPUPYN.preload=function(){var n=["./image/common/p_stop_bg.png","./image/common/p_stop_title_mainemenu"+util.get_postfix_lang()+".png","./image/common/p_stop_title"+util.get_postfix_lang()+".png","./image/game/popup_common/p_common_bt1.png","./image/game/popup_common/p_common_bt2.png","./image/game/popup_common/p_common_bt_f.png",];ChangeScene.image_preload(n)};S_POPUPYN.maketag=function(){var n=document.getElementById("S_POPUPYN_div"),t=document.getElementById("Img_PYN_bg");if(t){util.log("Already ready.");return}n.innerHTML='<div id="Img_PYN_bg"> <\/div><div id="PYN_board">\t<img id="Img_PYN_board">\t<div id="PYN_Txt_Img"><\/div>\t<div id="PYN_btn1" class="button">\t\t<img id="PYN_btn1_bg">\t\t<div id="PYN_btn1_text"><\/div>\t\t<img id="PYN_btn1_focus" class="focus">\t<\/div>\t<div id="PYN_btn2" class="button">\t\t<img id="PYN_btn2_bg">\t\t<div id="PYN_btn2_text"><\/div>\t\t<img id="PYN_btn2_focus" class="focus">\t<\/div><\/div>'};S_POPUPYN.define_tag=function(){var n,t,i;switch(glo.scene.before){case glo.S.MAINMENU:S_POPUPYN.define.text_num=2;S_POPUPYN.define.img_num=0;switch(glo.platform){case glo.PLATFORM.KT:n=TXT.do_you_want_to_go_gameworld;S_POPUPYN.focus=1;t=TXT.app_exit;i=n;S_POPUPYN.define.text=new Array(S_POPUPYN.define.text_num+1);S_POPUPYN.define.text[1]={title:t,x:0,y:0,w:550,h:70,fontsize:40,lineheight:70,color:"#ffffff",align:"center",text_shadow:S_POPUPYN.text_shadow_title};S_POPUPYN.define.text[2]={title:i,x:15,y:97,w:520,h:170,fontsize:30,lineheight:70,color:"#1a1a1a",align:"center",text_shadow:"none"};break;default:case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:case glo.PLATFORM.SKB:case glo.PLATFORM.DLIVE:case glo.PLATFORM.HCN:S_POPUPYN.focus=1;S_POPUPYN.define.text_num=1;S_POPUPYN.define.img_num=1;S_POPUPYN.define.text=new Array(S_POPUPYN.define.text_num+1);S_POPUPYN.define.text[1]={title:TXT.exit_comment,x:29,y:119,w:434,h:177,fontsize:36,lineheight:44,color:"##936a5b",align:"center",text_shadow:"none"};S_POPUPYN.define.img=new Array(S_POPUPYN.define.img_num+1);S_POPUPYN.define.img[1]={x:119,y:18,w:258,h:54,filename:"./image/common/p_stop_title_mainemenu"+util.get_postfix_lang()+".png"};S_POPUPYN.define.btn1_text=TXT.yes;S_POPUPYN.define.btn2_text=TXT.no}break;case glo.S.GAME:S_POPUPYN.focus=1;S_POPUPYN.define.text_num=1;S_POPUPYN.define.img_num=1;S_POPUPYN.define.text=new Array(S_POPUPYN.define.text_num+1);S_POPUPYN.define.text[1]={title:TXT.stop_comment,x:29,y:119,w:434,h:177,fontsize:36,lineheight:44,color:"##936a5b",align:"center",text_shadow:"none"};S_POPUPYN.define.img=new Array(S_POPUPYN.define.img_num+1);S_POPUPYN.define.img[1]={x:119,y:18,w:258,h:54,filename:"./image/common/p_stop_title"+util.get_postfix_lang()+".png"};S_POPUPYN.define.btn1_text=TXT.goout;S_POPUPYN.define.btn2_text=TXT.continue}};S_POPUPYN.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:S_POPUPYN.focus>=2&&(S_POPUPYN.focus=1,S_POPUPYN.draw_focus());break;case KeyDefine.right:S_POPUPYN.focus<=1&&(S_POPUPYN.focus=2,S_POPUPYN.draw_focus());break;case KeyDefine.enter:S_POPUPYN.menu_run();break;case KeyDefine.esc:case KeyDefine.back:S_POPUPYN.back()}};S_POPUPYN.back=function(){S_POPUPYN.end();$("#S_POPUPYN_div").css({display:"none"});util.log("S_POPUPYN.back ():"+glo.scene.before);$("#SafeZone").css({display:"block"});switch(glo.scene.before){case glo.S.MAINMENU:glo.scene.cur=glo.S.MAINMENU;glo.platform==glo.PLATFORM.AMO||glo.platform==glo.PLATFORM.BAL||glo.platform==glo.PLATFORM.AZE&&glo.is_mobile_browser||($("#MM_menu"+S_MAINMENU.focus+"_focus").css({display:"block"}),util.blink_focus_start(glo.scene.cur));glo.enable_key=1;break;case glo.S.GAME:glo.scene.cur=glo.S.GAME;S_GAME.resume()}};S_POPUPYN.make_screen=function(){$("#S_POPUPYN_div").css({zIndex:2081});$("#Img_PYN_bg").css({left:"0px",top:"0px",width:"1920px",height:"1080px",background:"black",zIndex:2081,opacity:"0.8",position:"absolute"});$("#PYN_board").css({left:"714px",top:"344px",width:"550px",height:"402px",zIndex:2081,position:"absolute"});utilDrawImage_no_wh_pos("Img_PYN_board","./image/common/p_stop_bg.png",0,0);var n="co_bt_normal.png";glo.scene.before==glo.S.LEVELUP_TOWER&&(n="co_bt_normal3.png");$("#PYN_btn1").css({left:"51px",top:"344px",position:"absolute"});util.draw_image_no_wh_pos("PYN_btn1_bg","./image/game/popup_common/p_common_bt1.png",0,0);util.draw_text_html(S_POPUPYN.define.btn1_text,"PYN_btn1_text",4,2,168,76,76,36,"center","#ffffff");util.draw_textshadow("PYN_btn1_text","#a23100",2);util.draw_image_no_wh_pos("PYN_btn1_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#PYN_btn1_focus").css({display:"none"});$("#PYN_btn2").css({left:"269px",top:"344px",position:"absolute"});util.draw_image_no_wh_pos("PYN_btn2_bg","./image/game/popup_common/p_common_bt2.png",0,0);util.draw_text_html(S_POPUPYN.define.btn2_text,"PYN_btn2_text",4,2,168,76,76,36,"center","#ffffff");util.draw_textshadow("PYN_btn2_text","#a23100",2);util.draw_image_no_wh_pos("PYN_btn2_focus","./image/game/popup_common/p_common_bt_f.png",-30,-30);$("#PYN_btn2_focus").css({display:"none"})};S_POPUPYN.make_screen_center=function(){var i,r,n,t;for($("#PYN_Txt_Img").css({left:"0px",top:"0px",position:"absolute"}),i="PYN_Txt_Img",$("#"+i).empty(),r=document.getElementById(i),n=1;n<=S_POPUPYN.define.img_num;n++)t=document.createElement("div"),t.id="PYN_Img_"+n,r.appendChild(t),$("#PYN_Img_"+n).css({left:S_POPUPYN.define.img[n].x+"px",top:S_POPUPYN.define.img[n].y+"px",width:S_POPUPYN.define.img[n].w+"px",height:S_POPUPYN.define.img[n].h+"px",background:"url("+S_POPUPYN.define.img[n].filename+") no-repeat 0 0","background-position":"0px 0px",position:"absolute"}),S_POPUPYN.define.img[n].scale!=null&&util.scale("PYN_Img_"+n,S_POPUPYN.define.img[n].scale);for(n=1;n<=S_POPUPYN.define.text_num;n++)t=document.createElement("div"),t.id="PYN_Txt_"+n,r.appendChild(t),document.getElementById("PYN_Txt_"+n).innerHTML=S_POPUPYN.define.text[n].title,$("#PYN_Txt_"+n).css({left:S_POPUPYN.define.text[n].x+"px",top:S_POPUPYN.define.text[n].y+"px",width:S_POPUPYN.define.text[n].w+"px",height:S_POPUPYN.define.text[n].h+"px","line-height":S_POPUPYN.define.text[n].lineheight+"px","font-size":S_POPUPYN.define.text[n].fontsize+"px",color:S_POPUPYN.define.text[n].color,"text-align":S_POPUPYN.define.text[n].align,"text-shadow":S_POPUPYN.define.text[n].text_shadow,position:"absolute"})};S_POPUPYN.draw_focus=function(){$("#PYN_btn1_focus").css({display:"none"});$("#PYN_btn2_focus").css({display:"none"});$("#PYN_btn"+this.focus+"_focus").css({display:"block"})};S_POPUPYN.draw_focus_monthly=function(){glo.blink.value=1;S_POPUPYN.focus==1?utilDrawImage_no_wh_pos("PYN_btn_focus","./image/common/co_bt_focus.png",227,321):utilDrawImage_no_wh_pos("PYN_btn_focus","./image/common/co_bt_focus.png",407,321);$("#PYN_btn_focus").css({display:"block"})};S_POPUPYN.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;switch(S_POPUPYN.focus){case 1:utilScale_xy_center("PYN_btn1",glo.KeyScale,glo.KeyScale);break;case 2:utilScale_xy_center("PYN_btn2",glo.KeyScale,glo.KeyScale)}setTimeout(function(){utilScale_xy_center("PYN_btn1",1,1);utilScale_xy_center("PYN_btn2",1,1);setTimeout(function(){glo.enable_key=n;S_POPUPYN.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_POPUPYN.menu_run_run=function(){switch(glo.scene.before){case glo.S.MAINMENU:switch(S_POPUPYN.focus){case 2:S_POPUPYN.back();break;case 1:switch(glo.platform){case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:window.close();break;case glo.PLATFORM.KT:$.ajax({url:"http://appsbusidol.cafe24.com/kt/get_location_url.php",type:"POST",data:{},timeout:5e3,success:function(n){window.location=n},error:function(){var n="오류발생<br>발생위치:S_POPUPYN.menu_run_run()<br>ID:"+gEntrix.uniq_id+"<br>OccurTime:"+getDate2()+" "+getTime2()+"<br>ErrorMsg: get_location_url.php부르는것 실패함.<br>ErrorDetail :<br>";util.log(n);PHP.put_error_log(n)}});break;case glo.PLATFORM.SKB:case glo.PLATFORM.ATV:AndroidBridge.finish();break;case glo.PLATFORM.AZE:util.log("#### AZE향 종료 어떻게 하지");break;case glo.PLATFORM.AMO:case glo.PLATFORM.BAL:AndroidBridge.finish();break;case glo.PLATFORM.DLIVE:case glo.PLATFORM.HCN:util_CNM_exit()}}break;case glo.S.GAME:switch(S_POPUPYN.focus){case 2:S_POPUPYN.back();S_GAME.resume();break;case 1:S_POPUPYN.end();$("#S_POPUPYN_div").css({display:"none"});glo.scene.cur=glo.S.GAME;S_GAME.end();ChangeScene.start(glo.scene.cur,glo.S.MAINMENU,S_MAINMENU,ChangeScene.TYPE_NORMAL);SOUND.play_bgm(SOUND.BGM.BGM0);SOUND.stop_effect(SOUND.cur_effect_index)}}};S_POPUPYN.end=function(){};S_POPUPYN.on_mouse_move=function(){};S_POPUPYN.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_POPUPYN.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PYN_btn1":Main.mouse_pressed("PYN_btn1");break;case"PYN_btn2":Main.mouse_pressed("PYN_btn2")}};S_POPUPYN.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PYN_btn1":case"PYN_btn2":S_POPUPYN.menu_run()}};S_POPUPYN.on_mouse_over=function(n){switch(n.target.parentElement.id){case"PYN_btn1":S_POPUPYN.focus=1;S_POPUPYN.draw_focus();break;case"PYN_btn2":S_POPUPYN.focus=2;S_POPUPYN.draw_focus()}} 
var S_PAY_PASSYN={focus:1};S_PAY_PASSYN.init=function(){if(util.log("S_PAY_PASSYN.init()"),glo.scene.cur==glo.S.PAY_PASSYN){util.log("Error in S_PAY_PASSYN.init()!: 아마도 연속키에 의한 PAY_PASSYN이 따블 호출때문임. 근본 해결책을 찾아야 함. 우선 예외처리");return}glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.PAY_PASSYN;S_PAY_PASSYN.maketag();S_PAY_PASSYN.make_screen();S_PAY_PASSYN.draw_focus();setTimeout(function(){glo.scene.cur==glo.S.PAY_PASSYN&&(glo.enable_key=1)},500)};S_PAY_PASSYN.pause=function(){util.log("S_PAY_PASSYN.pause()!!")};S_PAY_PASSYN.resume=function(){util.log("S_PAY_PASSYN.resume()!!");util.blink_focus_start(glo.scene.cur)};S_PAY_PASSYN.preload=function(){ChangeScene.image_preload([])};S_PAY_PASSYN.maketag=function(){var n=document.getElementById("S_PAY_PASSYN_div"),t=document.getElementById("PAYN_bg");if(t){util.log("Already ready.");return}n.innerHTML='<div id="PAYN_bg"> <\/div><div id="PAYN_board">\t<img id="PAYN_board_bg">\t<div id="PAYN_board_title"><\/div>\t<div id="PAYN_board_content"><\/div><\/div>\t<div id="PAYN_btn1" class="button">\t\t<img id="PAYN_btn1_bg">\t\t<div id="PAYN_btn1_text"><\/div>\t\t<img id="PAYN_btn1_focus" class="focus">\t<\/div>\t<div id="PAYN_btn2" class="button">\t\t<img id="PAYN_btn2_bg">\t\t<div id="PAYN_btn2_text"><\/div>\t\t<img id="PAYN_btn2_focus" class="focus">\t<\/div>'};S_PAY_PASSYN.key_down=function(n){var t=n==null?event.keyCode:n;switch(t){case KeyDefine.left:S_PAY_PASSYN.focus>=2&&(S_PAY_PASSYN.focus=1,S_PAY_PASSYN.draw_focus());break;case KeyDefine.right:S_PAY_PASSYN.focus<=1&&(S_PAY_PASSYN.focus=2,S_PAY_PASSYN.draw_focus());break;case KeyDefine.enter:S_PAY_PASSYN.menu_run();break;case KeyDefine.esc:case KeyDefine.back:S_PAY_PASSYN.back()}};S_PAY_PASSYN.back=function(){S_PAY_PASSYN.end();$("#S_PAY_PASSYN_div").css({display:"none"});util.log("S_PAY_PASSYN.back ():"+glo.scene.before);switch(glo.scene.before){case glo.S.PVP_RANKING:glo.scene.cur=glo.S.PVP_RANKING;S_PVP_RANKING.draw_focus();break;case glo.S.MAINMENU:default:$("#MM_menu"+S_MAINMENU.focus+"_focus").css({display:"block"});glo.scene.cur=glo.S.MAINMENU}};S_PAY_PASSYN.make_screen=function(){$("#PAYN_bg").css({left:"0px",top:"0px",width:"1920px",height:"1080px",background:"black",opacity:"0.8",position:"absolute"});$("#PAYN_board").css({left:"431px",top:"263px",width:"296px",height:"93px",position:"absolute"});utilDrawImage_no_wh_pos("PAYN_board_bg","./image/30day_pass/bm_bg.png",0,0);util.draw_text_html(TXT.pay_guide,"PAYN_board_title",276,4,507,79,79,50,"center","#ffffff");util.draw_textshadow("PAYN_board_title","#4e0002",2);util.draw_text_html(TXT.pay_guide_content,"PAYN_board_content",20,129,1019,263,65,38,"center","#92210f");$("#PAYN_btn1").css({left:"685px",top:"725px",position:"absolute"});util.draw_image_no_wh_pos("PAYN_btn1_bg","./image/game/popup_joinnum/p_joinnum_startbt.png",0,0);util.draw_text_html(TXT.buy,"PAYN_btn1_text",0,0,264,91,91,36,"center","#ffffff");util.draw_textshadow("PAYN_btn1_text","#7f0900",2);util.draw_image_no_wh_pos("PAYN_btn1_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27);$("#PAYN_btn1_focus").css({display:"none"});$("#PAYN_btn2").css({left:"971px",top:"725px",position:"absolute"});util.draw_image_no_wh_pos("PAYN_btn2_bg","./image/game/popup_joinnum/p_joinnum_exitbt.png",0,0);util.draw_text_html(TXT.cancel,"PAYN_btn2_text",0,0,264,91,91,36,"center","#ffffff");util.draw_textshadow("PAYN_btn2_text","#7f0900",2);util.draw_image_no_wh_pos("PAYN_btn2_focus","./image/game/popup_joinnum/p_joinnum_startbt_f.png",-27,-27);$("#PAYN_btn2_focus").css({display:"none"})};S_PAY_PASSYN.draw_focus=function(){$("#PAYN_btn1_focus").css({display:"none"});$("#PAYN_btn2_focus").css({display:"none"});$("#PAYN_btn"+S_PAY_PASSYN.focus+"_focus").css({display:"block"})};S_PAY_PASSYN.menu_run=function(){var n=glo.enable_key;glo.enable_key=0;switch(S_PAY_PASSYN.focus){case 1:utilScale_xy_center("PAYN_btn1",glo.KeyScale,glo.KeyScale);break;case 2:utilScale_xy_center("PAYN_btn2",glo.KeyScale,glo.KeyScale)}setTimeout(function(){utilScale_xy_center("PAYN_btn1",1,1);utilScale_xy_center("PAYN_btn2",1,1);setTimeout(function(){glo.enable_key=n;S_PAY_PASSYN.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_PAY_PASSYN.menu_run_run=function(){switch(S_PAY_PASSYN.focus){case 1:S_PAY_PASSYN.back();ChangeScene.start(glo.scene.cur,glo.S.INPUT_PAY,S_INPUT_PAY,ChangeScene.TYPE_POPUP);break;case 2:S_PAY_PASSYN.back()}};S_PAY_PASSYN.end=function(){};S_PAY_PASSYN.on_mouse_move=function(){};S_PAY_PASSYN.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_PAY_PASSYN.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PAYN_btn1":Main.mouse_pressed("PAYN_btn1");break;case"PAYN_btn2":Main.mouse_pressed("PAYN_btn2")}};S_PAY_PASSYN.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);switch(n.target.parentElement.id){case"PAYN_btn1":case"PAYN_btn2":S_PAY_PASSYN.menu_run()}};S_PAY_PASSYN.on_mouse_over=function(n){switch(n.target.parentElement.id){case"PAYN_btn1":S_PAY_PASSYN.focus=1;S_PAY_PASSYN.draw_focus();break;case"PAYN_btn2":S_PAY_PASSYN.focus=2;S_PAY_PASSYN.draw_focus()}} 
var S_INPUT_PAY={payment_code:"",connection_qr:"",connection_url:"",result:"",result_flag:0,result_timer:null,result_count:0,external_id:"",backup_before_scene:null};S_INPUT_PAY.preload=function(){ChangeScene.image_preload([])};S_INPUT_PAY.init=function(){var t,i,n;S_INPUT_PAY.result_flag=0;S_INPUT_PAY.result_count=0;clearInterval(S_INPUT_PAY.result_timer);S_INPUT_PAY.result_timer=null;t=document.getElementById("div_body");i=document.getElementById("S_INPUT_PAY_div");i==null&&(n=document.createElement("div"),n.id="S_INPUT_PAY_div",t.appendChild(n));$("#S_INPUT_PAY_div").css({left:"0px",top:"0px",width:"1920px",height:"1080px",position:"absolute"});util.log("S_INPUT_PAY.init()");S_INPUT_PAY.make_tag();S_INPUT_PAY.backup_before_scene=glo.scene.before;glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.INPUT_PAY;glo.enable_key=1;PHP.get_Xsolla(3,"USD",0,3201)};S_INPUT_PAY.pause=function(){util.log("S_INPUT_PAY.pause()!!")};S_INPUT_PAY.resume=function(){util.log("S_INPUT_PAY.resume()!!")};S_INPUT_PAY.make_tag=function(){var n=document.getElementById("S_INPUT_PAY_div");$("#S_INPUT_PAY_div").empty();n.innerHTML='<div id="INP_bg"><\/div><div id="INP_item_pay"><\/div><div id="INP_item_pay_ruby"><\/div><div id="INP_board">\t<div id="INP_code"><\/div>\t<div id="INP_text"><\/div>\t<div id="INP_comment"><\/div>\t<div id="INP_qr_div"><\/div><\/div> '};S_INPUT_PAY.key_down=function(n){var t=n==null?event.keyCode:n;util.log("Key pressed: "+t+" in S_INPUT_PAY.key_Down()");switch(t){case KeyDefine.esc:case KeyDefine.back:util.notice(TXT.cancel_or_fail,3);S_INPUT_PAY.back()}};S_INPUT_PAY.back=function(){S_INPUT_PAY.result_flag=0;S_INPUT_PAY.result_count=0;clearInterval(S_INPUT_PAY.result_timer);S_INPUT_PAY.result_timer=null;$("#S_INPUT_PAY_div").css({display:"none"});S_INPUT_PAY.end();switch(glo.scene.before){case glo.S.PVP_RANKING:glo.scene.cur=glo.S.PVP_RANKING;S_PVP_RANKING.draw_focus();break;case glo.S.MAINMENU:default:$("#MM_menu"+S_MAINMENU.focus+"_focus").css({display:"block"});glo.scene.cur=glo.S.MAINMENU}};S_INPUT_PAY.make_screen=function(){var t,i,u,r,n;$("#INP_bg").css({display:"block",left:"0px",top:"0px",width:"1920px",height:"1080px",opacity:"1.0",background:"black",position:"absolute"});$("#INP_board").css({display:"block",left:"640px",top:"360px",width:"640px",height:"240px",opacity:"1.0",overflow:"hidden",background:"white",position:"absolute"});t="50% 0%";i="scale(2,2)";$("#INP_board").css({transform:i,"-webkit-transform":i,"transform-origin":t,"-webkit-transform-origin":t});$("#INP_item_pay").css({display:"block",left:"640px",top:"240px",width:"640px",height:"60px","line-height":"60px","font-size":"25px","text-align":"center",color:"white",position:"absolute"});$("#INP_item_pay_ruby").css({display:"block",left:"640px",top:"300px",width:"640px",height:"60px","line-height":"60px","font-size":"25px","text-align":"center",color:"white",position:"absolute"});document.getElementById("INP_item_pay").innerHTML=TXT.buy_price+" : $3";document.getElementById("INP_item_pay_ruby").innerHTML=TXT.goods+" : "+TXT.pass_30day_qr;$("#INP_code").css({display:"block",left:"0px",top:"0px",width:"640px",height:"120px",opacity:"1.0","line-height":"120px","font-size":"80px","text-align":"center",position:"absolute"}).text(S_INPUT_PAY.payment_code);$("#INP_text").css({display:"block",left:"140px",top:"121px",width:"500px",height:"60px",opacity:"1.0","line-height":"30px","font-size":"18px","text-align":"center",position:"absolute"});document.getElementById("INP_text").innerHTML=TXT.Xsolla_url;$("#INP_comment").css({display:"block",left:"140px",top:"171px",width:"500px",height:"60px",opacity:"1.0","line-height":"60px","font-size":"16px","text-align":"center",position:"absolute"}).text(S_INPUT_PAY.connection_url);$("#INP_qr_div").css({display:"block",left:"0px",top:"101px",width:"150px",height:"150px",position:"absolute"});u=document.getElementById("INP_qr_div");r=document.getElementById("INP_qr");r==null?(n=document.createElement("iframe"),n.id="INP_qr",n.src="http://busiedu.cafe24.com/payment/QRCode.php?payment_code="+S_INPUT_PAY.payment_code,u.appendChild(n)):r.src="http://busiedu.cafe24.com/payment/QRCode.php?payment_code="+S_INPUT_PAY.payment_code;S_INPUT_PAY.result_check()};S_INPUT_PAY.result_check=function(){var n=5e3;if(S_INPUT_PAY.result_flag==0?(S_INPUT_PAY.result_count++,PHP.get_Xsolla_result_to_code(),S_INPUT_PAY.result_timer!=null&&(clearInterval(S_INPUT_PAY.result_timer),S_INPUT_PAY.result_timer=null),S_INPUT_PAY.result_timer=setTimeout(S_INPUT_PAY.result_check,n)):S_INPUT_PAY.result=="payment_complete"?(clearInterval(S_INPUT_PAY.result_timer),S_INPUT_PAY.result_timer=null,PHP.get_30day_pass(function(){S_MAINMENU.make_screen_30day();glo.pay_30day_pass_end_timestamp>0&&util.notice(TXT.payment_success,2);S_INPUT_PAY.back()})):(S_INPUT_PAY.result_flag=0,S_INPUT_PAY.result_count++,PHP.get_Xsolla_result_to_code(),S_INPUT_PAY.result_timer!=null&&(clearInterval(S_INPUT_PAY.result_timer),S_INPUT_PAY.result_timer=null),S_INPUT_PAY.result_timer=setTimeout(S_INPUT_PAY.result_check,n)),S_INPUT_PAY.result_count>=60){util.notice(TXT.Xsolla_timeover,3);S_INPUT_PAY.back();return}};S_INPUT_PAY.drawFocus=function(){};S_INPUT_PAY.menuRun=function(){};S_INPUT_PAY.menuRun_Run=function(){};S_INPUT_PAY.end=function(){};S_INPUT_PAY.on_mouse_move=function(){};S_INPUT_PAY.on_mouse_out=function(){};S_INPUT_PAY.on_mouse_down=function(){};S_INPUT_PAY.on_mouse_up=function(){};S_INPUT_PAY.on_mouse_over=function(){} 
var S_ERROR_POPUP={focus:1,define:{},type:0,TYPE:{NETWORK_ERROR:1,BLACK_LIST:2,PROGRAM_ERROR:3,LIMITED_SETTOP:4,ARGUMENT_ERROR:5},comment:"",err_stack:"",backup_before_scene:null,text_shadow:"#1a1a1a -2px -4px 4px,#1a1a1a 0px -4px 4px,#1a1a1a 4px -4px 4px,#1a1a1a -4px 0px 4px,#1a1a1a 4px 0px 4px,#1a1a1a -4px 4px 4px,#1a1a1a 0px 4px 4px,#1a1a1a 4px 4px 4px"};S_ERROR_POPUP.start=function(n,t){var i,r;S_ERROR_POPUP.type=n;S_ERROR_POPUP.comment=t;i="["+util.get_cur_date_time()+"]";switch(n){case S_ERROR_POPUP.TYPE.NETWORK_ERROR:PHP.put_error_log(i+"종료팝업발생(네트워크오류로) ["+t);break;case S_ERROR_POPUP.TYPE.BLACK_LIST:break;case S_ERROR_POPUP.TYPE.PROGRAM_ERROR:r=new Error;S_ERROR_POPUP.err_stack=r.stack;break;case S_ERROR_POPUP.TYPE.LIMITED_SETTOP:PHP.put_error_log(i+"종료팝업발생(LIMITED_SETTOP) ["+t);break;default:S_ERROR_POPUP.type=S_ERROR_POPUP.TYPE.ARGUMENT_ERROR}if(glo.scene.cur==glo.S.ERROR_POPUP){util.log("S_ERROR_POPUP 나왔는데 또 나오라고 하는 거는 심한거 아이가?");return}util.log("cur_scene="+glo.scene.cur+"   type :"+S_ERROR_POPUP.type);S_ERROR_POPUP.backup_before_scene=glo.scene.before;glo.scene.cur&&eval(glo.scene.cur).pause();$("#S_ERROR_POPUP_div").css({display:"block"});S_ERROR_POPUP.init()};S_ERROR_POPUP.init=function(){$(".focus").css({display:"none"});S_ERROR_POPUP.make_tag();glo.enable_key=0;util.log("S_ERROR_POPUP.init()");glo.scene.before=glo.scene.cur;glo.scene.cur=glo.S.ERROR_POPUP;S_ERROR_POPUP.define();S_ERROR_POPUP.make_screen();util.blink_focus_start(glo.scene.cur);setTimeout(function(){glo.enable_key=1},300)};S_ERROR_POPUP.pause=function(){util.log("S_ERROR_POPUP.pause()!!")};S_ERROR_POPUP.resume=function(){util.log("S_ERROR_POPUP.resume()!!")};S_ERROR_POPUP.make_tag=function(){var n=document.getElementById("S_ERROR_POPUP_div"),t=document.getElementById("EPU_bg");if(t){util.log("Already ready.");return}n.innerHTML='\t<div id="EPU_bg"> <\/div>\t<div id="EPU_popup">\t\t<img id="Img_EPU_board">\t\t<div id="EPU_Txt_Img"><\/div>\t\t<div id="EPU_btn1"\t\tclass="button"> <\/div>\t\t<div id="EPU_btn2"\t\tclass="button"> <\/div>\t\t<img id="EPU_btn_focus"\tclass="button focus">\t<\/div>\t<div id="EPU_err_stack"><\/div>'};S_ERROR_POPUP.define=function(){var i="["+util.get_cur_date_time()+"]",r,t,n;switch(S_ERROR_POPUP.type){case S_ERROR_POPUP.TYPE.NETWORK_ERROR:if(S_ERROR_POPUP.define.text_num=2,S_ERROR_POPUP.define.text=new Array(S_ERROR_POPUP.define.text_num+1),t="NETWORK  ERROR",n="앱 종료 후 다시 시도 바랍니다."+i,S_ERROR_POPUP.comment!=null&&S_ERROR_POPUP.comment!=""&&(n=n+"<br>("+S_ERROR_POPUP.comment+")"),glo.AUTOTEST==0&&glo.app_release=="RELEASE"&&(n=USER.lang==LANG.KOREA?"지금은 서비스가 원활하지 않습니다.<br>잠시 후 다시 이용해 주시기 바랍니다.":"Your network connection is being delayed.<br>Please try again after a while."),S_ERROR_POPUP.comment.includes("RUN_COUNT error")){t="중복 로그인";n="중복 로그인이 확인되어 종료합니다.";USER.lang!=LANG.KOREA&&(t="Duplicate login",n="Duplicate logins are detected and shut down.");r={data:"Duplicated_id,ID중복"};WSS.msg_decoding_ERROR(r);return}S_ERROR_POPUP.define.text[1]={title:t,x:0,y:10,w:550,h:70,fontsize:30,lineheight:70,color:"#ffffff",align:"center",text_shadow:S_ERROR_POPUP.text_shadow};S_ERROR_POPUP.define.text[2]={title:n,x:15,y:117,w:520,h:170,fontsize:25,lineheight:50,color:"#1a1a1a",align:"center",text_shadow:"none"};S_ERROR_POPUP.focus=1;break;case S_ERROR_POPUP.TYPE.BLACK_LIST:S_ERROR_POPUP.define.text_num=2;S_ERROR_POPUP.define.text=new Array(S_ERROR_POPUP.define.text_num+1);t="CAUTION !!";n=i+S_ERROR_POPUP.comment;S_ERROR_POPUP.define.text[1]={title:t,x:0,y:10,w:550,h:70,fontsize:30,lineheight:70,color:"#ffffff",align:"center",text_shadow:S_ERROR_POPUP.text_shadow};S_ERROR_POPUP.define.text[2]={title:n,x:15,y:97,w:520,h:170,fontsize:25,lineheight:50,color:"#1a1a1a",align:"center",text_shadow:"none"};S_ERROR_POPUP.focus=1;break;case S_ERROR_POPUP.TYPE.PROGRAM_ERROR:S_ERROR_POPUP.define.text_num=2;S_ERROR_POPUP.define.text=new Array(S_ERROR_POPUP.define.text_num+1);t="DATA ERROR";n=i+S_ERROR_POPUP.comment;S_ERROR_POPUP.define.text[1]={title:t,x:0,y:10,w:550,h:70,fontsize:30,lineheight:70,color:"#ffffff",align:"center",text_shadow:S_ERROR_POPUP.text_shadow};S_ERROR_POPUP.define.text[2]={title:n,x:15,y:97,w:520,h:170,fontsize:25,lineheight:50,color:"#1a1a1a",align:"center",text_shadow:"none"};S_ERROR_POPUP.focus=1;break;default:console.error("정의되지 않음:S_ERROR_POPUP.define()")}};S_ERROR_POPUP.key_down=function(n){var t=n==null?event.keyCode:n;if(util.log("Key pressed: "+t+" in S_ERROR_POPUP.keyDown() :"+KeyDefine.left),S_ERROR_POPUP.type==1||S_ERROR_POPUP.type==2)switch(t){case KeyDefine.enter:S_ERROR_POPUP.menu_run()}else switch(t){case KeyDefine.enter:S_ERROR_POPUP.menu_run();break;case KeyDefine.esc:case KeyDefine.back:S_ERROR_POPUP.back()}};S_ERROR_POPUP.back=function(){$("#SafeZone").css({display:"block"});S_ERROR_POPUP.end();$("#S_ERROR_POPUP_div").css({display:"none"});util.log("S_ERROR_POPUP.back ():"+glo.scene.before);glo.scene.cur=glo.scene.before;glo.scene.before=S_ERROR_POPUP.backup_before_scene;eval(glo.scene.cur).resume()};S_ERROR_POPUP.make_screen=function(){$("#EPU_bg").css({left:"0px",top:"0px",width:"1920px",height:"1080px",background:"black",opacity:"0.7",position:"absolute"});$("#EPU_popup").css({left:"676px",top:"352px",width:"568px",height:"376px","border-radius":"10px",background:"white",position:"absolute"});S_ERROR_POPUP.type==S_ERROR_POPUP.TYPE.PROGRAM_ERROR?glo.app_release=="TEST"&&($("#EPU_popup").css({left:"20px"}),$("#EPU_err_stack").css({display:"block",left:"600px",top:"50px",width:"680px",height:"600px",background:"yellow","line-height":"20px","font-size":"12px","text-align":"left",color:"black",position:"absolute"}).text(S_ERROR_POPUP.err_stack)):$("#EPU_err_stack").css({display:"none"});$("#EPU_btn1").css({left:"198px",top:"295px",width:"154px",height:"72px",background:"gray","border-radius":"5px","background-position":"0px 0px","line-height":"76px","font-size":"28px","text-align":"center",color:"#ffffff",position:"absolute"}).text("EXIT");$("#EPU_btn1").css({"text-shadow":"#1a1a1a -2px -2px 2px,#1a1a1a 0px -2px 2px,#1a1a1a 2px -2px 2px,#1a1a1a -2px 0px 2px,#1a1a1a 2px 0px 2px,#1a1a1a -2px 2px 2px,#1a1a1a 0px 2px 2px,#1a1a1a 2px 2px 2px"});S_ERROR_POPUP.make_screen_center();S_ERROR_POPUP.draw_focus()};S_ERROR_POPUP.make_screen_center=function(){var t,r,n,i;for($("#EPU_Txt_Img").css({left:"0px",top:"0px",position:"absolute"}),t="EPU_Txt_Img",$("#"+t).empty(),r=document.getElementById(t),n=1;n<=S_ERROR_POPUP.define.text_num;n++)i=document.createElement("div"),i.id="EPU_Txt_"+n,r.appendChild(i),document.getElementById("EPU_Txt_"+n).innerHTML=S_ERROR_POPUP.define.text[n].title,$("#EPU_Txt_"+n).css({left:S_ERROR_POPUP.define.text[n].x+"px",top:S_ERROR_POPUP.define.text[n].y+"px",width:S_ERROR_POPUP.define.text[n].w+"px",height:S_ERROR_POPUP.define.text[n].h+"px","line-height":S_ERROR_POPUP.define.text[n].lineheight+"px","font-size":S_ERROR_POPUP.define.text[n].fontsize+"px",color:S_ERROR_POPUP.define.text[n].color,"text-align":S_ERROR_POPUP.define.text[n].align,"text-shadow":S_ERROR_POPUP.define.text[n].text_shadow,position:"absolute"})};S_ERROR_POPUP.draw_focus=function(){glo.blink.value=1};S_ERROR_POPUP.menu_run=function(){SOUND.play(SOUND.BUTTON_CLICK);var n=glo.enable_key;glo.enable_key=0;utilScale_xy_center("EPU_btn1",glo.KeyScale,glo.KeyScale);utilScale_xy_center("EPU_btn_focus",glo.KeyScale,glo.KeyScale);setTimeout(function(){utilScale_xy_center("EPU_btn1",1,1);utilScale_xy_center("EPU_btn_focus",1,1);setTimeout(function(){glo.enable_key=n;S_ERROR_POPUP.menu_run_run()},glo.KeyUpTime)},glo.KeyPressTime)};S_ERROR_POPUP.menu_run_run=function(){switch(glo.platform){case glo.PLATFORM.DLIVE:case glo.PLATFORM.HCN:util_CNM_exit();break;case glo.PLATFORM.KT:util_kt.destroyApplication();break;case glo.PLATFORM.SKB:case glo.PLATFORM.AMO:case glo.PLATFORM.BAL:case glo.PLATFORM.ATV:AndroidBridge.finish();break;case glo.PLATFORM.SS:util_tizen.exitApplication();break;case glo.PLATFORM.AZE:util.log("-----AZE는 종료처리 없다.????????????????");break;case glo.PLATFORM.LG:case glo.PLATFORM.LG_SMARTTV:case glo.PLATFORM.LG_WEEKEND:case glo.PLATFORM.LG_STANDBYME:window.close();break;case glo.PLATFORM.ORANGE:case glo.PLATFORM.PCROOM:window.close()}};S_ERROR_POPUP.end=function(){S_ERROR_POPUP.define.text=null};S_ERROR_POPUP.on_mouse_move=function(){};S_ERROR_POPUP.on_mouse_out=function(){utilScale_xy_center_class("button",1,1)};S_ERROR_POPUP.on_mouse_down=function(n){utilScale_xy_center_class("button",1,1);var t=document.getElementById(n.target.id)&&document.getElementById(n.target.id).className;t!=null&&(t.includes("button")||t.includes("focus"))&&Main.mouse_pressed("EPU_btn"+S_ERROR_POPUP.focus)};S_ERROR_POPUP.on_mouse_up=function(n){utilScale_xy_center_class("button",1,1);var t=document.getElementById(n.target.id)&&document.getElementById(n.target.id).className;t!=null&&(t.includes("button")||t.includes("focus"))&&S_ERROR_POPUP.menu_run()};S_ERROR_POPUP.on_mouse_over=function(n){switch(n.target.id){case"EPU_btn1":S_ERROR_POPUP.focus=1;S_ERROR_POPUP.draw_focus();break;case"EPU_btn2":S_ERROR_POPUP.focus=2;S_ERROR_POPUP.draw_focus()}} 
